/*!
 * jQuery JavaScript Library v1.11.0
 * http://jquery.com/
 *
 * Includes Sizzle.js
 * http://sizzlejs.com/
 *
 * Copyright 2005, 2014 jQuery Foundation, Inc. and other contributors
 * Released under the MIT license
 * http://jquery.org/license
 *
 * Date: 2014-01-23T21:02Z
 */
(function(e,t){typeof module=="object"&&typeof module.exports=="object"?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)})(typeof window!="undefined"?window:this,function(e,t){function y(e){var t=e.length,n=p.type(e);return n==="function"||p.isWindow(e)?!1:e.nodeType===1&&t?!0:n==="array"||t===0||typeof t=="number"&&t>0&&t-1 in e}function x(e,t,n){if(p.isFunction(t))return p.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return p.grep(e,function(e){return e===t!==n});if(typeof t=="string"){if(S.test(t))return p.filter(t,e,n);t=p.filter(t,e)}return p.grep(e,function(e){return p.inArray(e,t)>=0!==n})}function O(e,t){do e=e[t];while(e&&e.nodeType!==1);return e}function D(e){var t=_[e]={};return p.each(e.match(M)||[],function(e,n){t[n]=!0}),t}function H(){N.addEventListener?(N.removeEventListener("DOMContentLoaded",B,!1),e.removeEventListener("load",B,!1)):(N.detachEvent("onreadystatechange",B),e.detachEvent("onload",B))}function B(){if(N.addEventListener||event.type==="load"||N.readyState==="complete")H(),p.ready()}function R(e,t,n){if(n===undefined&&e.nodeType===1){var r="data-"+t.replace(q,"-$1").toLowerCase();n=e.getAttribute(r);if(typeof n=="string"){try{n=n==="true"?!0:n==="false"?!1:n==="null"?null:+n+""===n?+n:I.test(n)?p.parseJSON(n):n}catch(i){}p.data(e,t,n)}else n=undefined}return n}function U(e){var t;for(t in e){if(t==="data"&&p.isEmptyObject(e[t]))continue;if(t!=="toJSON")return!1}return!0}function z(e,t,r,i){if(!p.acceptData(e))return;var s,o,u=p.expando,a=e.nodeType,f=a?p.cache:e,l=a?e[u]:e[u]&&u;if((!l||!f[l]||!i&&!f[l].data)&&r===undefined&&typeof t=="string")return;l||(a?l=e[u]=n.pop()||p.guid++:l=u),f[l]||(f[l]=a?{}:{toJSON:p.noop});if(typeof t=="object"||typeof t=="function")i?f[l]=p.extend(f[l],t):f[l].data=p.extend(f[l].data,t);return o=f[l],i||(o.data||(o.data={}),o=o.data),r!==undefined&&(o[p.camelCase(t)]=r),typeof t=="string"?(s=o[t],s==null&&(s=o[p.camelCase(t)])):s=o,s}function W(e,t,n){if(!p.acceptData(e))return;var r,i,s=e.nodeType,o=s?p.cache:e,u=s?e[p.expando]:p.expando;if(!o[u])return;if(t){r=n?o[u]:o[u].data;if(r){p.isArray(t)?t=t.concat(p.map(t,p.camelCase)):t in r?t=[t]:(t=p.camelCase(t),t in r?t=[t]:t=t.split(" ")),i=t.length;while(i--)delete r[t[i]];if(n?!U(r):!p.isEmptyObject(r))return}}if(!n){delete o[u].data;if(!U(o[u]))return}s?p.cleanData([e],!0):c.deleteExpando||o!=o.window?delete o[u]:o[u]=null}function tt(){return!0}function nt(){return!1}function rt(){try{return N.activeElement}catch(e){}}function it(e){var t=st.split("|"),n=e.createDocumentFragment();if(n.createElement)while(t.length)n.createElement(t.pop());return n}function Et(e,t){var n,r,i=0,s=typeof e.getElementsByTagName!==j?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==j?e.querySelectorAll(t||"*"):undefined;if(!s)for(s=[],n=e.childNodes||e;(r=n[i])!=null;i++)!t||p.nodeName(r,t)?s.push(r):p.merge(s,Et(r,t));return t===undefined||t&&p.nodeName(e,t)?p.merge([e],s):s}function St(e){K.test(e.type)&&(e.defaultChecked=e.checked)}function xt(e,t){return p.nodeName(e,"table")&&p.nodeName(t.nodeType!==11?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function Tt(e){return e.type=(p.find.attr(e,"type")!==null)+"/"+e.type,e}function Nt(e){var t=mt.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function Ct(e,t){var n,r=0;for(;(n=e[r])!=null;r++)p._data(n,"globalEval",!t||p._data(t[r],"globalEval"))}function kt(e,t){if(t.nodeType!==1||!p.hasData(e))return;var n,r,i,s=p._data(e),o=p._data(t,s),u=s.events;if(u){delete o.handle,o.events={};for(n in u)for(r=0,i=u[n].length;r<i;r++)p.event.add(t,n,u[n][r])}o.data&&(o.data=p.extend({},o.data))}function Lt(e,t){var n,r,i;if(t.nodeType!==1)return;n=t.nodeName.toLowerCase();if(!c.noCloneEvent&&t[p.expando]){i=p._data(t);for(r in i.events)p.removeEvent(t,r,i.handle);t.removeAttribute(p.expando)}if(n==="script"&&t.text!==e.text)Tt(t).text=e.text,Nt(t);else if(n==="object")t.parentNode&&(t.outerHTML=e.outerHTML),c.html5Clone&&e.innerHTML&&!p.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML);else if(n==="input"&&K.test(e.type))t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value);else if(n==="option")t.defaultSelected=t.selected=e.defaultSelected;else if(n==="input"||n==="textarea")t.defaultValue=e.defaultValue}function Mt(t,n){var r=p(n.createElement(t)).appendTo(n.body),i=e.getDefaultComputedStyle?e.getDefaultComputedStyle(r[0]).display:p.css(r[0],"display");return r.detach(),i}function _t(e){var t=N,n=Ot[e];if(!n){n=Mt(e,t);if(n==="none"||!n)At=(At||p("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(At[0].contentWindow||At[0].contentDocument).document,t.write(),t.close(),n=Mt(e,t),At.detach();Ot[e]=n}return n}function Ft(e,t){return{get:function(){var n=e();if(n==null)return;if(n){delete this.get;return}return(this.get=t).apply(this,arguments)}}}function $t(e,t){if(t in e)return t;var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=Vt.length;while(i--){t=Vt[i]+n;if(t in e)return t}return r}function Jt(e,t){var n,r,i,s=[],o=0,u=e.length;for(;o<u;o++){r=e[o];if(!r.style)continue;s[o]=p._data(r,"olddisplay"),n=r.style.display,t?(!s[o]&&n==="none"&&(r.style.display=""),r.style.display===""&&$(r)&&(s[o]=p._data(r,"olddisplay",_t(r.nodeName)))):s[o]||(i=$(r),(n&&n!=="none"||!i)&&p._data(r,"olddisplay",i?n:p.css(r,"display")))}for(o=0;o<u;o++){r=e[o];if(!r.style)continue;if(!t||r.style.display==="none"||r.style.display==="")r.style.display=t?s[o]||"":"none"}return e}function Kt(e,t,n){var r=Ut.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function Qt(e,t,n,r,i){var s=n===(r?"border":"content")?4:t==="width"?1:0,o=0;for(;s<4;s+=2)n==="margin"&&(o+=p.css(e,n+V[s],!0,i)),r?(n==="content"&&(o-=p.css(e,"padding"+V[s],!0,i)),n!=="margin"&&(o-=p.css(e,"border"+V[s]+"Width",!0,i))):(o+=p.css(e,"padding"+V[s],!0,i),n!=="padding"&&(o+=p.css(e,"border"+V[s]+"Width",!0,i)));return o}function Gt(e,t,n){var r=!0,i=t==="width"?e.offsetWidth:e.offsetHeight,s=Ht(e),o=c.boxSizing()&&p.css(e,"boxSizing",!1,s)==="border-box";if(i<=0||i==null){i=Bt(e,t,s);if(i<0||i==null)i=e.style[t];if(Pt.test(i))return i;r=o&&(c.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+Qt(e,t,n||(o?"border":"content"),r,s)+"px"}function Yt(e,t,n,r,i){return new Yt.prototype.init(e,t,n,r,i)}function un(){return setTimeout(function(){Zt=undefined}),Zt=p.now()}function an(e,t){var n,r={height:e},i=0;t=t?1:0;for(;i<4;i+=2-t)n=V[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function fn(e,t,n){var r,i=(on[t]||[]).concat(on["*"]),s=0,o=i.length;for(;s<o;s++)if(r=i[s].call(n,t,e))return r}function ln(e,t,n){var r,i,s,o,u,a,f,l,h=this,d={},v=e.style,m=e.nodeType&&$(e),g=p._data(e,"fxshow");n.queue||(u=p._queueHooks(e,"fx"),u.unqueued==null&&(u.unqueued=0,a=u.empty.fire,u.empty.fire=function(){u.unqueued||a()}),u.unqueued++,h.always(function(){h.always(function(){u.unqueued--,p.queue(e,"fx").length||u.empty.fire()})})),e.nodeType===1&&("height"in t||"width"in t)&&(n.overflow=[v.overflow,v.overflowX,v.overflowY],f=p.css(e,"display"),l=_t(e.nodeName),f==="none"&&(f=l),f==="inline"&&p.css(e,"float")==="none"&&(!c.inlineBlockNeedsLayout||l==="inline"?v.display="inline-block":v.zoom=1)),n.overflow&&(v.overflow="hidden",c.shrinkWrapBlocks()||h.always(function(){v.overflow=n.overflow[0],v.overflowX=n.overflow[1],v.overflowY=n.overflow[2]}));for(r in t){i=t[r];if(tn.exec(i)){delete t[r],s=s||i==="toggle";if(i===(m?"hide":"show")){if(i!=="show"||!g||g[r]===undefined)continue;m=!0}d[r]=g&&g[r]||p.style(e,r)}}if(!p.isEmptyObject(d)){g?"hidden"in g&&(m=g.hidden):g=p._data(e,"fxshow",{}),s&&(g.hidden=!m),m?p(e).show():h.done(function(){p(e).hide()}),h.done(function(){var t;p._removeData(e,"fxshow");for(t in d)p.style(e,t,d[t])});for(r in d)o=fn(m?g[r]:0,r,h),r in g||(g[r]=o.start,m&&(o.end=o.start,o.start=r==="width"||r==="height"?1:0))}}function cn(e,t){var n,r,i,s,o;for(n in e){r=p.camelCase(n),i=t[r],s=e[n],p.isArray(s)&&(i=s[1],s=e[n]=s[0]),n!==r&&(e[r]=s,delete e[n]),o=p.cssHooks[r];if(o&&"expand"in o){s=o.expand(s),delete e[r];for(n in s)n in e||(e[n]=s[n],t[n]=i)}else t[r]=i}}function hn(e,t,n){var r,i,s=0,o=sn.length,u=p.Deferred().always(function(){delete a.elem}),a=function(){if(i)return!1;var t=Zt||un(),n=Math.max(0,f.startTime+f.duration-t),r=n/f.duration||0,s=1-r,o=0,a=f.tweens.length;for(;o<a;o++)f.tweens[o].run(s);return u.notifyWith(e,[f,s,n]),s<1&&a?n:(u.resolveWith(e,[f]),!1)},f=u.promise({elem:e,props:p.extend({},t),opts:p.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Zt||un(),duration:n.duration,tweens:[],createTween:function(t,n){var r=p.Tween(e,f.opts,t,n,f.opts.specialEasing[t]||f.opts.easing);return f.tweens.push(r),r},stop:function(t){var n=0,r=t?f.tweens.length:0;if(i)return this;i=!0;for(;n<r;n++)f.tweens[n].run(1);return t?u.resolveWith(e,[f,t]):u.rejectWith(e,[f,t]),this}}),l=f.props;cn(l,f.opts.specialEasing);for(;s<o;s++){r=sn[s].call(f,e,l,f.opts);if(r)return r}return p.map(l,fn,f),p.isFunction(f.opts.start)&&f.opts.start.call(e,f),p.fx.timer(p.extend(a,{elem:e,anim:f,queue:f.opts.queue})),f.progress(f.opts.progress).done(f.opts.done,f.opts.complete).fail(f.opts.fail).always(f.opts.always)}function In(e){return function(t,n){typeof t!="string"&&(n=t,t="*");var r,i=0,s=t.toLowerCase().match(M)||[];if(p.isFunction(n))while(r=s[i++])r.charAt(0)==="+"?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function qn(e,t,n,r){function o(u){var a;return i[u]=!0,p.each(e[u]||[],function(e,u){var f=u(t,n,r);if(typeof f=="string"&&!s&&!i[f])return t.dataTypes.unshift(f),o(f),!1;if(s)return!(a=f)}),a}var i={},s=e===Bn;return o(t.dataTypes[0])||!i["*"]&&o("*")}function Rn(e,t){var n,r,i=p.ajaxSettings.flatOptions||{};for(r in t)t[r]!==undefined&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&p.extend(!0,e,n),e}function Un(e,t,n){var r,i,s,o,u=e.contents,a=e.dataTypes;while(a[0]==="*")a.shift(),i===undefined&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(o in u)if(u[o]&&u[o].test(i)){a.unshift(o);break}if(a[0]in n)s=a[0];else{for(o in n){if(!a[0]||e.converters[o+" "+a[0]]){s=o;break}r||(r=o)}s=s||r}if(s)return s!==a[0]&&a.unshift(s),n[s]}function zn(e,t,n,r){var i,s,o,u,a,f={},l=e.dataTypes.slice();if(l[1])for(o in e.converters)f[o.toLowerCase()]=e.converters[o];s=l.shift();while(s){e.responseFields[s]&&(n[e.responseFields[s]]=t),!a&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),a=s,s=l.shift();if(s)if(s==="*")s=a;else if(a!=="*"&&a!==s){o=f[a+" "+s]||f["* "+s];if(!o)for(i in f){u=i.split(" ");if(u[1]===s){o=f[a+" "+u[0]]||f["* "+u[0]];if(o){o===!0?o=f[i]:f[i]!==!0&&(s=u[0],l.unshift(u[1]));break}}}if(o!==!0)if(o&&e["throws"])t=o(t);else try{t=o(t)}catch(c){return{state:"parsererror",error:o?c:"No conversion from "+a+" to "+s}}}}return{state:"success",data:t}}function Kn(e,t,n,r){var i;if(p.isArray(t))p.each(t,function(t,i){n||Xn.test(e)?r(e,i):Kn(e+"["+(typeof i=="object"?t:"")+"]",i,n,r)});else if(!n&&p.type(t)==="object")for(i in t)Kn(e+"["+i+"]",t[i],n,r);else r(e,t)}function Zn(){try{return new e.XMLHttpRequest}catch(t){}}function er(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(t){}}function sr(e){return p.isWindow(e)?e:e.nodeType===9?e.defaultView||e.parentWindow:!1}var n=[],r=n.slice,i=n.concat,s=n.push,o=n.indexOf,u={},a=u.toString,f=u.hasOwnProperty,l="".trim,c={},h="1.11.0",p=function(e,t){return new p.fn.init(e,t)},d=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,v=/^-ms-/,m=/-([\da-z])/gi,g=function(e,t){return t.toUpperCase()};p.fn=p.prototype={jquery:h,constructor:p,selector:"",length:0,toArray:function(){return r.call(this)},get:function(e){return e!=null?e<0?this[e+this.length]:this[e]:r.call(this)},pushStack:function(e){var t=p.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return p.each(this,e,t)},map:function(e){return this.pushStack(p.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(r.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(e<0?t:0);return this.pushStack(n>=0&&n<t?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:s,sort:n.sort,splice:n.splice},p.extend=p.fn.extend=function(){var e,t,n,r,i,s,o=arguments[0]||{},u=1,a=arguments.length,f=!1;typeof o=="boolean"&&(f=o,o=arguments[u]||{},u++),typeof o!="object"&&!p.isFunction(o)&&(o={}),u===a&&(o=this,u--);for(;u<a;u++)if((i=arguments[u])!=null)for(r in i){e=o[r],n=i[r];if(o===n)continue;f&&n&&(p.isPlainObject(n)||(t=p.isArray(n)))?(t?(t=!1,s=e&&p.isArray(e)?e:[]):s=e&&p.isPlainObject(e)?e:{},o[r]=p.extend(f,s,n)):n!==undefined&&(o[r]=n)}return o},p.extend({expando:"jQuery"+(h+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return p.type(e)==="function"},isArray:Array.isArray||function(e){return p.type(e)==="array"},isWindow:function(e){return e!=null&&e==e.window},isNumeric:function(e){return e-parseFloat(e)>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||p.type(e)!=="object"||e.nodeType||p.isWindow(e))return!1;try{if(e.constructor&&!f.call(e,"constructor")&&!f.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(n){return!1}if(c.ownLast)for(t in e)return f.call(e,t);for(t in e);return t===undefined||f.call(e,t)},type:function(e){return e==null?e+"":typeof e=="object"||typeof e=="function"?u[a.call(e)]||"object":typeof e},globalEval:function(t){t&&p.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(v,"ms-").replace(m,g)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,n){var r,i=0,s=e.length,o=y(e);if(n)if(o)for(;i<s;i++){r=t.apply(e[i],n);if(r===!1)break}else for(i in e){r=t.apply(e[i],n);if(r===!1)break}else if(o)for(;i<s;i++){r=t.call(e[i],i,e[i]);if(r===!1)break}else for(i in e){r=t.call(e[i],i,e[i]);if(r===!1)break}return e},trim:l&&!l.call("﻿ ")?function(e){return e==null?"":l.call(e)}:function(e){return e==null?"":(e+"").replace(d,"")},makeArray:function(e,t){var n=t||[];return e!=null&&(y(Object(e))?p.merge(n,typeof e=="string"?[e]:e):s.call(n,e)),n},inArray:function(e,t,n){var r;if(t){if(o)return o.call(t,e,n);r=t.length,n=n?n<0?Math.max(0,r+n):n:0;for(;n<r;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){var n=+t.length,r=0,i=e.length;while(r<n)e[i++]=t[r++];if(n!==n)while(t[r]!==undefined)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){var r,i=[],s=0,o=e.length,u=!n;for(;s<o;s++)r=!t(e[s],s),r!==u&&i.push(e[s]);return i},map:function(e,t,n){var r,s=0,o=e.length,u=y(e),a=[];if(u)for(;s<o;s++)r=t(e[s],s,n),r!=null&&a.push(r);else for(s in e)r=t(e[s],s,n),r!=null&&a.push(r);return i.apply([],a)},guid:1,proxy:function(e,t){var n,i,s;return typeof t=="string"&&(s=e[t],t=e,e=s),p.isFunction(e)?(n=r.call(arguments,2),i=function(){return e.apply(t||this,n.concat(r.call(arguments)))},i.guid=e.guid=e.guid||p.guid++,i):undefined},now:function(){return+(new Date)},support:c}),p.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){u["[object "+t+"]"]=t.toLowerCase()});var b=function(e){function rt(e,t,r,i){var s,o,u,a,f,h,v,m,w,E;(t?t.ownerDocument||t:b)!==c&&l(t),t=t||c,r=r||[];if(!e||typeof e!="string")return r;if((a=t.nodeType)!==1&&a!==9)return[];if(p&&!i){if(s=G.exec(e))if(u=s[1]){if(a===9){o=t.getElementById(u);if(!o||!o.parentNode)return r;if(o.id===u)return r.push(o),r}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(u))&&g(t,o)&&o.id===u)return r.push(o),r}else{if(s[2])return _.apply(r,t.getElementsByTagName(e)),r;if((u=s[3])&&n.getElementsByClassName&&t.getElementsByClassName)return _.apply(r,t.getElementsByClassName(u)),r}if(n.qsa&&(!d||!d.test(e))){m=v=y,w=t,E=a===9&&e;if(a===1&&t.nodeName.toLowerCase()!=="object"){h=dt(e),(v=t.getAttribute("id"))?m=v.replace(Z,"\\$&"):t.setAttribute("id",m),m="[id='"+m+"'] ",f=h.length;while(f--)h[f]=m+vt(h[f]);w=Y.test(e)&&ht(t.parentNode)||t,E=h.join(",")}if(E)try{return _.apply(r,w.querySelectorAll(E)),r}catch(S){}finally{v||t.removeAttribute("id")}}}return xt(e.replace(R,"$1"),t,r,i)}function it(){function t(n,i){return e.push(n+" ")>r.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function st(e){return e[y]=!0,e}function ot(e){var t=c.createElement("div");try{return!!e(t)}catch(n){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function ut(e,t){var n=e.split("|"),i=e.length;while(i--)r.attrHandle[n[i]]=t}function at(e,t){var n=t&&e,r=n&&e.nodeType===1&&t.nodeType===1&&(~t.sourceIndex||k)-(~e.sourceIndex||k);if(r)return r;if(n)while(n=n.nextSibling)if(n===t)return-1;return e?1:-1}function ft(e){return function(t){var n=t.nodeName.toLowerCase();return n==="input"&&t.type===e}}function lt(e){return function(t){var n=t.nodeName.toLowerCase();return(n==="input"||n==="button")&&t.type===e}}function ct(e){return st(function(t){return t=+t,st(function(n,r){var i,s=e([],n.length,t),o=s.length;while(o--)n[i=s[o]]&&(n[i]=!(r[i]=n[i]))})})}function ht(e){return e&&typeof e.getElementsByTagName!==C&&e}function pt(){}function dt(e,t){var n,i,s,o,u,a,f,l=x[e+" "];if(l)return t?0:l.slice(0);u=e,a=[],f=r.preFilter;while(u){if(!n||(i=U.exec(u)))i&&(u=u.slice(i[0].length)||u),a.push(s=[]);n=!1;if(i=z.exec(u))n=i.shift(),s.push({value:n,type:i[0].replace(R," ")}),u=u.slice(n.length);for(o in r.filter)(i=$[o].exec(u))&&(!f[o]||(i=f[o](i)))&&(n=i.shift(),s.push({value:n,type:o,matches:i}),u=u.slice(n.length));if(!n)break}return t?u.length:u?rt.error(e):x(e,a).slice(0)}function vt(e){var t=0,n=e.length,r="";for(;t<n;t++)r+=e[t].value;return r}function mt(e,t,n){var r=t.dir,i=n&&r==="parentNode",s=E++;return t.first?function(t,n,s){while(t=t[r])if(t.nodeType===1||i)return e(t,n,s)}:function(t,n,o){var u,a,f=[w,s];if(o){while(t=t[r])if(t.nodeType===1||i)if(e(t,n,o))return!0}else while(t=t[r])if(t.nodeType===1||i){a=t[y]||(t[y]={});if((u=a[r])&&u[0]===w&&u[1]===s)return f[2]=u[2];a[r]=f;if(f[2]=e(t,n,o))return!0}}}function gt(e){return e.length>1?function(t,n,r){var i=e.length;while(i--)if(!e[i](t,n,r))return!1;return!0}:e[0]}function yt(e,t,n,r,i){var s,o=[],u=0,a=e.length,f=t!=null;for(;u<a;u++)if(s=e[u])if(!n||n(s,r,i))o.push(s),f&&t.push(u);return o}function bt(e,t,n,r,i,s){return r&&!r[y]&&(r=bt(r)),i&&!i[y]&&(i=bt(i,s)),st(function(s,o,u,a){var f,l,c,h=[],p=[],d=o.length,v=s||St(t||"*",u.nodeType?[u]:u,[]),m=e&&(s||!t)?yt(v,h,e,u,a):v,g=n?i||(s?e:d||r)?[]:o:m;n&&n(m,g,u,a);if(r){f=yt(g,p),r(f,[],u,a),l=f.length;while(l--)if(c=f[l])g[p[l]]=!(m[p[l]]=c)}if(s){if(i||e){if(i){f=[],l=g.length;while(l--)(c=g[l])&&f.push(m[l]=c);i(null,g=[],f,a)}l=g.length;while(l--)(c=g[l])&&(f=i?P.call(s,c):h[l])>-1&&(s[f]=!(o[f]=c))}}else g=yt(g===o?g.splice(d,g.length):g),i?i(null,o,g,a):_.apply(o,g)})}function wt(e){var t,n,i,s=e.length,o=r.relative[e[0].type],a=o||r.relative[" "],f=o?1:0,l=mt(function(e){return e===t},a,!0),c=mt(function(e){return P.call(t,e)>-1},a,!0),h=[function(e,n,r){return!o&&(r||n!==u)||((t=n).nodeType?l(e,n,r):c(e,n,r))}];for(;f<s;f++)if(n=r.relative[e[f].type])h=[mt(gt(h),n)];else{n=r.filter[e[f].type].apply(null,e[f].matches);if(n[y]){i=++f;for(;i<s;i++)if(r.relative[e[i].type])break;return bt(f>1&&gt(h),f>1&&vt(e.slice(0,f-1).concat({value:e[f-2].type===" "?"*":""})).replace(R,"$1"),n,f<i&&wt(e.slice(f,i)),i<s&&wt(e=e.slice(i)),i<s&&vt(e))}h.push(n)}return gt(h)}function Et(e,t){var n=t.length>0,i=e.length>0,s=function(s,o,a,f,l){var h,p,d,v=0,m="0",g=s&&[],y=[],b=u,E=s||i&&r.find.TAG("*",l),S=w+=b==null?1:Math.random()||.1,x=E.length;l&&(u=o!==c&&o);for(;m!==x&&(h=E[m])!=null;m++){if(i&&h){p=0;while(d=e[p++])if(d(h,o,a)){f.push(h);break}l&&(w=S)}n&&((h=!d&&h)&&v--,s&&g.push(h))}v+=m;if(n&&m!==v){p=0;while(d=t[p++])d(g,y,o,a);if(s){if(v>0)while(m--)!g[m]&&!y[m]&&(y[m]=O.call(f));y=yt(y)}_.apply(f,y),l&&!s&&y.length>0&&v+t.length>1&&rt.uniqueSort(f)}return l&&(w=S,u=b),g};return n?st(s):s}function St(e,t,n){var r=0,i=t.length;for(;r<i;r++)rt(e,t[r],n);return n}function xt(e,t,i,s){var u,a,f,l,c,h=dt(e);if(!s&&h.length===1){a=h[0]=h[0].slice(0);if(a.length>2&&(f=a[0]).type==="ID"&&n.getById&&t.nodeType===9&&p&&r.relative[a[1].type]){t=(r.find.ID(f.matches[0].replace(et,tt),t)||[])[0];if(!t)return i;e=e.slice(a.shift().value.length)}u=$.needsContext.test(e)?0:a.length;while(u--){f=a[u];if(r.relative[l=f.type])break;if(c=r.find[l])if(s=c(f.matches[0].replace(et,tt),Y.test(a[0].type)&&ht(t.parentNode)||t)){a.splice(u,1),e=s.length&&vt(a);if(!e)return _.apply(i,s),i;break}}}return o(e,h)(s,t,!p,i,Y.test(e)&&ht(t.parentNode)||t),i}var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y="sizzle"+ -(new Date),b=e.document,w=0,E=0,S=it(),x=it(),T=it(),N=function(e,t){return e===t&&(f=!0),0},C=typeof undefined,k=1<<31,L={}.hasOwnProperty,A=[],O=A.pop,M=A.push,_=A.push,D=A.slice,P=A.indexOf||function(e){var t=0,n=this.length;for(;t<n;t++)if(this[t]===e)return t;return-1},H="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",B="[\\x20\\t\\r\\n\\f]",j="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",F=j.replace("w","w#"),I="\\["+B+"*("+j+")"+B+"*(?:([*^$|!~]?=)"+B+"*(?:(['\"])((?:\\\\.|[^\\\\])*?)\\3|("+F+")|)|)"+B+"*\\]",q=":("+j+")(?:\\(((['\"])((?:\\\\.|[^\\\\])*?)\\3|((?:\\\\.|[^\\\\()[\\]]|"+I.replace(3,8)+")*)|.*)\\)|)",R=new RegExp("^"+B+"+|((?:^|[^\\\\])(?:\\\\.)*)"+B+"+$","g"),U=new RegExp("^"+B+"*,"+B+"*"),z=new RegExp("^"+B+"*([>+~]|"+B+")"+B+"*"),W=new RegExp("="+B+"*([^\\]'\"]*?)"+B+"*\\]","g"),X=new RegExp(q),V=new RegExp("^"+F+"$"),$={ID:new RegExp("^#("+j+")"),CLASS:new RegExp("^\\.("+j+")"),TAG:new RegExp("^("+j.replace("w","w*")+")"),ATTR:new RegExp("^"+I),PSEUDO:new RegExp("^"+q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+B+"*(even|odd|(([+-]|)(\\d*)n|)"+B+"*(?:([+-]|)"+B+"*(\\d+)|))"+B+"*\\)|)","i"),bool:new RegExp("^(?:"+H+")$","i"),needsContext:new RegExp("^"+B+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+B+"*((?:-\\d)?\\d*)"+B+"*\\)|)(?=[^-]|$)","i")},J=/^(?:input|select|textarea|button)$/i,K=/^h\d$/i,Q=/^[^{]+\{\s*\[native \w/,G=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Y=/[+~]/,Z=/'|\\/g,et=new RegExp("\\\\([\\da-f]{1,6}"+B+"?|("+B+")|.)","ig"),tt=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:r<0?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,r&1023|56320)};try{_.apply(A=D.call(b.childNodes),b.childNodes),A[b.childNodes.length].nodeType}catch(nt){_={apply:A.length?function(e,t){M.apply(e,D.call(t))}:function(e,t){var n=e.length,r=0;while(e[n++]=t[r++]);e.length=n-1}}}n=rt.support={},s=rt.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return t?t.nodeName!=="HTML":!1},l=rt.setDocument=function(e){var t,i=e?e.ownerDocument||e:b,o=i.defaultView;if(i===c||i.nodeType!==9||!i.documentElement)return c;c=i,h=i.documentElement,p=!s(i),o&&o!==o.top&&(o.addEventListener?o.addEventListener("unload",function(){l()},!1):o.attachEvent&&o.attachEvent("onunload",function(){l()})),n.attributes=ot(function(e){return e.className="i",!e.getAttribute("className")}),n.getElementsByTagName=ot(function(e){return e.appendChild(i.createComment("")),!e.getElementsByTagName("*").length}),n.getElementsByClassName=Q.test(i.getElementsByClassName)&&ot(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",e.getElementsByClassName("i").length===2}),n.getById=ot(function(e){return h.appendChild(e).id=y,!i.getElementsByName||!i.getElementsByName(y).length}),n.getById?(r.find.ID=function(e,t){if(typeof t.getElementById!==C&&p){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){return e.getAttribute("id")===t}}):(delete r.find.ID,r.filter.ID=function(e){var t=e.replace(et,tt);return function(e){var n=typeof e.getAttributeNode!==C&&e.getAttributeNode("id");return n&&n.value===t}}),r.find.TAG=n.getElementsByTagName?function(e,t){if(typeof t.getElementsByTagName!==C)return t.getElementsByTagName(e)}:function(e,t){var n,r=[],i=0,s=t.getElementsByTagName(e);if(e==="*"){while(n=s[i++])n.nodeType===1&&r.push(n);return r}return s},r.find.CLASS=n.getElementsByClassName&&function(e,t){if(typeof t.getElementsByClassName!==C&&p)return t.getElementsByClassName(e)},v=[],d=[];if(n.qsa=Q.test(i.querySelectorAll))ot(function(e){e.innerHTML="<select t=''><option selected=''></option></select>",e.querySelectorAll("[t^='']").length&&d.push("[*^$]="+B+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||d.push("\\["+B+"*(?:value|"+H+")"),e.querySelectorAll(":checked").length||d.push(":checked")}),ot(function(e){var t=i.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&d.push("name"+B+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||d.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),d.push(",.*:")});return(n.matchesSelector=Q.test(m=h.webkitMatchesSelector||h.mozMatchesSelector||h.oMatchesSelector||h.msMatchesSelector))&&ot(function(e){n.disconnectedMatch=m.call(e,"div"),m.call(e,"[s!='']:x"),v.push("!=",q)}),d=d.length&&new RegExp(d.join("|")),v=v.length&&new RegExp(v.join("|")),t=Q.test(h.compareDocumentPosition),g=t||Q.test(h.contains)?function(e,t){var n=e.nodeType===9?e.documentElement:e,r=t&&t.parentNode;return e===r||!!r&&r.nodeType===1&&!!(n.contains?n.contains(r):e.compareDocumentPosition&&e.compareDocumentPosition(r)&16)}:function(e,t){if(t)while(t=t.parentNode)if(t===e)return!0;return!1},N=t?function(e,t){if(e===t)return f=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r?r:(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,r&1||!n.sortDetached&&t.compareDocumentPosition(e)===r?e===i||e.ownerDocument===b&&g(b,e)?-1:t===i||t.ownerDocument===b&&g(b,t)?1:a?P.call(a,e)-P.call(a,t):0:r&4?-1:1)}:function(e,t){if(e===t)return f=!0,0;var n,r=0,s=e.parentNode,o=t.parentNode,u=[e],l=[t];if(!s||!o)return e===i?-1:t===i?1:s?-1:o?1:a?P.call(a,e)-P.call(a,t):0;if(s===o)return at(e,t);n=e;while(n=n.parentNode)u.unshift(n);n=t;while(n=n.parentNode)l.unshift(n);while(u[r]===l[r])r++;return r?at(u[r],l[r]):u[r]===b?-1:l[r]===b?1:0},i},rt.matches=function(e,t){return rt(e,null,null,t)},rt.matchesSelector=function(e,t){(e.ownerDocument||e)!==c&&l(e),t=t.replace(W,"='$1']");if(n.matchesSelector&&p&&(!v||!v.test(t))&&(!d||!d.test(t)))try{var r=m.call(e,t);if(r||n.disconnectedMatch||e.document&&e.document.nodeType!==11)return r}catch(i){}return rt(t,c,null,[e]).length>0},rt.contains=function(e,t){return(e.ownerDocument||e)!==c&&l(e),g(e,t)},rt.attr=function(e,t){(e.ownerDocument||e)!==c&&l(e);var i=r.attrHandle[t.toLowerCase()],s=i&&L.call(r.attrHandle,t.toLowerCase())?i(e,t,!p):undefined;return s!==undefined?s:n.attributes||!p?e.getAttribute(t):(s=e.getAttributeNode(t))&&s.specified?s.value:null},rt.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},rt.uniqueSort=function(e){var t,r=[],i=0,s=0;f=!n.detectDuplicates,a=!n.sortStable&&e.slice(0),e.sort(N);if(f){while(t=e[s++])t===e[s]&&(i=r.push(s));while(i--)e.splice(r[i],1)}return a=null,e},i=rt.getText=function(e){var t,n="",r=0,s=e.nodeType;if(!s)while(t=e[r++])n+=i(t);else if(s===1||s===9||s===11){if(typeof e.textContent=="string")return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=i(e)}else if(s===3||s===4)return e.nodeValue;return n},r=rt.selectors={cacheLength:50,createPseudo:st,match:$,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(et,tt),e[3]=(e[4]||e[5]||"").replace(et,tt),e[2]==="~="&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),e[1].slice(0,3)==="nth"?(e[3]||rt.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*(e[3]==="even"||e[3]==="odd")),e[5]=+(e[7]+e[8]||e[3]==="odd")):e[3]&&rt.error(e[0]),e},PSEUDO:function(e){var t,n=!e[5]&&e[2];return $.CHILD.test(e[0])?null:(e[3]&&e[4]!==undefined?e[2]=e[4]:n&&X.test(n)&&(t=dt(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(et,tt).toLowerCase();return e==="*"?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=S[e+" "];return t||(t=new RegExp("(^|"+B+")"+e+"("+B+"|$)"))&&S(e,function(e){return t.test(typeof e.className=="string"&&e.className||typeof e.getAttribute!==C&&e.getAttribute("class")||"")})},ATTR:function(e,t,n){return function(r){var i=rt.attr(r,e);return i==null?t==="!=":t?(i+="",t==="="?i===n:t==="!="?i!==n:t==="^="?n&&i.indexOf(n)===0:t==="*="?n&&i.indexOf(n)>-1:t==="$="?n&&i.slice(-n.length)===n:t==="~="?(" "+i+" ").indexOf(n)>-1:t==="|="?i===n||i.slice(0,n.length+1)===n+"-":!1):!0}},CHILD:function(e,t,n,r,i){var s=e.slice(0,3)!=="nth",o=e.slice(-4)!=="last",u=t==="of-type";return r===1&&i===0?function(e){return!!e.parentNode}:function(t,n,a){var f,l,c,h,p,d,v=s!==o?"nextSibling":"previousSibling",m=t.parentNode,g=u&&t.nodeName.toLowerCase(),b=!a&&!u;if(m){if(s){while(v){c=t;while(c=c[v])if(u?c.nodeName.toLowerCase()===g:c.nodeType===1)return!1;d=v=e==="only"&&!d&&"nextSibling"}return!0}d=[o?m.firstChild:m.lastChild];if(o&&b){l=m[y]||(m[y]={}),f=l[e]||[],p=f[0]===w&&f[1],h=f[0]===w&&f[2],c=p&&m.childNodes[p];while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if(c.nodeType===1&&++h&&c===t){l[e]=[w,p,h];break}}else if(b&&(f=(t[y]||(t[y]={}))[e])&&f[0]===w)h=f[1];else while(c=++p&&c&&c[v]||(h=p=0)||d.pop())if((u?c.nodeName.toLowerCase()===g:c.nodeType===1)&&++h){b&&((c[y]||(c[y]={}))[e]=[w,h]);if(c===t)break}return h-=i,h===r||h%r===0&&h/r>=0}}},PSEUDO:function(e,t){var n,i=r.pseudos[e]||r.setFilters[e.toLowerCase()]||rt.error("unsupported pseudo: "+e);return i[y]?i(t):i.length>1?(n=[e,e,"",t],r.setFilters.hasOwnProperty(e.toLowerCase())?st(function(e,n){var r,s=i(e,t),o=s.length;while(o--)r=P.call(e,s[o]),e[r]=!(n[r]=s[o])}):function(e){return i(e,0,n)}):i}},pseudos:{not:st(function(e){var t=[],n=[],r=o(e.replace(R,"$1"));return r[y]?st(function(e,t,n,i){var s,o=r(e,null,i,[]),u=e.length;while(u--)if(s=o[u])e[u]=!(t[u]=s)}):function(e,i,s){return t[0]=e,r(t,null,s,n),!n.pop()}}),has:st(function(e){return function(t){return rt(e,t).length>0}}),contains:st(function(e){return function(t){return(t.textContent||t.innerText||i(t)).indexOf(e)>-1}}),lang:st(function(e){return V.test(e||"")||rt.error("unsupported lang: "+e),e=e.replace(et,tt).toLowerCase(),function(t){var n;do if(n=p?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||n.indexOf(e+"-")===0;while((t=t.parentNode)&&t.nodeType===1);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===h},focus:function(e){return e===c.activeElement&&(!c.hasFocus||c.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&!!e.checked||t==="option"&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!r.pseudos.empty(e)},header:function(e){return K.test(e.nodeName)},input:function(e){return J.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return t==="input"&&e.type==="button"||t==="button"},text:function(e){var t;return e.nodeName.toLowerCase()==="input"&&e.type==="text"&&((t=e.getAttribute("type"))==null||t.toLowerCase()==="text")},first:ct(function(){return[0]}),last:ct(function(e,t){return[t-1]}),eq:ct(function(e,t,n){return[n<0?n+t:n]}),even:ct(function(e,t){var n=0;for(;n<t;n+=2)e.push(n);return e}),odd:ct(function(e,t){var n=1;for(;n<t;n+=2)e.push(n);return e}),lt:ct(function(e,t,n){var r=n<0?n+t:n;for(;--r>=0;)e.push(r);return e}),gt:ct(function(e,t,n){var r=n<0?n+t:n;for(;++r<t;)e.push(r);return e})}},r
.pseudos.nth=r.pseudos.eq;for(t in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})r.pseudos[t]=ft(t);for(t in{submit:!0,reset:!0})r.pseudos[t]=lt(t);return pt.prototype=r.filters=r.pseudos,r.setFilters=new pt,o=rt.compile=function(e,t){var n,r=[],i=[],s=T[e+" "];if(!s){t||(t=dt(e)),n=t.length;while(n--)s=wt(t[n]),s[y]?r.push(s):i.push(s);s=T(e,Et(i,r))}return s},n.sortStable=y.split("").sort(N).join("")===y,n.detectDuplicates=!!f,l(),n.sortDetached=ot(function(e){return e.compareDocumentPosition(c.createElement("div"))&1}),ot(function(e){return e.innerHTML="<a href='#'></a>",e.firstChild.getAttribute("href")==="#"})||ut("type|href|height|width",function(e,t,n){if(!n)return e.getAttribute(t,t.toLowerCase()==="type"?1:2)}),(!n.attributes||!ot(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),e.firstChild.getAttribute("value")===""}))&&ut("value",function(e,t,n){if(!n&&e.nodeName.toLowerCase()==="input")return e.defaultValue}),ot(function(e){return e.getAttribute("disabled")==null})||ut(H,function(e,t,n){var r;if(!n)return e[t]===!0?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),rt}(e);p.find=b,p.expr=b.selectors,p.expr[":"]=p.expr.pseudos,p.unique=b.uniqueSort,p.text=b.getText,p.isXMLDoc=b.isXML,p.contains=b.contains;var w=p.expr.match.needsContext,E=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,S=/^.[^:#\[\.,]*$/;p.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),t.length===1&&r.nodeType===1?p.find.matchesSelector(r,e)?[r]:[]:p.find.matches(e,p.grep(t,function(e){return e.nodeType===1}))},p.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if(typeof e!="string")return this.pushStack(p(e).filter(function(){for(t=0;t<i;t++)if(p.contains(r[t],this))return!0}));for(t=0;t<i;t++)p.find(e,r[t],n);return n=this.pushStack(i>1?p.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(x(this,e||[],!1))},not:function(e){return this.pushStack(x(this,e||[],!0))},is:function(e){return!!x(this,typeof e=="string"&&w.test(e)?p(e):e||[],!1).length}});var T,N=e.document,C=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,k=p.fn.init=function(e,t){var n,r;if(!e)return this;if(typeof e=="string"){e.charAt(0)==="<"&&e.charAt(e.length-1)===">"&&e.length>=3?n=[null,e,null]:n=C.exec(e);if(n&&(n[1]||!t)){if(n[1]){t=t instanceof p?t[0]:t,p.merge(this,p.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:N,!0));if(E.test(n[1])&&p.isPlainObject(t))for(n in t)p.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}r=N.getElementById(n[2]);if(r&&r.parentNode){if(r.id!==n[2])return T.find(e);this.length=1,this[0]=r}return this.context=N,this.selector=e,this}return!t||t.jquery?(t||T).find(e):this.constructor(t).find(e)}return e.nodeType?(this.context=this[0]=e,this.length=1,this):p.isFunction(e)?typeof T.ready!="undefined"?T.ready(e):e(p):(e.selector!==undefined&&(this.selector=e.selector,this.context=e.context),p.makeArray(e,this))};k.prototype=p.fn,T=p(N);var L=/^(?:parents|prev(?:Until|All))/,A={children:!0,contents:!0,next:!0,prev:!0};p.extend({dir:function(e,t,n){var r=[],i=e[t];while(i&&i.nodeType!==9&&(n===undefined||i.nodeType!==1||!p(i).is(n)))i.nodeType===1&&r.push(i),i=i[t];return r},sibling:function(e,t){var n=[];for(;e;e=e.nextSibling)e.nodeType===1&&e!==t&&n.push(e);return n}}),p.fn.extend({has:function(e){var t,n=p(e,this),r=n.length;return this.filter(function(){for(t=0;t<r;t++)if(p.contains(this,n[t]))return!0})},closest:function(e,t){var n,r=0,i=this.length,s=[],o=w.test(e)||typeof e!="string"?p(e,t||this.context):0;for(;r<i;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(o?o.index(n)>-1:n.nodeType===1&&p.find.matchesSelector(n,e))){s.push(n);break}return this.pushStack(s.length>1?p.unique(s):s)},index:function(e){return e?typeof e=="string"?p.inArray(this[0],p(e)):p.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(p.unique(p.merge(this.get(),p(e,t))))},addBack:function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}}),p.each({parent:function(e){var t=e.parentNode;return t&&t.nodeType!==11?t:null},parents:function(e){return p.dir(e,"parentNode")},parentsUntil:function(e,t,n){return p.dir(e,"parentNode",n)},next:function(e){return O(e,"nextSibling")},prev:function(e){return O(e,"previousSibling")},nextAll:function(e){return p.dir(e,"nextSibling")},prevAll:function(e){return p.dir(e,"previousSibling")},nextUntil:function(e,t,n){return p.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return p.dir(e,"previousSibling",n)},siblings:function(e){return p.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return p.sibling(e.firstChild)},contents:function(e){return p.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:p.merge([],e.childNodes)}},function(e,t){p.fn[e]=function(n,r){var i=p.map(this,t,n);return e.slice(-5)!=="Until"&&(r=n),r&&typeof r=="string"&&(i=p.filter(r,i)),this.length>1&&(A[e]||(i=p.unique(i)),L.test(e)&&(i=i.reverse())),this.pushStack(i)}});var M=/\S+/g,_={};p.Callbacks=function(e){e=typeof e=="string"?_[e]||D(e):p.extend({},e);var t,n,r,i,s,o,u=[],a=!e.once&&[],f=function(c){n=e.memory&&c,r=!0,s=o||0,o=0,i=u.length,t=!0;for(;u&&s<i;s++)if(u[s].apply(c[0],c[1])===!1&&e.stopOnFalse){n=!1;break}t=!1,u&&(a?a.length&&f(a.shift()):n?u=[]:l.disable())},l={add:function(){if(u){var r=u.length;(function s(t){p.each(t,function(t,n){var r=p.type(n);r==="function"?(!e.unique||!l.has(n))&&u.push(n):n&&n.length&&r!=="string"&&s(n)})})(arguments),t?i=u.length:n&&(o=r,f(n))}return this},remove:function(){return u&&p.each(arguments,function(e,n){var r;while((r=p.inArray(n,u,r))>-1)u.splice(r,1),t&&(r<=i&&i--,r<=s&&s--)}),this},has:function(e){return e?p.inArray(e,u)>-1:!!u&&!!u.length},empty:function(){return u=[],i=0,this},disable:function(){return u=a=n=undefined,this},disabled:function(){return!u},lock:function(){return a=undefined,n||l.disable(),this},locked:function(){return!a},fireWith:function(e,n){return u&&(!r||a)&&(n=n||[],n=[e,n.slice?n.slice():n],t?a.push(n):f(n)),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!r}};return l},p.extend({Deferred:function(e){var t=[["resolve","done",p.Callbacks("once memory"),"resolved"],["reject","fail",p.Callbacks("once memory"),"rejected"],["notify","progress",p.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return p.Deferred(function(n){p.each(t,function(t,s){var o=p.isFunction(e[t])&&e[t];i[s[1]](function(){var e=o&&o.apply(this,arguments);e&&p.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[s[0]+"With"](this===r?n.promise():this,o?[e]:arguments)})}),e=null}).promise()},promise:function(e){return e!=null?p.extend(e,r):r}},i={};return r.pipe=r.then,p.each(t,function(e,s){var o=s[2],u=s[3];r[s[1]]=o.add,u&&o.add(function(){n=u},t[e^1][2].disable,t[2][2].lock),i[s[0]]=function(){return i[s[0]+"With"](this===i?r:this,arguments),this},i[s[0]+"With"]=o.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t=0,n=r.call(arguments),i=n.length,s=i!==1||e&&p.isFunction(e.promise)?i:0,o=s===1?e:p.Deferred(),u=function(e,t,n){return function(i){t[e]=this,n[e]=arguments.length>1?r.call(arguments):i,n===a?o.notifyWith(t,n):--s||o.resolveWith(t,n)}},a,f,l;if(i>1){a=new Array(i),f=new Array(i),l=new Array(i);for(;t<i;t++)n[t]&&p.isFunction(n[t].promise)?n[t].promise().done(u(t,l,n)).fail(o.reject).progress(u(t,f,a)):--s}return s||o.resolveWith(l,n),o.promise()}});var P;p.fn.ready=function(e){return p.ready.promise().done(e),this},p.extend({isReady:!1,readyWait:1,holdReady:function(e){e?p.readyWait++:p.ready(!0)},ready:function(e){if(e===!0?--p.readyWait:p.isReady)return;if(!N.body)return setTimeout(p.ready);p.isReady=!0;if(e!==!0&&--p.readyWait>0)return;P.resolveWith(N,[p]),p.fn.trigger&&p(N).trigger("ready").off("ready")}}),p.ready.promise=function(t){if(!P){P=p.Deferred();if(N.readyState==="complete")setTimeout(p.ready);else if(N.addEventListener)N.addEventListener("DOMContentLoaded",B,!1),e.addEventListener("load",B,!1);else{N.attachEvent("onreadystatechange",B),e.attachEvent("onload",B);var n=!1;try{n=e.frameElement==null&&N.documentElement}catch(r){}n&&n.doScroll&&function i(){if(!p.isReady){try{n.doScroll("left")}catch(e){return setTimeout(i,50)}H(),p.ready()}}()}}return P.promise(t)};var j=typeof undefined,F;for(F in p(c))break;c.ownLast=F!=="0",c.inlineBlockNeedsLayout=!1,p(function(){var e,t,n=N.getElementsByTagName("body")[0];if(!n)return;e=N.createElement("div"),e.style.cssText="border:0;width:0;height:0;position:absolute;top:0;left:-9999px;margin-top:1px",t=N.createElement("div"),n.appendChild(e).appendChild(t);if(typeof t.style.zoom!==j){t.style.cssText="border:0;margin:0;width:1px;padding:1px;display:inline;zoom:1";if(c.inlineBlockNeedsLayout=t.offsetWidth===3)n.style.zoom=1}n.removeChild(e),e=t=null}),function(){var e=N.createElement("div");if(c.deleteExpando==null){c.deleteExpando=!0;try{delete e.test}catch(t){c.deleteExpando=!1}}e=null}(),p.acceptData=function(e){var t=p.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return n!==1&&n!==9?!1:!t||t!==!0&&e.getAttribute("classid")===t};var I=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,q=/([A-Z])/g;p.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return e=e.nodeType?p.cache[e[p.expando]]:e[p.expando],!!e&&!U(e)},data:function(e,t,n){return z(e,t,n)},removeData:function(e,t){return W(e,t)},_data:function(e,t,n){return z(e,t,n,!0)},_removeData:function(e,t){return W(e,t,!0)}}),p.fn.extend({data:function(e,t){var n,r,i,s=this[0],o=s&&s.attributes;if(e===undefined){if(this.length){i=p.data(s);if(s.nodeType===1&&!p._data(s,"parsedAttrs")){n=o.length;while(n--)r=o[n].name,r.indexOf("data-")===0&&(r=p.camelCase(r.slice(5)),R(s,r,i[r]));p._data(s,"parsedAttrs",!0)}}return i}return typeof e=="object"?this.each(function(){p.data(this,e)}):arguments.length>1?this.each(function(){p.data(this,e,t)}):s?R(s,e,p.data(s,e)):undefined},removeData:function(e){return this.each(function(){p.removeData(this,e)})}}),p.extend({queue:function(e,t,n){var r;if(e)return t=(t||"fx")+"queue",r=p._data(e,t),n&&(!r||p.isArray(n)?r=p._data(e,t,p.makeArray(n)):r.push(n)),r||[]},dequeue:function(e,t){t=t||"fx";var n=p.queue(e,t),r=n.length,i=n.shift(),s=p._queueHooks(e,t),o=function(){p.dequeue(e,t)};i==="inprogress"&&(i=n.shift(),r--),i&&(t==="fx"&&n.unshift("inprogress"),delete s.stop,i.call(e,o,s)),!r&&s&&s.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return p._data(e,n)||p._data(e,n,{empty:p.Callbacks("once memory").add(function(){p._removeData(e,t+"queue"),p._removeData(e,n)})})}}),p.fn.extend({queue:function(e,t){var n=2;return typeof e!="string"&&(t=e,e="fx",n--),arguments.length<n?p.queue(this[0],e):t===undefined?this:this.each(function(){var n=p.queue(this,e,t);p._queueHooks(this,e),e==="fx"&&n[0]!=="inprogress"&&p.dequeue(this,e)})},dequeue:function(e){return this.each(function(){p.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=p.Deferred(),s=this,o=this.length,u=function(){--r||i.resolveWith(s,[s])};typeof e!="string"&&(t=e,e=undefined),e=e||"fx";while(o--)n=p._data(s[o],e+"queueHooks"),n&&n.empty&&(r++,n.empty.add(u));return u(),i.promise(t)}});var X=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,V=["Top","Right","Bottom","Left"],$=function(e,t){return e=t||e,p.css(e,"display")==="none"||!p.contains(e.ownerDocument,e)},J=p.access=function(e,t,n,r,i,s,o){var u=0,a=e.length,f=n==null;if(p.type(n)==="object"){i=!0;for(u in n)p.access(e,t,u,n[u],!0,s,o)}else if(r!==undefined){i=!0,p.isFunction(r)||(o=!0),f&&(o?(t.call(e,r),t=null):(f=t,t=function(e,t,n){return f.call(p(e),n)}));if(t)for(;u<a;u++)t(e[u],n,o?r:r.call(e[u],u,t(e[u],n)))}return i?e:f?t.call(e):a?t(e[0],n):s},K=/^(?:checkbox|radio)$/i;(function(){var e=N.createDocumentFragment(),t=N.createElement("div"),n=N.createElement("input");t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a>",c.leadingWhitespace=t.firstChild.nodeType===3,c.tbody=!t.getElementsByTagName("tbody").length,c.htmlSerialize=!!t.getElementsByTagName("link").length,c.html5Clone=N.createElement("nav").cloneNode(!0).outerHTML!=="<:nav></:nav>",n.type="checkbox",n.checked=!0,e.appendChild(n),c.appendChecked=n.checked,t.innerHTML="<textarea>x</textarea>",c.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,e.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",c.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,c.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){c.noCloneEvent=!1}),t.cloneNode(!0).click());if(c.deleteExpando==null){c.deleteExpando=!0;try{delete t.test}catch(r){c.deleteExpando=!1}}e=t=n=null})(),function(){var t,n,r=N.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(c[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),c[t+"Bubbles"]=r.attributes[n].expando===!1);r=null}();var Q=/^(?:input|select|textarea)$/i,G=/^key/,Y=/^(?:mouse|contextmenu)|click/,Z=/^(?:focusinfocus|focusoutblur)$/,et=/^([^.]*)(?:\.(.+)|)$/;p.event={global:{},add:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p._data(e);if(!g)return;n.handler&&(a=n,n=a.handler,i=a.selector),n.guid||(n.guid=p.guid++),(o=g.events)||(o=g.events={}),(l=g.handle)||(l=g.handle=function(e){return typeof p===j||!!e&&p.event.triggered===e.type?undefined:p.event.dispatch.apply(l.elem,arguments)},l.elem=e),t=(t||"").match(M)||[""],u=t.length;while(u--){s=et.exec(t[u])||[],d=m=s[1],v=(s[2]||"").split(".").sort();if(!d)continue;f=p.event.special[d]||{},d=(i?f.delegateType:f.bindType)||d,f=p.event.special[d]||{},c=p.extend({type:d,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&p.expr.match.needsContext.test(i),namespace:v.join(".")},a);if(!(h=o[d])){h=o[d]=[],h.delegateCount=0;if(!f.setup||f.setup.call(e,r,v,l)===!1)e.addEventListener?e.addEventListener(d,l,!1):e.attachEvent&&e.attachEvent("on"+d,l)}f.add&&(f.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?h.splice(h.delegateCount++,0,c):h.push(c),p.event.global[d]=!0}e=null},remove:function(e,t,n,r,i){var s,o,u,a,f,l,c,h,d,v,m,g=p.hasData(e)&&p._data(e);if(!g||!(l=g.events))return;t=(t||"").match(M)||[""],f=t.length;while(f--){u=et.exec(t[f])||[],d=m=u[1],v=(u[2]||"").split(".").sort();if(!d){for(d in l)p.event.remove(e,d+t[f],n,r,!0);continue}c=p.event.special[d]||{},d=(r?c.delegateType:c.bindType)||d,h=l[d]||[],u=u[2]&&new RegExp("(^|\\.)"+v.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=s=h.length;while(s--)o=h[s],(i||m===o.origType)&&(!n||n.guid===o.guid)&&(!u||u.test(o.namespace))&&(!r||r===o.selector||r==="**"&&o.selector)&&(h.splice(s,1),o.selector&&h.delegateCount--,c.remove&&c.remove.call(e,o));a&&!h.length&&((!c.teardown||c.teardown.call(e,v,g.handle)===!1)&&p.removeEvent(e,d,g.handle),delete l[d])}p.isEmptyObject(l)&&(delete g.handle,p._removeData(e,"events"))},trigger:function(t,n,r,i){var s,o,u,a,l,c,h,d=[r||N],v=f.call(t,"type")?t.type:t,m=f.call(t,"namespace")?t.namespace.split("."):[];u=c=r=r||N;if(r.nodeType===3||r.nodeType===8)return;if(Z.test(v+p.event.triggered))return;v.indexOf(".")>=0&&(m=v.split("."),v=m.shift(),m.sort()),o=v.indexOf(":")<0&&"on"+v,t=t[p.expando]?t:new p.Event(v,typeof t=="object"&&t),t.isTrigger=i?2:3,t.namespace=m.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+m.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=undefined,t.target||(t.target=r),n=n==null?[t]:p.makeArray(n,[t]),l=p.event.special[v]||{};if(!i&&l.trigger&&l.trigger.apply(r,n)===!1)return;if(!i&&!l.noBubble&&!p.isWindow(r)){a=l.delegateType||v,Z.test(a+v)||(u=u.parentNode);for(;u;u=u.parentNode)d.push(u),c=u;c===(r.ownerDocument||N)&&d.push(c.defaultView||c.parentWindow||e)}h=0;while((u=d[h++])&&!t.isPropagationStopped())t.type=h>1?a:l.bindType||v,s=(p._data(u,"events")||{})[t.type]&&p._data(u,"handle"),s&&s.apply(u,n),s=o&&u[o],s&&s.apply&&p.acceptData(u)&&(t.result=s.apply(u,n),t.result===!1&&t.preventDefault());t.type=v;if(!i&&!t.isDefaultPrevented()&&(!l._default||l._default.apply(d.pop(),n)===!1)&&p.acceptData(r)&&o&&r[v]&&!p.isWindow(r)){c=r[o],c&&(r[o]=null),p.event.triggered=v;try{r[v]()}catch(g){}p.event.triggered=undefined,c&&(r[o]=c)}return t.result},dispatch:function(e){e=p.event.fix(e);var t,n,i,s,o,u=[],a=r.call(arguments),f=(p._data(this,"events")||{})[e.type]||[],l=p.event.special[e.type]||{};a[0]=e,e.delegateTarget=this;if(l.preDispatch&&l.preDispatch.call(this,e)===!1)return;u=p.event.handlers.call(this,e,f),t=0;while((s=u[t++])&&!e.isPropagationStopped()){e.currentTarget=s.elem,o=0;while((i=s.handlers[o++])&&!e.isImmediatePropagationStopped())if(!e.namespace_re||e.namespace_re.test(i.namespace))e.handleObj=i,e.data=i.data,n=((p.event.special[i.origType]||{}).handle||i.handler).apply(s.elem,a),n!==undefined&&(e.result=n)===!1&&(e.preventDefault(),e.stopPropagation())}return l.postDispatch&&l.postDispatch.call(this,e),e.result},handlers:function(e,t){var n,r,i,s,o=[],u=t.delegateCount,a=e.target;if(u&&a.nodeType&&(!e.button||e.type!=="click"))for(;a!=this;a=a.parentNode||this)if(a.nodeType===1&&(a.disabled!==!0||e.type!=="click")){i=[];for(s=0;s<u;s++)r=t[s],n=r.selector+" ",i[n]===undefined&&(i[n]=r.needsContext?p(n,this).index(a)>=0:p.find(n,this,null,[a]).length),i[n]&&i.push(r);i.length&&o.push({elem:a,handlers:i})}return u<t.length&&o.push({elem:this,handlers:t.slice(u)}),o},fix:function(e){if(e[p.expando])return e;var t,n,r,i=e.type,s=e,o=this.fixHooks[i];o||(this.fixHooks[i]=o=Y.test(i)?this.mouseHooks:G.test(i)?this.keyHooks:{}),r=o.props?this.props.concat(o.props):this.props,e=new p.Event(s),t=r.length;while(t--)n=r[t],e[n]=s[n];return e.target||(e.target=s.srcElement||N),e.target.nodeType===3&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,o.filter?o.filter(e,s):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return e.which==null&&(e.which=t.charCode!=null?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,s=t.button,o=t.fromElement;return e.pageX==null&&t.clientX!=null&&(r=e.target.ownerDocument||N,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&o&&(e.relatedTarget=o===e.target?t.toElement:o),!e.which&&s!==undefined&&(e.which=s&1?1:s&2?3:s&4?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==rt()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){if(this===rt()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if(p.nodeName(this,"input")&&this.type==="checkbox"&&this.click)return this.click(),!1},_default:function(e){return p.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){e.result!==undefined&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=p.extend(new p.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?p.event.trigger(i,null,t):p.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},p.removeEvent=N.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===j&&(e[r]=null),e.detachEvent(r,n))},p.Event=function(e,t){if(!(this instanceof p.Event))return new p.Event(e,t);e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||e.defaultPrevented===undefined&&(e.returnValue===!1||e.getPreventDefault&&e.getPreventDefault())?tt:nt):this.type=e,t&&p.extend(this,t),this.timeStamp=e&&e.timeStamp||p.now(),this[p.expando]=!0},p.Event.prototype={isDefaultPrevented:nt,isPropagationStopped:nt,isImmediatePropagationStopped:nt,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=tt;if(!e)return;e.preventDefault?e.preventDefault():e.returnValue=!1},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=tt;if(!e)return;e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=tt,this.stopPropagation()}},p.each({mouseenter:"mouseover",mouseleave:"mouseout"},function(e,t){p.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,s=e.handleObj;if(!i||i!==r&&!p.contains(r,i))e.type=s.origType,n=s.handler.apply(this,arguments),e.type=t;return n}}}),c.submitBubbles||(p.event.special.submit={setup:function(){if(p.nodeName(this,"form"))return!1;p.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=p.nodeName(t,"input")||p.nodeName(t,"button")?t.form:undefined;n&&!p._data(n,"submitBubbles")&&(p.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),p._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&p.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){if(p.nodeName(this,"form"))return!1;p.event.remove(this,"._submit")}}),c.changeBubbles||(p.event.special.change={setup:function(){if(Q.test(this.nodeName)){if(this.type==="checkbox"||this.type==="radio")p.event.add(this,"propertychange._change",function(e){e.originalEvent.propertyName==="checked"&&(this._just_changed=!0)}),p.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),p.event.simulate("change",this,e,!0)});return!1}p.event.add(this,"beforeactivate._change",function(e){var t=e.target;Q.test(t.nodeName)&&!p._data(t,"changeBubbles")&&(p.event.add(t,"change._change",function(e){this.parentNode&&!e.isSimulated&&!e.isTrigger&&p.event.simulate("change",this.parentNode,e,!0)}),p._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;if(this!==t||e.isSimulated||e.isTrigger||t.type!=="radio"&&t.type!=="checkbox")return e.handleObj.handler.apply(this,arguments)},teardown:function(){return p.event.remove(this,"._change"),!Q.test(this.nodeName)}}),c.focusinBubbles||p.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){p.event.simulate(t,e.target,p.event.fix(e),!0)};p.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=p._data(r,t);i||r.addEventListener(e,n,!0),p._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=p._data(r,t)-1;i?p._data(r,t,i):(r.removeEventListener(e,n,!0),p._removeData(r,t))}}}),p.fn.extend({on:function(e,t,n,r,i){var s,o;if(typeof e=="object"){typeof t!="string"&&(n=n||t,t=undefined);for(s in e)this.on(s,t,n,e[s],i);return this}n==null&&r==null?(r=t,n=t=undefined):r==null&&(typeof t=="string"?(r=n,n=undefined):(r=n,n=t,t=undefined));if(r===!1)r=nt;else if(!r)return this;return i===1&&(o=r,r=function(e){return p().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=p.guid++)),this.each(function(){p.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,p(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if(typeof e=="object"){for(i in e)this.off(i,t,e[i]);return this}if(t===!1||typeof t=="function")n=t,t=undefined;return n===!1&&(n=nt),this.each(function(){p.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){p.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];if(n)return p.event.trigger(e,t,n,!0)}});var st="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",ot=/ jQuery\d+="(?:null|\d+)"/g,ut=new RegExp("<(?:"+st+")[\\s/>]","i"),at=/^\s+/,ft=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,lt=/<([\w:]+)/,ct=/<tbody/i,ht=/<|&#?\w+;/,pt=/<(?:script|style|link)/i,dt=/checked\s*(?:[^=]|=\s*.checked.)/i,vt=/^$|\/(?:java|ecma)script/i,mt=/^true\/(.*)/,gt=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,yt={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:c.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},bt=it(N),wt=bt.appendChild(N.createElement("div"));yt.optgroup=yt.option,yt.tbody=yt.tfoot=yt.colgroup=yt.caption=yt.thead,yt.th=yt.td,p.extend({clone:function(e,t,n){var r,i,s,o,u,a=p.contains(e.ownerDocument,e);c.html5Clone||p.isXMLDoc(e)||!ut.test("<"+e.nodeName+">")?s=e.cloneNode(!0):(wt.innerHTML=e.outerHTML,wt.removeChild(s=wt.firstChild));if((!c.noCloneEvent||!c.noCloneChecked)&&(e.nodeType===1||e.nodeType===11)&&!p.isXMLDoc(e)){r=Et(s),u=Et(e);for(o=0;(i=u[o])!=null;++o)r[o]&&Lt(i,r[o])}if(t)if(n){u=u||Et(e),r=r||Et(s);for(o=0;(i=u[o])!=null;o++)kt(i,r[o])}else kt(e,s);return r=Et(s,"script"),r.length>0&&Ct(r,!a&&Et(e,"script")),r=u=i=null,s},buildFragment:function(e,t,n,r){var i,s,o,u,a,f,l,h=e.length,d=it(t),v=[],m=0;for(;m<h;m++){s=e[m];if(s||s===0)if(p.type(s)==="object")p.merge(v,s.nodeType?[s]:s);else if(!ht.test(s))v.push(t.createTextNode(s));else{u=u||d.appendChild(t.createElement("div")),a=(lt.exec(s)||["",""])[1].toLowerCase(),l=yt[a]||yt._default,u.innerHTML=l[1]+s.replace(ft,"<$1></$2>")+l[2],i=l[0];while(i--)u=u.lastChild;!c.leadingWhitespace&&at.test(s)&&v.push(t.createTextNode(at.exec(s)[0]));if(!c.tbody){s=a==="table"&&!ct.test(s)?u.firstChild:l[1]==="<table>"&&!ct.test(s)?u:0,i=s&&s.childNodes.length;while(i--)p.nodeName(f=s.childNodes[i],"tbody")&&!f.childNodes.length&&s.removeChild(f)}p.merge(v,u.childNodes),u.textContent="";while(u.firstChild)u.removeChild(u.firstChild);u=d.lastChild}}u&&d.removeChild(u),c.appendChecked||p.grep(Et(v,"input"),St),m=0;while(s=v[m++]){if(r&&p.inArray(s,r)!==-1)continue;o=p.contains(s.ownerDocument,s),u=Et(d.appendChild(s),"script"),o&&Ct(u);if(n){i=0;while(s=u[i++])vt.test(s.type||"")&&n.push(s)}}return u=null,d},cleanData:function(e,t){var r,i,s,o,u=0,a=p.expando,f=p.cache,l=c.deleteExpando,h=p.event.special;for(;(r=e[u])!=null;u++)if(t||p.acceptData(r)){s=r[a],o=s&&f[s];if(o){if(o.events)for(i in o.events)h[i]?p.event.remove(r,i):p.removeEvent(r,i,o.handle);f[s]&&(delete f[s],l?delete r[a]:typeof r.removeAttribute!==j?r.removeAttribute(a):r[a]=null,n.push(s))}}}}),p.fn.extend({text:function(e){return J(this,function(e){return e===undefined?p.text(this):this.empty().append((this[0]&&this[0].ownerDocument||N).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=xt(this,e);t.appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(this.nodeType===1||this.nodeType===11||this.nodeType===9){var t=xt(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){var n,r=e?p.filter(e,this):this,i=0;for(;(n=r[i])!=null;i++)!t&&n.nodeType===1&&p.cleanData(Et(n)),n.parentNode&&(t&&p.contains(n.ownerDocument,n)&&Ct(Et(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){var e,t=0;for(;(e=this[t])!=null;t++){e.nodeType===1&&p.cleanData(Et(e,!1));while(e.firstChild)e.removeChild(e.firstChild);e.options&&p.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=e==null?!1:e,t=t==null?e:t,this.map(function(){return p.clone(this,e,t)})},html:function(e){return J(this,function(e){var t=this[0]||{},n=0,r=this.length;if(e===undefined)return t.nodeType===1?t.innerHTML.replace(ot,""):undefined;if(typeof e=="string"&&!pt.test(e)&&(c.htmlSerialize||!ut.test(e))&&(c.leadingWhitespace||!at.test(e))&&!yt[(lt.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(ft,"<$1></$2>");try{for(;n<r;n++)t=this[n]||{},t.nodeType===1&&(p.cleanData(Et(t,!1)),t.innerHTML=e);t=0}catch(i){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,p.cleanData(Et(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=i.apply([],e);var n,r,s,o,u,a,f=0,l=this.length,h=this,d=l-1,v=e[0],m=p.isFunction(v);if(m||l>1&&typeof v=="string"&&!c.checkClone&&dt.test(v))return this.each(function(n){var r=h.eq(n);m&&(e[0]=v.call(this,n,r.html())),r.domManip(e,t)});if(l){a=p.buildFragment(e,this[0].ownerDocument,!1,this),n=a.firstChild,a.childNodes.length===1&&(a=n);if(n){o=p.map(Et(a,"script"),Tt),s=o.length;for(;f<l;f++)r=a,f!==d&&(r=p.clone(r,!0,!0),s&&p.merge(o,Et(r,"script"))),t.call(this[f],r,f);if(s){u=o[o.length-1].ownerDocument,p.map(o,Nt);for(f=0;f<s;f++)r=o[f],vt.test(r.type||"")&&!p._data(r,"globalEval")&&p.contains(u,r)&&(r.src?p._evalUrl&&p._evalUrl(r.src):p.globalEval((r.text||r.textContent||r.innerHTML||"").replace(gt,"")))}a=n=null}}return this}}),p.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){p.fn[e]=function(e){var n,r=0,i=[],o=p(e),u=o.length-1;for(;r<=u;r++)n=r===u?this:this.clone(!0),p(o[r])[t](n),s.apply(i,n.get());return this.pushStack(i)}});var At,Ot={};(function(){var e,t,n=N.createElement("div"),r="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0";n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=n.getElementsByTagName("a")[0],e.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(e.style.opacity),c.cssFloat=!!e.style.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=n.style.backgroundClip==="content-box",e=n=null,c.shrinkWrapBlocks=function(){var e,n,i,s;if(t==null){e=N.getElementsByTagName("body")[0];if(!e)return;s="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",n=N.createElement("div"),i=N.createElement("div"),e.appendChild(n).appendChild(i),t=!1,typeof i.style.zoom!==j&&(i.style.cssText=r+";width:1px;padding:1px;zoom:1",i.innerHTML="<div></div>",i.firstChild.style.width="5px",t=i.offsetWidth!==3),e.removeChild(n),e=n=i=null}return t}})();var Dt=/^margin/,Pt=new RegExp("^("+X+")(?!px)[a-z%]+$","i"),Ht,Bt,jt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Ht=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n.getPropertyValue(t)||n[t]:undefined,n&&(o===""&&!p.contains(e.ownerDocument,e)&&(o=p.style(e,t)),Pt.test(o)&&Dt.test(t)&&(r=u.width,i=u.minWidth,s=u.maxWidth,u.minWidth=u.maxWidth=u.width=o,o=n.width,u.width=r,u.minWidth=i,u.maxWidth=s)),o===undefined?o:o+""}):N.documentElement.currentStyle&&(Ht=function(e){return e.currentStyle},Bt=function(e,t,n){var r,i,s,o,u=e.style;return n=n||Ht(e),o=n?n[t]:undefined,o==null&&u&&u[t]&&(o=u[t]),Pt.test(o)&&!jt.test(t)&&(r=u.left,i=e.runtimeStyle,s=i&&i.left,s&&(i.left=e.currentStyle.left),u.left=t==="fontSize"?"1em":o,o=u.pixelLeft+"px",u.left=r,s&&(i.left=s)),o===undefined?o:o+""||"auto"}),function(){function l(){var t,n,u=N.getElementsByTagName("body")[0];if(!u)return;t=N.createElement("div"),n=N.createElement("div"),t.style.cssText=a,u.appendChild(t).appendChild(n),n.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;display:block;padding:1px;border:1px;width:4px;margin-top:1%;top:1%",p.swap(u,u.style.zoom!=null?{zoom:1}:{},function(){r=n.offsetWidth===4}),i=!0,s=!1,o=!0,e.getComputedStyle&&(s=(e.getComputedStyle(n,null)||{}).top!=="1%",i=(e.getComputedStyle(n,null)||{width:"4px"}).width==="4px"),u.removeChild(t),n=u=null}var t,n,r,i,s,o,u=N.createElement("div"),a="border:0;width:0;height:0;position:absolute;top:0;left:-9999px",f="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;padding:0;margin:0;border:0"
;u.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",t=u.getElementsByTagName("a")[0],t.style.cssText="float:left;opacity:.5",c.opacity=/^0.5/.test(t.style.opacity),c.cssFloat=!!t.style.cssFloat,u.style.backgroundClip="content-box",u.cloneNode(!0).style.backgroundClip="",c.clearCloneStyle=u.style.backgroundClip==="content-box",t=u=null,p.extend(c,{reliableHiddenOffsets:function(){if(n!=null)return n;var e,t,r,i=N.createElement("div"),s=N.getElementsByTagName("body")[0];if(!s)return;return i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=N.createElement("div"),e.style.cssText=a,s.appendChild(e).appendChild(i),i.innerHTML="<table><tr><td></td><td>t</td></tr></table>",t=i.getElementsByTagName("td"),t[0].style.cssText="padding:0;margin:0;border:0;display:none",r=t[0].offsetHeight===0,t[0].style.display="",t[1].style.display="none",n=r&&t[0].offsetHeight===0,s.removeChild(e),i=s=null,n},boxSizing:function(){return r==null&&l(),r},boxSizingReliable:function(){return i==null&&l(),i},pixelPosition:function(){return s==null&&l(),s},reliableMarginRight:function(){var t,n,r,i;if(o==null&&e.getComputedStyle){t=N.getElementsByTagName("body")[0];if(!t)return;n=N.createElement("div"),r=N.createElement("div"),n.style.cssText=a,t.appendChild(n).appendChild(r),i=r.appendChild(N.createElement("div")),i.style.cssText=r.style.cssText=f,i.style.marginRight=i.style.width="0",r.style.width="1px",o=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(n)}return o}})}(),p.swap=function(e,t,n,r){var i,s,o={};for(s in t)o[s]=e.style[s],e.style[s]=t[s];i=n.apply(e,r||[]);for(s in t)e.style[s]=o[s];return i};var It=/alpha\([^)]*\)/i,qt=/opacity\s*=\s*([^)]*)/,Rt=/^(none|table(?!-c[ea]).+)/,Ut=new RegExp("^("+X+")(.*)$","i"),zt=new RegExp("^([+-])=("+X+")","i"),Wt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:0,fontWeight:400},Vt=["Webkit","O","Moz","ms"];p.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=Bt(e,"opacity");return n===""?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":c.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(!e||e.nodeType===3||e.nodeType===8||!e.style)return;var i,s,o,u=p.camelCase(t),a=e.style;t=p.cssProps[u]||(p.cssProps[u]=$t(a,u)),o=p.cssHooks[t]||p.cssHooks[u];if(n===undefined)return o&&"get"in o&&(i=o.get(e,!1,r))!==undefined?i:a[t];s=typeof n,s==="string"&&(i=zt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(p.css(e,t)),s="number");if(n==null||n!==n)return;s==="number"&&!p.cssNumber[u]&&(n+="px"),!c.clearCloneStyle&&n===""&&t.indexOf("background")===0&&(a[t]="inherit");if(!o||!("set"in o)||(n=o.set(e,n,r))!==undefined)try{a[t]="",a[t]=n}catch(f){}},css:function(e,t,n,r){var i,s,o,u=p.camelCase(t);return t=p.cssProps[u]||(p.cssProps[u]=$t(e.style,u)),o=p.cssHooks[t]||p.cssHooks[u],o&&"get"in o&&(s=o.get(e,!0,n)),s===undefined&&(s=Bt(e,t,r)),s==="normal"&&t in Xt&&(s=Xt[t]),n===""||n?(i=parseFloat(s),n===!0||p.isNumeric(i)?i||0:s):s}}),p.each(["height","width"],function(e,t){p.cssHooks[t]={get:function(e,n,r){if(n)return e.offsetWidth===0&&Rt.test(p.css(e,"display"))?p.swap(e,Wt,function(){return Gt(e,t,r)}):Gt(e,t,r)},set:function(e,n,r){var i=r&&Ht(e);return Kt(e,n,r?Qt(e,t,r,c.boxSizing()&&p.css(e,"boxSizing",!1,i)==="border-box",i):0)}}}),c.opacity||(p.cssHooks.opacity={get:function(e,t){return qt.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=p.isNumeric(t)?"alpha(opacity="+t*100+")":"",s=r&&r.filter||n.filter||"";n.zoom=1;if((t>=1||t==="")&&p.trim(s.replace(It,""))===""&&n.removeAttribute){n.removeAttribute("filter");if(t===""||r&&!r.filter)return}n.filter=It.test(s)?s.replace(It,i):s+" "+i}}),p.cssHooks.marginRight=Ft(c.reliableMarginRight,function(e,t){if(t)return p.swap(e,{display:"inline-block"},Bt,[e,"marginRight"])}),p.each({margin:"",padding:"",border:"Width"},function(e,t){p.cssHooks[e+t]={expand:function(n){var r=0,i={},s=typeof n=="string"?n.split(" "):[n];for(;r<4;r++)i[e+V[r]+t]=s[r]||s[r-2]||s[0];return i}},Dt.test(e)||(p.cssHooks[e+t].set=Kt)}),p.fn.extend({css:function(e,t){return J(this,function(e,t,n){var r,i,s={},o=0;if(p.isArray(t)){r=Ht(e),i=t.length;for(;o<i;o++)s[t[o]]=p.css(e,t[o],!1,r);return s}return n!==undefined?p.style(e,t,n):p.css(e,t)},e,t,arguments.length>1)},show:function(){return Jt(this,!0)},hide:function(){return Jt(this)},toggle:function(e){return typeof e=="boolean"?e?this.show():this.hide():this.each(function(){$(this)?p(this).show():p(this).hide()})}}),p.Tween=Yt,Yt.prototype={constructor:Yt,init:function(e,t,n,r,i,s){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=s||(p.cssNumber[n]?"":"px")},cur:function(){var e=Yt.propHooks[this.prop];return e&&e.get?e.get(this):Yt.propHooks._default.get(this)},run:function(e){var t,n=Yt.propHooks[this.prop];return this.options.duration?this.pos=t=p.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):Yt.propHooks._default.set(this),this}},Yt.prototype.init.prototype=Yt.prototype,Yt.propHooks={_default:{get:function(e){var t;return e.elem[e.prop]==null||!!e.elem.style&&e.elem.style[e.prop]!=null?(t=p.css(e.elem,e.prop,""),!t||t==="auto"?0:t):e.elem[e.prop]},set:function(e){p.fx.step[e.prop]?p.fx.step[e.prop](e):e.elem.style&&(e.elem.style[p.cssProps[e.prop]]!=null||p.cssHooks[e.prop])?p.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},Yt.propHooks.scrollTop=Yt.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},p.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},p.fx=Yt.prototype.init,p.fx.step={};var Zt,en,tn=/^(?:toggle|show|hide)$/,nn=new RegExp("^(?:([+-])=|)("+X+")([a-z%]*)$","i"),rn=/queueHooks$/,sn=[ln],on={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=nn.exec(t),s=i&&i[3]||(p.cssNumber[e]?"":"px"),o=(p.cssNumber[e]||s!=="px"&&+r)&&nn.exec(p.css(n.elem,e)),u=1,a=20;if(o&&o[3]!==s){s=s||o[3],i=i||[],o=+r||1;do u=u||".5",o/=u,p.style(n.elem,e,o+s);while(u!==(u=n.cur()/r)&&u!==1&&--a)}return i&&(o=n.start=+o||+r||0,n.unit=s,n.end=i[1]?o+(i[1]+1)*i[2]:+i[2]),n}]};p.Animation=p.extend(hn,{tweener:function(e,t){p.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");var n,r=0,i=e.length;for(;r<i;r++)n=e[r],on[n]=on[n]||[],on[n].unshift(t)},prefilter:function(e,t){t?sn.unshift(e):sn.push(e)}}),p.speed=function(e,t,n){var r=e&&typeof e=="object"?p.extend({},e):{complete:n||!n&&t||p.isFunction(e)&&e,duration:e,easing:n&&t||t&&!p.isFunction(t)&&t};r.duration=p.fx.off?0:typeof r.duration=="number"?r.duration:r.duration in p.fx.speeds?p.fx.speeds[r.duration]:p.fx.speeds._default;if(r.queue==null||r.queue===!0)r.queue="fx";return r.old=r.complete,r.complete=function(){p.isFunction(r.old)&&r.old.call(this),r.queue&&p.dequeue(this,r.queue)},r},p.fn.extend({fadeTo:function(e,t,n,r){return this.filter($).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=p.isEmptyObject(e),s=p.speed(t,n,r),o=function(){var t=hn(this,p.extend({},e),s);(i||p._data(this,"finish"))&&t.stop(!0)};return o.finish=o,i||s.queue===!1?this.each(o):this.queue(s.queue,o)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return typeof e!="string"&&(n=t,t=e,e=undefined),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=e!=null&&e+"queueHooks",s=p.timers,o=p._data(this);if(i)o[i]&&o[i].stop&&r(o[i]);else for(i in o)o[i]&&o[i].stop&&rn.test(i)&&r(o[i]);for(i=s.length;i--;)s[i].elem===this&&(e==null||s[i].queue===e)&&(s[i].anim.stop(n),t=!1,s.splice(i,1));(t||!n)&&p.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=p._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],s=p.timers,o=r?r.length:0;n.finish=!0,p.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0);for(t=s.length;t--;)s[t].elem===this&&s[t].queue===e&&(s[t].anim.stop(!0),s.splice(t,1));for(t=0;t<o;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),p.each(["toggle","show","hide"],function(e,t){var n=p.fn[t];p.fn[t]=function(e,r,i){return e==null||typeof e=="boolean"?n.apply(this,arguments):this.animate(an(t,!0),e,r,i)}}),p.each({slideDown:an("show"),slideUp:an("hide"),slideToggle:an("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){p.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),p.timers=[],p.fx.tick=function(){var e,t=p.timers,n=0;Zt=p.now();for(;n<t.length;n++)e=t[n],!e()&&t[n]===e&&t.splice(n--,1);t.length||p.fx.stop(),Zt=undefined},p.fx.timer=function(e){p.timers.push(e),e()?p.fx.start():p.timers.pop()},p.fx.interval=13,p.fx.start=function(){en||(en=setInterval(p.fx.tick,p.fx.interval))},p.fx.stop=function(){clearInterval(en),en=null},p.fx.speeds={slow:600,fast:200,_default:400},p.fn.delay=function(e,t){return e=p.fx?p.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i=N.createElement("div");i.setAttribute("className","t"),i.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",e=i.getElementsByTagName("a")[0],n=N.createElement("select"),r=n.appendChild(N.createElement("option")),t=i.getElementsByTagName("input")[0],e.style.cssText="top:1px",c.getSetAttribute=i.className!=="t",c.style=/top/.test(e.getAttribute("style")),c.hrefNormalized=e.getAttribute("href")==="/a",c.checkOn=!!t.value,c.optSelected=r.selected,c.enctype=!!N.createElement("form").enctype,n.disabled=!0,c.optDisabled=!r.disabled,t=N.createElement("input"),t.setAttribute("value",""),c.input=t.getAttribute("value")==="",t.value="t",t.setAttribute("type","radio"),c.radioValue=t.value==="t",e=t=n=r=i=null}();var pn=/\r/g;p.fn.extend({val:function(e){var t,n,r,i=this[0];if(!arguments.length){if(i)return t=p.valHooks[i.type]||p.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&(n=t.get(i,"value"))!==undefined?n:(n=i.value,typeof n=="string"?n.replace(pn,""):n==null?"":n);return}return r=p.isFunction(e),this.each(function(n){var i;if(this.nodeType!==1)return;r?i=e.call(this,n,p(this).val()):i=e,i==null?i="":typeof i=="number"?i+="":p.isArray(i)&&(i=p.map(i,function(e){return e==null?"":e+""})),t=p.valHooks[this.type]||p.valHooks[this.nodeName.toLowerCase()];if(!t||!("set"in t)||t.set(this,i,"value")===undefined)this.value=i})}}),p.extend({valHooks:{option:{get:function(e){var t=p.find.attr(e,"value");return t!=null?t:p.text(e)}},select:{get:function(e){var t,n,r=e.options,i=e.selectedIndex,s=e.type==="select-one"||i<0,o=s?null:[],u=s?i+1:r.length,a=i<0?u:s?i:0;for(;a<u;a++){n=r[a];if((n.selected||a===i)&&(c.optDisabled?!n.disabled:n.getAttribute("disabled")===null)&&(!n.parentNode.disabled||!p.nodeName(n.parentNode,"optgroup"))){t=p(n).val();if(s)return t;o.push(t)}}return o},set:function(e,t){var n,r,i=e.options,s=p.makeArray(t),o=i.length;while(o--){r=i[o];if(p.inArray(p.valHooks.option.get(r),s)>=0)try{r.selected=n=!0}catch(u){r.scrollHeight}else r.selected=!1}return n||(e.selectedIndex=-1),i}}}}),p.each(["radio","checkbox"],function(){p.valHooks[this]={set:function(e,t){if(p.isArray(t))return e.checked=p.inArray(p(e).val(),t)>=0}},c.checkOn||(p.valHooks[this].get=function(e){return e.getAttribute("value")===null?"on":e.value})});var dn,vn,mn=p.expr.attrHandle,gn=/^(?:checked|selected)$/i,yn=c.getSetAttribute,bn=c.input;p.fn.extend({attr:function(e,t){return J(this,p.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){p.removeAttr(this,e)})}}),p.extend({attr:function(e,t,n){var r,i,s=e.nodeType;if(!e||s===3||s===8||s===2)return;if(typeof e.getAttribute===j)return p.prop(e,t,n);if(s!==1||!p.isXMLDoc(e))t=t.toLowerCase(),r=p.attrHooks[t]||(p.expr.match.bool.test(t)?vn:dn);if(n===undefined)return r&&"get"in r&&(i=r.get(e,t))!==null?i:(i=p.find.attr(e,t),i==null?undefined:i);if(n!==null)return r&&"set"in r&&(i=r.set(e,n,t))!==undefined?i:(e.setAttribute(t,n+""),n);p.removeAttr(e,t)},removeAttr:function(e,t){var n,r,i=0,s=t&&t.match(M);if(s&&e.nodeType===1)while(n=s[i++])r=p.propFix[n]||n,p.expr.match.bool.test(n)?bn&&yn||!gn.test(n)?e[r]=!1:e[p.camelCase("default-"+n)]=e[r]=!1:p.attr(e,n,""),e.removeAttribute(yn?n:r)},attrHooks:{type:{set:function(e,t){if(!c.radioValue&&t==="radio"&&p.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),vn={set:function(e,t,n){return t===!1?p.removeAttr(e,n):bn&&yn||!gn.test(n)?e.setAttribute(!yn&&p.propFix[n]||n,n):e[p.camelCase("default-"+n)]=e[n]=!0,n}},p.each(p.expr.match.bool.source.match(/\w+/g),function(e,t){var n=mn[t]||p.find.attr;mn[t]=bn&&yn||!gn.test(t)?function(e,t,r){var i,s;return r||(s=mn[t],mn[t]=i,i=n(e,t,r)!=null?t.toLowerCase():null,mn[t]=s),i}:function(e,t,n){if(!n)return e[p.camelCase("default-"+t)]?t.toLowerCase():null}});if(!bn||!yn)p.attrHooks.value={set:function(e,t,n){if(!p.nodeName(e,"input"))return dn&&dn.set(e,t,n);e.defaultValue=t}};yn||(dn={set:function(e,t,n){var r=e.getAttributeNode(n);r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="";if(n==="value"||t===e.getAttribute(n))return t}},mn.id=mn.name=mn.coords=function(e,t,n){var r;if(!n)return(r=e.getAttributeNode(t))&&r.value!==""?r.value:null},p.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);if(n&&n.specified)return n.value},set:dn.set},p.attrHooks.contenteditable={set:function(e,t,n){dn.set(e,t===""?!1:t,n)}},p.each(["width","height"],function(e,t){p.attrHooks[t]={set:function(e,n){if(n==="")return e.setAttribute(t,"auto"),n}}})),c.style||(p.attrHooks.style={get:function(e){return e.style.cssText||undefined},set:function(e,t){return e.style.cssText=t+""}});var wn=/^(?:input|select|textarea|button|object)$/i,En=/^(?:a|area)$/i;p.fn.extend({prop:function(e,t){return J(this,p.prop,e,t,arguments.length>1)},removeProp:function(e){return e=p.propFix[e]||e,this.each(function(){try{this[e]=undefined,delete this[e]}catch(t){}})}}),p.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,s,o=e.nodeType;if(!e||o===3||o===8||o===2)return;return s=o!==1||!p.isXMLDoc(e),s&&(t=p.propFix[t]||t,i=p.propHooks[t]),n!==undefined?i&&"set"in i&&(r=i.set(e,n,t))!==undefined?r:e[t]=n:i&&"get"in i&&(r=i.get(e,t))!==null?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=p.find.attr(e,"tabindex");return t?parseInt(t,10):wn.test(e.nodeName)||En.test(e.nodeName)&&e.href?0:-1}}}}),c.hrefNormalized||p.each(["href","src"],function(e,t){p.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),c.optSelected||(p.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),p.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){p.propFix[this.toLowerCase()]=this}),c.enctype||(p.propFix.enctype="encoding");var Sn=/[\t\r\n\f]/g;p.fn.extend({addClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=typeof e=="string"&&e;if(p.isFunction(e))return this.each(function(t){p(this).addClass(e.call(this,t,this.className))});if(f){t=(e||"").match(M)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(Sn," "):" ");if(r){s=0;while(i=t[s++])r.indexOf(" "+i+" ")<0&&(r+=i+" ");o=p.trim(r),n.className!==o&&(n.className=o)}}}return this},removeClass:function(e){var t,n,r,i,s,o,u=0,a=this.length,f=arguments.length===0||typeof e=="string"&&e;if(p.isFunction(e))return this.each(function(t){p(this).removeClass(e.call(this,t,this.className))});if(f){t=(e||"").match(M)||[];for(;u<a;u++){n=this[u],r=n.nodeType===1&&(n.className?(" "+n.className+" ").replace(Sn," "):"");if(r){s=0;while(i=t[s++])while(r.indexOf(" "+i+" ")>=0)r=r.replace(" "+i+" "," ");o=e?p.trim(r):"",n.className!==o&&(n.className=o)}}}return this},toggleClass:function(e,t){var n=typeof e;return typeof t=="boolean"&&n==="string"?t?this.addClass(e):this.removeClass(e):p.isFunction(e)?this.each(function(n){p(this).toggleClass(e.call(this,n,this.className,t),t)}):this.each(function(){if(n==="string"){var t,r=0,i=p(this),s=e.match(M)||[];while(t=s[r++])i.hasClass(t)?i.removeClass(t):i.addClass(t)}else if(n===j||n==="boolean")this.className&&p._data(this,"__className__",this.className),this.className=this.className||e===!1?"":p._data(this,"__className__")||""})},hasClass:function(e){var t=" "+e+" ",n=0,r=this.length;for(;n<r;n++)if(this[n].nodeType===1&&(" "+this[n].className+" ").replace(Sn," ").indexOf(t)>=0)return!0;return!1}}),p.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){p.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),p.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return arguments.length===1?this.off(e,"**"):this.off(t,e||"**",n)}});var xn=p.now(),Tn=/\?/,Nn=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;p.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=p.trim(t+"");return i&&!p.trim(i.replace(Nn,function(e,t,i,s){return n&&t&&(r=0),r===0?e:(n=i||t,r+=!s-!i,"")}))?Function("return "+i)():p.error("Invalid JSON: "+t)},p.parseXML=function(t){var n,r;if(!t||typeof t!="string")return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(i){n=undefined}return(!n||!n.documentElement||n.getElementsByTagName("parsererror").length)&&p.error("Invalid XML: "+t),n};var Cn,kn,Ln=/#.*$/,An=/([?&])_=[^&]*/,On=/^(.*?):[ \t]*([^\r\n]*)\r?$/mg,Mn=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,_n=/^(?:GET|HEAD)$/,Dn=/^\/\//,Pn=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hn={},Bn={},jn="*/".concat("*");try{kn=location.href}catch(Fn){kn=N.createElement("a"),kn.href="",kn=kn.href}Cn=Pn.exec(kn.toLowerCase())||[],p.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:kn,type:"GET",isLocal:Mn.test(Cn[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":jn,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":p.parseJSON,"text xml":p.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?Rn(Rn(e,p.ajaxSettings),t):Rn(p.ajaxSettings,e)},ajaxPrefilter:In(Hn),ajaxTransport:In(Bn),ajax:function(e,t){function x(e,t,n,r){var f,g,y,w,S,x=t;if(b===2)return;b=2,o&&clearTimeout(o),a=undefined,s=r||"",E.readyState=e>0?4:0,f=e>=200&&e<300||e===304,n&&(w=Un(l,E,n)),w=zn(l,w,E,f);if(f)l.ifModified&&(S=E.getResponseHeader("Last-Modified"),S&&(p.lastModified[i]=S),S=E.getResponseHeader("etag"),S&&(p.etag[i]=S)),e===204||l.type==="HEAD"?x="nocontent":e===304?x="notmodified":(x=w.state,g=w.data,y=w.error,f=!y);else{y=x;if(e||!x)x="error",e<0&&(e=0)}E.status=e,E.statusText=(t||x)+"",f?d.resolveWith(c,[g,x,E]):d.rejectWith(c,[E,x,y]),E.statusCode(m),m=undefined,u&&h.trigger(f?"ajaxSuccess":"ajaxError",[E,l,f?g:y]),v.fireWith(c,[E,x]),u&&(h.trigger("ajaxComplete",[E,l]),--p.active||p.event.trigger("ajaxStop"))}typeof e=="object"&&(t=e,e=undefined),t=t||{};var n,r,i,s,o,u,a,f,l=p.ajaxSetup({},t),c=l.context||l,h=l.context&&(c.nodeType||c.jquery)?p(c):p.event,d=p.Deferred(),v=p.Callbacks("once memory"),m=l.statusCode||{},g={},y={},b=0,w="canceled",E={readyState:0,getResponseHeader:function(e){var t;if(b===2){if(!f){f={};while(t=On.exec(s))f[t[1].toLowerCase()]=t[2]}t=f[e.toLowerCase()]}return t==null?null:t},getAllResponseHeaders:function(){return b===2?s:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,g[e]=t),this},overrideMimeType:function(e){return b||(l.mimeType=e),this},statusCode:function(e){var t;if(e)if(b<2)for(t in e)m[t]=[m[t],e[t]];else E.always(e[E.status]);return this},abort:function(e){var t=e||w;return a&&a.abort(t),x(0,t),this}};d.promise(E).complete=v.add,E.success=E.done,E.error=E.fail,l.url=((e||l.url||kn)+"").replace(Ln,"").replace(Dn,Cn[1]+"//"),l.type=t.method||t.type||l.method||l.type,l.dataTypes=p.trim(l.dataType||"*").toLowerCase().match(M)||[""],l.crossDomain==null&&(n=Pn.exec(l.url.toLowerCase()),l.crossDomain=!(!n||n[1]===Cn[1]&&n[2]===Cn[2]&&(n[3]||(n[1]==="http:"?"80":"443"))===(Cn[3]||(Cn[1]==="http:"?"80":"443")))),l.data&&l.processData&&typeof l.data!="string"&&(l.data=p.param(l.data,l.traditional)),qn(Hn,l,t,E);if(b===2)return E;u=l.global,u&&p.active++===0&&p.event.trigger("ajaxStart"),l.type=l.type.toUpperCase(),l.hasContent=!_n.test(l.type),i=l.url,l.hasContent||(l.data&&(i=l.url+=(Tn.test(i)?"&":"?")+l.data,delete l.data),l.cache===!1&&(l.url=An.test(i)?i.replace(An,"$1_="+xn++):i+(Tn.test(i)?"&":"?")+"_="+xn++)),l.ifModified&&(p.lastModified[i]&&E.setRequestHeader("If-Modified-Since",p.lastModified[i]),p.etag[i]&&E.setRequestHeader("If-None-Match",p.etag[i])),(l.data&&l.hasContent&&l.contentType!==!1||t.contentType)&&E.setRequestHeader("Content-Type",l.contentType),E.setRequestHeader("Accept",l.dataTypes[0]&&l.accepts[l.dataTypes[0]]?l.accepts[l.dataTypes[0]]+(l.dataTypes[0]!=="*"?", "+jn+"; q=0.01":""):l.accepts["*"]);for(r in l.headers)E.setRequestHeader(r,l.headers[r]);if(!l.beforeSend||l.beforeSend.call(c,E,l)!==!1&&b!==2){w="abort";for(r in{success:1,error:1,complete:1})E[r](l[r]);a=qn(Bn,l,t,E);if(!a)x(-1,"No Transport");else{E.readyState=1,u&&h.trigger("ajaxSend",[E,l]),l.async&&l.timeout>0&&(o=setTimeout(function(){E.abort("timeout")},l.timeout));try{b=1,a.send(g,x)}catch(S){if(!(b<2))throw S;x(-1,S)}}return E}return E.abort()},getJSON:function(e,t,n){return p.get(e,t,n,"json")},getScript:function(e,t){return p.get(e,undefined,t,"script")}}),p.each(["get","post"],function(e,t){p[t]=function(e,n,r,i){return p.isFunction(n)&&(i=i||r,r=n,n=undefined),p.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),p.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){p.fn[t]=function(e){return this.on(t,e)}}),p._evalUrl=function(e){return p.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},p.fn.extend({wrapAll:function(e){if(p.isFunction(e))return this.each(function(t){p(this).wrapAll(e.call(this,t))});if(this[0]){var t=p(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){var e=this;while(e.firstChild&&e.firstChild.nodeType===1)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return p.isFunction(e)?this.each(function(t){p(this).wrapInner(e.call(this,t))}):this.each(function(){var t=p(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=p.isFunction(e);return this.each(function(n){p(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){p.nodeName(this,"body")||p(this).replaceWith(this.childNodes)}).end()}}),p.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!c.reliableHiddenOffsets()&&(e.style&&e.style.display||p.css(e,"display"))==="none"},p.expr.filters.visible=function(e){return!p.expr.filters.hidden(e)};var Wn=/%20/g,Xn=/\[\]$/,Vn=/\r?\n/g,$n=/^(?:submit|button|image|reset|file)$/i,Jn=/^(?:input|select|textarea|keygen)/i;p.param=function(e,t){var n,r=[],i=function(e,t){t=p.isFunction(t)?t():t==null?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};t===undefined&&(t=p.ajaxSettings&&p.ajaxSettings.traditional);if(p.isArray(e)||e.jquery&&!p.isPlainObject(e))p.each(e,function(){i(this.name,this.value)});else for(n in e)Kn(n,e[n],t,i);return r.join("&").replace(Wn,"+")},p.fn.extend({serialize:function(){return p.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=p.prop(this,"elements");return e?p.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!p(this).is(":disabled")&&Jn.test(this.nodeName)&&!$n.test(e)&&(this.checked||!K.test(e))}).map(function(e,t){var n=p(this).val();return n==null?null:p.isArray(n)?p.map(n,function(e){return{name:t.name,value:e.replace(Vn,"\r\n")}}):{name:t.name,value:n.replace(Vn,"\r\n")}}).get()}}),p.ajaxSettings.xhr=e.ActiveXObject!==undefined?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zn()||er()}:Zn;var Qn=0,Gn={},Yn=p.ajaxSettings.xhr();e.ActiveXObject&&p(e).on("unload",function(){for(var e in Gn)Gn[e](undefined,!0)}),c.cors=!!Yn&&"withCredentials"in Yn,Yn=c.ajax=!!Yn,Yn&&p.ajaxTransport(function(e){if(!e.crossDomain||c.cors){var t;return{send:function(n,r){var i,s=e.xhr(),o=++Qn;s.open(e.type,e.url,e.async,e.username,e.password);if(e.xhrFields)for(i in e.xhrFields)s[i]=e.xhrFields[i];e.mimeType&&s.overrideMimeType&&s.overrideMimeType(e.mimeType),!e.crossDomain&&!n["X-Requested-With"]&&(n["X-Requested-With"]="XMLHttpRequest");for(i in n)n[i]!==undefined&&s.setRequestHeader(i,n[i]+"");s.send(e.hasContent&&e.data||null),t=function(n,i){var u,a,f;if(t&&(i||s.readyState===4)){delete Gn[o],t=undefined,s.onreadystatechange=p.noop;if(i)s.readyState!==4&&s.abort();else{f={},u=s.status,typeof s.responseText=="string"&&(f.text=s.responseText);try{a=s.statusText}catch(l){a=""}!u&&e.isLocal&&!e.crossDomain?u=f.text?200:404:u===1223&&(u=204)}}f&&r(u,a,f,s.getAllResponseHeaders())},e.async?s.readyState===4?setTimeout(t):s.onreadystatechange=Gn[o]=t:t()},abort:function(){t&&t(undefined,!0)}}}}),p.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return p.globalEval(e),e}}}),p.ajaxPrefilter("script",function(e){e.cache===undefined&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),p.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=N.head||p("head")[0]||N.documentElement;return{send:function(r,i){t=N.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){if(n||!t.readyState||/loaded|complete/.test(t.readyState))t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success")},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(undefined,!0)}}}});var tr=[],nr=/(=)\?(?=&|$)|\?\?/;p.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=tr.pop()||p.expando+"_"+xn++;return this[e]=!0,e}}),p.ajaxPrefilter("json jsonp",function(t,n,r){var i,s,o,u=t.jsonp!==!1&&(nr.test(t.url)?"url":typeof t.data=="string"&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&nr.test(t.data)&&"data");if(u||t.dataTypes[0]==="jsonp")return i=t.jsonpCallback=p.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,u?t[u]=t[u].replace(nr,"$1"+i):t.jsonp!==!1&&(t.url+=(Tn.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return o||p.error(i+" was not called"),o[0]},t.dataTypes[0]="json",s=e[i],e[i]=function(){o=arguments},r.always(function(){e[i]=s,t[i]&&(t.jsonpCallback=n.jsonpCallback,tr.push(i)),o&&p.isFunction(s)&&s(o[0]),o=s=undefined}),"script"}),p.parseHTML=function(e,t,n){if(!e||typeof e!="string")return null;typeof t=="boolean"&&(n=t,t=!1),t=t||N;var r=E.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=p.buildFragment([e],t,i),i&&i.length&&p(i).remove(),p.merge([],r.childNodes))};var rr=p.fn.load;p.fn.load=function(e,t,n){if(typeof e!="string"&&rr)return rr.apply(this,arguments);var r,i,s,o=this,u=e.indexOf(" ");return u>=0&&(r=e.slice(u,e.length),e=e.slice(0,u)),p.isFunction(t)?(n=t,t=undefined):t&&typeof t=="object"&&(s="POST"),o.length>0&&p.ajax({url:e,type:s,dataType:"html",data:t}).done(function(e){i=arguments,o.html(r?p("<div>").append(p.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){o.each(n,i||[e.responseText,t,e])}),this},p.expr.filters.animated=function(e){return p.grep(p.timers,function(t){return e===t.elem}).length};var ir=e.document.documentElement;p.offset={setOffset:function(e,t,n){var r,i,s,o,u,a,f,l=p.css(e,"position"),c=p(e),h={};l==="static"&&(e.style.position="relative"),u=c.offset(),s=p.css(e,"top"),a=p.css(e,"left"),f=(l==="absolute"||l==="fixed")&&p.inArray("auto",[s,a])>-1,f?(r=c.position(),o=r.top,i=r.left):(o=parseFloat(s)||0,i=parseFloat(a)||0),p.isFunction(t)&&(t=t.call(e,n,u)),t.top!=null&&(h.top=t.top-u.top+o),t.left!=null&&(h.left=t.left-u.left+i),"using"in t?t.using.call(e,h):c.css(h)}},p.fn.extend({offset:function(e){if(arguments.length)return e===undefined?this:this.each(function(t){p.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],s=i&&i.ownerDocument;if(!s)return;return t=s.documentElement,p.contains(t,i)?(typeof i.getBoundingClientRect!==j&&(r=i.getBoundingClientRect()),n=sr(s),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r},position:function(){if(!this[0])return;var e,t,n={top:0,left:0},r=this[0];return p.css(r,"position")==="fixed"?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),p.nodeName(e[0],"html")||(n=e.offset()),n.top+=p.css(e[0],"borderTopWidth",!0),n.left+=p.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-p.css(r,"marginTop",!0),left:t.left-n.left-p.css(r,"marginLeft",!0)}},offsetParent:function(){return this.map(function(){var e=this.offsetParent||ir;while(e&&!p.nodeName(e,"html")&&p.css(e,"position")==="static")e=e.offsetParent;return e||ir})}}),p.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);p.fn[e]=function(r){return J(this,function(e,r,i){var s=sr(e);if(i===undefined)return s?t in s?s[t]:s.document.documentElement[r]:e[r];s?s.scrollTo(n?p(s).scrollLeft():i,n?i:p(s).scrollTop()):e[r]=i},e,r,arguments.length,null)}}),p.each(["top","left"],function(e,t){p.cssHooks[t]=Ft(c.pixelPosition,function(e,n){if(n)return n=Bt(e,t),Pt.test(n)?p(e).position()[t]+"px":n})}),p.each({Height:"height",Width:"width"},function(e,t){p.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){p.fn[r]=function(r,i){var s=arguments.length&&(n||typeof r!="boolean"),o=n||(r===!0||i===!0?"margin":"border");return J(this,function(t,n,r){var i;return p.isWindow(t)?t.document.documentElement["client"+e]:t.nodeType===9?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):r===undefined?p.css(t,n,o):p.style(t,n,r,o)},t,s?r:undefined,s,null)}})}),p.fn.size=function(){return this.length},p.fn.andSelf=p.fn.addBack,typeof define=="function"&&define.amd&&define("jquery",[],function(){return p});var or=e.jQuery,ur=e.$;return p.noConflict=function(t){return e.$===p&&(e.$=ur),t&&e.jQuery===p&&(e.jQuery=or),p},typeof t===j&&(e.jQuery=e.$=p),p}),function(e,t){e.rails!==t&&e.error("jquery-ujs has already been loaded!");var n,r=e(document);e.rails=n={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with]",buttonClickSelector:"button[data-remote]",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type])",disableSelector:"input[data-disable-with], button[data-disable-with], textarea[data-disable-with]",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with]",CSRFProtection:function(t){var n=e('meta[name="csrf-token"]').attr("content");n&&t.setRequestHeader("X-CSRF-Token",n)},refreshCSRFTokens:function(){var t=e("meta[name=csrf-token]").attr("content"),n=e("meta[name=csrf-param]").attr
("content");e('form input[name="'+n+'"]').val(t)},fire:function(t,n,r){var i=e.Event(n);return t.trigger(i,r),i.result!==!1},confirm:function(e){return confirm(e)},ajax:function(t){return e.ajax(t)},href:function(e){return e.attr("href")},handleRemote:function(r){var i,s,o,u,a,f,l,c;if(n.fire(r,"ajax:before")){u=r.data("cross-domain"),a=u===t?null:u,f=r.data("with-credentials")||null,l=r.data("type")||e.ajaxSettings&&e.ajaxSettings.dataType;if(r.is("form")){i=r.attr("method"),s=r.attr("action"),o=r.serializeArray();var h=r.data("ujs:submit-button");h&&(o.push(h),r.data("ujs:submit-button",null))}else r.is(n.inputChangeSelector)?(i=r.data("method"),s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):r.is(n.buttonClickSelector)?(i=r.data("method")||"get",s=r.data("url"),o=r.serialize(),r.data("params")&&(o=o+"&"+r.data("params"))):(i=r.data("method"),s=n.href(r),o=r.data("params")||null);c={type:i||"GET",data:o,dataType:l,beforeSend:function(e,i){return i.dataType===t&&e.setRequestHeader("accept","*/*;q=0.5, "+i.accepts.script),n.fire(r,"ajax:beforeSend",[e,i])},success:function(e,t,n){r.trigger("ajax:success",[e,t,n])},complete:function(e,t){r.trigger("ajax:complete",[e,t])},error:function(e,t,n){r.trigger("ajax:error",[e,t,n])},crossDomain:a},f&&(c.xhrFields={withCredentials:f}),s&&(c.url=s);var p=n.ajax(c);return r.trigger("ajax:send",p),p}return!1},handleMethod:function(r){var i=n.href(r),s=r.data("method"),o=r.attr("target"),u=e("meta[name=csrf-token]").attr("content"),a=e("meta[name=csrf-param]").attr("content"),f=e('<form method="post" action="'+i+'"></form>'),l='<input name="_method" value="'+s+'" type="hidden" />';a!==t&&u!==t&&(l+='<input name="'+a+'" value="'+u+'" type="hidden" />'),o&&f.attr("target",o),f.hide().append(l).appendTo("body"),f.submit()},disableFormElements:function(t){t.find(n.disableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with",t[n]()),t[n](t.data("disable-with")),t.prop("disabled",!0)})},enableFormElements:function(t){t.find(n.enableSelector).each(function(){var t=e(this),n=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[n](t.data("ujs:enable-with")),t.prop("disabled",!1)})},allowAction:function(e){var t=e.data("confirm"),r=!1,i;return t?(n.fire(e,"confirm")&&(r=n.confirm(t),i=n.fire(e,"confirm:complete",[r])),r&&i):!0},blankInputs:function(t,n,r){var i=e(),s,o,u=n||"input,textarea",a=t.find(u);return a.each(function(){s=e(this),o=s.is("input[type=checkbox],input[type=radio]")?s.is(":checked"):s.val();if(!o==!r){if(s.is("input[type=radio]")&&a.filter('input[type=radio]:checked[name="'+s.attr("name")+'"]').length)return!0;i=i.add(s)}}),i.length?i:!1},nonBlankInputs:function(e,t){return n.blankInputs(e,t,!0)},stopEverything:function(t){return e(t.target).trigger("ujs:everythingStopped"),t.stopImmediatePropagation(),!1},disableElement:function(e){e.data("ujs:enable-with",e.html()),e.html(e.data("disable-with")),e.bind("click.railsDisable",function(e){return n.stopEverything(e)})},enableElement:function(e){e.data("ujs:enable-with")!==t&&(e.html(e.data("ujs:enable-with")),e.removeData("ujs:enable-with")),e.unbind("click.railsDisable")}},n.fire(r,"rails:attachBindings")&&(e.ajaxPrefilter(function(e,t,r){e.crossDomain||n.CSRFProtection(r)}),r.delegate(n.linkDisableSelector,"ajax:complete",function(){n.enableElement(e(this))}),r.delegate(n.linkClickSelector,"click.rails",function(r){var i=e(this),s=i.data("method"),o=i.data("params"),u=r.metaKey||r.ctrlKey;if(!n.allowAction(i))return n.stopEverything(r);!u&&i.is(n.linkDisableSelector)&&n.disableElement(i);if(i.data("remote")!==t){if(u&&(!s||s==="GET")&&!o)return!0;var a=n.handleRemote(i);return a===!1?n.enableElement(i):a.error(function(){n.enableElement(i)}),!1}if(i.data("method"))return n.handleMethod(i),!1}),r.delegate(n.buttonClickSelector,"click.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.inputChangeSelector,"change.rails",function(t){var r=e(this);return n.allowAction(r)?(n.handleRemote(r),!1):n.stopEverything(t)}),r.delegate(n.formSubmitSelector,"submit.rails",function(r){var i=e(this),s=i.data("remote")!==t,o=n.blankInputs(i,n.requiredInputSelector),u=n.nonBlankInputs(i,n.fileInputSelector);if(!n.allowAction(i))return n.stopEverything(r);if(o&&i.attr("novalidate")==t&&n.fire(i,"ajax:aborted:required",[o]))return n.stopEverything(r);if(s){if(u){setTimeout(function(){n.disableFormElements(i)},13);var a=n.fire(i,"ajax:aborted:file",[u]);return a||setTimeout(function(){n.enableFormElements(i)},13),a}return n.handleRemote(i),!1}setTimeout(function(){n.disableFormElements(i)},13)}),r.delegate(n.formInputClickSelector,"click.rails",function(t){var r=e(this);if(!n.allowAction(r))return n.stopEverything(t);var i=r.attr("name"),s=i?{name:i,value:r.val()}:null;r.closest("form").data("ujs:submit-button",s)}),r.delegate(n.formSubmitSelector,"ajax:beforeSend.rails",function(t){this==t.target&&n.disableFormElements(e(this))}),r.delegate(n.formSubmitSelector,"ajax:complete.rails",function(t){this==t.target&&n.enableFormElements(e(this))}),e(function(){n.refreshCSRFTokens()}))}(jQuery),function(e){typeof define=="function"&&define.amd?define(e):window.purl=e()}(function(){function s(e,n){var i=decodeURI(e),s=r[n||!1?"strict":"loose"].exec(i),o={attr:{},param:{},seg:{}},u=14;while(u--)o.attr[t[u]]=s[u]||"";return o.param.query=l(o.attr.query),o.param.fragment=l(o.attr.fragment),o.seg.path=o.attr.path.replace(/^\/+|\/+$/g,"").split("/"),o.seg.fragment=o.attr.fragment.replace(/^\/+|\/+$/g,"").split("/"),o.attr.base=o.attr.host?(o.attr.protocol?o.attr.protocol+"://"+o.attr.host:o.attr.host)+(o.attr.port?":"+o.attr.port:""):"",o}function o(t){var n=t.tagName;return typeof n!="undefined"?e[n.toLowerCase()]:n}function u(e,t){if(e[t].length===0)return e[t]={};var n={};for(var r in e[t])n[r]=e[t][r];return e[t]=n,n}function a(e,t,n,r){var s=e.shift();if(!s)d(t[n])?t[n].push(r):"object"==typeof t[n]?t[n]=r:"undefined"==typeof t[n]?t[n]=r:t[n]=[t[n],r];else{var o=t[n]=t[n]||[];"]"==s?d(o)?""!==r&&o.push(r):"object"==typeof o?o[v(o).length]=r:o=t[n]=[t[n],r]:~s.indexOf("]")?(s=s.substr(0,s.length-1),!i.test(s)&&d(o)&&(o=u(t,n)),a(e,o,s,r)):(!i.test(s)&&d(o)&&(o=u(t,n)),a(e,o,s,r))}}function f(e,t,n){if(~t.indexOf("]")){var r=t.split("[");a(r,e,"base",n)}else{if(!i.test(t)&&d(e.base)){var s={};for(var o in e.base)s[o]=e.base[o];e.base=s}t!==""&&c(e.base,t,n)}return e}function l(e){return p(String(e).split(/&|;/),function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(n){}var r=t.indexOf("="),i=h(t),s=t.substr(0,i||r),o=t.substr(i||r,t.length);return o=o.substr(o.indexOf("=")+1,o.length),s===""&&(s=t,o=""),f(e,s,o)},{base:{}}).base}function c(e,t,n){var r=e[t];typeof r=="undefined"?e[t]=n:d(r)?r.push(n):e[t]=[r,n]}function h(e){var t=e.length,n,r;for(var i=0;i<t;++i){r=e[i],"]"==r&&(n=!1),"["==r&&(n=!0);if("="==r&&!n)return i}}function p(e,t){var n=0,r=e.length>>0,i=arguments[2];while(n<r)n in e&&(i=t.call(undefined,i,e[n],n,e)),++n;return i}function d(e){return Object.prototype.toString.call(e)==="[object Array]"}function v(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t}function m(e,t){return arguments.length===1&&e===!0&&(t=!0,e=undefined),t=t||!1,e=e||window.location.toString(),{data:s(e,t),attr:function(e){return e=n[e]||e,typeof e!="undefined"?this.data.attr[e]:this.data.attr},param:function(e){return typeof e!="undefined"?this.data.param.query[e]:this.data.param.query},fparam:function(e){return typeof e!="undefined"?this.data.param.fragment[e]:this.data.param.fragment},segment:function(e){return typeof e=="undefined"?this.data.seg.path:(e=e<0?this.data.seg.path.length+e:e-1,this.data.seg.path[e])},fsegment:function(e){return typeof e=="undefined"?this.data.seg.fragment:(e=e<0?this.data.seg.fragment.length+e:e-1,this.data.seg.fragment[e])}}}var e={a:"href",img:"src",form:"action",base:"href",script:"src",iframe:"src",link:"href",embed:"src",object:"data"},t=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","fragment"],n={anchor:"fragment"},r={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/},i=/^[0-9]+$/;return m.jQuery=function(e){e!=null&&(e.fn.url=function(t){var n="";return this.length&&(n=e(this).attr(o(this[0]))||""),m(n,t)},e.url=m)},m.jQuery(window.jQuery),m}),function(e){function t(t,r,i){i=c(r,i);var s=t.currentTarget;if(s.tagName.toUpperCase()!=="FORM")throw"$.pjax.submit requires a form element";var o={type:s.method,url:s.action,data:e(s).serializeArray(),container:e(s).attr("data-pjax"),target:s,fragment:null,timeout:0};n(e.extend({},o,i)),t.preventDefault()}function n(t){function c(t,n){var r=e.Event(t,{relatedTarget:i});return u.trigger(r,n),!r.isDefaultPrevented()}t=e.extend(!0,{},e.ajaxSettings,n.defaults,t),e.isFunction(t.url)&&(t.url=t.url()),t.pjax=!0;var i=t.target,o=l(t.url).hash,u=t.context=e("body");t.data||(t.data={});var h;t.beforeSend=function(e,n){n.type!=="GET"&&(n.timeout=0),n.timeout>0&&(h=setTimeout(function(){c("pjax:timeout",[e,t])&&e.abort("timeout")},n.timeout),n.timeout=0),e.setRequestHeader("X-PJAX","true"),e.setRequestHeader("X-PJAX-Container",u.selector);var r;if(!c("pjax:beforeSend",[e,n]))return!1;t.requestUrl=l(n.url).href,n.keeps&&(t.keeps=n.keeps)};var d=t.complete;t.complete=function(e,n){h&&clearTimeout(h),d&&d(e,n),c("pjax:complete",[e,n,t]),c("pjax:end",[e,t])};var v=t.error;t.error=function(r,i,o){var u=p("",r,t);v&&v(r,i,o);var a=c("pjax:error",[r,i,o,t]);if(t.type=="GET"&&i!=="abort"&&a)s(u.url);else if(r.status==500||r.status==404||r.status==422)e("html").html(r.responseText),t.push&&window.history.replaceState(n.state,e("title").html(),u.url)};var m=t.success;t.success=function(i,f,h){m&&m(i,f,h);var d=p(i,h,t);if(!d.contents){s(t.url);return}t.keeps&&(d.contents=d.contents.add(e(t.keeps))),r(t.delayedRendering,d,function(r){n.state={id:t.id||a(),url:r.url,title:r.title,container:u.selector,fragment:t.fragment,timeout:t.timeout},(t.push||t.replace||h.getResponseHeader("X-PJAX-NEXT-URL"))&&window.history.replaceState(n.state,r.title,r.url),r.title&&(document.title=r.title),u.html(r.contents),typeof t.scrollTo=="number"?e(window).scrollTop(t.scrollTo):t.scrollTo&&e(window).scrollTop(0),(t.replace||t.push)&&window._gaq&&_gaq.push(["_trackPageview"]);if(o!==""){var s=l(r.url);s.hash=o,n.state.url=s.href,window.history.replaceState(n.state,r.title,s.href);var p=e(s.hash);p.length&&e(window).scrollTop(p.offset().top)}t.rendered&&t.rendered(r),c("pjax:success",[i,f,h,t])})},n.state||(n.state={id:a(),url:window.location.href,title:document.title,container:u.selector,fragment:t.fragment,timeout:t.timeout},window.history.replaceState(n.state,document.title));var y=n.xhr;y&&y.readyState<4&&(y.onreadystatechange=e.noop,y.abort()),t.url=t.url||window.location.href;if(t.data){var b=[];e.each(t.data,function(e,t){b.push(e)}),t.url=f(t.url)}n.options=t;var y=n.xhr=e.ajax(t);return y.readyState>0&&(t.push&&!t.replace&&(g(n.state.id,u.clone().contents()),window.history.pushState(null,"",f(t.requestUrl))),c("pjax:start",[y,t]),c("pjax:send",[y,t])),n.xhr}function r(t,n,r){t?(e("body").append(n.contents.filter("link, script, .pjax-preload")),e.pjax.render=function(){n.contents=n.contents.not("script"),r(n),e.pjax.render=function(){}}):r(n)}function i(t,r){var i={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return n(e.extend(i,c(t,r)))}function s(e){e.endsWith("#")&&(e=e.replace("#","")),setTimeout(function(){window.location.href=e},0)}function o(t){var r=t.state;if(r){if(r.container){var i=e(r.container);if(i.length){var s=d[r.id];if(n.state){var o=n.state.id<r.id?"forward":"back";y(o,n.state.id,i.clone().contents())}if(s){n({id:r.id,url:r.url,container:i,push:!1,fragment:r.fragment,timeout:r.timeout,scrollTo:!1}),i[0].offsetHeight,log("pjax history loaded");return}}}location.href=location.href}else log("no pushstate"),document.body.className||(location.href=location.href)}function u(t){var n=e.isFunction(t.url)?t.url():t.url,r=t.type?t.type.toUpperCase():"GET",i=e("<form>",{method:r==="GET"?"GET":"POST",action:n,style:"display:none"});r!=="GET"&&r!=="POST"&&i.append(e("<input>",{type:"hidden",name:"_method",value:r.toLowerCase()}));var s=t.data;if(typeof s=="string")e.each(s.split("&"),function(t,n){var r=n.split("=");i.append(e("<input>",{type:"hidden",name:r[0],value:r[1]}))});else if(typeof s=="object")for(key in s)i.append(e("<input>",{type:"hidden",name:key,value:s[key]}));e(document.body).append(i),i.submit()}function a(){return(new Date).getTime()}function f(t,n){n=n||[],n.push("_pjax");var r=t.split("#"),i=r.length>1?"#"+r[1]:"";r=r[0].split("?");var s=r[0],o=r.length>1?r[1]:"";if(o){var u=purl(t).param();n.forEach(function(e){delete u[e]}),o="?"+e.param(u)}return s+o+i}function l(e){var t=document.createElement("a");return t.href=e,t}function c(t,n){return t&&n?n.container=t:e.isPlainObject(t)?n=t:n={container:t},n.container&&(n.container=e("body")),n}function h(e,t){return e.filter(t).add(e.find(t))}function p(t,n,r){var i={};i.url=f(n.getResponseHeader("X-PJAX-NEXT-URL")||n.getResponseHeader("X-PJAX-URL")||r.requestUrl);if(/<html/i.test(t))var s=e(t.match(/<head[^>]*>([\s\S.]*)<\/head>/i)[0]),o=e(t.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]);else var s=o=e(t);if(o.length===0)return i;i.title=h(s,"title").last().text();if(r.fragment){if(r.fragment==="body")var u=o;else var u=h(o,r.fragment).first();u.length&&(i.contents=u.contents(),i.title||(i.title=u.attr("title")||u.data("title")))}else/<html/i.test(t)||(i.contents=o);return i.contents&&(i.contents=i.contents.not("title"),i.contents.find("title").remove()),i.title&&(i.title=e.trim(i.title)),i}function g(e,t){d[e]=t,m.push(e);while(v.length)delete d[v.shift()];while(m.length>n.defaults.maxCacheLength)delete d[m.shift()]}function y(e,t,n){var r,i;d[t]=n,e==="forward"?(r=m,i=v):(r=v,i=m),r.push(t),(t=i.pop())&&delete d[t]}function b(){e.pjax=n,e.pjax.enable=e.noop,e.pjax.disable=w,e.pjax.submit=t,e.pjax.reload=i,e.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,delayedRendering:!1},e.pjax.render=function(){},e(window).bind("popstate.pjax",o)}function w(){e.fn.pjax=function(){return this},e.pjax=u,e.pjax.enable=b,e.pjax.disable=e.noop,e.pjax.submit=e.noop,e.pjax.reload=function(){window.location.reload()},e.pjax.render=function(){},e(window).unbind("popstate.pjax",o)}var d={},v=[],m=[];e.inArray("state",e.event.props)<0&&e.event.props.push("state"),e.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]|WebApps\/.+CFNetwork)/),e.support.pjax?b():w()}(jQuery),function(){function w(e){var n,r;return/String|Number|Boolean/.test(e)&&(n=e.toLowerCase()),r=e==="Array"&&t.isArray||function(t){return n&&typeof t===n?!0:E(t)==="[object "+e+"]"},l[e]=r,r}function E(e){return a.call(e)}function S(){x(e),j(h,function(e,t){x(f[t])})}function x(e){if(e.SugarMethods)return;L(e,"SugarMethods",{}),T(e,!1,!1,{extend:function(t,n,r){T(e,r!==!1,n,t)},sugarRestore:function(){return C(e,arguments,function(e,t,n){L(e,t,n.method)})},sugarRevert:function(){return C(e,arguments,function(e,t,n){n.existed?L(e,t,n.original):delete e[t]})}})}function T(e,t,n,r){var i=t?e.prototype:e;x(e),j(r,function(r,s){var o=i[r],u=B(i,r);typeof n=="function"&&(s=k(i[r],s,n)),(n!==!1||!i[r])&&L(i,r,s),e.SugarMethods[r]={instance:t,method:s,original:o,existed:u}})}function N(e,t,n,r,i){var s={};r=y(r)?r.split(","):r,r.forEach(function(e,t){i(s,e,t)}),T(e,t,n,s)}function C(e,t,n){var r=t.length===0,i=A(t),s=!1;return j(e.SugarMethods,function(t,o){if(r||i.indexOf(t)>-1)s=!0,n(o.instance?e.prototype:e,t,o)}),s}function k(e,t,n){return function(){var r;return e&&(n===!0||!n.apply(this,arguments))?r=e:r=t,r.apply(this,arguments)}}function L(t,n,r){c?e.defineProperty(t,n,{value:r,configurable:!0,enumerable:!1,writable:!0}):t[n]=r}function A(e,t){var n=[],r,i;for(r=0,i=e.length;r<i;r++)n.push(e[r]),t&&t.call(e,e[r],r);return n}function O(e,n,r){A(t.prototype.concat.apply([],t.prototype.slice.call(e,r||0)),n)}function M(e){if(!e||!e.call)throw new TypeError("Callback is not callable")}function _(e){return e!==u}function D(e){return e===u}function P(e){return e&&typeof e=="object"}function H(e){return!!e&&E(e)==="[object Object]"&&"hasOwnProperty"in e}function B(t,n){return e.hasOwnProperty.call(t,n)}function j(e,t){var n;for(n in e){if(!B(e,n))continue;if(t.call(e,n,e[n],e)===!1)break}}function F(e,t){return j(t,function(n){e[n]=t[n]}),e}function I(e){F(this,e)}function q(e,t,n,r){var i=[],s=parseInt(e),o=r<0;while(!o&&s<=t||o&&s>=t)i.push(s),n&&n.call(this,s),s+=r||1;return i}function R(e,t,n){var r=o[n||"round"],i=o.pow(10,o.abs(t||0));return t<0&&(i=1/i),r(e*i)/i}function U(e,t){return R(e,t,"ceil")}function z(e,t){return R(e,t,"floor")}function W(e,t,n,r){var i=o.abs(e).toString(r||10);i=$(t-i.replace(/\.\d+/,"").length,"0")+i;if(n||e<0)i=(e<0?"-":"+")+i;return i}function X(e){if(e>=11&&e<=13)return"th";switch(e%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}}function V(){return"	\n\f\r   ᠎             \u2028\u2029　﻿"}function $(e,n){return t(o.max(0,_(e)?e:1)+1).join(n||"")}function J(e,t){var n=e.toString().match(/[^/]*$/)[0];return t&&(n=(n+t).split("").sort().join("").replace(/([gimy])\1+/g,"$1")),n}function K(e){return y(e)||(e=i(e)),e.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")}function Q(t,n){var r=typeof t,s,o,u,f,l,c,h,p;if(r==="string")return t;u=a.call(t),s=H(t),o=u==="[object Array]";if(t!=null&&s||o){n||(n=[]);if(n.length>1){h=n.length;while(h--)if(n[h]===t)return"CYC"}n.push(t),f=i(t.constructor),l=o?t:e.keys(t).sort();for(h=0,p=l.length;h<p;h++)c=o?h:l[h],f+=c+Q(t[c],n);n.pop()}else 1/t===-Infinity?f="-0":f=i(t&&t.valueOf?t.valueOf():t);return r+u+f}function G(e,t){return Y(e)&&Y(t)?Q(e)===Q(t):e===t}function Y(e){var t=E(e);return/^\[object Date|Array|String|Number|RegExp|Boolean|Arguments\]$/.test(t)||H(e)}function Z(e,t,n){var r=[],i=e.length,s=t[t.length-1]!==!1,o;return A(t,function(t){if(d(t))return!1;s&&(t%=i,t<0&&(t=i+t)),o=n?e.charAt(t)||"":e[t],r.push(o)}),r.length<2?r[0]:r}function et(t,n){N(n,!0,!1,t,function(t,n){t[n+(n==="equal"?"s":"")]=function(){return e[n].apply(null,[this].concat(A(arguments)))}})}function tt(e,t,r,i){var s=!0;return e===t?!0:b(t)&&y(e)?n(t).test(e):m(t)?t.apply(r,i):H(t)&&P(e)?(j(t,function(n,i){tt(e[n],t[n],r,[e[n],e])||(s=!1)}),s):G(e,t)}function nt(e,t,n,r){return D(t)?e:m(t)?t.apply(n,r||[]):m(e[t])?e[t].call(e):e[t]}function rt(e,t,n,r){var i,s,o;n<0&&(n=e.length+n),o=isNaN(n)?0:n,i=r===!0?e.length+o:e.length;while(o<i){s=o%e.length;if(!(s in e))return it(e,t,o,r);if(t.call(e,e[s],s,e)===!1)break;o++}}function it(e,t,n,r){var i=[],s;for(s in e)st(e,s)&&s>=n&&i.push(parseInt(s));return i.sort().each(function(n){return t.call(e,e[n],n,e)}),e}function st(e,t){return t in e&&ot(t)==t&&t!=4294967295}function ot(e){return e>>>0}function ut(e,t,n,r,i){var s,o;return rt(e,function(e,n,r){if(tt(e,t,r,[e,n,r]))return s=e,o=n,!1},n,r),i?o:s}function at(e,t){var n=[],r={},i;return rt(e,function(s,o){i=t?nt(s,t,e,[s,o,e]):s,pt(r,i)||n.push(s)}),n}function ft(e,t,n){var r=[],i={};return t.each(function(e){pt(i,e)}),e.each(function(e){var t=Q(e),s=!Y(e);ht(i,t,e,s)!=n&&(dt(i,t,e,s),r.push(e))}),r}function lt(e,t,n){t=t||Infinity,n=n||0;var r=[];return rt(e,function(e){p(e)&&n<t?r=r.concat(lt(e,t,n+1)):r.push(e)}),r}function ct(e){var t=[];return A(e,function(e){t=t.concat(e)}),t}function ht(e,t,n,r){var i=t in e;return r&&(e[t]||(e[t]=[]),i=e[t].indexOf(n)!==-1),i}function pt(e,t){var n=Q(t),r=!Y(t),i=ht(e,n,t,r);return r?e[n].push(t):e[n]=t,i}function dt(e,t,n,r){var i,s=0;if(r){i=e[t];while(s<i.length)i[s]===n?i.splice(s,1):s+=1}else delete e[t]}function vt(e,t,n,r){var i,s=[],o=n==="max",u=n==="min",a=Array.isArray(e);return j(e,function(n){var r=e[n],f=nt(r,t,e,a?[r,parseInt(n),e]:[]);if(D(f))throw new TypeError("Cannot compare with undefined");if(f===i)s.push(r);else if(D(i)||o&&f>i||u&&f<i)s=[r],i=f}),a||(s=lt(s,1)),r?s:s[0]}function mt(e,t){var n,r,i,s,o,u,a=0,f=0;e=gt(e),t=gt(t);do{i=yt(e,a),s=yt(t,a),n=bt(i),r=bt(s);if(n===-1||r===-1)n=e.charCodeAt(a)||null,r=t.charCodeAt(a)||null;o=i!==e.charAt(a),u=s!==t.charAt(a),o!==u&&f===0&&(f=o-u),a+=1}while(n!=null&&r!=null&&n===r);return n===r?f:n<r?-1:1}function gt(e){return t[St]&&(e=e.toLowerCase()),e.replace(t[Et],"")}function yt(e,n){var r=e.charAt(n),i=t[xt]||{};return i[r]||r}function bt(e){var n=t[wt];return e?n.indexOf(e):null}function Tt(){var e=function(){var e=arguments;return e.length>0&&!m(e[0])};N(t,!0,e,"map,every,all,some,any,none,filter",function(e,t){e[t]=function(e){return this[t](function(n,r){return t==="map"?nt(n,e,this,[n,r,this]):tt(n,e,this,[n,r,this])})}})}function Nt(){var e="AÁÀÂÃĄBCĆČÇDĎÐEÉÈĚÊËĘFGĞHıIÍÌİÎÏJKLŁMNŃŇÑOÓÒÔPQRŘSŚŠŞTŤUÚÙŮÛÜVWXYÝZŹŻŽÞÆŒØÕÅÄÖ",n="AÁÀÂÃÄ,CÇ,EÉÈÊË,IÍÌİÎÏ,OÓÒÔÕÖ,Sß,UÚÙÛÜ";t[wt]=e.split("").map(function(e){return e+e.toLowerCase()}).join("");var r={};rt(n.split(","),function(e){var t=e.charAt(0);rt(e.slice(1).split(""),function(e){r[e]=t,r[e.toLowerCase()]=t.toLowerCase()})}),t[St]=!0,t[xt]=r}function Ct(t){return t&&t.valueOf&&(t=t.valueOf()),e.keys(t)}function kt(n,r){N(e,!1,!1,n,function(e,n){e[n]=function(e,i,s){var o,u=Ct(e);return o=t.prototype[n].call(u,function(t){return r?nt(e[t],i,e,[t,e[t],e]):tt(e[t],i,e,[t,e[t],e])},s),p(o)&&(o=o.reduce(function(t,n,r){return t[n]=e[n],t},{})),o}}),et(n,I)}function Pt(e,t,n,r){var i=/^(.+?)(\[.*\])$/,s,o,u,a;r!==!1&&(o=t.match(i))?(a=o[1],u=o[2].replace(/^\[|\]$/g,"").split("]["),u.forEach(function(t){s=!t||t.match(/^\d+$/),!a&&p(e)&&(a=e.length),B(e,a)||(e[a]=s?[]:{}),e=e[a],a=t}),!a&&s&&(a=e.length.toString()),Pt(e,a,n)):n.match(/^[+-]?\d+(\.\d+)?$/)?e[t]=parseFloat(n):n==="true"?e[t]=!0:n==="false"?e[t]=!1:e[t]=n}function Ht(e,t){var n;return p(t)||H(t)&&t.toString===a?(n=[],j(t,function(t,r){e&&(t=e+"["+t+"]"),n.push(Ht(t,r))}),n.join("&")):e?Bt(e)+"="+(v(t)?t.getTime():Bt(t)):""}function Bt(e){return!e&&e!==!1&&e!==0?"":encodeURIComponent(e).replace(/%20/g,"+")}function jt(e,t){return b(t)?t.test(e):P(t)?B(t,e):e===i(t)}function Ft(e,t,n){var r={},i;return j(e,function(e,s){i=!1,O(t,function(t){jt(e,t)&&(i=!0)},1),i===n&&(r[e]=s)}),r}function It(){N(e,!1,!1,h,function(e,t){var n="is"+t;_t.push(n),e[n]=l[t]})}function qt(){T(e,!1,function(){return arguments.length===0},{extend:function(){var t=_t.concat(Dt);typeof Mt!="undefined"&&(t=t.concat(Mt)),et(t,e)}})}var e=Object,t=Array,n=RegExp,r=Date,i=String,s=Number,o=Math,u,a=e.prototype.toString,f=typeof global!="undefined"?global:this,l={},c=e.defineProperty&&e.defineProperties,h="Array,Boolean,Date,Function,Number,String,RegExp".split(","),p=w(h[0]),d=w(h[1]),v=w(h[2]),m=w(h[3]),g=w(h[4]),y=w(h[5]),b=w(h[6]);I.prototype.constructor=e,S();var wt="AlphanumericSortOrder",Et="AlphanumericSortIgnore",St="AlphanumericSortIgnoreCase",xt="AlphanumericSortEquivalents";T(t,!1,!1,{create:function(){var e=[],n;return A(arguments,function(r){if(P(r))try{n=t.prototype.slice.call(r,0),n.length>0&&(r=n)}catch(i){}e=e.concat(r)}),e}}),T(t,!0,!1,{find:function(e,t,n){return ut(this,e,t,n)},findAll:function(e,t,n){var r=[];return rt(this,function(t,n,i){tt(t,e,i,[t,n,i])&&r.push(t)},t,n),r},findIndex:function(e,t,n){var r=ut(this,e,t,n,!0);return D(r)?-1:r},count:function(e){return D(e)?this.length:this.findAll(e).length},removeAt:function(e,t){var n,r;if(D(e))return this;D(t)&&(t=e);for(n=0,r=t-e;n<=r;n++)this.splice(e,1);return this},include:function(e,t){return this.clone().add(e,t)},exclude:function(){return t.prototype.remove.apply(this.clone(),arguments)},clone:function(){return F([],this)},unique:function(e){return at(this,e)},flatten:function(e){return lt(this,e)},union:function(){return at(this.concat(ct(arguments)))},intersect:function(){return ft(this,ct(arguments),!1)},subtract:function(e){return ft(this,ct(arguments),!0)},at:function(){return Z(this,arguments)},first:function(e){return D(e)?this[0]:(e<0&&(e=0),this.slice(0,e))},last:function(e){if(D(e))return this[this.length-1];var t=this.length-e<0?0:this.length-e;return this.slice(t)},from:function(e){return this.slice(e)},to:function(e){return D(e)&&(e=this.length),this.slice(0,e)},min:function(e,t){return vt(this,e,"min",t)},max:function(e,t){return vt(this,e,"max",t)},least:function(e,t){return vt(this.groupBy.apply(this,[e]),"length","min",t)},most:function(e,t){return vt(this.groupBy.apply(this,[e]),"length","max",t)},sum:function(e){var t=e?this.map(e):this;return t.length>0?t.reduce(function(e,t){return e+t}):0},average:function(e){var t=e?this.map(e):this;return t.length>0?t.sum()/t.length:0},inGroups:function(e,t){var n=arguments.length>1,r=this,i=[],s=U(this.length/e);return q(0,e-1,function(e){var o=e*s,u=r.slice(o,o+s);n&&u.length<s&&q(1,s-u.length,function(){u=u.add(t)}),i.push(u)}),i},inGroupsOf:function(e,t){var n=[],r=this.length,i=this,s;return r===0||e===0?i:(D(e)&&(e=1),D(t)&&(t=null),q(0,U(r/e)-1,function(r){s=i.slice(e*r,e*r+e);while(s.length<e)s.push(t);n.push(s)}),n)},isEmpty:function(){return this.compact().length==0},sortBy:function(e,t){var n=this.clone();return n.sort(function(r,i){var s,o,u;return s=nt(r,e,n,[r]),o=nt(i,e,n,[i]),y(s)&&y(o)?u=mt(s,o):s<o?u=-1:s>o?u=1:u=0,u*(t?-1:1)}),n},randomize:function(){var e=this.concat(),t=e.length,n,r;while(t)n=o.random()*t|0,r=e[--t],e[t]=e[n],e[n]=r;return e},zip:function(){var e=A(arguments);return this.map(function(t,n){return[t].concat(e.map(function(e){return n in e?e[n]:null}))})},sample:function(e){var t=this.randomize();return arguments.length>0?t.slice(0,e):t[0]},each:function(e,t,n){return rt(this,e,t,n),this},add:function(e,n){if(!g(s(n))||isNaN(n))n=this.length;return t.prototype.splice.apply(this,[n,0].concat(e)),this},remove:function(){var e,t=this;return A(arguments,function(n){e=0;while(e<t.length)tt(t[e],n,t,[t[e],e,t])?t.splice(e,1):e++}),t},compact:function(e){var t=[];return rt(this,function(n,r){p(n)?t.push(n.compact()):e&&n?t.push(n):!e&&n!=null&&n.valueOf()===n.valueOf()&&t.push(n)}),t},groupBy:function(e,t){var n=this,r={},i;return rt(n,function(t,s){i=nt(t,e,n,[t,s,n]),r[i]||(r[i]=[]),r[i].push(t)}),t&&j(r,t),r},none:function(){return!this.any.apply(this,arguments)}}),T(t,!0,!1,{all:t.prototype.every,any:t.prototype.some,insert:t.prototype.add}),T(e,!1,!1,{map:function(e,t){return Ct(e).reduce(function(n,r){return n[r]=nt(e[r],t,e,[r,e[r],e]),n},{})},reduce:function(e){var t=Ct(e).map(function(t){return e[t]});return t.reduce.apply(t,A(arguments).slice(1))},each:function(e,t){return M(t),j(e,t),e},size:function(e){return Ct(e).length}});var Lt="any,all,none,count,find,findAll,isEmpty".split(","),At="sum,average,min,max,least,most".split(","),Ot="map,reduce,size".split(","),Mt=Lt.concat(At).concat(Ot);Tt(),Nt(),kt(Lt),kt(At,!0),et(Ot,I);var _t="isObject,isNaN".split(","),Dt="keys,values,select,reject,each,merge,clone,equal,watch,tap,has,toQueryString".split(",");T(e,!1,!0,{watch:function(t,n,r){if(!c)return;var i=t[n];e.defineProperty(t,n,{enumerable:!0,configurable:!0,get:function(){return i},set:function(e){i=r.call(t,n,i,e)}})}}),T(e,!1,function(e,t){return m(t)},{keys:function(t,n){var r=e.keys(t);return r.forEach(function(e){n.call(t,e,t[e])}),r}}),T(e,!1,!1,{isObject:function(e){return H(e)},isNaN:function(e){return g(e)&&e.valueOf()!==e.valueOf()},equal:function(e,t){return G(e,t)},extended:function(e){return new I(e)},merge:function(i,s,o,u){var a,f;if(i&&typeof s!="string")for(a in s){if(!B(s,a)||!i)continue;f=s[a];if(_(i[a])){if(u===!1)continue;m(u)&&(f=u.call(s,a,i[a],s[a]))}if(o===!0&&f&&P(f))if(v(f))f=new r(f.getTime());else{if(!b(f)){i[a]||(i[a]=t.isArray(f)?[]:{}),e.merge(i[a],s[a],o,u);continue}f=new n(f.source,J(f))}i[a]=f}return i},values:function(e,t){var n=[];return j(e,function(r,i){n.push(i),t&&t.call(e,i)}),n},clone:function(t,n){var r;return v(t)&&t.clone?t.clone():P(t)?(t instanceof I?r=new I:r=new t.constructor,e.merge(r,t,n)):t},fromQueryString:function(t,n){var r=e.extended(),i;return t=t&&t.toString?t.toString():"",t.replace(/^.*?\?/,"").split("&").forEach(function(e){var t=e.split("=");if(t.length!==2)return;Pt(r,t[0],decodeURIComponent(t[1]),n)}),r},toQueryString:function(e,t){return Ht(t,e)},tap:function(e,t){var n=t;return m(t)||(n=function(){t&&e[t]()}),n.call(e,e),e},has:function(e,t){return B(e,t)},select:function(e){return Ft(e,arguments,!0)},reject:function(e){return Ft(e,arguments,!1)}}),It(),qt(),et(Dt,I),T(n,!1,!1,{escape:function(e){return K(e)}}),T(n,!0,!1,{getFlags:function(){return J(this)},setFlags:function(e){return n(this.source,e)},addFlag:function(e){return this.setFlags(J(this,e))},removeFlag:function(e){return this.setFlags(J(this).replace(e,""))}})}(),function(e){var t=function(){var e=window.can||{};if(typeof GLOBALCAN=="undefined"||GLOBALCAN!==!1)window.can=e;e.isDeferred=function(e){var t=this.isFunction;return e&&t(e.then)&&t(e.pipe)};var t=0;return e.cid=function(e,n){return e._cid?e._cid:e._cid=(n||"")+ ++t},e.VERSION="@EDGE",e}(),n=function(e){return e.each=function(e,t,n){var r=0,i;if(e)if(typeof e.length=="number"&&e.pop){e.attr&&e.attr("length");for(i=e.length;r<i;r++)if(t.call(n||e[r],e[r],r,e)===!1)break}else if(e.hasOwnProperty)for(i in e)if(e.hasOwnProperty(i)&&t.call(n||e[i],e[i],i,e)===!1)break;return e},e}(t),r=function(e,t){e.extend(t,e,{trigger:function(t,n,r){t.trigger?t.trigger(n,r):e.event.trigger(n,r,t,!0)},addEvent:function(t,n){return e([this]).bind(t,n),this},removeEvent:function(t,n){return e([this]).unbind(t,n),this},buildFragment:function(t,n){var r=e.buildFragment,i;return t=[t],n=n||document,n=!n.nodeType&&n[0]||n,n=n.ownerDocument||n,i=r.call(jQuery,t,n),i.cacheable?e.clone(i.fragment):i.fragment||i},$:e,each:t.each}),e.each(["bind","unbind","undelegate","delegate"],function(n,r){t[r]=function(){var t=this[r]?this:e([this]);return t[r].apply(t,arguments),this}}),e.each(["append","filter","addClass","remove","data","get"],function(e,n){t[n]=function(e){return e[n].apply(e,t.makeArray(arguments).slice(1))}});var n=e.cleanData;return e.cleanData=function(r){e.each(r,function(e,n){n&&t.trigger(n,"destroyed",[],!1)}),n(r)},t}(jQuery,t,n),i=function(t){var n=/_|-/,r=/\=\=/,i=/([A-Z]+)([A-Z][a-z])/g,s=/([a-z\d])([A-Z])/g,o=/([a-z\d])([A-Z])/g,u=/\{([^\}]+)\}/g,a=/"/g,f=/'/g,l=function(t,n,r){var i=t[n];return i===e&&r===!0&&(i=t[n]={}),i},c=function(e){return/^f|^o/.test(typeof e)};return t.extend(t,{esc:function(t){var n=t===null||t===e||isNaN(t)&&""+t=="NaN";return(""+(n?"":t)).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(a,"&#34;").replace(f,"&#39;")},getObject:function(n,r,i){var s=n?n.split("."):[],o=s.length,u,a=0,f,h,p;r=t.isArray(r)?r:[r||window],p=r.length;if(!o)return r[0];for(a;a<p;a++){u=r[a],h=e;for(f=0;f<o&&c(u);f++)h=u,u=l(h,s[f]);if(h!==e&&u!==e)break}i===!1&&u!==e&&delete h[s[f-1]];if(i===!0&&u===e){u=r[0];for(f=0;f<o&&c(u);f++)u=l(u,s[f],!0)}return u},capitalize:function(e,t){return e.charAt(0).toUpperCase()+e.slice(1)},underscore:function(e){return e.replace(r,"/").replace(i,"$1_$2").replace(s,"$1_$2").replace(o,"_").toLowerCase()},sub:function(n,r,i){var s=[];return n=n||"",s.push(n.replace(u,function(n,o){var u=t.getObject(o,r,i===!0?!1:e);return u===e?(s=null,""):c(u)&&s?(s.push(u),""):""+u})),s===null?s:s.length<=1?s[0]:s},replacer:u,undHash:n}),t}(r),s=function(t){var n=0;return t.Construct=function(){if(arguments.length)return t.Construct.extend.apply(t.Construct,arguments)},t.extend(t.Construct,{newInstance:function(){var e=this.instance(),t=arguments,n;return e.setup&&(n=e.setup.apply(e,arguments)),e.init&&e.init.apply(e,n||arguments),e},_inherit:function(e,n,r){t.extend(r||e,e||{})},_overwrite:function(e,t,n,r){e[n]=r},setup:function(e,n){this.defaults=t.extend(!0,{},e.defaults,this.defaults)},instance:function(){n=1;var e=new this;return n=0,e},extend:function(r,i,s){function h(){if(!n)return this.constructor!==h&&arguments.length?arguments.callee.extend.apply(arguments.callee,arguments):this.constructor.newInstance.apply(this.constructor,arguments)}typeof r!="string"&&(s=i,i=r,r=null),s||(s=i,i=null),s=s||{};var o=this,u=this.prototype,a,f,l,c;c=this.instance(),c.superClass=o,t.Construct._inherit(s,u,c);for(a in o)o.hasOwnProperty(a)&&(h[a]=o[a]);t.Construct._inherit(i,o,h);if(r){var p=r.split("."),f=p
.pop(),d=t.getObject(p.join("."),window,!0),l=d,v=t.underscore(r.replace(/\./g,"_")),m=t.underscore(f);d[f]=h}t.extend(h,{constructor:h,prototype:c,superClass:o,namespace:l,_shortName:m,fullName:r,_fullName:v}),f!==e&&(h.shortName=f),h.prototype.constructor=h;var g=[o].concat(t.makeArray(arguments)),y=h.setup.apply(h,g);return h.init&&h.init.apply(h,y||g),h}}),t.Construct}(i),o=function(e,t){var n=e.isFunction,r=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/;return e.Construct._overwrite=function(e,t,i,s){e[i]=n(s)&&n(t[i])&&r.test(s)?function(e,n){return function(){var r=this._super,i;return this._super=t[e],i=n.apply(this,arguments),this._super=r,i}}(i,s):s},e.Construct._inherit=function(t,n,r){r=r||t;for(var i in t)e.Construct._overwrite(r,n,i,t[i])},e}(r,s);window.can=t}(),!function(e,t){typeof module!="undefined"?module.exports=t():typeof define=="function"&&typeof define.amd=="object"?define(t):this[e]=t()}("kizzy",function(){function e(){}function v(){return+(new Date)}function m(e,t){e._[t]&&e._[t].e&&e._[t].e<v()&&e.remove(t)}function g(e){return typeof e=="number"&&isFinite(e)}function y(e){return localStorage[e]}function b(e,t){return localStorage[e]=t,t}function w(e){delete localStorage[e]}function E(){localStorage.clear()}function S(e){var t=f.childNodes,n,r=null;for(var i=0,s=t.length;i<s;i++){n=t.item(i);if(n.getAttribute("key")==e){r=n;break}}return r}function x(e){var t=S(e),n=null;return t&&(n=t.getAttribute("value")),n}function T(e,t){var n=S(e);return n?n.setAttribute("value",t):(n=a.createNode(1,"item",""),n.setAttribute("key",e),n.setAttribute("value",t),f.appendChild(n)),u.save(r),t}function N(e){S(e)&&f.removeChild(node),u.save(r)}function C(){while(f.firstChild)f.removeChild(f.firstChild);u.save(r)}function k(){this._={}}function L(e){try{return JSON.parse(e)}catch(t){return console.log("Failed to process local stored JSON. Most likely due to backwards incompatibility"),console.log(t),{}}}function A(e){this.ns=e,this._=L(h(e)||"{}")}function O(e){return new A(e)}var t,n=document,r=n.domain,i=0,s=function(){return 1};try{t=!!localStorage||!!globalStorage,localStorage||(localStorage=globalStorage[r]),i=1}catch(o){i=0;try{if(n.documentElement.addBehavior){i=0,t=1;var u=n.documentElement;u.addBehavior("#default#userData"),u.load(r);var a=u.xmlDocument,f=a.documentElement}}catch(l){t=!1}}var c=e,h=e,p=e,d=e;return t&&(c=i?b:T,h=i?y:x,p=i?w:N,d=i?E:C,s=function(e){try{var t=JSON.stringify(e._);return t=="{}"?p(e.ns):c(e.ns,t),1}catch(n){return 0}}),k.prototype={set:function(e,t,n){return this._[e]={value:t,e:g(n)?v()+n:0},s(this)||this.remove(e),t},get:function(e){return m(this,e),this._[e]?this._[e].value:undefined},remove:function(e){delete this._[e],s(this)},clear:function(){this._={},s(this)},clearExpireds:function(){for(var e in this._)m(this,e);s(this)}},A.prototype=k.prototype,O.remove=p,O.clear=d,O}),function(e){"use strict";function s(e){var t=o(e.units),n=Date.now(),r=u(e.from,t,n),i=u(e.to,t,n),s=r-i,a;return s>0?a="past":(a="future",s=-s),l(s,a)}function o(e){if(typeof e=="undefined")return"ms";if(e==="s"||e==="ms")return e;throw new Error("Invalid units")}function u(e,t,n){if(typeof e=="undefined")return n;typeof e=="string"&&(e=parseInt(e,10));if(a(e)&&f(e))throw new Error("Invalid time");return typeof e=="number"&&t==="s"&&(e*=1e3),e}function a(e){return Object.prototype.toString.call(e)!=="[object Date]"||isNaN(e.getTime())}function f(e){return typeof e!="number"||isNaN(e)}function l(e,i){var s,o;for(s in t)if(t.hasOwnProperty(s)&&e>=t[s])return o=Math.floor(e/t[s]),r[i](o,c(s,o));return n[i]}function c(e,t){return e+(t>1?"s":"")}function h(e,t){return e+" "+t+" ago"}function p(e,t){return"in "+e+" "+t}function d(){typeof define=="function"&&define.amd?define(function(){return i}):typeof module!="undefined"&&module!==null?module.exports=i:e.vagueTime=i}var t={year:315576e5,month:26298e5,week:6048e5,day:864e5,hour:36e5,minute:6e4},n={past:"just now",future:"soon"},r={past:h,future:p},i={get:s};d()}(this),function(e,t,n){function f(e){var t={},r=/^jQuery\d+$/;return n.each(e.attributes,function(e,n){n.specified&&!r.test(n.name)&&(t[n.name]=n.value)}),t}function l(e,r){var i=this,s=n(i);if(i.value==s.attr("placeholder")&&s.hasClass("placeholder"))if(s.data("placeholder-password")){s=s.hide().next().show().attr("id",s.removeAttr("id").data("placeholder-id"));if(e===!0)return s[0].value=r;s.focus()}else i.value="",s.removeClass("placeholder"),i==t.activeElement&&i.select()}function c(){var e,t=this,r=n(t),i=r,s=this.id;if(t.value==""){if(t.type=="password"){if(!r.data("placeholder-textinput")){try{e=r.clone().attr({type:"text"})}catch(o){e=n("<input>").attr(n.extend(f(this),{type:"text"}))}e.removeAttr("name").data({"placeholder-password":!0,"placeholder-id":s}).bind("focus.placeholder",l),r.data({"placeholder-textinput":e,"placeholder-id":s}).before(e)}r=r.removeAttr("id").hide().prev().attr("id",s).show()}r.addClass("placeholder"),r[0].value=r.attr("placeholder")}else r.removeClass("placeholder")}var r="placeholder"in t.createElement("input"),i="placeholder"in t.createElement("textarea"),s=n.fn,o=n.valHooks,u,a;r&&i?(a=s.placeholder=function(){return this},a.input=a.textarea=!0):(a=s.placeholder=function(){var e=this;return e.filter((r?"textarea":":input")+"[placeholder]").not(".placeholder").bind({"focus.placeholder":l,"blur.placeholder":c}).data("placeholder-enabled",!0).trigger("blur.placeholder"),e},a.input=r,a.textarea=i,u={get:function(e){var t=n(e);return t.data("placeholder-enabled")&&t.hasClass("placeholder")?"":e.value},set:function(e,r){var i=n(e);return i.data("placeholder-enabled")?(r==""?(e.value=r,e!=t.activeElement&&c.call(e)):i.hasClass("placeholder")?l.call(e,!0,r)||(e.value=r):e.value=r,i):e.value=r}},r||(o.input=u),i||(o.textarea=u),n(function(){n(t).delegate("form","submit.placeholder",function(){var e=n(".placeholder",this).each(l);setTimeout(function(){e.each(c)},10)})}),n(e).bind("beforeunload.placeholder",function(){n(".placeholder").each(function(){this.value=""})}))}(this,document,jQuery),function(e,t,n){"use strict";e.fn.foundationAlerts=function(t){var n=e.extend({callback:e.noop},t);e(document).on("click",".alert-box a.close",function(t){t.preventDefault(),e(this).closest(".alert-box").fadeOut(function(){e(this).parent(".tile").hide(),e(this).remove(),n.callback()})})}}(jQuery,this),function(e,t,n){"use strict";e.fn.foundationAccordion=function(t){var n=e(".accordion");n.hasClass("hover")&&!Modernizr.touch?e(".accordion li",this).on({mouseenter:function(){console.log("due");var t=e(this).parent(),n=e(this).children(".content").first();e(".content",t).not(n).hide().parent("li").removeClass("active"),n.show(0,function(){n.parent("li").addClass("active")})}}):e(".accordion li",this).on("click.fndtn",function(){var t=e(this).parent(),n=e(this).children(".content").first();e(".content",t).not(n).hide().parent("li").removeClass("active"),n.show(0,function(){n.parent("li").addClass("active")})})}}(jQuery,this),function(e,t,n){"use strict";e.fn.foundationButtons=function(t){var n=e(document);n.on("click.fndtn",".button.disabled",function(e){e.preventDefault()}),e(".button.dropdown > ul",this).addClass("no-hover"),n.on("click.fndtn",".button.dropdown, .button.dropdown.split span",function(t){e(".button.dropdown").children("ul").removeClass("show-dropdown"),t.target===this&&t.stopPropagation()}),n.on("click.fndtn",".button.dropdown.split span",function(t){t.preventDefault(),e(".button.dropdown",this).not(e(this).parent()).children("ul").removeClass("show-dropdown"),e(this).siblings("ul").toggleClass("show-dropdown")}),n.on("click.fndtn",".button.dropdown:not(.split)",function(t){e(".button.dropdown",this).not(this).children("ul").removeClass("show-dropdown"),e(this).children("ul").toggleClass("show-dropdown")}),n.on("click.fndtn","body, html",function(){e(".button.dropdown ul").removeClass("show-dropdown")});var r=e(".button.dropdown:not(.large):not(.small):not(.tiny)",this).outerHeight()-1,i=e(".button.large.dropdown",this).outerHeight()-1,s=e(".button.small.dropdown",this).outerHeight()-1,o=e(".button.tiny.dropdown",this).outerHeight()-1;e(".button.dropdown:not(.large):not(.small):not(.tiny) > ul",this).css("top",r),e(".button.dropdown.large > ul",this).css("top",i),e(".button.dropdown.small > ul",this).css("top",s),e(".button.dropdown.tiny > ul",this).css("top",o),e(".button.dropdown.up:not(.large):not(.small):not(.tiny) > ul",this).css("top","auto").css("bottom",r-2),e(".button.dropdown.up.large > ul",this).css("top","auto").css("bottom",i-2),e(".button.dropdown.up.small > ul",this).css("top","auto").css("bottom",s-2),e(".button.dropdown.up.tiny > ul",this).css("top","auto").css("bottom",o-2)}}(jQuery,this),function(e,t,n){"use strict";var r={bodyHeight:0,targetClass:".has-tip",tooltipClass:".tooltip",tipTemplate:function(e,t){return'<span data-selector="'+e+'" class="'+r.tooltipClass.substring(1)+'">'+t+'<span class="nub"></span></span>'}},i={init:function(t){return r=e.extend(r,t),this.each(function(){var t=e("body");Modernizr.touch?(t.on("click.tooltip touchstart.tooltip touchend.tooltip",r.targetClass,function(t){t.preventDefault(),e(r.tooltipClass).hide(),i.showOrCreateTip(e(this))}),t.on("click.tooltip touchstart.tooltip touchend.tooltip",r.tooltipClass,function(t){t.preventDefault(),e(this).fadeOut(150)})):t.on("mouseenter.tooltip mouseleave.tooltip",r.targetClass,function(t){var n=e(this);t.type==="mouseenter"?i.showOrCreateTip(n):t.type==="mouseleave"&&i.hide(n)}),e(this).data("tooltips",!0)})},showOrCreateTip:function(e){var t=i.getTip(e);t&&t.length>0?i.show(e):i.create(e)},getTip:function(t){var n=i.selector(t),s=null;return n&&(s=e("span[data-selector="+n+"]"+r.tooltipClass)),s.length>0?s:!1},selector:function(e){var t=e.attr("id"),r=e.data("selector");return t===n&&r===n&&(r="tooltip"+Math.random().toString(36).substring(7),e.attr("data-selector",r)),t?t:r},create:function(t){var n=e(r.tipTemplate(i.selector(t),e("<div>").text(t.attr("title")).html())),s=i.inheritable_classes(t);n.addClass(s).appendTo("body"),Modernizr.touch&&n.append('<span class="tap-to-close">tap to close </span>'),t.removeAttr("title"),i.show(t)},reposition:function(n,r,i){var s,o,u,a,f,l;r.css("visibility","hidden").show(),s=n.data("width"),o=r.children(".nub"),u=o.outerHeight(),a=o.outerWidth(),l=function(e,t,n,r,i,s){return e.css({top:t,bottom:r,left:i,right:n,width:s?s:"auto"}).end()},l(r,n.offset().top+n.outerHeight()+10,"auto","auto",n.offset().left,s),l(o,-u,"auto","auto",10),e(t).width()<767?(f=n.closest(".columns"),f.length<0&&(f=e("body")),r.width(f.outerWidth()-25).css("left",15).addClass("tip-override"),l(o,-u,"auto","auto",n.offset().left)):i.indexOf("tip-top")>-1?(l(r,n.offset().top-r.outerHeight()-u,"auto","auto",n.offset().left,s).removeClass("tip-override"),l(o,"auto","auto",-u,"auto")):i.indexOf("tip-left")>-1?(l(r,n.offset().top+n.outerHeight()/2-u,"auto","auto",n.offset().left-r.outerWidth()-10,s).removeClass("tip-override"),l(o,r.outerHeight()/2-u/2,-u,"auto","auto")):i.indexOf("tip-right")>-1&&(l(r,n.offset().top+n.outerHeight()/2-u,"auto","auto",n.offset().left+n.outerWidth()+10,s).removeClass("tip-override"),l(o,r.outerHeight()/2-u/2,"auto","auto",-u)),r.css("visibility","visible").hide()},inheritable_classes:function(t){var n=["tip-top","tip-left","tip-bottom","tip-right","noradius"],r=e.map(t.attr("class").split(" "),function(t,r){if(e.inArray(t,n)!==-1)return t}).join(" ");return e.trim(r)},show:function(e){var t=i.getTip(e);i.reposition(e,t,e.attr("class")),clearTimeout(this.tipTimeout),this.tipTimeout=setTimeout(function(){t.fadeIn(400)},250)},hide:function(e){var t=i.getTip(e);clearTimeout(this.tipTimeout),t.fadeOut(150)},reload:function(){var t=e(this);return t.data("tooltips")?t.foundationTooltips("destroy").foundationTooltips("init"):t.foundationTooltips("init")},destroy:function(){return this.each(function(){e(t).off(".tooltip"),e(r.targetClass).off(".tooltip"),e(r.tooltipClass).each(function(t){e(e(r.targetClass).get(t)).attr("title",e(this).text())}).remove()})}};e.fn.foundationTooltips=function(t){if(i[t])return i[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t=="object"||!t)return i.init.apply(this,arguments);e.error("Method "+t+" does not exist on jQuery.foundationTooltips")}}(jQuery,this),function(e){var t=function(){return{tmp:[],hidden:null,adjust:function(t){var n=this;n.hidden=t.parents().andSelf().filter(":hidden"),n.hidden.each(function(){var t=e(this);n.tmp.push(t.attr("style")),t.css({visibility:"hidden",display:"block"})})},reset:function(){var t=this;t.hidden.each(function(n){var r=e(this),i=t.tmp[n];i===undefined?r.removeAttr("style"):r.attr("style",i)}),t.tmp=[],t.hidden=null}}};jQuery.foundation=jQuery.foundation||{},jQuery.foundation.customForms=jQuery.foundation.customForms||{},e.foundation.customForms.appendCustomMarkup=function(n){function i(t,n){var r=e(n).hide(),i=r.attr("type"),s=r.next("span.custom."+i);s.length===0&&(s=e('<span class="custom '+i+'"></span>').insertAfter(r)),s.toggleClass("checked",r.is(":checked")),s.toggleClass("disabled",r.is(":disabled"))}function s(n,r){var i=t(),s=e(r),o=s.next("div.custom.dropdown"),u=o.find("ul"),a=o.find(".current"),f=o.find(".selector"),l=s.find("option"),c=l.filter(":selected"),h=0,p="",d,v=!1;if(s.hasClass("no-custom"))return;if(o.length===0){var m=s.hasClass("small")?"small":s.hasClass("medium")?"medium":s.hasClass("large")?"large":s.hasClass("expand")?"expand":"";o=e('<div class="'+["custom","dropdown",m].join(" ")+'"><a href="#" class="selector"></a><ul /></div>"'),f=o.find(".selector"),u=o.find("ul"),p=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),u.append(p),v=o.prepend('<a href="#" class="current">'+c.html()+"</a>").find(".current"),s.after(o).hide()}else p=l.map(function(){return"<li>"+e(this).html()+"</li>"}).get().join(""),u.html("").append(p);o.toggleClass("disabled",s.is(":disabled")),d=u.find("li"),l.each(function(t){this.selected&&(d.eq(t).addClass("selected"),v&&v.html(e(this).html()))}),u.css("width","inherit"),o.css("width","inherit"),o.is(".small, .medium, .large, .expand")||(o.addClass("open"),i.adjust(u),h=d.outerWidth()>h?d.outerWidth():h,i.reset(),o.removeClass("open"),o.width(h+18),u.width(h+16))}var r={disable_class:"js-disable-custom"};n=e.extend(r,n),e("form.custom input:radio[data-customforms!=disabled]").each(i),e("form.custom input:checkbox[data-customforms!=disabled]").each(i),e("form.custom select[data-customforms!=disabled]").each(s)};var n=function(t){var n=0,r=t.next();$options=t.find("option"),r.find("ul").html(""),$options.each(function(){$li=e("<li>"+e(this).html()+"</li>"),r.find("ul").append($li)}),$options.each(function(t){this.selected&&(r.find("li").eq(t).addClass("selected"),r.find(".current").html(e(this).html()))}),r.removeAttr("style").find("ul").removeAttr("style"),r.find("li").each(function(){r.addClass("open"),e(this).outerWidth()>n&&(n=e(this).outerWidth()),r.removeClass("open")}),r.css("width",n+18+"px"),r.find("ul").css("width",n+16+"px")},r=function(e){var t=e.prev(),n=t[0];!1===t.is(":disabled")&&(n.checked=n.checked?!1:!0,e.toggleClass("checked"),t.trigger("change"))},i=function(t){var n=t.prev(),r=n[0];!1===n.is(":disabled")&&(e('input:radio[name="'+n.attr("name")+'"]').next().not(t).removeClass("checked"),t.hasClass("checked")||t.toggleClass("checked"),r.checked=t.hasClass("checked"),n.trigger("change"))};e(document).on("click","form.custom span.custom.checkbox",function(t){t.preventDefault(),t.stopPropagation(),r(e(this))}),e(document).on("click","form.custom span.custom.radio",function(t){t.preventDefault(),t.stopPropagation(),i(e(this))}),e(document).on("change","form.custom select[data-customforms!=disabled]",function(t){n(e(this))}),e(document).on("click","form.custom label",function(t){var n=e("#"+e(this).attr("for")),s,o;n.length!==0&&(n.attr("type")==="checkbox"?(t.preventDefault(),s=e(this).find("span.custom.checkbox"),r(s)):n.attr("type")==="radio"&&(t.preventDefault(),o=e(this).find("span.custom.radio"),i(o)))}),e(document).on("click","form.custom div.custom.dropdown a.current, form.custom div.custom.dropdown a.selector",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),i=r.prev();t.preventDefault(),e("div.dropdown").removeClass("open");if(!1===i.is(":disabled"))return r.toggleClass("open"),r.hasClass("open")?e(document).bind("click.customdropdown",function(t){r.removeClass("open"),e(document).unbind(".customdropdown")}):e(document).unbind(".customdropdown"),!1}),e(document).on("click","form.custom div.custom.dropdown li",function(t){var n=e(this),r=n.closest("div.custom.dropdown"),i=r.prev(),s=0;t.preventDefault(),t.stopPropagation(),e("div.dropdown").removeClass("open"),n.closest("ul").find("li").removeClass("selected"),n.addClass("selected"),r.removeClass("open").find("a.current").html(n.html()),n.closest("ul").find("li").each(function(e){n[0]==this&&(s=e)}),i[0].selectedIndex=s,i.trigger("change")}),e.fn.foundationCustomForms=e.foundation.customForms.appendCustomMarkup}(jQuery),function(e,t,n){"use strict";e.fn.foundationNavigation=function(t){var n=!1;Modernizr.touch||navigator.userAgent.match(/Windows Phone/i)?(e(document).on("click.fndtn touchstart.fndtn",".nav-bar a.flyout-toggle",function(t){t.preventDefault();var r=e(this).siblings(".flyout").first();n===!1&&(e(".nav-bar .flyout").not(r).slideUp(500),r.slideToggle(500,function(){n=!1})),n=!0}),e(".nav-bar>li.has-flyout",this).addClass("is-touch")):e(".nav-bar>li.has-flyout",this).hover(function(){e(this).children(".flyout").show()},function(){e(this).children(".flyout").hide()})}}(jQuery,this),function(e,t,n){"use strict";e.fn.foundationMediaQueryViewer=function(t){var n=e.extend(t,{toggleKey:77}),r=e(document);r.on("keyup.mediaQueryViewer",":input",function(e){e.which===n.toggleKey&&e.stopPropagation()}),r.on("keyup.mediaQueryViewer",function(t){var r=e("#fqv");t.which===n.toggleKey&&(r.length>0?r.remove():e("body").prepend('<div id="fqv" style="position:fixed;top:4px;left:4px;z-index:999;color:#fff;"><p style="font-size:12px;background:rgba(0,0,0,0.75);padding:5px;margin-bottom:1px;line-height:1.2;"><span class="left">Media:</span> <span style="font-weight:bold;" class="show-for-xlarge">Extra Large</span><span style="font-weight:bold;" class="show-for-large">Large</span><span style="font-weight:bold;" class="show-for-medium">Medium</span><span style="font-weight:bold;" class="show-for-small">Small</span><span style="font-weight:bold;" class="show-for-landscape">Landscape</span><span style="font-weight:bold;" class="show-for-portrait">Portrait</span><span style="font-weight:bold;" class="show-for-touch">Touch</span></p></div>'))})}}(jQuery,this),!function(e){"use strict";function n(){var t=this,n=setTimeout(function(){t.$element.off(e.support.transition.end),r.call(t)},500);this.$element.one(e.support.transition.end,function(){clearTimeout(n),r.call(t)})}function r(e){this.$element.hide().trigger("hidden"),i.call(this)}function i(t){var n=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var i=e.support.transition&&r;this.$backdrop=e('<div class="modal-backdrop '+r+'" />').appendTo(document.body),this.options.backdrop!="static"&&this.$backdrop.click(e.proxy(this.hide,this)),i&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),i?this.$backdrop.one(e.support.transition.end,t):t()}else!this.isShown&&this.$backdrop?(this.$backdrop.removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(e.support.transition.end,e.proxy(s,this)):s.call(this)):t&&t()}function s(){this.$backdrop.remove(),this.$backdrop=null}function o(){var t=this;this.isShown&&this.options.keyboard?e(document).on("keyup.dismiss.modal",function(e){e.which==27&&t.hide()}):this.isShown||e(document).off("keyup.dismiss.modal")}var t=function(t,n){this.options=n,this.$element=e(t).delegate('[data-dismiss="modal"]',"click.dismiss.modal",e.proxy(this.hide,this))};t.prototype={constructor:t,toggle:function(){return this[this.isShown?"hide":"show"]()},show:function(){var t=this;if(this.isShown)return;e("body").addClass("modal-open"),this.isShown=!0,this.$element.trigger("show"),o.call(this),i.call(this,function(){var n=e.support.transition&&t.$element.hasClass("fade");!t.$element.parent().length&&t.$element.appendTo(document.body),t.$element.show(),n&&t.$element[0].offsetWidth,t.$element.addClass("in"),n?t.$element.one(e.support.transition.end,function(){t.$element.trigger("shown")}):t.$element.trigger("shown")})},hide:function(t){t&&t.preventDefault();if(!this.isShown)return;var i=this;this.isShown=!1,e("body").removeClass("modal-open"),o.call(this),this.$element.trigger("hide").removeClass("in"),e.support.transition&&this.$element.hasClass("fade")?n.call(this):r.call(this)}},e.fn.modal=function(n){return this.each(function(){var r=e(this),i=r.data("modal"),s=e.extend({},e.fn.modal.defaults,r.data(),typeof n=="object"&&n);i||r.data("modal",i=new t(this,s)),typeof n=="string"?i[n]():s.show&&i.show()})},e.fn.modal.defaults={backdrop:!0,keyboard:!0,show:!0},e.fn.modal.Constructor=t,e(function(){e("body").on("click.modal.data-api",'[data-toggle="modal"]',function(t){var n=e(this),r,i=e(n.attr("data-target")||(r=n.attr("href"))&&r.replace(/.*(?=#[^\s]+$)/,"")),s=i.data("modal")?"toggle":e.extend({},i.data(),n.data());t.preventDefault(),i.modal(s)})})}(window.jQuery),window.CodeMirror=function(){"use strict";function x(e,n){if(!(this instanceof x))return new x(e,n);this.options=n=n||{};for(var r in er)!n.hasOwnProperty(r)&&er.hasOwnProperty(r)&&(n[r]=er[r]);H(n);var i=typeof n.value=="string"?0:n.value.first,s=this.display=T(e,i);s.wrapper.CodeMirror=this,_(this),n.autofocus&&!v&&It(this),this.state={keyMaps:[],overlays:[],modeGen:0,overwrite:!1,focused:!1,suppressEdits:!1,pasteIncoming:!1,draggingText:!1,highlight:new Qi},O(this),n.lineWrapping&&(this.display.wrapper.className+=" CodeMirror-wrap");var o=n.value;typeof o=="string"&&(o=new ui(n.value,n.mode)),Mt(this,ci)(this,o),t&&setTimeout(os(Ft,this,!0),20),Rt(this);var u;try{u=document.activeElement==s.input}catch(a){}u||n.autofocus&&!v?setTimeout(os(pn,this),20):dn(this),Mt(this,function(){for(var e in Zn)Zn.propertyIsEnumerable(e)&&Zn[e](this,n[e],nr);for(var t=0;t<or.length;++t)or[t](this)})()}function T(e,t){var r={},i=r.input=cs("textarea",null,null,"position: absolute; padding: 0; width: 1px; height: 1em; outline: none; font-size: 4px;");return s?i.style.width="1000px":i.setAttribute("wrap","off"),d&&(i.style.border="1px solid black"),i.setAttribute("autocorrect","off"),i.setAttribute("autocapitalize","off"),i.setAttribute("spellcheck","false"),r.inputDiv=cs("div",[i],null,"overflow: hidden; position: relative; width: 3px; height: 0px;"),r.scrollbarH=cs("div",[cs("div",null,null,"height: 1px")],"CodeMirror-hscrollbar"),r.scrollbarV=cs("div",[cs("div",null,null,"width: 1px")],"CodeMirror-vscrollbar"),r.scrollbarFiller=cs("div",null,"CodeMirror-scrollbar-filler"),r.gutterFiller=cs("div",null,"CodeMirror-gutter-filler"),r.lineDiv=cs("div",null,"CodeMirror-code"),r.selectionDiv=cs("div",null,null,"position: relative; z-index: 1"),r.cursor=cs("div"," ","CodeMirror-cursor"),r.otherCursor=cs("div"," ","CodeMirror-cursor CodeMirror-secondarycursor"),r.measure=cs("div",null,"CodeMirror-measure"),r.lineSpace=cs("div",[r.measure,r.selectionDiv,r.lineDiv,r.cursor,r.otherCursor],null,"position: relative; outline: none"),r.mover=cs("div",[cs("div",[r.lineSpace],"CodeMirror-lines")],null,"position: relative"),r.sizer=cs("div",[r.mover],"CodeMirror-sizer"),r.heightForcer=cs("div",null,null,"position: absolute; height: "+Ji+"px; width: 1px;"),r.gutters=cs("div",null,"CodeMirror-gutters"),r.lineGutter=null,r.scroller=cs("div",[r.sizer,r.heightForcer,r.gutters],"CodeMirror-scroll"),r.scroller.setAttribute("tabIndex","-1"),r.wrapper=cs("div",[r.inputDiv,r.scrollbarH,r.scrollbarV,r.scrollbarFiller,r.gutterFiller,r.scroller],"CodeMirror"),n&&(r.gutters.style.zIndex=-1,r.scroller.style.paddingRight=0),e.appendChild?e.appendChild(r.wrapper):e(r.wrapper),d&&(i.style.width="0px"),s||(r.scroller.draggable=!0),l?(r.inputDiv.style.height="1px",r.inputDiv.style.position="absolute"):n&&(r.scrollbarH.style.minWidth=r.scrollbarV.style.minWidth="18px"),r.viewOffset=r.lastSizeC=0,r.showingFrom=r.showingTo=t,r.lineNumWidth=r.lineNumInnerWidth=r.lineNumChars=null,r.prevInput="",r.alignWidgets=!1,r.pollingFast=!1,r.poll=new Qi,r.cachedCharWidth=r.cachedTextHeight=null,r.measureLineCache=[],r.measureLineCachePos=0,r.inaccurateSelection=!1,r.maxLine=null,r.maxLineLength=0,r.maxLineChanged=!1,r.wheelDX=r.wheelDY=r.wheelStartX=r.wheelStartY=null,r}function N(e){e.doc.mode=x.getMode(e.options,e.doc.modeOption),e.doc.iter(function(e){e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null)}),e.doc.frontier=e.doc.first,tt(e,100),e.state.modeGen++,e.curOp&&Pt(e)}function C(e){e.options.lineWrapping?(e.display.wrapper.className+=" CodeMirror-wrap",e.display.sizer.style.minWidth=""):(e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-wrap",""),P(e)),L(e),Pt(e),vt(e),setTimeout(function(){B(e)},100)}function k(e){var t=Ct(e.display),n=e.options.lineWrapping,r=n&&Math.max(5,e.display.scroller.clientWidth/kt(e.display)-3);return function(i){return Dr(e.doc,i)?0:n?(Math.ceil(i.text.length/r)||1)*t:t}}function L(e){var t=e.doc,n=k(e);t.iter(function(e){var t=n(e);t!=e.height&&vi(e,t)})}function A(e){var t=cr[e.options.keyMap],n=t.style;e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-keymap-\S+/g,"")+(n?" cm-keymap-"+n:""),e.state.disableInput=t.disableInput}function O(e){e.display.wrapper.className=e.display.wrapper.className.replace(/\s*cm-s-\S+/g,"")+e.options.theme.replace(/(^|\s)\s*/g," cm-s-"),vt(e)}function M(e){_(e),Pt(e),setTimeout(function(){F(e)},20)}function _(e){var t=e.display.gutters,n=e.options.gutters;hs(t);for(var r=0;r<n.length;++r){var i=n[r],s=t.appendChild(cs("div",null,"CodeMirror-gutter "+i));i=="CodeMirror-linenumbers"&&(e.display.lineGutter=s,s.style.width=(e.display.lineNumWidth||1)+"px")}t.style.display=r?"":"none"}function D(e,t){if(t.height==0)return 0;var n=t.text.length,r,i=t;while(r=Or(i)){var s=r.find();i=hi(e,s.from.line),n+=s.from.ch-s.to.ch}i=t;while(r=Mr(i)){var s=r.find();n-=i.text.length-s.from.ch,i=hi(e,s.to.line),n+=i.text.length-s.to.ch}return n}function P(e){var t=e.display,n=e.doc;t.maxLine=hi(n,n.first),t.maxLineLength=D(n,t.maxLine),t.maxLineChanged=!0,n.iter(function(e){var r=D(n,e);r>t.maxLineLength&&(t.maxLineLength=r,t.maxLine=e)})}function H(e){var t=ns(e.gutters,"CodeMirror-linenumbers");t==-1&&e.lineNumbers?e.gutters=e.gutters.concat(["CodeMirror-linenumbers"]):t>-1&&!e.lineNumbers&&(e.gutters=e.gutters.slice(0),e.gutters.splice(t,1))}function B(e){var t=e.display,n=e.doc.height,r=n+ot(t);t.sizer.style.minHeight=t.heightForcer.style.top=r+"px",t.gutters.style.height=Math.max(r,t.scroller.clientHeight-Ji)+"px";var i=Math.max(r,t.scroller.scrollHeight),s=t.scroller.scrollWidth>t.scroller.clientWidth+1,o=i>t.scroller.clientHeight+1;o?(t.scrollbarV.style.display="block",t.scrollbarV.style.bottom=s?bs(t.measure)+"px":"0",t.scrollbarV.firstChild.style.height=i-t.scroller.clientHeight+t.scrollbarV.clientHeight+"px"):(t.scrollbarV.style.display="",t.scrollbarV.firstChild.style.height="0"),s?(t.scrollbarH.style.display="block",t.scrollbarH.style.right=o?bs(t.measure)+"px":"0",t.scrollbarH.firstChild.style.width=t.scroller.scrollWidth-t.scroller.clientWidth+t.scrollbarH.clientWidth+"px"):(t.scrollbarH.style.display="",t.scrollbarH.firstChild.style.width="0"),s&&o?(t.scrollbarFiller.style.display="block",t.scrollbarFiller.style.height=t.scrollbarFiller.style.width=bs(t.measure)+"px"):t.scrollbarFiller.style.display="",s&&e.options.coverGutterNextToScrollbar&&e.options.fixedGutter?(t.gutterFiller.style.display="block",t.gutterFiller.style.height=bs(t.measure)+"px",t.gutterFiller.style.width=t.gutters.offsetWidth+"px"):t.gutterFiller.style.display="",c&&bs(t.measure)===0&&(t.scrollbarV.style.minWidth=t.scrollbarH.style.minHeight=h?"18px":"12px",t.scrollbarV.style.pointerEvents=t.scrollbarH.style.pointerEvents="none")}function j(e,t,n){var r=e.scroller.scrollTop,i=e.wrapper.clientHeight;typeof n=="number"?r=n:n&&(r=n.top,i=n.bottom-n.top),r=Math.floor(r-st(e));var s=Math.ceil(r+i);return{from:gi(t,r),to:gi(t,s)}}function F(e){var t=e.display;if(!t.alignWidgets&&(!t.gutters.firstChild||!e.options.fixedGutter))return;var n=R(t)-t.scroller.scrollLeft+e.doc.scrollLeft,r=t.gutters.offsetWidth,i=n+"px";for(var s=t.lineDiv.firstChild;s;s=s.nextSibling)if(s.alignable)for(var o=0,u=s.alignable;o<u.length;++o)u[o].style.left=i;e.options.fixedGutter&&(t.gutters.style.left=n+r+"px")}function I(e){if(!e.options.lineNumbers)return!1;var t=e.doc,n=q(e.options,t.first+t.size-1),r=e.display;if(n.length!=r.lineNumChars){var i=r.measure.appendChild(cs("div",[cs("div",n)],"CodeMirror-linenumber CodeMirror-gutter-elt")),s=i.firstChild.offsetWidth,o=i.offsetWidth-s;return r.lineGutter.style.width="",r.lineNumInnerWidth=Math.max(s,r.lineGutter.offsetWidth-o),r.lineNumWidth=r.lineNumInnerWidth+o,r.lineNumChars=r.lineNumInnerWidth?n.length:-1,r.lineGutter.style.width=r.lineNumWidth+"px",!0}return!1}function q(e,t){return String(e.lineNumberFormatter(t+e.firstLineNumber))}function R(e){return vs(e.scroller).left-vs(e.sizer).left}function U(e,t,n,r){var i=e.display.showingFrom,s=e.display.showingTo,o,u=j(e.display,e.doc,n);for(var a=!0;;a=!1){var f=e.display.scroller.clientWidth;if(!z(e,t,u,r))break;o=!0,t=[],G(e),B(e);if(a&&e.options.lineWrapping&&f!=e.display.scroller.clientWidth){r=!0;continue}r=!1,n&&(n=Math.min(e.display.scroller.scrollHeight-e.display.scroller.clientHeight,typeof n=="number"?n:n.top)),u=j(e.display,e.doc,n);if(u.from>=e.display.showingFrom&&u.to<=e.display.showingTo)break}return o&&(zi(e,"update",e),(e.display.showingFrom!=i||e.display.showingTo!=s)&&zi(e,"viewportChange",e,e.display.showingFrom,e.display.showingTo)),o}function z(e,t,n,r){var i=e.display,s=e.doc;if(!i.wrapper.clientWidth){i.showingFrom=i.showingTo=s.first,i.viewOffset=0;return}if(!r&&t.length==0&&n.from>i.showingFrom&&n.to<i.showingTo)return;I(e)&&(t=[{from:s.first,to:s.first+s.size}]);var o=i.sizer.style.marginLeft=i.gutters.offsetWidth+"px";i.scrollbarH.style.left=e.options.fixedGutter?o:"0";var u=Infinity;if(e.options.lineNumbers)for(var a=0;a<t.length;++a)t[a].diff&&t[a].from<u&&(u=t[a].from);var f=s.first+s.size,l=Math.max(n.from-e.options.viewportMargin,s.first),c=Math.min(f,n.to+e.options.viewportMargin);i.showingFrom<l&&l-i.showingFrom<20&&(l=Math.max(s.first,i.showingFrom)),i.showingTo>c&&i.showingTo-c<20&&(c=Math.min(f,i.showingTo));if(S){l=mi(_r(s,hi(s,l)));while(c<f&&Dr(s,hi(s,c)))++c}var h=[{from:Math.max(i.showingFrom,s.first),to:Math.min(i.showingTo,f)}];h[0].from>=h[0].to?h=[]:h=V(h,t);if(S)for(var a=0;a<h.length;++a){var p=h[a],d;while(d=Mr(hi(s,p.to-1))){var v=d.find().from.line;if(!(v>p.from)){h.splice(a--,1);break}p.to=v}}var m=0;for(var a=0;a<h.length;++a){var p=h[a];p.from<l&&(p.from=l),p.to>c&&(p.to=c),p.from>=p.to?h.splice(a--,1):m+=p.to-p.from}if(!r&&m==c-l&&l==i.showingFrom&&c==i.showingTo){X(e);return}h.sort(function(e,t){return e.from-t.from});try{var g=document.activeElement}catch(y){}m<(c-l)*.7&&(i.lineDiv.style.display="none"),J(e,l,c,h,u),i.lineDiv.style.display="",g&&document.activeElement!=g&&g.offsetHeight&&g.focus();var b=l!=i.showingFrom||c!=i.showingTo||i.lastSizeC!=i.wrapper.clientHeight;return b&&(i.lastSizeC=i.wrapper.clientHeight,tt(e,400)),i.showingFrom=l,i.showingTo=c,W(e),X(e),!0}function W(e){var t=e.display,r=t.lineDiv.offsetTop;for(var i=t.lineDiv.firstChild,s;i;i=i.nextSibling)if(i.lineObj){if(n){var o=i.offsetTop+i.offsetHeight;s=o-r,r=o}else{var u=vs(i);s=u.bottom-u.top}var a=i.lineObj.height-s;s<2&&(s=Ct(t));if(a>.001||a<-0.001){vi(i.lineObj,s);var f=i.lineObj.widgets;if(f)for(var l=0;l<f.length;++l)f[l].height=f[l].node.offsetHeight}}}function X(e){var t=e.display.viewOffset=yi(e,hi(e.doc,e.display.showingFrom));e.display.mover.style.top=t+"px"}function V(e,t){for(var n=0,r=t.length||0;n<r;++n){var i=t[n],s=[],o=i.diff||0;for(var u=0,a=e.length;u<a;++u){var f=e[u];i.to<=f.from&&i.diff?s.push({from:f.from+o,to:f.to+o}):i.to<=f.from||i.from>=f.to?s.push(f):(i.from>f.from&&s.push({from:f.from,to:i.from}),i.to<f.to&&s.push({from:i.to+o,to:f.to+o}))}e=s}return e}function $(e){var t=e.display,n={},r={};for(var i=t.gutters.firstChild,s=0;i;i=i.nextSibling,++s)n[e.options.gutters[s]]=i.offsetLeft,r[e.options.gutters[s]]=i.offsetWidth;return{fixedPos:R(t),gutterTotalWidth:t.gutters.offsetWidth,gutterLeft:n,gutterWidth:r,wrapperWidth:t.wrapper.clientWidth}}function J(e,t,n,r,i){function c
(t){var n=t.nextSibling;return s&&m&&e.display.currentWheelTarget==t?(t.style.display="none",t.lineObj=null):t.parentNode.removeChild(t),n}var o=$(e),u=e.display,a=e.options.lineNumbers;!r.length&&(!s||!e.display.currentWheelTarget)&&hs(u.lineDiv);var f=u.lineDiv,l=f.firstChild,h=r.shift(),p=t;e.doc.iter(t,n,function(t){h&&h.to==p&&(h=r.shift());if(Dr(e.doc,t)){t.height!=0&&vi(t,0);if(t.widgets&&l&&l.previousSibling)for(var n=0;n<t.widgets.length;++n){var s=t.widgets[n];if(s.showIfHidden){var u=l.previousSibling;if(/pre/i.test(u.nodeName)){var d=cs("div",null,null,"position: relative");u.parentNode.replaceChild(d,u),d.appendChild(u),u=d}var v=u.appendChild(cs("div",[s.node],"CodeMirror-linewidget"));s.handleMouseEvents||(v.ignoreEvents=!0),Q(s,v,u,o)}}}else if(h&&h.from<=p&&h.to>p){while(l.lineObj!=t)l=c(l);a&&i<=p&&l.lineNumber&&ds(l.lineNumber,q(e.options,p)),l=l.nextSibling}else{if(t.widgets)for(var m=0,g=l,y;g&&m<20;++m,g=g.nextSibling)if(g.lineObj==t&&/div/i.test(g.nodeName)){y=g;break}var b=K(e,t,p,o,y);if(b!=y)f.insertBefore(b,l);else{while(l!=y)l=c(l);l=l.nextSibling}b.lineObj=t}++p});while(l)l=c(l)}function K(e,t,r,i,s){var o=Qr(e,t),u=o.pre,a=t.gutterMarkers,f=e.display,l,c=o.bgClass?o.bgClass+" "+(t.bgClass||""):t.bgClass;if(!e.options.lineNumbers&&!a&&!c&&!t.wrapClass&&!t.widgets)return u;if(s){s.alignable=null;var h=!0,p=0,d=null;for(var v=s.firstChild,m;v;v=m){m=v.nextSibling;if(!/\bCodeMirror-linewidget\b/.test(v.className))s.removeChild(v);else{for(var g=0;g<t.widgets.length;++g){var y=t.widgets[g];if(y.node==v.firstChild){!y.above&&!d&&(d=v),Q(y,v,s,i),++p;break}}if(g==t.widgets.length){h=!1;break}}}s.insertBefore(u,d),h&&p==t.widgets.length&&(l=s,s.className=t.wrapClass||"")}l||(l=cs("div",null,t.wrapClass,"position: relative"),l.appendChild(u)),c&&l.insertBefore(cs("div",null,c+" CodeMirror-linebackground"),l.firstChild);if(e.options.lineNumbers||a){var b=l.insertBefore(cs("div",null,null,"position: absolute; left: "+(e.options.fixedGutter?i.fixedPos:-i.gutterTotalWidth)+"px"),l.firstChild);e.options.fixedGutter&&(l.alignable||(l.alignable=[])).push(b),e.options.lineNumbers&&(!a||!a["CodeMirror-linenumbers"])&&(l.lineNumber=b.appendChild(cs("div",q(e.options,r),"CodeMirror-linenumber CodeMirror-gutter-elt","left: "+i.gutterLeft["CodeMirror-linenumbers"]+"px; width: "+f.lineNumInnerWidth+"px")));if(a)for(var w=0;w<e.options.gutters.length;++w){var E=e.options.gutters[w],S=a.hasOwnProperty(E)&&a[E];S&&b.appendChild(cs("div",[S],"CodeMirror-gutter-elt","left: "+i.gutterLeft[E]+"px; width: "+i.gutterWidth[E]+"px"))}}n&&(l.style.zIndex=2);if(t.widgets&&l!=s)for(var g=0,x=t.widgets;g<x.length;++g){var y=x[g],T=cs("div",[y.node],"CodeMirror-linewidget");y.handleMouseEvents||(T.ignoreEvents=!0),Q(y,T,l,i),y.above?l.insertBefore(T,e.options.lineNumbers&&t.height!=0?b:u):l.appendChild(T),zi(y,"redraw")}return l}function Q(e,t,n,r){if(e.noHScroll){(n.alignable||(n.alignable=[])).push(t);var i=r.wrapperWidth;t.style.left=r.fixedPos+"px",e.coverGutter||(i-=r.gutterTotalWidth,t.style.paddingLeft=r.gutterTotalWidth+"px"),t.style.width=i+"px"}e.coverGutter&&(t.style.zIndex=5,t.style.position="relative",e.noHScroll||(t.style.marginLeft=-r.gutterTotalWidth+"px"))}function G(e){var t=e.display,n=An(e.doc.sel.from,e.doc.sel.to);n||e.options.showCursorWhenSelecting?Y(e):t.cursor.style.display=t.otherCursor.style.display="none",n?t.selectionDiv.style.display="none":Z(e);if(e.options.moveInputWithCursor){var r=Et(e,e.doc.sel.head,"div"),i=vs(t.wrapper),s=vs(t.lineDiv);t.inputDiv.style.top=Math.max(0,Math.min(t.wrapper.clientHeight-10,r.top+s.top-i.top))+"px",t.inputDiv.style.left=Math.max(0,Math.min(t.wrapper.clientWidth-10,r.left+s.left-i.left))+"px"}}function Y(e){var t=e.display,n=Et(e,e.doc.sel.head,"div");t.cursor.style.left=n.left+"px",t.cursor.style.top=n.top+"px",t.cursor.style.height=Math.max(0,n.bottom-n.top)*e.options.cursorHeight+"px",t.cursor.style.display="",n.other?(t.otherCursor.style.display="",t.otherCursor.style.left=n.other.left+"px",t.otherCursor.style.top=n.other.top+"px",t.otherCursor.style.height=(n.other.bottom-n.other.top)*.85+"px"):t.otherCursor.style.display="none"}function Z(e){function u(e,t,n,r){t<0&&(t=0),i.appendChild(cs("div",null,"CodeMirror-selected","position: absolute; left: "+e+"px; top: "+t+"px; width: "+(n==null?s-e:n)+"px; height: "+(r-t)+"px"))}function a(t,r,i){function h(n,r){return wt(e,Ln(t,n),"div",a,r)}var a=hi(n,t),f=a.text.length,l,c;return Cs(bi(a),r||0,i==null?f:i,function(e,t,n){var a=h(e,"left"),p,d,v;if(e==t)p=a,d=v=a.left;else{p=h(t-1,"right");if(n=="rtl"){var m=a;a=p,p=m}d=a.left,v=p.right}r==null&&e==0&&(d=o),p.top-a.top>3&&(u(d,a.top,null,a.bottom),d=o,a.bottom<p.top&&u(d,a.bottom,null,p.top)),i==null&&t==f&&(v=s);if(!l||a.top<l.top||a.top==l.top&&a.left<l.left)l=a;if(!c||p.bottom>c.bottom||p.bottom==c.bottom&&p.right>c.right)c=p;d<o+1&&(d=o),u(d,p.top,v-d,p.bottom)}),{start:l,end:c}}var t=e.display,n=e.doc,r=e.doc.sel,i=document.createDocumentFragment(),s=t.lineSpace.offsetWidth,o=ut(e.display);if(r.from.line==r.to.line)a(r.from.line,r.from.ch,r.to.ch);else{var f=hi(n,r.from.line),l=hi(n,r.to.line),c=_r(n,f)==_r(n,l),h=a(r.from.line,r.from.ch,c?f.text.length:null).end,p=a(r.to.line,c?0:null,r.to.ch).start;c&&(h.top<p.top-2?(u(h.right,h.top,null,h.bottom),u(o,p.top,p.left,p.bottom)):u(h.right,h.top,p.left-h.right,h.bottom)),h.bottom<p.top&&u(o,h.bottom,null,p.top)}ps(t.selectionDiv,i),t.selectionDiv.style.display=""}function et(e){if(!e.state.focused)return;var t=e.display;clearInterval(t.blinker);var n=!0;t.cursor.style.visibility=t.otherCursor.style.visibility="",e.options.cursorBlinkRate>0&&(t.blinker=setInterval(function(){t.cursor.style.visibility=t.otherCursor.style.visibility=(n=!n)?"":"hidden"},e.options.cursorBlinkRate))}function tt(e,t){e.doc.mode.startState&&e.doc.frontier<e.display.showingTo&&e.state.highlight.set(t,os(nt,e))}function nt(e){var t=e.doc;t.frontier<t.first&&(t.frontier=t.first);if(t.frontier>=e.display.showingTo)return;var n=+(new Date)+e.options.workTime,r=ar(t.mode,it(e,t.frontier)),i=[],s;t.iter(t.frontier,Math.min(t.first+t.size,e.display.showingTo+500),function(o){if(t.frontier>=e.display.showingFrom){var u=o.styles;o.styles=Xr(e,o,r,!0);var a=!u||u.length!=o.styles.length;for(var f=0;!a&&f<u.length;++f)a=u[f]!=o.styles[f];a&&(s&&s.end==t.frontier?s.end++:i.push(s={start:t.frontier,end:t.frontier+1})),o.stateAfter=ar(t.mode,r)}else $r(e,o.text,r),o.stateAfter=t.frontier%5==0?ar(t.mode,r):null;++t.frontier;if(+(new Date)>n)return tt(e,e.options.workDelay),!0}),i.length&&Mt(e,function(){for(var e=0;e<i.length;++e)Pt(this,i[e].start,i[e].end)})()}function rt(e,t,n){var r,i,s=e.doc,o=n?-1:t-(e.doc.mode.innerMode?1e3:100);for(var u=t;u>o;--u){if(u<=s.first)return s.first;var a=hi(s,u-1);if(a.stateAfter&&(!n||u<=s.frontier))return u;var f=Gi(a.text,null,e.options.tabSize);if(i==null||r>f)i=u-1,r=f}return i}function it(e,t,n){var r=e.doc,i=e.display;if(!r.mode.startState)return!0;var s=rt(e,t,n),o=s>r.first&&hi(r,s-1).stateAfter;return o?o=ar(r.mode,o):o=fr(r.mode),r.iter(s,t,function(n){$r(e,n.text,o);var u=s==t-1||s%5==0||s>=i.showingFrom&&s<i.showingTo;n.stateAfter=u?ar(r.mode,o):null,++s}),n&&(r.frontier=s),o}function st(e){return e.lineSpace.offsetTop}function ot(e){return e.mover.offsetHeight-e.lineSpace.offsetHeight}function ut(e){var t=ps(e.measure,cs("pre",null,null,"text-align: left")).appendChild(cs("span","x"));return t.offsetLeft}function at(e,t,n,r,i){var s=-1;r=r||ct(e,t);if(r.crude){var o=r.left+n*r.width;return{left:o,right:o+r.width,top:r.top,bottom:r.bottom}}for(var u=n;;u+=s){var a=r[u];if(a)break;s<0&&u==0&&(s=1)}return i=u>n?"left":u<n?"right":i,i=="left"&&a.leftSide?a=a.leftSide:i=="right"&&a.rightSide&&(a=a.rightSide),{left:u<n?a.right:a.left,right:u>n?a.left:a.right,top:a.top,bottom:a.bottom}}function ft(e,t){var n=e.display.measureLineCache;for(var r=0;r<n.length;++r){var i=n[r];if(i.text==t.text&&i.markedSpans==t.markedSpans&&e.display.scroller.clientWidth==i.width&&i.classes==t.textClass+"|"+t.wrapClass)return i}}function lt(e,t){var n=ft(e,t);n&&(n.text=n.measure=n.markedSpans=null)}function ct(e,t){var n=ft(e,t);if(n)return n.measure;var r=ht(e,t),i=e.display.measureLineCache,s={text:t.text,width:e.display.scroller.clientWidth,markedSpans:t.markedSpans,measure:r,classes:t.textClass+"|"+t.wrapClass};return i.length==16?i[++e.display.measureLineCachePos%16]=s:i.push(s),r}function ht(e,i){function b(e){var t=e.top-v.top,n=e.bottom-v.top;n>y&&(n=y),t<0&&(t=0);for(var r=m.length-2;r>=0;r-=2){var i=m[r],s=m[r+1];if(i>n||s<t)continue;if(i<=t&&s>=n||t<=i&&n>=s||Math.min(n,s)-Math.max(t,i)>=n-t>>1){m[r]=Math.min(t,i),m[r+1]=Math.max(n,s);break}}return r<0&&(r=m.length,m.push(t,n)),{left:e.left-v.left,right:e.right-v.left,top:r,bottom:null}}function w(e){e.bottom=m[e.top+1],e.top=m[e.top]}if(!e.options.lineWrapping&&i.text.length>=e.options.crudeMeasuringFrom)return pt(e,i);var s=e.display,o=ss(i.text.length),u=Qr(e,i,o,!0).pre;if(t&&!n&&!e.options.lineWrapping&&u.childNodes.length>100){var a=document.createDocumentFragment(),f=10,l=u.childNodes.length;for(var c=0,h=Math.ceil(l/f);c<h;++c){var p=cs("div",null,null,"display: inline-block");for(var d=0;d<f&&l;++d)p.appendChild(u.firstChild),--l;a.appendChild(p)}u.appendChild(a)}ps(s.measure,u);var v=vs(s.lineDiv),m=[],g=ss(i.text.length),y=u.offsetHeight;r&&s.measure.first!=u&&ps(s.measure,u);for(var c=0,E;c<o.length;++c)if(E=o[c]){var S=E,x=null;if(/\bCodeMirror-widget\b/.test(E.className)&&E.getClientRects){E.firstChild.nodeType==1&&(S=E.firstChild);var T=S.getClientRects();T.length>1&&(x=g[c]=b(T[0]),x.rightSide=b(T[T.length-1]))}x||(x=g[c]=b(vs(S))),E.measureRight&&(x.right=vs(E.measureRight).left),E.leftSide&&(x.leftSide=b(vs(E.leftSide)))}hs(e.display.measure);for(var c=0,E;c<g.length;++c)if(E=g[c])w(E),E.leftSide&&w(E.leftSide),E.rightSide&&w(E.rightSide);return g}function pt(e,t){var n=new Rr(t.text.slice(0,100),null);t.textClass&&(n.textClass=t.textClass);var r=ht(e,n),i=at(e,n,0,r,"left"),s=at(e,n,99,r,"right");return{crude:!0,top:i.top,left:i.left,bottom:i.bottom,width:(s.right-i.left)/100}}function dt(e,t){var n=!1;if(t.markedSpans)for(var r=0;r<t.markedSpans;++r){var i=t.markedSpans[r];i.collapsed&&(i.to==null||i.to==t.text.length)&&(n=!0)}var s=!n&&ft(e,t);if(s||t.text.length>=e.options.crudeMeasuringFrom)return at(e,t,t.text.length,s&&s.measure,"right").right;var o=Qr(e,t,null,!0).pre,u=o.appendChild(Es(e.display.measure));return ps(e.display.measure,o),vs(u).right-vs(e.display.lineDiv).left}function vt(e){e.display.measureLineCache.length=e.display.measureLineCachePos=0,e.display.cachedCharWidth=e.display.cachedTextHeight=null,e.options.lineWrapping||(e.display.maxLineChanged=!0),e.display.lineNumChars=null}function mt(){return window.pageXOffset||(document.documentElement||document.body).scrollLeft}function gt(){return window.pageYOffset||(document.documentElement||document.body).scrollTop}function yt(e,t,n,r){if(t.widgets)for(var i=0;i<t.widgets.length;++i)if(t.widgets[i].above){var s=Ir(t.widgets[i]);n.top+=s,n.bottom+=s}if(r=="line")return n;r||(r="local");var o=yi(e,t);r=="local"?o+=st(e.display):o-=e.display.viewOffset;if(r=="page"||r=="window"){var u=vs(e.display.lineSpace);o+=u.top+(r=="window"?0:gt());var a=u.left+(r=="window"?0:mt());n.left+=a,n.right+=a}return n.top+=o,n.bottom+=o,n}function bt(e,t,n){if(n=="div")return t;var r=t.left,i=t.top;if(n=="page")r-=mt(),i-=gt();else if(n=="local"||!n){var s=vs(e.display.sizer);r+=s.left,i+=s.top}var o=vs(e.display.lineSpace);return{left:r-o.left,top:i-o.top}}function wt(e,t,n,r,i){return r||(r=hi(e.doc,t.line)),yt(e,r,at(e,r,t.ch,null,i),n)}function Et(e,t,n,r,i){function s(t,s){var o=at(e,r,t,i,s?"right":"left");return s?o.left=o.right:o.right=o.left,yt(e,r,o,n)}function o(e,t){var n=u[t],r=n.level%2;return e==ks(n)&&t&&n.level<u[t-1].level?(n=u[--t],e=Ls(n)-(n.level%2?0:1),r=!0):e==Ls(n)&&t<u.length-1&&n.level<u[t+1].level&&(n=u[++t],e=ks(n)-n.level%2,r=!1),r&&e==n.to&&e>n.from?s(e-1):s(e,r)}r=r||hi(e.doc,t.line),i||(i=ct(e,r));var u=bi(r),a=t.ch;if(!u)return s(a);var f=Hs(u,a),l=o(a,f);return Ps!=null&&(l.other=o(a,Ps)),l}function St(e,t,n,r){var i=new Ln(e,t);return i.xRel=r,n&&(i.outside=!0),i}function xt(e,t,n){var r=e.doc;n+=e.display.viewOffset;if(n<0)return St(r.first,0,!0,-1);var i=gi(r,n),s=r.first+r.size-1;if(i>s)return St(r.first+r.size-1,hi(r,s).text.length,!0,1);t<0&&(t=0);for(;;){var o=hi(r,i),u=Tt(e,o,i,t,n),a=Mr(o),f=a&&a.find();if(!a||!(u.ch>f.from.ch||u.ch==f.from.ch&&u.xRel>0))return u;i=f.to.line}}function Tt(e,t,n,r,i){function f(r){var i=Et(e,Ln(n,r),"line",t,a);return o=!0,s>i.bottom?i.left-u:s<i.top?i.left+u:(o=!1,i.left)}var s=i-yi(e,t),o=!1,u=2*e.display.wrapper.clientWidth,a=ct(e,t),l=bi(t),c=t.text.length,h=As(t),p=Os(t),d=f(h),v=o,m=f(p),g=o;if(r>m)return St(n,p,g,1);for(;;){if(l?p==h||p==js(t,h,1):p-h<=1){var y=r<d||r-d<=m-r?h:p,b=r-(y==h?d:m);while(ls.test(t.text.charAt(y)))++y;var w=St(n,y,y==h?v:g,b<0?-1:b?1:0);return w}var E=Math.ceil(c/2),S=h+E;if(l){S=h;for(var x=0;x<E;++x)S=js(t,S,1)}var T=f(S);if(T>r){p=S,m=T;if(g=o)m+=1e3;c=E}else h=S,d=T,v=o,c-=E}}function Ct(e){if(e.cachedTextHeight!=null)return e.cachedTextHeight;if(Nt==null){Nt=cs("pre");for(var t=0;t<49;++t)Nt.appendChild(document.createTextNode("x")),Nt.appendChild(cs("br"));Nt.appendChild(document.createTextNode("x"))}ps(e.measure,Nt);var n=Nt.offsetHeight/50;return n>3&&(e.cachedTextHeight=n),hs(e.measure),n||1}function kt(e){if(e.cachedCharWidth!=null)return e.cachedCharWidth;var t=cs("span","x"),n=cs("pre",[t]);ps(e.measure,n);var r=t.offsetWidth;return r>2&&(e.cachedCharWidth=r),r||10}function At(e){e.curOp={changes:[],forceUpdate:!1,updateInput:null,userSelChange:null,textChanged:null,selectionChanged:!1,cursorActivity:!1,updateMaxLine:!1,updateScrollPos:!1,id:++Lt},Ui++||(Ri=[])}function Ot(e){var t=e.curOp,n=e.doc,r=e.display;e.curOp=null,t.updateMaxLine&&P(e);if(r.maxLineChanged&&!e.options.lineWrapping&&r.maxLine){var i=dt(e,r.maxLine);r.sizer.style.minWidth=Math.max(0,i+3+Ji)+"px",r.maxLineChanged=!1;var s=Math.max(0,r.sizer.offsetLeft+r.sizer.offsetWidth-r.scroller.clientWidth);s<n.scrollLeft&&!t.updateScrollPos&&en(e,Math.min(r.scroller.scrollLeft,s),!0)}var o,u;if(t.updateScrollPos)o=t.updateScrollPos;else if(t.selectionChanged&&r.scroller.clientHeight){var a=Et(e,n.sel.head);o=Wn(e,a.left,a.top,a.left,a.bottom)}if(t.changes.length||t.forceUpdate||o&&o.scrollTop!=null)u=U(e,t.changes,o&&o.scrollTop,t.forceUpdate),e.display.scroller.offsetHeight&&(e.doc.scrollTop=e.display.scroller.scrollTop);!u&&t.selectionChanged&&G(e);if(t.updateScrollPos){var f=Math.max(0,Math.min(r.scroller.scrollHeight-r.scroller.clientHeight,o.scrollTop)),l=Math.max(0,Math.min(r.scroller.scrollWidth-r.scroller.clientWidth,o.scrollLeft));r.scroller.scrollTop=r.scrollbarV.scrollTop=n.scrollTop=f,r.scroller.scrollLeft=r.scrollbarH.scrollLeft=n.scrollLeft=l,F(e),t.scrollToPos&&Un(e,Dn(e.doc,t.scrollToPos.from),Dn(e.doc,t.scrollToPos.to),t.scrollToPos.margin)}else o&&Rn(e);t.selectionChanged&&et(e),e.state.focused&&t.updateInput&&Ft(e,t.userSelChange);var c=t.maybeHiddenMarkers,h=t.maybeUnhiddenMarkers;if(c)for(var p=0;p<c.length;++p)c[p].lines.length||qi(c[p],"hide");if(h)for(var p=0;p<h.length;++p)h[p].lines.length&&qi(h[p],"unhide");var d;--Ui||(d=Ri,Ri=null),t.textChanged&&qi(e,"change",e,t.textChanged),t.cursorActivity&&qi(e,"cursorActivity",e);if(d)for(var p=0;p<d.length;++p)d[p]()}function Mt(e,t){return function(){var n=e||this,r=!n.curOp;r&&At(n);try{var i=t.apply(n,arguments)}finally{r&&Ot(n)}return i}}function _t(e){return function(){var t=this.cm&&!this.cm.curOp,n;t&&At(this.cm);try{n=e.apply(this,arguments)}finally{t&&Ot(this.cm)}return n}}function Dt(e,t){var n=!e.curOp,r;n&&At(e);try{r=t()}finally{n&&Ot(e)}return r}function Pt(e,t,n,r){t==null&&(t=e.doc.first),n==null&&(n=e.doc.first+e.doc.size),e.curOp.changes.push({from:t,to:n,diff:r})}function Ht(e){if(e.display.pollingFast)return;e.display.poll.set(e.options.pollInterval,function(){jt(e),e.state.focused&&Ht(e)})}function Bt(e){function n(){var r=jt(e);!r&&!t?(t=!0,e.display.poll.set(60,n)):(e.display.pollingFast=!1,Ht(e))}var t=!1;e.display.pollingFast=!0,e.display.poll.set(20,n)}function jt(e){var n=e.display.input,i=e.display.prevInput,s=e.doc,o=s.sel;if(!e.state.focused||xs(n)||qt(e)||e.state.disableInput)return!1;e.state.pasteIncoming&&e.state.fakedLastChar&&(n.value=n.value.substring(0,n.value.length-1),e.state.fakedLastChar=!1);var u=n.value;if(u==i&&An(o.from,o.to))return!1;if(t&&!r&&e.display.inputHasSelection===u)return Ft(e,!0),!1;var a=!e.curOp;a&&At(e),o.shift=!1;var f=0,l=Math.min(i.length,u.length);while(f<l&&i.charCodeAt(f)==u.charCodeAt(f))++f;var c=o.from,h=o.to;f<i.length?c=Ln(c.line,c.ch-(i.length-f)):e.state.overwrite&&An(c,h)&&!e.state.pasteIncoming&&(h=Ln(h.line,Math.min(hi(s,h.line).text.length,h.ch+(u.length-f))));var p=e.curOp.updateInput,d={from:c,to:h,text:Ss(u.slice(f)),origin:e.state.pasteIncoming?"paste":"+input"};return En(e.doc,d,"end"),e.curOp.updateInput=p,zi(e,"inputRead",e,d),u.length>1e3||u.indexOf("\n")>-1?n.value=e.display.prevInput="":e.display.prevInput=u,a&&Ot(e),e.state.pasteIncoming=!1,!0}function Ft(e,n){var i,s,o=e.doc;if(!An(o.sel.from,o.sel.to)){e.display.prevInput="",i=Ts&&(o.sel.to.line-o.sel.from.line>100||(s=e.getSelection()).length>1e3);var u=i?"-":s||e.getSelection();e.display.input.value=u,e.state.focused&&ts(e.display.input),t&&!r&&(e.display.inputHasSelection=u)}else n&&(e.display.prevInput=e.display.input.value="",t&&!r&&(e.display.inputHasSelection=null));e.display.inaccurateSelection=i}function It(e){e.options.readOnly!="nocursor"&&(!v||document.activeElement!=e.display.input)&&e.display.input.focus()}function qt(e){return e.options.readOnly||e.doc.cantEdit}function Rt(e){function i(){e.state.focused&&setTimeout(os(It,e),0)}function u(){o==null&&(o=setTimeout(function(){o=null,n.cachedCharWidth=n.cachedTextHeight=ys=null,vt(e),Dt(e,os(Pt,e))},100))}function a(){for(var e=n.wrapper.parentNode;e&&e!=document.body;e=e.parentNode);e?setTimeout(a,5e3):Ii(window,"resize",u)}function f(t){if(Wi(e,t)||e.options.onDragEvent&&e.options.onDragEvent(e,Mi(t)))return;Hi(t)}function c(){n.inaccurateSelection&&(n.prevInput="",n.inaccurateSelection=!1,n.input.value=e.getSelection(),ts(n.input))}var n=e.display;Fi(n.scroller,"mousedown",Mt(e,Vt)),t?Fi(n.scroller,"dblclick",Mt(e,function(t){if(Wi(e,t))return;var n=zt(e,t);if(!n||Kt(e,t)||Ut(e.display,t))return;_i(t);var r=Gn(hi(e.doc,n.line).text,n);Bn(e.doc,r.from,r.to)})):Fi(n.scroller,"dblclick",function(t){Wi(e,t)||_i(t)}),Fi(n.lineSpace,"selectstart",function(e){Ut(n,e)||_i(e)}),w||Fi(n.scroller,"contextmenu",function(t){mn(e,t)}),Fi(n.scroller,"scroll",function(){n.scroller.clientHeight&&(Zt(e,n.scroller.scrollTop),en(e,n.scroller.scrollLeft,!0),qi(e,"scroll",e))}),Fi(n.scrollbarV,"scroll",function(){n.scroller.clientHeight&&Zt(e,n.scrollbarV.scrollTop)}),Fi(n.scrollbarH,"scroll",function(){n.scroller.clientHeight&&en(e,n.scrollbarH.scrollLeft)}),Fi(n.scroller,"mousewheel",function(t){rn(e,t)}),Fi(n.scroller,"DOMMouseScroll",function(t){rn(e,t)}),Fi(n.scrollbarH,"mousedown",i),Fi(n.scrollbarV,"mousedown",i),Fi(n.wrapper,"scroll",function(){n.wrapper.scrollTop=n.wrapper.scrollLeft=0});var o;Fi(window,"resize",u),setTimeout(a,5e3),Fi(n.input,"keyup",Mt(e,function(t){if(Wi(e,t)||e.options.onKeyEvent&&e.options.onKeyEvent(e,Mi(t)))return;t.keyCode==16&&(e.doc.sel.shift=!1)})),Fi(n.input,"input",function(){t&&!r&&e.display.inputHasSelection&&(e.display.inputHasSelection=null),Bt(e)}),Fi(n.input,"keydown",Mt(e,cn)),Fi(n.input,"keypress",Mt(e,hn)),Fi(n.input,"focus",os(pn,e)),Fi(n.input,"blur",os(dn,e)),e.options.dragDrop&&(Fi(n.scroller,"dragstart",function(t){Yt(e,t)}),Fi(n.scroller,"dragenter",f),Fi(n.scroller,"dragover",f),Fi(n.scroller,"drop",Mt(e,Gt))),Fi(n.scroller,"paste",function(t){if(Ut(n,t))return;It(e),Bt(e)}),Fi(n.input,"paste",function(){if(s&&!e.state.fakedLastChar&&!(new Date-e.state.lastMiddleDown<200)){var t=n.input.selectionStart,r=n.input.selectionEnd;n.input.value+="$",n.input.selectionStart=t,n.input.selectionEnd=r,e.state.fakedLastChar=!0}e.state.pasteIncoming=!0,Bt(e)}),Fi(n.input,"cut",c),Fi(n.input,"copy",c),l&&Fi(n.sizer,"mouseup",function(){document.activeElement==n.input&&n.input.blur(),It(e)})}function Ut(e,t){for(var n=Bi(t);n!=e.wrapper;n=n.parentNode)if(!n||n.ignoreEvents||n.parentNode==e.sizer&&n!=e.mover)return!0}function zt(e,t,n){var r=e.display;if(!n){var i=Bi(t);if(i==r.scrollbarH||i==r.scrollbarH.firstChild||i==r.scrollbarV||i==r.scrollbarV.firstChild||i==r.scrollbarFiller||i==r.gutterFiller)return null}var s,o,u=vs(r.lineSpace);try{s=t.clientX,o=t.clientY}catch(t){return null}return xt(e,s-u.left,o-u.top)}function Vt(e){function m(e){if(An(v,e))return;v=e;if(f=="single"){Bn(n.doc,Dn(i,u),e);return}p=Dn(i,p),d=Dn(i,d);if(f=="double"){var t=Gn(hi(i,e.line).text,e);On(e,p)?Bn(n.doc,t.from,d):Bn(n.doc,p,t.to)}else f=="triple"&&(On(e,p)?Bn(n.doc,d,Dn(i,Ln(e.line,0))):Bn(n.doc,p,Dn(i,Ln(e.line+1,0))))}function b(e){var t=++y,s=zt(n,e,!0);if(!s)return;if(!An(s,c)){n.state.focused||pn(n),c=s,m(s);var o=j(r,i);(s.line>=o.to||s.line<o.from)&&setTimeout(Mt(n,function(){y==t&&b(e)}),150)}else{var u=e.clientY<g.top?-20:e.clientY>g.bottom?20:0;u&&setTimeout(Mt(n,function(){if(y!=t)return;r.scroller.scrollTop+=u,b(e)}),50)}}function E(e){y=Infinity,_i(e),It(n),Ii(document,"mousemove",S),Ii(document,"mouseup",x)}if(Wi(this,e))return;var n=this,r=n.display,i=n.doc,o=i.sel;o.shift=e.shiftKey;if(Ut(r,e)){s||(r.scroller.draggable=!1,setTimeout(function(){r.scroller.draggable=!0},100));return}if(Kt(n,e))return;var u=zt(n,e);switch(ji(e)){case 3:w&&mn.call(n,n,e);return;case 2:s&&(n.state.lastMiddleDown=+(new Date)),u&&Bn(n.doc,u),setTimeout(os(It,n),20),_i(e);return}if(!u){Bi(e)==r.scroller&&_i(e);return}n.state.focused||pn(n);var a=+(new Date),f="single";if(Xt&&Xt.time>a-400&&An(Xt.pos,u))f="triple",_i(e),setTimeout(os(It,n),20),Yn(n,u.line);else if(Wt&&Wt.time>a-400&&An(Wt.pos,u)){f="double",Xt={time:a,pos:u},_i(e);var l=Gn(hi(i,u.line).text,u);Bn(n.doc,l.from,l.to)}else Wt={time:a,pos:u};var c=u;if(n.options.dragDrop&&ms&&!qt(n)&&!An(o.from,o.to)&&!On(u,o.from)&&!On(o.to,u)&&f=="single"){var h=Mt(n,function(t){s&&(r.scroller.draggable=!1),n.state.draggingText=!1,Ii(document,"mouseup",h),Ii(r.scroller,"drop",h),Math.abs(e.clientX-t.clientX)+Math.abs(e.clientY-t.clientY)<10&&(_i(t),Bn(n.doc,u),It(n))});s&&(r.scroller.draggable=!0),n.state.draggingText=h,r.scroller.dragDrop&&r.scroller.dragDrop(),Fi(document,"mouseup",h),Fi(r.scroller,"drop",h);return}_i(e),f=="single"&&Bn(n.doc,Dn(i,u));var p=o.from,d=o.to,v=u,g=vs(r.wrapper),y=0,S=Mt(n,function(e){!t&&!ji(e)?E(e):b(e)}),x=Mt(n,E);Fi(document,"mousemove",S),Fi(document,"mouseup",x)}function $t(e,t,n,r,i){try{var s=t.clientX,o=t.clientY}catch(t){return!1}if(s>=Math.floor(vs(e.display.gutters).right))return!1;r&&_i(t);var u=e.display,a=vs(u.lineDiv);if(o>a.bottom||!Vi(e,n))return Pi(t);o-=a.top-u.viewOffset;for(var f=0;f<e.options.gutters.length;++f){var l=u.gutters.childNodes[f];if(l&&vs(l).right>=s){var c=gi(e.doc,o),h=e.options.gutters[f];return i(e,n,e,c,h,t),Pi(t)}}}function Jt(e,t){return Vi(e,"gutterContextMenu")?$t(e,t,"gutterContextMenu",!1,qi):!1}function Kt(e,t){return $t(e,t,"gutterClick",!0,zi)}function Gt(e){var n=this;if(Wi(n,e)||Ut(n.display,e)||n.options.onDragEvent&&n.options.onDragEvent(n,Mi(e)))return;_i(e),t&&(Qt=+(new Date));var r=zt(n,e,!0),i=e.dataTransfer.files;if(!r||qt(n))return;if(i&&i.length&&window.FileReader&&window.File){var s=i.length,o=Array(s),u=0,a=function(e,t){var i=new FileReader;i.onload=function(){o[t]=i.result,++u==s&&(r=Dn(n.doc,r),En(n.doc,{from:r,to:r,text:Ss(o.join("\n")),origin:"paste"},"around"))},i.readAsText(e)};for(var f=0;f<s;++f)a(i[f],f)}else{if(n.state.draggingText&&!On(r,n.doc.sel.from)&&!On(n.doc.sel.to,r)){n.state.draggingText(e),setTimeout(os(It,n),20);return}try{var o=e.dataTransfer.getData("Text");if(o){var l=n.doc.sel.from,c=n.doc.sel.to;Fn(n.doc,r,r),n.state.draggingText&&kn(n.doc,"",l,c,"paste"),n.replaceSelection(o,null,"paste"),It(n)}}catch(e){}}}function Yt(e,n){if(t&&(!e.state.draggingText||+(new Date)-Qt<100)){Hi(n);return}if(Wi(e,n)||Ut(e.display,n))return;var r=e.getSelection();n.dataTransfer.setData("Text",r);if(n.dataTransfer.setDragImage&&!f){var i=cs("img",null,null,"position: fixed; left: 0; top: 0;");i.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",a&&(i.width=i.height=1,e.display.wrapper.appendChild(i),i._top=i.offsetTop),n.dataTransfer.setDragImage(i,0,0),a&&i.parentNode.removeChild(i)}}function Zt(t,n){if(Math.abs(t.doc.scrollTop-n)<2)return;t.doc.scrollTop=n,e||U(t,[],n),t.display.scroller.scrollTop!=n&&(t.display.scroller.scrollTop=n),t.display.scrollbarV.scrollTop!=n&&(t.display.scrollbarV.scrollTop=n),e&&U(t,[]),tt(t,100)}function en(e,t,n){if(n?t==e.doc.scrollLeft:Math.abs(e.doc.scrollLeft-t)<2)return;t=Math.min(t,e.display.scroller.scrollWidth-e.display.scroller.clientWidth),e.doc.scrollLeft=t,F(e),e.display.scroller.scrollLeft!=t&&(e.display.scroller.scrollLeft=t),e.display.scrollbarH.scrollLeft!=t&&(e.display.scrollbarH.scrollLeft=t)}function rn(t,n){var r=n.wheelDeltaX,i=n.wheelDeltaY;r==null&&n.detail&&n.axis==n.HORIZONTAL_AXIS&&(r=n.detail),i==null&&n.detail&&n.axis==n.VERTICAL_AXIS?i=n.detail:i==null&&(i=n.wheelDelta);var o=t.display,u=o.scroller;if(!(r&&u.scrollWidth>u.clientWidth||i&&u.scrollHeight>u.clientHeight))return;if(i&&m&&s)for(var f=n.target;f!=u;f=f.parentNode)if(f.lineObj){t.display.currentWheelTarget=f;break}if(r&&!e&&!a&&nn!=null){i&&Zt(t,Math.max(0,Math.min(u.scrollTop+i*nn,u.scrollHeight-u.clientHeight))),en(t,Math.max(0,Math.min(u.scrollLeft+r*nn,u.scrollWidth-u.clientWidth))),_i(n),o.wheelStartX=null;return}if(i&&nn!=null){var l=i*nn,c=t.doc.scrollTop,h=c+o.wrapper.clientHeight;l<0?c=Math.max(0,c+l-50):h=Math.min(t.doc.height,h+l+50),U(t,[],{top:c,bottom:h})}tn<20&&(o.wheelStartX==null?(o.wheelStartX=u.scrollLeft,o.wheelStartY=u.scrollTop,o.wheelDX=r,o.wheelDY=i,setTimeout(function(){if(o.wheelStartX==null)return;var e=u.scrollLeft-o.wheelStartX,t=u.scrollTop-o.wheelStartY,n=t&&o.wheelDY&&t/o.wheelDY||e&&o.wheelDX&&e/o.wheelDX;o.wheelStartX=o.wheelStartY=null;if(!n)return;nn=(nn*tn+n)/(tn+1),++tn},200)):(o.wheelDX+=r,o.wheelDY+=i))}function sn(e,t,n){if(typeof t=="string"){t=lr[t];if(!t)return!1}e.display.pollingFast&&jt(e)&&(e.display.pollingFast=!1);var r=e.doc,i=r.sel.shift,s=!1;try{qt(e)&&(e.state.suppressEdits=!0),n&&(r.sel.shift=!1),s=t(e)!=Ki}finally{r.sel.shift=i,e.state.suppressEdits=!1}return s}function on(e){var t=e.state.keyMaps.slice(0);return e.options.extraKeys&&t.push(e.options.extraKeys),t.push(e.options.keyMap),t}function an(e,t){var n=hr(e.options.keyMap),i=n.auto;clearTimeout(un),i&&!dr(t)&&(un=setTimeout(function(){hr(e.options.keyMap)==n&&(e.options.keyMap=i.call?i.call(null,e):i,A(e))},50));var s=vr(t,!0),o=!1;if(!s)return!1;var u=on(e);return t.shiftKey?o=pr("Shift-"+s,u,function(t){return sn(e,t,!0)})||pr(s,u,function(t){if(typeof t=="string"?/^go[A-Z]/.test(t):t.motion)return sn(e,t)}):o=pr(s,u,function(t){return sn(e,t)}),o&&(_i(t),et(e),r&&(t.oldKeyCode=t.keyCode,t.keyCode=0),zi(e,"keyHandled",e,s,t)),o}function fn(e,t,n){var r=pr("'"+n+"'",on(e),function(t){return sn(e,t,!0)});return r&&(_i(t),et(e),zi(e,"keyHandled",e,"'"+n+"'",t)),r}function cn(e){var n=this;n.state.focused||pn(n);if(Wi(n,e)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Mi(e)))return;t&&e.keyCode==27&&(e.returnValue=!1);var r=e.keyCode;n.doc.sel.shift=r==16||e.shiftKey;var i=an(n,e);a&&(ln=i?r:null,!i&&r==88&&!Ts&&(m?e.metaKey:e.ctrlKey)&&n.replaceSelection(""))}function hn(e){var n=this;if(Wi(n,e)||n.options.onKeyEvent&&n.options.onKeyEvent(n,Mi(e)))return;var i=e.keyCode,s=e.charCode;if(a&&i==ln){ln=null,_i(e);return}if((a&&(!e.which||e.which<10)||l)&&an(n,e))return;var o=String.fromCharCode(s==null?i:s);this.options.electricChars&&this.doc.mode.electricChars&&this.options.smartIndent&&!qt(this)&&this.doc.mode.electricChars.indexOf(o)>-1&&setTimeout(Mt(n,function(){$n(n,n.doc.sel.to.line,"smart")}),75);if(fn(n,e,o))return;t&&!r&&(n.display.inputHasSelection=null),Bt(n)}function pn(e){if(e.options.readOnly=="nocursor")return;e.state.focused||(qi(e,"focus",e),e.state.focused=!0,e.display.wrapper.className.search(/\bCodeMirror-focused\b/)==-1&&(e.display.wrapper.className+=" CodeMirror-focused"),e.curOp||(Ft(e,!0),s&&setTimeout(os(Ft,e,!0),0))),Ht(e),et(e)}function dn(e){e.state.focused&&(qi(e,"blur",e),e.state.focused=!1,e.display.wrapper.className=e.display.wrapper.className.replace(" CodeMirror-focused","")),clearInterval(e.display.blinker),setTimeout(function(){e.state.focused||(e.doc.sel.shift=!1)},150)}function mn(e,n){function c(){if(i.input.selectionStart!=null){var e=i.input.value="​"+(An(s.from,s.to)?"":i.input.value);i.prevInput="​",i.input.selectionStart=1,i.input.selectionEnd=e.length}}function h(){i.inputDiv.style.position="relative",i.input.style.cssText=l,r&&(i.scrollbarV.scrollTop=i.scroller.scrollTop=u),Ht(e);if(i.input.selectionStart!=null){(!t||r)&&c(),clearTimeout(vn);var n=0,s=function(){i.prevInput==" "&&i.input.selectionStart==0?Mt(e,lr.selectAll)(e):n++<10?vn=setTimeout(s,500):Ft(e)};vn=setTimeout(s,200)}}if(Wi(e,n,"contextmenu"))return;var i=e.display,s=e.doc.sel;if(Ut(i,n)||Jt(e,n))return;var o=zt(e,n),u=i.scroller.scrollTop;if(!o||a)return;var f=e.options.resetSelectionOnContextMenu;f&&(An(s.from,s.to)||On(o,s.from)||!On(o,s.to))&&Mt(e,Fn)(e.doc,o,o);var l=i.input.style.cssText;i.inputDiv.style.position="absolute",i.input.style.cssText="position: fixed; width: 30px; height: 30px; top: "+(n.clientY-5)+"px; left: "+(n.clientX-5)+"px; z-index: 1000; background: white; outline: none;"+"border-width: 0; outline: none; overflow: hidden; opacity: .05; -ms-opacity: .05; filter: alpha(opacity=5);",It(e),Ft(e,!0),An(s.from,s.to)&&(i.input.value=i.prevInput=" "),t&&!r&&c();if(w){Hi(n);var p=function(){Ii(window,"mouseup",p),setTimeout(h,20)};Fi(window,"mouseup",p)}else setTimeout(h,50)}function yn(e,t,n){if(!On(t.from,n))return Dn(e,n);var r=t.text.length-1-(t.to.line-t.from.line);if(n.line>t.to.line+r){var i=n.line-r,s=e.first+e.size-1;return i>s?Ln(s,hi(e,s).text.length):Pn(n,hi(e,i).text.length)}if(n.line==t.to.line+r)return Pn(n,es(t.text).length+(t.text.length==1?t.from.ch:0)+hi(e,t.to.line).text.length-t.to.ch);var o=n.line-t.from.line;return Pn(n,t.text[o].length+(o?0:t.from.ch))}function bn(e,t,n){if(n&&typeof n=="object")return{anchor:yn(e,t,n.anchor),head:yn(e,t,n.head)};if(n=="start")return{anchor:t.from,head:t.from};var r=gn(t);if(n=="around")return{anchor:t.from,head:r};if(n=="end")return{anchor:r,head:r};var i=function(e){if(On(e,t.from))return e;if(!On(t.to,e))return r;var n=e.line+t.text.length-(t.to.line-t.from.line)-1,i=e.ch;return e.line==t.to.line&&(i+=r.ch-t.to.ch),Ln(n,i)};return{anchor:i(e.sel.anchor),head:i(e.sel.head)}}function wn(e,t,n){var r={canceled:!1,from:t.from,to:t.to,text:t.text,origin:t.origin,cancel:function(){this.canceled=!0}};return n&&(r.update=function(t,n,r,i){t&&(this.from=Dn(e,t)),n&&(this.to=Dn(e,n)),r&&(this.text=r),i!==undefined&&(this.origin=i)}),qi(e,"beforeChange",e,r),e.cm&&qi(e.cm,"beforeChange",e.cm,r),r.canceled?null:{from:r.from,to:r.to,text:r.text,origin:r.origin}}function En(e,t,n,r){if(e.cm){if(!e.cm.curOp)return Mt(e.cm,En)(e,t,n,r);if(e.cm.state.suppressEdits)return}if(Vi(e,"beforeChange")||e.cm&&Vi(e.cm,"beforeChange")){t=wn(e,t,!0);if(!t)return}var i=E&&!r&&Lr(e,t.from,t.to);if(i){for(var s=i.length-1;s>=1;--s)Sn(e,{from:i[s].from,to:i[s].to,text:[""]});i.length&&Sn(e,{from:i[0].from,to:i[0].to,text:t.text},n)}else Sn(e,t,n)}function Sn(e,t,n){if(t.text.length==1&&t.text[0]==""&&An(t.from,t.to))return;var r=bn(e,t,n);xi(e,t,r,e.cm?e.cm.curOp.id:NaN),Nn(e,t,r,Cr(e,t));var i=[];li(e,function(e,n){!n&&ns(i,e.history)==-1&&(Ai(e.history,t),i.push(e.history)),Nn(e,t,null,Cr(e,t))})}function xn(e,t){if(e.cm&&e.cm.state.suppressEdits)return;var n=e.history,r=(t=="undo"?n.done:n.undone).pop();if(!r)return;var i={changes:[],anchorBefore:r.anchorAfter,headBefore:r.headAfter,anchorAfter:r.anchorBefore,headAfter:r.headBefore,generation:n.generation};(t=="undo"?n.undone:n.done).push(i),n.generation=r.generation||++n.maxGeneration;var s=Vi(e,"beforeChange")||e.cm&&Vi(e.cm,"beforeChange");for(var o=r.changes.length-1;o>=0;--o){var u=r.changes[o];u.origin=t;if(s&&!wn(e,u,!1)){(t=="undo"?n.done:n.undone).length=0;return}i.changes.push(Si(e,u));var a=o?bn(e,u,null):{anchor:r.anchorBefore,head:r.headBefore};Nn(e,u,a,kr(e,u));var f=[];li(e,function(e,t){!t&&ns(f,e.history)==-1&&(Ai(e.history,u),f.push(e.history)),
Nn(e,u,null,kr(e,u))})}}function Tn(e,t){function n(e){return Ln(e.line+t,e.ch)}e.first+=t,e.cm&&Pt(e.cm,e.first,e.first,t),e.sel.head=n(e.sel.head),e.sel.anchor=n(e.sel.anchor),e.sel.from=n(e.sel.from),e.sel.to=n(e.sel.to)}function Nn(e,t,n,r){if(e.cm&&!e.cm.curOp)return Mt(e.cm,Nn)(e,t,n,r);if(t.to.line<e.first){Tn(e,t.text.length-1-(t.to.line-t.from.line));return}if(t.from.line>e.lastLine())return;if(t.from.line<e.first){var i=t.text.length-1-(e.first-t.from.line);Tn(e,i),t={from:Ln(e.first,0),to:Ln(t.to.line+i,t.to.ch),text:[es(t.text)],origin:t.origin}}var s=e.lastLine();t.to.line>s&&(t={from:t.from,to:Ln(s,hi(e,s).text.length),text:[t.text[0]],origin:t.origin}),t.removed=pi(e,t.from,t.to),n||(n=bn(e,t,null)),e.cm?Cn(e.cm,t,r,n):ri(e,t,r,n)}function Cn(e,t,n,r){var i=e.doc,s=e.display,o=t.from,u=t.to,a=!1,f=o.line;e.options.lineWrapping||(f=mi(_r(i,hi(i,o.line))),i.iter(f,u.line+1,function(e){if(e==s.maxLine)return a=!0,!0})),!On(i.sel.head,t.from)&&!On(t.to,i.sel.head)&&(e.curOp.cursorActivity=!0),ri(i,t,n,r,k(e)),e.options.lineWrapping||(i.iter(f,o.line+t.text.length,function(e){var t=D(i,e);t>s.maxLineLength&&(s.maxLine=e,s.maxLineLength=t,s.maxLineChanged=!0,a=!1)}),a&&(e.curOp.updateMaxLine=!0)),i.frontier=Math.min(i.frontier,o.line),tt(e,400);var l=t.text.length-(u.line-o.line)-1;Pt(e,o.line,u.line+1,l);if(Vi(e,"change")){var c={from:o,to:u,text:t.text,removed:t.removed,origin:t.origin};if(e.curOp.textChanged){for(var h=e.curOp.textChanged;h.next;h=h.next);h.next=c}else e.curOp.textChanged=c}}function kn(e,t,n,r,i){r||(r=n);if(On(r,n)){var s=r;r=n,n=s}typeof t=="string"&&(t=Ss(t)),En(e,{from:n,to:r,text:t,origin:i},null)}function Ln(e,t){if(!(this instanceof Ln))return new Ln(e,t);this.line=e,this.ch=t}function An(e,t){return e.line==t.line&&e.ch==t.ch}function On(e,t){return e.line<t.line||e.line==t.line&&e.ch<t.ch}function Mn(e){return Ln(e.line,e.ch)}function _n(e,t){return Math.max(e.first,Math.min(t,e.first+e.size-1))}function Dn(e,t){if(t.line<e.first)return Ln(e.first,0);var n=e.first+e.size-1;return t.line>n?Ln(n,hi(e,n).text.length):Pn(t,hi(e,t.line).text.length)}function Pn(e,t){var n=e.ch;return n==null||n>t?Ln(e.line,t):n<0?Ln(e.line,0):e}function Hn(e,t){return t>=e.first&&t<e.first+e.size}function Bn(e,t,n,r){if(e.sel.shift||e.sel.extend){var i=e.sel.anchor;if(n){var s=On(t,i);s!=On(n,i)?(i=t,t=n):s!=On(t,n)&&(t=n)}Fn(e,i,t,r)}else Fn(e,t,n||t,r);e.cm&&(e.cm.curOp.userSelChange=!0)}function jn(e,t,n){var r={anchor:t,head:n};return qi(e,"beforeSelectionChange",e,r),e.cm&&qi(e.cm,"beforeSelectionChange",e.cm,r),r.anchor=Dn(e,r.anchor),r.head=Dn(e,r.head),r}function Fn(e,t,n,r,i){if(!i&&Vi(e,"beforeSelectionChange")||e.cm&&Vi(e.cm,"beforeSelectionChange")){var s=jn(e,t,n);n=s.head,t=s.anchor}var o=e.sel;o.goalColumn=null,r==null&&(r=On(n,o.head)?-1:1);if(i||!An(t,o.anchor))t=qn(e,t,r,i!="push");if(i||!An(n,o.head))n=qn(e,n,r,i!="push");if(An(o.anchor,t)&&An(o.head,n))return;o.anchor=t,o.head=n;var u=On(n,t);o.from=u?n:t,o.to=u?t:n,e.cm&&(e.cm.curOp.updateInput=e.cm.curOp.selectionChanged=e.cm.curOp.cursorActivity=!0),zi(e,"cursorActivity",e)}function In(e){Fn(e.doc,e.doc.sel.from,e.doc.sel.to,null,"push")}function qn(e,t,n,r){var i=!1,s=t,o=n||1;e.cantEdit=!1;e:for(;;){var u=hi(e,s.line);if(u.markedSpans)for(var a=0;a<u.markedSpans.length;++a){var f=u.markedSpans[a],l=f.marker;if((f.from==null||(l.inclusiveLeft?f.from<=s.ch:f.from<s.ch))&&(f.to==null||(l.inclusiveRight?f.to>=s.ch:f.to>s.ch))){if(r){qi(l,"beforeCursorEnter");if(l.explicitlyCleared){if(!u.markedSpans)break;--a;continue}}if(!l.atomic)continue;var c=l.find()[o<0?"from":"to"];if(An(c,s)){c.ch+=o,c.ch<0?c.line>e.first?c=Dn(e,Ln(c.line-1)):c=null:c.ch>u.text.length&&(c.line<e.first+e.size-1?c=Ln(c.line+1,0):c=null);if(!c){if(i)return r?(e.cantEdit=!0,Ln(e.first,0)):qn(e,t,n,!0);i=!0,c=t,o=-o}}s=c;continue e}}return s}}function Rn(e){var t=Un(e,e.doc.sel.head,null,e.options.cursorScrollMargin);if(!e.state.focused)return;var n=e.display,r=vs(n.sizer),i=null;t.top+r.top<0?i=!0:t.bottom+r.top>(window.innerHeight||document.documentElement.clientHeight)&&(i=!1);if(i!=null&&!p){var s=n.cursor.style.display=="none";s&&(n.cursor.style.display="",n.cursor.style.left=t.left+"px",n.cursor.style.top=t.top-n.viewOffset+"px"),n.cursor.scrollIntoView(i),s&&(n.cursor.style.display="none")}}function Un(e,t,n,r){r==null&&(r=0);for(;;){var i=!1,s=Et(e,t),o=!n||n==t?s:Et(e,n),u=Wn(e,Math.min(s.left,o.left),Math.min(s.top,o.top)-r,Math.max(s.left,o.left),Math.max(s.bottom,o.bottom)+r),a=e.doc.scrollTop,f=e.doc.scrollLeft;u.scrollTop!=null&&(Zt(e,u.scrollTop),Math.abs(e.doc.scrollTop-a)>1&&(i=!0)),u.scrollLeft!=null&&(en(e,u.scrollLeft),Math.abs(e.doc.scrollLeft-f)>1&&(i=!0));if(!i)return s}}function zn(e,t,n,r,i){var s=Wn(e,t,n,r,i);s.scrollTop!=null&&Zt(e,s.scrollTop),s.scrollLeft!=null&&en(e,s.scrollLeft)}function Wn(e,t,n,r,i){var s=e.display,o=Ct(e.display);n<0&&(n=0);var u=s.scroller.clientHeight-Ji,a=s.scroller.scrollTop,f={},l=e.doc.height+ot(s),c=n<o,h=i>l-o;if(n<a)f.scrollTop=c?0:n;else if(i>a+u){var p=Math.min(n,(h?l:i)-u);p!=a&&(f.scrollTop=p)}var d=s.scroller.clientWidth-Ji,v=s.scroller.scrollLeft;t+=s.gutters.offsetWidth,r+=s.gutters.offsetWidth;var m=s.gutters.offsetWidth,g=t<m+10;return t<v+m||g?(g&&(t=0),f.scrollLeft=Math.max(0,t-10-m)):r>d+v-3&&(f.scrollLeft=r+10-d),f}function Xn(e,t,n){e.curOp.updateScrollPos={scrollLeft:t==null?e.doc.scrollLeft:t,scrollTop:n==null?e.doc.scrollTop:n}}function Vn(e,t,n){var r=e.curOp.updateScrollPos||(e.curOp.updateScrollPos={scrollLeft:e.doc.scrollLeft,scrollTop:e.doc.scrollTop}),i=e.display.scroller;r.scrollTop=Math.max(0,Math.min(i.scrollHeight-i.clientHeight,r.scrollTop+n)),r.scrollLeft=Math.max(0,Math.min(i.scrollWidth-i.clientWidth,r.scrollLeft+t))}function $n(e,t,n,r){var i=e.doc;n==null&&(n="add");if(n=="smart")if(!e.doc.mode.indent)n="prev";else var s=it(e,t);var o=e.options.tabSize,u=hi(i,t),a=Gi(u.text,null,o),f=u.text.match(/^\s*/)[0],l;if(n=="smart"){l=e.doc.mode.indent(s,u.text.slice(f.length),u.text);if(l==Ki){if(!r)return;n="prev"}}n=="prev"?t>i.first?l=Gi(hi(i,t-1).text,null,o):l=0:n=="add"?l=a+e.options.indentUnit:n=="subtract"?l=a-e.options.indentUnit:typeof n=="number"&&(l=a+n),l=Math.max(0,l);var c="",h=0;if(e.options.indentWithTabs)for(var p=Math.floor(l/o);p;--p)h+=o,c+="	";h<l&&(c+=Zi(l-h)),c!=f?kn(e.doc,c,Ln(t,0),Ln(t,f.length),"+input"):i.sel.head.line==t&&i.sel.head.ch<f.length&&Fn(i,Ln(t,f.length),Ln(t,f.length),1),u.stateAfter=null}function Jn(e,t,n){var r=t,i=t,s=e.doc;return typeof t=="number"?i=hi(s,_n(s,t)):r=mi(t),r==null?null:n(i,r)?(Pt(e,r,r+1),i):null}function Kn(e,t,n,r,i){function l(){var t=s+n;return t<e.first||t>=e.first+e.size?f=!1:(s=t,a=hi(e,t))}function c(e){var t=(i?js:Fs)(a,o,n,!0);if(t==null){if(!!e||!l())return f=!1;i?o=(n<0?Os:As)(a):o=n<0?a.text.length:0}else o=t;return!0}var s=t.line,o=t.ch,u=n,a=hi(e,s),f=!0;if(r=="char")c();else if(r=="column")c(!0);else if(r=="word"||r=="group"){var h=null,p=r=="group";for(var d=!0;;d=!1){if(n<0&&!c(!d))break;var v=a.text.charAt(o)||"\n",m=as(v)?"w":p?/\s/.test(v)?null:"p":null;if(h&&h!=m){n<0&&(n=1,c());break}m&&(h=m);if(n>0&&!c(!d))break}}var g=qn(e,Ln(s,o),u,!0);return f||(g.hitSide=!0),g}function Qn(e,t,n,r){var i=e.doc,s=t.left,o;if(r=="page"){var u=Math.min(e.display.wrapper.clientHeight,window.innerHeight||document.documentElement.clientHeight);o=t.top+n*(u-(n<0?1.5:.5)*Ct(e.display))}else r=="line"&&(o=n>0?t.bottom+3:t.top-3);for(;;){var a=xt(e,s,o);if(!a.outside)break;if(n<0?o<=0:o>=i.height){a.hitSide=!0;break}o+=n*5}return a}function Gn(e,t){var n=t.ch,r=t.ch;if(e){(t.xRel<0||r==e.length)&&n?--n:++r;var i=e.charAt(n),s=as(i)?as:/\s/.test(i)?function(e){return/\s/.test(e)}:function(e){return!/\s/.test(e)&&!as(e)};while(n>0&&s(e.charAt(n-1)))--n;while(r<e.length&&s(e.charAt(r)))++r}return{from:Ln(t.line,n),to:Ln(t.line,r)}}function Yn(e,t){Bn(e.doc,Ln(t,0),Dn(e.doc,Ln(t+1,0)))}function tr(e,t,n,r){x.defaults[e]=t,n&&(Zn[e]=r?function(e,t,r){r!=nr&&n(e,t,r)}:n)}function ar(e,t){if(t===!0)return t;if(e.copyState)return e.copyState(t);var n={};for(var r in t){var i=t[r];i instanceof Array&&(i=i.concat([])),n[r]=i}return n}function fr(e,t,n){return e.startState?e.startState(t,n):!0}function hr(e){return typeof e=="string"?cr[e]:e}function pr(e,t,n){function r(t){t=hr(t);var i=t[e];if(i===!1)return"stop";if(i!=null&&n(i))return!0;if(t.nofallthrough)return"stop";var s=t.fallthrough;if(s==null)return!1;if(Object.prototype.toString.call(s)!="[object Array]")return r(s);for(var o=0,u=s.length;o<u;++o){var a=r(s[o]);if(a)return a}return!1}for(var i=0;i<t.length;++i){var s=r(t[i]);if(s)return s!="stop"}}function dr(e){var t=Ns[e.keyCode];return t=="Ctrl"||t=="Alt"||t=="Shift"||t=="Mod"}function vr(e,t){if(a&&e.keyCode==34&&e["char"])return!1;var n=Ns[e.keyCode];if(n==null||e.altGraphKey)return!1;e.altKey&&(n="Alt-"+n);if(b?e.metaKey:e.ctrlKey)n="Ctrl-"+n;if(b?e.ctrlKey:e.metaKey)n="Cmd-"+n;return!t&&e.shiftKey&&(n="Shift-"+n),n}function mr(e,t){this.pos=this.start=0,this.string=e,this.tabSize=t||8,this.lastColumnPos=this.lastColumnValue=0}function gr(e,t){this.lines=[],this.type=t,this.doc=e}function yr(e,t,n,r,i){if(r&&r.shared)return wr(e,t,n,r,i);if(e.cm&&!e.cm.curOp)return Mt(e.cm,yr)(e,t,n,r,i);var s=new gr(e,i);if(On(n,t)||An(t,n)&&i=="range"&&(!r.inclusiveLeft||!r.inclusiveRight))return s;r&&is(r,s),s.replacedWith&&(s.collapsed=!0,s.replacedWith=cs("span",[s.replacedWith],"CodeMirror-widget"),r.handleMouseEvents||(s.replacedWith.ignoreEvents=!0)),s.collapsed&&(S=!0),s.addToHistory&&xi(e,{from:t,to:n,origin:"markText"},{head:e.sel.head,anchor:e.sel.anchor},NaN);var o=t.line,u=0,a,f,l=e.cm,c;e.iter(o,n.line+1,function(r){l&&s.collapsed&&!l.options.lineWrapping&&_r(e,r)==l.display.maxLine&&(c=!0);var i={from:null,to:null,marker:s};u+=r.text.length,o==t.line&&(i.from=t.ch,u-=t.ch),o==n.line&&(i.to=n.ch,u-=r.text.length-n.ch),s.collapsed&&(o==n.line&&(f=Ar(r,n.ch)),o==t.line?a=Ar(r,t.ch):vi(r,0)),xr(r,i),++o}),s.collapsed&&e.iter(t.line,n.line+1,function(t){Dr(e,t)&&vi(t,0)}),s.clearOnEnter&&Fi(s,"beforeCursorEnter",function(){s.clear()}),s.readOnly&&(E=!0,(e.history.done.length||e.history.undone.length)&&e.clearHistory());if(s.collapsed){if(a!=f)throw new Error("Inserting collapsed marker overlapping an existing one");s.size=u,s.atomic=!0}return l&&(c&&(l.curOp.updateMaxLine=!0),(s.className||s.title||s.startStyle||s.endStyle||s.collapsed)&&Pt(l,t.line,n.line+1),s.atomic&&In(l)),s}function br(e,t){this.markers=e,this.primary=t;for(var n=0,r=this;n<e.length;++n)e[n].parent=this,Fi(e[n],"clear",function(){r.clear()})}function wr(e,t,n,r,i){r=is(r),r.shared=!1;var s=[yr(e,t,n,r,i)],o=s[0],u=r.replacedWith;return li(e,function(e){u&&(r.replacedWith=u.cloneNode(!0)),s.push(yr(e,Dn(e,t),Dn(e,n),r,i));for(var a=0;a<e.linked.length;++a)if(e.linked[a].isParent)return;o=es(s)}),new br(s,o)}function Er(e,t){if(e)for(var n=0;n<e.length;++n){var r=e[n];if(r.marker==t)return r}}function Sr(e,t){for(var n,r=0;r<e.length;++r)e[r]!=t&&(n||(n=[])).push(e[r]);return n}function xr(e,t){e.markedSpans=e.markedSpans?e.markedSpans.concat([t]):[t],t.marker.attachLine(e)}function Tr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);if(u||(o.inclusiveLeft&&o.inclusiveRight||o.type=="bookmark")&&s.from==t&&(!n||!s.marker.insertLeft)){var a=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);(i||(i=[])).push({from:s.from,to:a?null:s.to,marker:o})}}return i}function Nr(e,t,n){if(e)for(var r=0,i;r<e.length;++r){var s=e[r],o=s.marker,u=s.to==null||(o.inclusiveRight?s.to>=t:s.to>t);if(u||o.type=="bookmark"&&s.from==t&&(!n||s.marker.insertLeft)){var a=s.from==null||(o.inclusiveLeft?s.from<=t:s.from<t);(i||(i=[])).push({from:a?null:s.from-t,to:s.to==null?null:s.to-t,marker:o})}}return i}function Cr(e,t){var n=Hn(e,t.from.line)&&hi(e,t.from.line).markedSpans,r=Hn(e,t.to.line)&&hi(e,t.to.line).markedSpans;if(!n&&!r)return null;var i=t.from.ch,s=t.to.ch,o=An(t.from,t.to),u=Tr(n,i,o),a=Nr(r,s,o),f=t.text.length==1,l=es(t.text).length+(f?i:0);if(u)for(var c=0;c<u.length;++c){var h=u[c];if(h.to==null){var p=Er(a,h.marker);p?f&&(h.to=p.to==null?null:p.to+l):h.to=i}}if(a)for(var c=0;c<a.length;++c){var h=a[c];h.to!=null&&(h.to+=l);if(h.from==null){var p=Er(u,h.marker);p||(h.from=l,f&&(u||(u=[])).push(h))}else h.from+=l,f&&(u||(u=[])).push(h)}if(f&&u){for(var c=0;c<u.length;++c)u[c].from!=null&&u[c].from==u[c].to&&u[c].marker.type!="bookmark"&&u.splice(c--,1);u.length||(u=null)}var d=[u];if(!f){var v=t.text.length-2,m;if(v>0&&u)for(var c=0;c<u.length;++c)u[c].to==null&&(m||(m=[])).push({from:null,to:null,marker:u[c].marker});for(var c=0;c<v;++c)d.push(m);d.push(a)}return d}function kr(e,t){var n=Ni(e,t),r=Cr(e,t);if(!n)return r;if(!r)return n;for(var i=0;i<n.length;++i){var s=n[i],o=r[i];if(s&&o)e:for(var u=0;u<o.length;++u){var a=o[u];for(var f=0;f<s.length;++f)if(s[f].marker==a.marker)continue e;s.push(a)}else o&&(n[i]=o)}return n}function Lr(e,t,n){var r=null;e.iter(t.line,n.line+1,function(e){if(e.markedSpans)for(var t=0;t<e.markedSpans.length;++t){var n=e.markedSpans[t].marker;n.readOnly&&(!r||ns(r,n)==-1)&&(r||(r=[])).push(n)}});if(!r)return null;var i=[{from:t,to:n}];for(var s=0;s<r.length;++s){var o=r[s],u=o.find();for(var a=0;a<i.length;++a){var f=i[a];if(On(f.to,u.from)||On(u.to,f.from))continue;var l=[a,1];(On(f.from,u.from)||!o.inclusiveLeft&&An(f.from,u.from))&&l.push({from:f.from,to:u.from}),(On(u.to,f.to)||!o.inclusiveRight&&An(f.to,u.to))&&l.push({from:u.to,to:f.to}),i.splice.apply(i,l),a+=l.length-1}}return i}function Ar(e,t){var n=S&&e.markedSpans,r;if(n)for(var i,s=0;s<n.length;++s){i=n[s];if(!i.marker.collapsed)continue;(i.from==null||i.from<t)&&(i.to==null||i.to>t)&&(!r||r.width<i.marker.width)&&(r=i.marker)}return r}function Or(e){return Ar(e,-1)}function Mr(e){return Ar(e,e.text.length+1)}function _r(e,t){var n;while(n=Or(t))t=hi(e,n.find().from.line);return t}function Dr(e,t){var n=S&&t.markedSpans;if(n)for(var r,i=0;i<n.length;++i){r=n[i];if(!r.marker.collapsed)continue;if(r.from==null)return!0;if(r.marker.replacedWith)continue;if(r.from==0&&r.marker.inclusiveLeft&&Pr(e,t,r))return!0}}function Pr(e,t,n){if(n.to==null){var r=n.marker.find().to,i=hi(e,r.line);return Pr(e,i,Er(i.markedSpans,n.marker))}if(n.marker.inclusiveRight&&n.to==t.text.length)return!0;for(var s,o=0;o<t.markedSpans.length;++o){s=t.markedSpans[o];if(s.marker.collapsed&&!s.marker.replacedWith&&s.from==n.to&&(s.marker.inclusiveLeft||n.marker.inclusiveRight)&&Pr(e,t,s))return!0}}function Hr(e){var t=e.markedSpans;if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.detachLine(e);e.markedSpans=null}function Br(e,t){if(!t)return;for(var n=0;n<t.length;++n)t[n].marker.attachLine(e);e.markedSpans=t}function Fr(e){return function(){var t=!this.cm.curOp;t&&At(this.cm);try{var n=e.apply(this,arguments)}finally{t&&Ot(this.cm)}return n}}function Ir(e){return e.height!=null?e.height:((!e.node.parentNode||e.node.parentNode.nodeType!=1)&&ps(e.cm.display.measure,cs("div",[e.node],null,"position: relative")),e.height=e.node.offsetHeight)}function qr(e,t,n,r){var i=new jr(e,n,r);return i.noHScroll&&(e.display.alignWidgets=!0),Jn(e,t,function(t){var n=t.widgets||(t.widgets=[]);i.insertAt==null?n.push(i):n.splice(Math.min(n.length-1,Math.max(0,i.insertAt)),0,i),i.line=t;if(!Dr(e.doc,t)||i.showIfHidden){var r=yi(e,t)<e.doc.scrollTop;vi(t,t.height+Ir(i)),r&&Vn(e,0,i.height)}return!0}),i}function Ur(e,t,n,r){e.text=t,e.stateAfter&&(e.stateAfter=null),e.styles&&(e.styles=null),e.order!=null&&(e.order=null),Hr(e),Br(e,n);var i=r?r(e):1;i!=e.height&&vi(e,i)}function zr(e){e.parent=null,Hr(e)}function Wr(e,t,n,r,i,s){var o=n.flattenSpans;o==null&&(o=e.options.flattenSpans);var u=0,a=null,f=new mr(t,e.options.tabSize),l;t==""&&n.blankLine&&n.blankLine(r);while(!f.eol()){f.pos>e.options.maxHighlightLength?(o=!1,s&&$r(e,t,r,f.pos),f.pos=t.length,l=null):l=n.token(f,r);if(!o||a!=l)u<f.start&&i(f.start,a),u=f.start,a=l;f.start=f.pos}while(u<f.pos){var c=Math.min(f.pos,u+5e4);i(c,a),u=c}}function Xr(e,t,n,r){var i=[e.state.modeGen];Wr(e,t.text,e.doc.mode,n,function(e,t){i.push(e,t)},r);for(var s=0;s<e.state.overlays.length;++s){var o=e.state.overlays[s],u=1,a=0;Wr(e,t.text,o.mode,!0,function(e,t){var n=u;while(a<e){var r=i[u];r>e&&i.splice(u,1,e,i[u+1],r),u+=2,a=Math.min(e,r)}if(!t)return;if(o.opaque)i.splice(n,u-n,e,t),u=n+2;else for(;n<u;n+=2){var s=i[n+1];i[n+1]=s?s+" "+t:t}})}return i}function Vr(e,t){if(!t.styles||t.styles[0]!=e.state.modeGen)t.styles=Xr(e,t,t.stateAfter=it(e,mi(t)));return t.styles}function $r(e,t,n,r){var i=e.doc.mode,s=new mr(t,e.options.tabSize);s.start=s.pos=r||0,t==""&&i.blankLine&&i.blankLine(n);while(!s.eol()&&s.pos<=e.options.maxHighlightLength)i.token(s,n),s.start=s.pos}function Kr(e,t){if(!e)return null;for(;;){var n=e.match(/(?:^|\s)line-(background-)?(\S+)/);if(!n)break;e=e.slice(0,n.index)+e.slice(n.index+n[0].length);var r=n[1]?"bgClass":"textClass";t[r]==null?t[r]=n[2]:(new RegExp("(?:^|s)"+n[2]+"(?:$|s)")).test(t[r])||(t[r]+=" "+n[2])}return Jr[e]||(Jr[e]="cm-"+e.replace(/ +/g," cm-"))}function Qr(e,n,r,o){var u,a=n,f=!0;while(u=Or(a))a=hi(e.doc,u.find().from.line);var l={pre:cs("pre"),col:0,pos:0,measure:null,measuredSomething:!1,cm:e,copyWidgets:o};do{a.text&&(f=!1),l.measure=a==n&&r,l.pos=0,l.addToken=l.measure?Zr:Yr,(t||s)&&e.getOption("lineWrapping")&&(l.addToken=ei(l.addToken));var c=ni(a,l,Vr(e,a));r&&a==n&&!l.measuredSomething&&(r[0]=l.pre.appendChild(Es(e.display.measure)),l.measuredSomething=!0),c&&(a=hi(e.doc,c.to.line))}while(c);r&&!l.measuredSomething&&!r[0]&&(r[0]=l.pre.appendChild(f?cs("span"," "):Es(e.display.measure))),!l.pre.firstChild&&!Dr(e.doc,n)&&l.pre.appendChild(document.createTextNode(" "));var h;if(r&&(t||i)&&(h=bi(a))){var p=h.length-1;h[p].from==h[p].to&&--p;var d=h[p],v=h[p-1];if(d.from+1==d.to&&v&&d.level<v.level){var m=r[l.pos-1];m&&m.parentNode.insertBefore(m.measureRight=Es(e.display.measure),m.nextSibling)}}var g=l.textClass?l.textClass+" "+(n.textClass||""):n.textClass;return g&&(l.pre.className=g),qi(e,"renderLine",e,n,l.pre),l}function Gr(e){var t=cs("span","•","cm-invalidchar");return t.title="\\u"+e.charCodeAt(0).toString(16),t}function Yr(e,t,n,r,i,s){if(!t)return;var o=e.cm.options.specialChars;if(!o.test(t)){e.col+=t.length;var u=document.createTextNode(t)}else{var u=document.createDocumentFragment(),a=0;for(;;){o.lastIndex=a;var f=o.exec(t),l=f?f.index-a:t.length-a;l&&(u.appendChild(document.createTextNode(t.slice(a,a+l))),e.col+=l);if(!f)break;a+=l+1;if(f[0]=="	"){var c=e.cm.options.tabSize,h=c-e.col%c;u.appendChild(cs("span",Zi(h),"cm-tab")),e.col+=h}else{var p=e.cm.options.specialCharPlaceholder(f[0]);u.appendChild(p),e.col+=1}}}if(n||r||i||e.measure){var d=n||"";r&&(d+=r),i&&(d+=i);var p=cs("span",[u],d);return s&&(p.title=s),e.pre.appendChild(p)}e.pre.appendChild(u)}function Zr(e,n,r,i,s){var o=e.cm.options.lineWrapping;for(var u=0;u<n.length;++u){var a=n.charAt(u),f=u==0;a>=""&&a<""&&u<n.length-1?(a=n.slice(u,u+2),++u):u&&o&&gs(n,u)&&e.pre.appendChild(cs("wbr"));var l=e.measure[e.pos],c=e.measure[e.pos]=Yr(e,a,r,f&&i,u==n.length-1&&s);l&&(c.leftSide=l.leftSide||l),t&&o&&a==" "&&u&&!/\s/.test(n.charAt(u-1))&&u<n.length-1&&!/\s/.test(n.charAt(u+1))&&(c.style.whiteSpace="normal"),e.pos+=a.length}n.length&&(e.measuredSomething=!0)}function ei(e){function t(e){var t=" ";for(var n=0;n<e.length-2;++n)t+=n%2?" ":" ";return t+=" ",t}return function(n,r,i,s,o,u){return e(n,r.replace(/ {3,}/g,t),i,s,o,u)}}function ti(e,t,n,r){var i=!r&&n.replacedWith;if(i){e.copyWidgets&&(i=i.cloneNode(!0)),e.pre.appendChild(i);if(e.measure){if(t)e.measure[e.pos]=i;else{var s=Es(e.cm.display.measure);if(n.type=="bookmark"&&!n.insertLeft)e.measure[e.pos]=e.pre.appendChild(s);else{if(e.measure[e.pos])return;e.measure[e.pos]=e.pre.insertBefore(s,i)}}e.measuredSomething=!0}}e.pos+=t}function ni(e,t,n){var r=e.markedSpans,i=e.text,s=0;if(!r){for(var o=1;o<n.length;o+=2)t.addToken(t,i.slice(s,s=n[o]),Kr(n[o+1],t));return}var u=i.length,a=0,o=1,f="",l,c=0,h,p,d,v,m;for(;;){if(c==a){h=p=d=v="",m=null,c=Infinity;var g=[];for(var y=0;y<r.length;++y){var b=r[y],w=b.marker;b.from<=a&&(b.to==null||b.to>a)?(b.to!=null&&c>b.to&&(c=b.to,p=""),w.className&&(h+=" "+w.className),w.startStyle&&b.from==a&&(d+=" "+w.startStyle),w.endStyle&&b.to==c&&(p+=" "+w.endStyle),w.title&&!v&&(v=w.title),w.collapsed&&(!m||m.marker.size<w.size)&&(m=b)):b.from>a&&c>b.from&&(c=b.from),w.type=="bookmark"&&b.from==a&&w.replacedWith&&g.push(w)}if(m&&(m.from||0)==a){ti(t,(m.to==null?u:m.to)-a,m.marker,m.from==null);if(m.to==null)return m.marker.find()}if(!m&&g.length)for(var y=0;y<g.length;++y)ti(t,0,g[y])}if(a>=u)break;var E=Math.min(u,c);for(;;){if(f){var S=a+f.length;if(!m){var x=S>E?f.slice(0,E-a):f;t.addToken(t,x,l?l+h:h,d,a+x.length==c?p:"",v)}if(S>=E){f=f.slice(E-a),a=E;break}a=S,d=""}f=i.slice(s,s=n[o++]),l=Kr(n[o++],t)}}}function ri(e,t,n,r,i){function s(e){return n?n[e]:null}function o(e,n,r){Ur(e,n,r,i),zi(e,"change",e,t)}var u=t.from,a=t.to,f=t.text,l=hi(e,u.line),c=hi(e,a.line),h=es(f),p=s(f.length-1),d=a.line-u.line;if(u.ch==0&&a.ch==0&&h==""&&(!e.cm||e.cm.options.wholeLineUpdateBefore)){for(var v=0,m=f.length-1,g=[];v<m;++v)g.push(new Rr(f[v],s(v),i));o(c,c.text,p),d&&e.remove(u.line,d),g.length&&e.insert(u.line,g)}else if(l==c)if(f.length==1)o(l,l.text.slice(0,u.ch)+h+l.text.slice(a.ch),p);else{for(var g=[],v=1,m=f.length-1;v<m;++v)g.push(new Rr(f[v],s(v),i));g.push(new Rr(h+l.text.slice(a.ch),p,i)),o(l,l.text.slice(0,u.ch)+f[0],s(0)),e.insert(u.line+1,g)}else if(f.length==1)o(l,l.text.slice(0,u.ch)+f[0]+c.text.slice(a.ch),s(0)),e.remove(u.line+1,d);else{o(l,l.text.slice(0,u.ch)+f[0],s(0)),o(c,h+c.text.slice(a.ch),p);for(var v=1,m=f.length-1,g=[];v<m;++v)g.push(new Rr(f[v],s(v),i));d>1&&e.remove(u.line+1,d-1),e.insert(u.line+1,g)}zi(e,"change",e,t),Fn(e,r.anchor,r.head,null,!0)}function ii(e){this.lines=e,this.parent=null;for(var t=0,n=e.length,r=0;t<n;++t)e[t].parent=this,r+=e[t].height;this.height=r}function si(e){this.children=e;var t=0,n=0;for(var r=0,i=e.length;r<i;++r){var s=e[r];t+=s.chunkSize(),n+=s.height,s.parent=this}this.size=t,this.height=n,this.parent=null}function li(e,t,n){function r(e,i,s){if(e.linked)for(var o=0;o<e.linked.length;++o){var u=e.linked[o];if(u.doc==i)continue;var a=s&&u.sharedHist;if(n&&!a)continue;t(u.doc,a),r(u.doc,e,a)}}r(e,null,!0)}function ci(e,t){if(t.cm)throw new Error("This document is already in use.");e.doc=t,t.cm=e,L(e),N(e),e.options.lineWrapping||P(e),e.options.mode=t.modeOption,Pt(e)}function hi(e,t){t-=e.first;while(!e.lines)for(var n=0;;++n){var r=e.children[n],i=r.chunkSize();if(t<i){e=r;break}t-=i}return e.lines[t]}function pi(e,t,n){var r=[],i=t.line;return e.iter(t.line,n.line+1,function(e){var s=e.text;i==n.line&&(s=s.slice(0,n.ch)),i==t.line&&(s=s.slice(t.ch)),r.push(s),++i}),r}function di(e,t,n){var r=[];return e.iter(t,n,function(e){r.push(e.text)}),r}function vi(e,t){var n=t-e.height;for(var r=e;r;r=r.parent)r.height+=n}function mi(e){if(e.parent==null)return null;var t=e.parent,n=ns(t.lines,e);for(var r=t.parent;r;t=r,r=r.parent)for(var i=0;;++i){if(r.children[i]==t)break;n+=r.children[i].chunkSize()}return n+t.first}function gi(e,t){var n=e.first;e:do{for(var r=0,i=e.children.length;r<i;++r){var s=e.children[r],o=s.height;if(t<o){e=s;continue e}t-=o,n+=s.chunkSize()}return n}while(!e.lines);for(var r=0,i=e.lines.length;r<i;++r){var u=e.lines[r],a=u.height;if(t<a)break;t-=a}return n+r}function yi(e,t){t=_r(e.doc,t);var n=0,r=t.parent;for(var i=0;i<r.lines.length;++i){var s=r.lines[i];if(s==t)break;n+=s.height}for(var o=r.parent;o;r=o,o=r.parent)for(var i=0;i<o.children.length;++i){var u=o.children[i];if(u==r)break;n+=u.height}return n}function bi(e){var t=e.order;return t==null&&(t=e.order=Is(e.text)),t}function wi(e){return{done:[],undone:[],undoDepth:Infinity,lastTime:0,lastOp:null,lastOrigin:null,generation:e||1,maxGeneration:e||1}}function Ei(e,t,n,r){var i=t["spans_"+e.id],s=0;e.iter(Math.max(e.first,n),Math.min(e.first+e.size,r),function(n){n.markedSpans&&((i||(i=t["spans_"+e.id]={}))[s]=n.markedSpans),++s})}function Si(e,t){var n={line:t.from.line,ch:t.from.ch},r={from:n,to:gn(t),text:pi(e,t.from,t.to)};return Ei(e,r,t.from.line,t.to.line+1),li(e,function(e){Ei(e,r,t.from.line,t.to.line+1)},!0),r}function xi(e,t,n,r){var i=e.history;i.undone.length=0;var s=+(new Date),o=es(i.done);if(o&&(i.lastOp==r||i.lastOrigin==t.origin&&t.origin&&(t.origin.charAt(0)=="+"&&e.cm&&i.lastTime>s-e.cm.options.historyEventDelay||t.origin.charAt(0)=="*"))){var u=es(o.changes);An(t.from,t.to)&&An(t.from,u.to)?u.to=gn(t):o.changes.push(Si(e,t)),o.anchorAfter=n.anchor,o.headAfter=n.head}else{o={changes:[Si(e,t)],generation:i.generation,anchorBefore:e.sel.anchor,headBefore:e.sel.head,anchorAfter:n.anchor,headAfter:n.head},i.done.push(o),i.generation=++i.maxGeneration;while(i.done.length>i.undoDepth)i.done.shift()}i.lastTime=s,i.lastOp=r,i.lastOrigin=t.origin}function Ti(e){if(!e)return null;for(var t=0,n;t<e.length;++t)e[t].marker.explicitlyCleared?n||(n=e.slice(0,t)):n&&n.push(e[t]);return n?n.length?n:null:e}function Ni(e,t){var n=t["spans_"+e.id];if(!n)return null;for(var r=0,i=[];r<t.text.length;++r)i.push(Ti(n[r]));return i}function Ci(e,t){for(var n=0,r=[];n<e.length;++n){var i=e[n],s=i.changes,o=[];r.push({changes:o,anchorBefore:i.anchorBefore,headBefore:i.headBefore,anchorAfter:i.anchorAfter,headAfter:i.headAfter});for(var u=0;u<s.length;++u){var a=s[u],f;o.push({from:a.from,to:a.to,text:a.text});if(t)for(var l in a)(f=l.match(/^spans_(\d+)$/))&&ns(t,Number(f[1]))>-1&&(es(o)[l]=a[l],delete a[l])}}return r}function ki(e,t,n,r){n<e.line?e.line+=r:t<e.line&&(e.line=t,e.ch=0)}function Li(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i],o=!0;for(var u=0;u<s.changes.length;++u){var a=s.changes[u];s.copied||(a.from=Mn(a.from),a.to=Mn(a.to));if(n<a.from.line)a.from.line+=r,a.to.line+=r;else if(t<=a.to.line){o=!1;break}}s.copied||(s.anchorBefore=Mn(s.anchorBefore),s.headBefore=Mn(s.headBefore),s.anchorAfter=Mn(s.anchorAfter),s.readAfter=Mn(s.headAfter),s.copied=!0),o?(ki(s.anchorBefore),ki(s.headBefore),ki(s.anchorAfter),ki(s.headAfter)):(e.splice(0,i+1),i=0)}}function Ai(e,t){var n=t.from.line,r=t.to.line,i=t.text.length-(r-n)-1;Li(e.done,n,r,i),Li(e.undone,n,r,i)}function Oi(){Hi(this)}function Mi(e){return e.stop||(e.stop=Oi),e}function _i(e){e.preventDefault?e.preventDefault():e.returnValue=!1}function Di(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}function Pi(e){return e.defaultPrevented!=null?e.defaultPrevented:e.returnValue==0}function Hi(e){_i(e),Di(e)}function Bi(e){return e.target||e.srcElement}function ji(e){var t=e.which;return t==null&&(e.button&1?t=1:e.button&2?t=3:e.button&4&&(t=2)),m&&e.ctrlKey&&t==1&&(t=3),t}function Fi(e,t,n){if(e.addEventListener)e.addEventListener(t,n,!1);else if(e.attachEvent)e.attachEvent("on"+t,n);else{var r=e._handlers||(e._handlers={}),i=r[t]||(r[t]=[]);i.push(n)}}function Ii(e,t,n){if(e.removeEventListener)e.removeEventListener(t,n,!1);else if(e.detachEvent)e.detachEvent("on"+t,n);else{var r=e._handlers&&e._handlers[t];if(!r)return;for(var i=0;i<r.length;++i)if(r[i]==n){r.splice(i,1);break}}}function qi(e,t){var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);for(var i=0;i<n.length;++i)n[i].apply(null,r)}function zi(e,t){function i(e){return function(){e.apply(null,r)}}var n=e._handlers&&e._handlers[t];if(!n)return;var r=Array.prototype.slice.call(arguments,2);Ri||(++Ui,Ri=[],setTimeout(Xi,0));for(var s=0;s<n.length;++s)Ri.push(i(n[s]))}function Wi(e,t,n){return qi(e,n||t.type,e,t),Pi(t)||t.codemirrorIgnore}function Xi(){--Ui;var e=Ri;Ri=null;for(var t=0;t<e.length;++t)e[t]()}function Vi(e,t){var n=e._handlers&&e._handlers[t];return n&&n.length>0}function $i(e){e.prototype.on=function(e,t){Fi(this,e,t)},e.prototype.off=function(e,t){Ii(this,e,t)}}function Qi(){this.id=null}function Gi(e,t,n,r,i){t==null&&(t=e.search(/[^\s\u00a0]/),t==-1&&(t=e.length));for(var s=r||0,o=i||0;s<t;++s)e.charAt(s)=="	"?o+=n-o%n:++o;return o}function Zi(e){while(Yi.length<=e)Yi.push(es(Yi)+" ");return Yi[e]}function es(e){return e[e.length-1]}function ts(e){if(d)e.selectionStart=0,e.selectionEnd=e.value.length;else try{e.select()}catch(t){}}function ns(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0,r=e.length;n<r;++n)if(e[n]==t)return n;return-1}function rs(e,t){function n(){}n.prototype=e;var r=new n;return t&&is(t,r),r}function is(e,t){t||(t={});for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function ss(e){for(var t=[],n=0;n<e;++n)t.push(undefined);return t}function os(e){var t=Array.prototype.slice.call(arguments,1);return function(){return e.apply(null,t)}}function as(e){return/\w/.test(e)||e>""&&(e.toUpperCase()!=e.toLowerCase()||us.test(e))}function fs(e){for(var t in e)if(e.hasOwnProperty(t)&&e[t])return!1;return!0}function cs(e,t,n,r){var i=document.createElement(e);n&&(i.className=n),r&&(i.style.cssText=r);if(typeof t=="string")ds(i,t);else if(t)for(var s=0;s<t.length;++s)i.appendChild(t[s]);return i}function hs(e){for(var t=e.childNodes.length;t>0;--t)e.removeChild(e.firstChild);return e}function ps(e,t){return hs(e).appendChild(t)}function ds(e,t){r?(e.innerHTML="",e.appendChild(document.createTextNode(t))):e.textContent=t}function vs(e){return e.getBoundingClientRect()}function gs(){return!1}function bs(e){if(ys!=null)return ys;var t=cs("div",null,null,"width: 50px; height: 50px; overflow-x: scroll");return ps(e,t),t.offsetWidth&&(ys=t.offsetHeight-t.clientHeight),ys||0}function Es(e){if(ws==null){var t=cs("span","​");ps(e,cs("span",[t,document.createTextNode("x")])),e.firstChild.offsetHeight!=0&&(ws=t.offsetWidth<=1&&t.offsetHeight>2&&!n)}return ws?cs("span","​"):cs("span"," ",null,"display: inline-block; width: 1px; margin-right: -1px")}function Cs(e,t,n,r){if(!e)return r(t,n,"ltr");var i=!1;for(var s=0;s<e.length;++s){var o=e[s];if(o.from<n&&o.to>t||t==n&&o.to==t)r(Math.max(o.from,t),Math.min(o.to,n),o.level==1?"rtl":"ltr"),i=!0}i||r(t,n,"ltr")}function ks(e){return e.level%2?e.to:e.from}function Ls(e){return e.level%2?e.from:e.to}function As(e){var t=bi(e);return t?ks(t[0]):0}function Os(e){var t=bi(e);return t?Ls(es(t)):e.text.length}function Ms(e,t){var n=hi(e.doc,t),r=_r(e.doc,n);r!=n&&(t=mi(r));var i=bi(r),s=i?i[0].level%2?Os(r):As(r):0;return Ln(t,s)}function _s(e,t){var n,r;while(n=Mr(r=hi(e.doc,t)))t=n.find().to.line;var i=bi(r),s=i?i[0].level%2?As(r):Os(r):r.text.length;return Ln(t,s)}function Ds(e,t,n){var r=e[0].level;return t==r?!0:n==r?!1:t<n}function Hs(e,t){for(var n=0,r;n<e.length;++n){var i=e[n];if(i.from<t&&i.to>t)return Ps=null,n;if(i.from==t||i.to==t){if(r!=null)return Ds(e,i.level,e[r].level)?(Ps=r,n):(Ps=n,r);r=n}}return Ps=null,r}function Bs(e,t,n,r){if(!r)return t+n;do t+=n;while(t>0&&ls.test(e.text.charAt(t)));return t}function js(e,t,n,r){var i=bi(e);if(!i)return Fs(e,t,n,r);var s=Hs(i,t),o=i[s],u=Bs(e,t,o.level%2?-n:n,r);for(;;){if(u>o.from&&u<o.to)return u;if(u==o.from||u==o.to)return Hs(i,u)==s?u:(o=i[s+=n],n>0==o.level%2?o.to:o.from);o=i[s+=n];if(!o)return null;n>0==o.level%2?u=Bs(e,o.to,-1,r):u=Bs(e,o.from,1,r)}}function Fs(e,t,n,r){var i=t+n;if(r)while(i>0&&ls.test(e.text.charAt(i)))i+=n;return i<0||i>e.text.length?null:i}var e=/gecko\/\d/i.test(navigator.userAgent),t=/MSIE \d/.test(navigator.userAgent),n=t&&(document.documentMode==null||document.documentMode<8),r=t&&(document.documentMode==null||document.documentMode<9),i=/Trident\/([7-9]|\d{2,})\./.test(navigator.userAgent),s=/WebKit\//.test(navigator.userAgent),o=s&&/Qt\/\d+\.\d+/.test(navigator.userAgent),u=/Chrome\//.test(navigator.userAgent),a=/Opera\//.test(navigator.userAgent),f=/Apple Computer/.test(navigator.vendor),l=/KHTML\//.test(navigator.userAgent),c=/Mac OS X 1\d\D([7-9]|\d\d)\D/.test(navigator.userAgent),h=/Mac OS X 1\d\D([8-9]|\d\d)\D/.test(navigator.userAgent),p=/PhantomJS/.test(navigator.userAgent),d=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),v=d||/Android|webOS|BlackBerry|Opera Mini|Opera Mobi|IEMobile/i.test(navigator.userAgent),m=d||/Mac/.test(navigator.platform),g=/win/i.test(navigator.platform),y=a&&navigator.userAgent.match(/Version\/(\d*\.\d*)/);y&&(y=Number(y[1])),y&&y>=15&&(a=!1,s=!0);var b=m&&(o||a&&(y==null||y<12.11)),w=e||t&&!r,E=!1,S=!1,Nt,Lt=0,Wt,Xt,Qt=0,tn=0,nn=null;t?nn=-0.53:e?nn=15:u?nn=-0.7:f&&(nn=-1/3);var un,ln=null,vn,gn=x.changeEnd=function(e){return e.text?Ln(e.from.line+e.text.length-1,es(e.text).length+(e.text.length==1?e.from.ch:0)):e.to};x.Pos=Ln,x.prototype={constructor:x,focus:function(){window.focus(),It(this),Bt(this)},setOption:function(e,t){var n=this.options,r=n[e];if(n[e]==t&&e!="mode")return;n[e]=t,Zn.hasOwnProperty
(e)&&Mt(this,Zn[e])(this,t,r)},getOption:function(e){return this.options[e]},getDoc:function(){return this.doc},addKeyMap:function(e,t){this.state.keyMaps[t?"push":"unshift"](e)},removeKeyMap:function(e){var t=this.state.keyMaps;for(var n=0;n<t.length;++n)if(t[n]==e||typeof t[n]!="string"&&t[n].name==e)return t.splice(n,1),!0},addOverlay:Mt(null,function(e,t){var n=e.token?e:x.getMode(this.options,e);if(n.startState)throw new Error("Overlays may not be stateful.");this.state.overlays.push({mode:n,modeSpec:e,opaque:t&&t.opaque}),this.state.modeGen++,Pt(this)}),removeOverlay:Mt(null,function(e){var t=this.state.overlays;for(var n=0;n<t.length;++n){var r=t[n].modeSpec;if(r==e||typeof e=="string"&&r.name==e){t.splice(n,1),this.state.modeGen++,Pt(this);return}}}),indentLine:Mt(null,function(e,t,n){typeof t!="string"&&typeof t!="number"&&(t==null?t=this.options.smartIndent?"smart":"prev":t=t?"add":"subtract"),Hn(this.doc,e)&&$n(this,e,t,n)}),indentSelection:Mt(null,function(e){var t=this.doc.sel;if(An(t.from,t.to))return $n(this,t.from.line,e);var n=t.to.line-(t.to.ch?0:1);for(var r=t.from.line;r<=n;++r)$n(this,r,e)}),getTokenAt:function(e,t){var n=this.doc;e=Dn(n,e);var r=it(this,e.line,t),i=this.doc.mode,s=hi(n,e.line),o=new mr(s.text,this.options.tabSize);while(o.pos<e.ch&&!o.eol()){o.start=o.pos;var u=i.token(o,r)}return{start:o.start,end:o.pos,string:o.current(),className:u||null,type:u||null,state:r}},getTokenTypeAt:function(e){e=Dn(this.doc,e);var t=Vr(this,hi(this.doc,e.line)),n=0,r=(t.length-1)/2,i=e.ch;if(i==0)return t[2];for(;;){var s=n+r>>1;if((s?t[s*2-1]:0)>=i)r=s;else{if(!(t[s*2+1]<i))return t[s*2+2];n=s+1}}},getModeAt:function(e){var t=this.doc.mode;return t.innerMode?x.innerMode(t,this.getTokenAt(e).state).mode:t},getHelper:function(e,t){if(!ur.hasOwnProperty(t))return;var n=ur[t],r=this.getModeAt(e);return r[t]&&n[r[t]]||r.helperType&&n[r.helperType]||n[r.name]},getStateAfter:function(e,t){var n=this.doc;return e=_n(n,e==null?n.first+n.size-1:e),it(this,e+1,t)},cursorCoords:function(e,t){var n,r=this.doc.sel;return e==null?n=r.head:typeof e=="object"?n=Dn(this.doc,e):n=e?r.from:r.to,Et(this,n,t||"page")},charCoords:function(e,t){return wt(this,Dn(this.doc,e),t||"page")},coordsChar:function(e,t){return e=bt(this,e,t||"page"),xt(this,e.left,e.top)},lineAtHeight:function(e,t){return e=bt(this,{top:e,left:0},t||"page").top,gi(this.doc,e+this.display.viewOffset)},heightAtLine:function(e,t){var n=!1,r=this.doc.first+this.doc.size-1;e<this.doc.first?e=this.doc.first:e>r&&(e=r,n=!0);var i=hi(this.doc,e);return yt(this,hi(this.doc,e),{top:0,left:0},t||"page").top+(n?i.height:0)},defaultTextHeight:function(){return Ct(this.display)},defaultCharWidth:function(){return kt(this.display)},setGutterMarker:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=e.gutterMarkers||(e.gutterMarkers={});return r[t]=n,!n&&fs(r)&&(e.gutterMarkers=null),!0})}),clearGutter:Mt(null,function(e){var t=this,n=t.doc,r=n.first;n.iter(function(n){n.gutterMarkers&&n.gutterMarkers[e]&&(n.gutterMarkers[e]=null,Pt(t,r,r+1),fs(n.gutterMarkers)&&(n.gutterMarkers=null)),++r})}),addLineClass:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass";if(!e[r])e[r]=n;else{if((new RegExp("(?:^|\\s)"+n+"(?:$|\\s)")).test(e[r]))return!1;e[r]+=" "+n}return!0})}),removeLineClass:Mt(null,function(e,t,n){return Jn(this,e,function(e){var r=t=="text"?"textClass":t=="background"?"bgClass":"wrapClass",i=e[r];if(!i)return!1;if(n==null)e[r]=null;else{var s=i.match(new RegExp("(?:^|\\s+)"+n+"(?:$|\\s+)"));if(!s)return!1;var o=s.index+s[0].length;e[r]=i.slice(0,s.index)+(!s.index||o==i.length?"":" ")+i.slice(o)||null}return!0})}),addLineWidget:Mt(null,function(e,t,n){return qr(this,e,t,n)}),removeLineWidget:function(e){e.clear()},lineInfo:function(e){if(typeof e=="number"){if(!Hn(this.doc,e))return null;var t=e;e=hi(this.doc,e);if(!e)return null}else{var t=mi(e);if(t==null)return null}return{line:t,handle:e,text:e.text,gutterMarkers:e.gutterMarkers,textClass:e.textClass,bgClass:e.bgClass,wrapClass:e.wrapClass,widgets:e.widgets}},getViewport:function(){return{from:this.display.showingFrom,to:this.display.showingTo}},addWidget:function(e,t,n,r,i){var s=this.display;e=Et(this,Dn(this.doc,e));var o=e.bottom,u=e.left;t.style.position="absolute",s.sizer.appendChild(t);if(r=="over")o=e.top;else if(r=="above"||r=="near"){var a=Math.max(s.wrapper.clientHeight,this.doc.height),f=Math.max(s.sizer.clientWidth,s.lineSpace.clientWidth);(r=="above"||e.bottom+t.offsetHeight>a)&&e.top>t.offsetHeight?o=e.top-t.offsetHeight:e.bottom+t.offsetHeight<=a&&(o=e.bottom),u+t.offsetWidth>f&&(u=f-t.offsetWidth)}t.style.top=o+"px",t.style.left=t.style.right="",i=="right"?(u=s.sizer.clientWidth-t.offsetWidth,t.style.right="0px"):(i=="left"?u=0:i=="middle"&&(u=(s.sizer.clientWidth-t.offsetWidth)/2),t.style.left=u+"px"),n&&zn(this,u,o,u+t.offsetWidth,o+t.offsetHeight)},triggerOnKeyDown:Mt(null,cn),execCommand:function(e){return lr[e](this)},findPosH:function(e,t,n,r){var i=1;t<0&&(i=-1,t=-t);for(var s=0,o=Dn(this.doc,e);s<t;++s){o=Kn(this.doc,o,i,n,r);if(o.hitSide)break}return o},moveH:Mt(null,function(e,t){var n=this.doc.sel,r;n.shift||n.extend||An(n.from,n.to)?r=Kn(this.doc,n.head,e,t,this.options.rtlMoveVisually):r=e<0?n.from:n.to,Bn(this.doc,r,r,e)}),deleteH:Mt(null,function(e,t){var n=this.doc.sel;An(n.from,n.to)?kn(this.doc,"",n.from,Kn(this.doc,n.head,e,t,!1),"+delete"):kn(this.doc,"",n.from,n.to,"+delete"),this.curOp.userSelChange=!0}),findPosV:function(e,t,n,r){var i=1,s=r;t<0&&(i=-1,t=-t);for(var o=0,u=Dn(this.doc,e);o<t;++o){var a=Et(this,u,"div");s==null?s=a.left:a.left=s,u=Qn(this,a,i,n);if(u.hitSide)break}return u},moveV:Mt(null,function(e,t){var n=this.doc.sel,r=Et(this,n.head,"div");n.goalColumn!=null&&(r.left=n.goalColumn);var i=Qn(this,r,e,t);t=="page"&&Vn(this,0,wt(this,i,"div").top-r.top),Bn(this.doc,i,i,e),n.goalColumn=r.left}),toggleOverwrite:function(e){if(e!=null&&e==this.state.overwrite)return;(this.state.overwrite=!this.state.overwrite)?this.display.cursor.className+=" CodeMirror-overwrite":this.display.cursor.className=this.display.cursor.className.replace(" CodeMirror-overwrite","")},hasFocus:function(){return this.state.focused},scrollTo:Mt(null,function(e,t){Xn(this,e,t)}),getScrollInfo:function(){var e=this.display.scroller,t=Ji;return{left:e.scrollLeft,top:e.scrollTop,height:e.scrollHeight-t,width:e.scrollWidth-t,clientHeight:e.clientHeight-t,clientWidth:e.clientWidth-t}},scrollIntoView:Mt(null,function(e,t){e==null?e={from:this.doc.sel.head,to:null}:typeof e=="number"?e={from:Ln(e,0),to:null}:e.from==null&&(e={from:e,to:null}),e.to||(e.to=e.from),t||(t=0);var n=e;e.from.line!=null&&(this.curOp.scrollToPos={from:e.from,to:e.to,margin:t},n={from:Et(this,e.from),to:Et(this,e.to)});var r=Wn(this,Math.min(n.from.left,n.to.left),Math.min(n.from.top,n.to.top)-t,Math.max(n.from.right,n.to.right),Math.max(n.from.bottom,n.to.bottom)+t);Xn(this,r.scrollLeft,r.scrollTop)}),setSize:Mt(null,function(e,t){function n(e){return typeof e=="number"||/^\d+$/.test(String(e))?e+"px":e}e!=null&&(this.display.wrapper.style.width=n(e)),t!=null&&(this.display.wrapper.style.height=n(t)),this.options.lineWrapping&&(this.display.measureLineCache.length=this.display.measureLineCachePos=0),this.curOp.forceUpdate=!0}),operation:function(e){return Dt(this,e)},refresh:Mt(null,function(){var e=this.display.cachedTextHeight==null;vt(this),Xn(this,this.doc.scrollLeft,this.doc.scrollTop),Pt(this),e&&L(this)}),swapDoc:Mt(null,function(e){var t=this.doc;return t.cm=null,ci(this,e),vt(this),Ft(this,!0),Xn(this,e.scrollLeft,e.scrollTop),zi(this,"swapDoc",this,t),t}),getInputField:function(){return this.display.input},getWrapperElement:function(){return this.display.wrapper},getScrollerElement:function(){return this.display.scroller},getGutterElement:function(){return this.display.gutters}},$i(x);var Zn=x.optionHandlers={},er=x.defaults={},nr=x.Init={toString:function(){return"CodeMirror.Init"}};tr("value","",function(e,t){e.setValue(t)},!0),tr("mode",null,function(e,t){e.doc.modeOption=t,N(e)},!0),tr("indentUnit",2,N,!0),tr("indentWithTabs",!1),tr("smartIndent",!0),tr("tabSize",4,function(e){N(e),vt(e),Pt(e)},!0),tr("specialChars",/[\t\u0000-\u0019\u00ad\u200b\u2028\u2029\ufeff]/g,function(e,t){e.options.specialChars=new RegExp(t.source+(t.test("	")?"":"|	"),"g"),e.refresh()},!0),tr("specialCharPlaceholder",Gr,function(e){e.refresh()},!0),tr("electricChars",!0),tr("rtlMoveVisually",!g),tr("wholeLineUpdateBefore",!0),tr("theme","default",function(e){O(e),M(e)},!0),tr("keyMap","default",A),tr("extraKeys",null),tr("onKeyEvent",null),tr("onDragEvent",null),tr("lineWrapping",!1,C,!0),tr("gutters",[],function(e){H(e.options),M(e)},!0),tr("fixedGutter",!0,function(e,t){e.display.gutters.style.left=t?R(e.display)+"px":"0",e.refresh()},!0),tr("coverGutterNextToScrollbar",!1,B,!0),tr("lineNumbers",!1,function(e){H(e.options),M(e)},!0),tr("firstLineNumber",1,M,!0),tr("lineNumberFormatter",function(e){return e},M,!0),tr("showCursorWhenSelecting",!1,G,!0),tr("resetSelectionOnContextMenu",!0),tr("readOnly",!1,function(e,t){t=="nocursor"?(dn(e),e.display.input.blur(),e.display.disabled=!0):(e.display.disabled=!1,t||Ft(e,!0))}),tr("dragDrop",!0),tr("cursorBlinkRate",530),tr("cursorScrollMargin",0),tr("cursorHeight",1),tr("workTime",100),tr("workDelay",100),tr("flattenSpans",!0),tr("pollInterval",100),tr("undoDepth",40,function(e,t){e.doc.history.undoDepth=t}),tr("historyEventDelay",500),tr("viewportMargin",10,function(e){e.refresh()},!0),tr("maxHighlightLength",1e4,function(e){N(e),e.refresh()},!0),tr("crudeMeasuringFrom",1e4),tr("moveInputWithCursor",!0,function(e,t){t||(e.display.inputDiv.style.top=e.display.inputDiv.style.left=0)}),tr("tabindex",null,function(e,t){e.display.input.tabIndex=t||""}),tr("autofocus",null);var rr=x.modes={},ir=x.mimeModes={};x.defineMode=function(e,t){!x.defaults.mode&&e!="null"&&(x.defaults.mode=e);if(arguments.length>2){t.dependencies=[];for(var n=2;n<arguments.length;++n)t.dependencies.push(arguments[n])}rr[e]=t},x.defineMIME=function(e,t){ir[e]=t},x.resolveMode=function(e){if(typeof e=="string"&&ir.hasOwnProperty(e))e=ir[e];else if(e&&typeof e.name=="string"&&ir.hasOwnProperty(e.name)){var t=ir[e.name];e=rs(t,e),e.name=t.name}else if(typeof e=="string"&&/^[\w\-]+\/[\w\-]+\+xml$/.test(e))return x.resolveMode("application/xml");return typeof e=="string"?{name:e}:e||{name:"null"}},x.getMode=function(e,t){var t=x.resolveMode(t),n=rr[t.name];if(!n)return x.getMode(e,"text/plain");var r=n(e,t);if(sr.hasOwnProperty(t.name)){var i=sr[t.name];for(var s in i){if(!i.hasOwnProperty(s))continue;r.hasOwnProperty(s)&&(r["_"+s]=r[s]),r[s]=i[s]}}return r.name=t.name,r},x.defineMode("null",function(){return{token:function(e){e.skipToEnd()}}}),x.defineMIME("text/plain","null");var sr=x.modeExtensions={};x.extendMode=function(e,t){var n=sr.hasOwnProperty(e)?sr[e]:sr[e]={};is(t,n)},x.defineExtension=function(e,t){x.prototype[e]=t},x.defineDocExtension=function(e,t){ui.prototype[e]=t},x.defineOption=tr;var or=[];x.defineInitHook=function(e){or.push(e)};var ur=x.helpers={};x.registerHelper=function(e,t,n){ur.hasOwnProperty(e)||(ur[e]=x[e]={}),ur[e][t]=n},x.isWordChar=as,x.copyState=ar,x.startState=fr,x.innerMode=function(e,t){while(e.innerMode){var n=e.innerMode(t);if(!n||n.mode==e)break;t=n.state,e=n.mode}return n||{mode:e,state:t}};var lr=x.commands={selectAll:function(e){e.setSelection(Ln(e.firstLine(),0),Ln(e.lastLine()))},killLine:function(e){var t=e.getCursor(!0),n=e.getCursor(!1),r=!An(t,n);!r&&e.getLine(t.line).length==t.ch?e.replaceRange("",t,Ln(t.line+1,0),"+delete"):e.replaceRange("",t,r?n:Ln(t.line),"+delete")},deleteLine:function(e){var t=e.getCursor().line;e.replaceRange("",Ln(t,0),Ln(t),"+delete")},delLineLeft:function(e){var t=e.getCursor();e.replaceRange("",Ln(t.line,0),t,"+delete")},undo:function(e){e.undo()},redo:function(e){e.redo()},goDocStart:function(e){e.extendSelection(Ln(e.firstLine(),0))},goDocEnd:function(e){e.extendSelection(Ln(e.lastLine()))},goLineStart:function(e){e.extendSelection(Ms(e,e.getCursor().line))},goLineStartSmart:function(e){var t=e.getCursor(),n=Ms(e,t.line),r=e.getLineHandle(n.line),i=bi(r);if(!i||i[0].level==0){var s=Math.max(0,r.text.search(/\S/)),o=t.line==n.line&&t.ch<=s&&t.ch;e.extendSelection(Ln(n.line,o?0:s))}else e.extendSelection(n)},goLineEnd:function(e){e.extendSelection(_s(e,e.getCursor().line))},goLineRight:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:e.display.lineDiv.offsetWidth+100,top:t},"div"))},goLineLeft:function(e){var t=e.charCoords(e.getCursor(),"div").top+5;e.extendSelection(e.coordsChar({left:0,top:t},"div"))},goLineUp:function(e){e.moveV(-1,"line")},goLineDown:function(e){e.moveV(1,"line")},goPageUp:function(e){e.moveV(-1,"page")},goPageDown:function(e){e.moveV(1,"page")},goCharLeft:function(e){e.moveH(-1,"char")},goCharRight:function(e){e.moveH(1,"char")},goColumnLeft:function(e){e.moveH(-1,"column")},goColumnRight:function(e){e.moveH(1,"column")},goWordLeft:function(e){e.moveH(-1,"word")},goGroupRight:function(e){e.moveH(1,"group")},goGroupLeft:function(e){e.moveH(-1,"group")},goWordRight:function(e){e.moveH(1,"word")},delCharBefore:function(e){e.deleteH(-1,"char")},delCharAfter:function(e){e.deleteH(1,"char")},delWordBefore:function(e){e.deleteH(-1,"word")},delWordAfter:function(e){e.deleteH(1,"word")},delGroupBefore:function(e){e.deleteH(-1,"group")},delGroupAfter:function(e){e.deleteH(1,"group")},indentAuto:function(e){e.indentSelection("smart")},indentMore:function(e){e.indentSelection("add")},indentLess:function(e){e.indentSelection("subtract")},insertTab:function(e){e.replaceSelection("	","end","+input")},defaultTab:function(e){e.somethingSelected()?e.indentSelection("add"):e.replaceSelection("	","end","+input")},transposeChars:function(e){var t=e.getCursor(),n=e.getLine(t.line);t.ch>0&&t.ch<n.length-1&&e.replaceRange(n.charAt(t.ch)+n.charAt(t.ch-1),Ln(t.line,t.ch-1),Ln(t.line,t.ch+1))},newlineAndIndent:function(e){Mt(e,function(){e.replaceSelection("\n","end","+input"),e.indentLine(e.getCursor().line,null,!0)})()},toggleOverwrite:function(e){e.toggleOverwrite()}},cr=x.keyMap={};cr.basic={Left:"goCharLeft",Right:"goCharRight",Up:"goLineUp",Down:"goLineDown",End:"goLineEnd",Home:"goLineStartSmart",PageUp:"goPageUp",PageDown:"goPageDown",Delete:"delCharAfter",Backspace:"delCharBefore","Shift-Backspace":"delCharBefore",Tab:"defaultTab","Shift-Tab":"indentAuto",Enter:"newlineAndIndent",Insert:"toggleOverwrite"},cr.pcDefault={"Ctrl-A":"selectAll","Ctrl-D":"deleteLine","Ctrl-Z":"undo","Shift-Ctrl-Z":"redo","Ctrl-Y":"redo","Ctrl-Home":"goDocStart","Alt-Up":"goDocStart","Ctrl-End":"goDocEnd","Ctrl-Down":"goDocEnd","Ctrl-Left":"goGroupLeft","Ctrl-Right":"goGroupRight","Alt-Left":"goLineStart","Alt-Right":"goLineEnd","Ctrl-Backspace":"delGroupBefore","Ctrl-Delete":"delGroupAfter","Ctrl-S":"save","Ctrl-F":"find","Ctrl-G":"findNext","Shift-Ctrl-G":"findPrev","Shift-Ctrl-F":"replace","Shift-Ctrl-R":"replaceAll","Ctrl-[":"indentLess","Ctrl-]":"indentMore",fallthrough:"basic"},cr.macDefault={"Cmd-A":"selectAll","Cmd-D":"deleteLine","Cmd-Z":"undo","Shift-Cmd-Z":"redo","Cmd-Y":"redo","Cmd-Up":"goDocStart","Cmd-End":"goDocEnd","Cmd-Down":"goDocEnd","Alt-Left":"goGroupLeft","Alt-Right":"goGroupRight","Cmd-Left":"goLineStart","Cmd-Right":"goLineEnd","Alt-Backspace":"delGroupBefore","Ctrl-Alt-Backspace":"delGroupAfter","Alt-Delete":"delGroupAfter","Cmd-S":"save","Cmd-F":"find","Cmd-G":"findNext","Shift-Cmd-G":"findPrev","Cmd-Alt-F":"replace","Shift-Cmd-Alt-F":"replaceAll","Cmd-[":"indentLess","Cmd-]":"indentMore","Cmd-Backspace":"delLineLeft",fallthrough:["basic","emacsy"]},cr["default"]=m?cr.macDefault:cr.pcDefault,cr.emacsy={"Ctrl-F":"goCharRight","Ctrl-B":"goCharLeft","Ctrl-P":"goLineUp","Ctrl-N":"goLineDown","Alt-F":"goWordRight","Alt-B":"goWordLeft","Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd","Ctrl-V":"goPageDown","Shift-Ctrl-V":"goPageUp","Ctrl-D":"delCharAfter","Ctrl-H":"delCharBefore","Alt-D":"delWordAfter","Alt-Backspace":"delWordBefore","Ctrl-K":"killLine","Ctrl-T":"transposeChars"},x.lookupKey=pr,x.isModifierKey=dr,x.keyName=vr,x.fromTextArea=function(e,t){function i(){e.value=a.getValue()}t||(t={}),t.value=e.value,!t.tabindex&&e.tabindex&&(t.tabindex=e.tabindex),!t.placeholder&&e.placeholder&&(t.placeholder=e.placeholder);if(t.autofocus==null){var n=document.body;try{n=document.activeElement}catch(r){}t.autofocus=n==e||e.getAttribute("autofocus")!=null&&n==document.body}if(e.form){Fi(e.form,"submit",i);if(!t.leaveSubmitMethodAlone){var s=e.form,o=s.submit;try{var u=s.submit=function(){i(),s.submit=o,s.submit(),s.submit=u}}catch(r){}}}e.style.display="none";var a=x(function(t){e.parentNode.insertBefore(t,e.nextSibling)},t);return a.save=i,a.getTextArea=function(){return e},a.toTextArea=function(){i(),e.parentNode.removeChild(a.getWrapperElement()),e.style.display="",e.form&&(Ii(e.form,"submit",i),typeof e.form.submit=="function"&&(e.form.submit=o))},a},mr.prototype={eol:function(){return this.pos>=this.string.length},sol:function(){return this.pos==0},peek:function(){return this.string.charAt(this.pos)||undefined},next:function(){if(this.pos<this.string.length)return this.string.charAt(this.pos++)},eat:function(e){var t=this.string.charAt(this.pos);if(typeof e=="string")var n=t==e;else var n=t&&(e.test?e.test(t):e(t));if(n)return++this.pos,t},eatWhile:function(e){var t=this.pos;while(this.eat(e));return this.pos>t},eatSpace:function(){var e=this.pos;while(/[\s\u00a0]/.test(this.string.charAt(this.pos)))++this.pos;return this.pos>e},skipToEnd:function(){this.pos=this.string.length},skipTo:function(e){var t=this.string.indexOf(e,this.pos);if(t>-1)return this.pos=t,!0},backUp:function(e){this.pos-=e},column:function(){return this.lastColumnPos<this.start&&(this.lastColumnValue=Gi(this.string,this.start,this.tabSize,this.lastColumnPos,this.lastColumnValue),this.lastColumnPos=this.start),this.lastColumnValue},indentation:function(){return Gi(this.string,null,this.tabSize)},match:function(e,t,n){if(typeof e!="string"){var s=this.string.slice(this.pos).match(e);return s&&s.index>0?null:(s&&t!==!1&&(this.pos+=s[0].length),s)}var r=function(e){return n?e.toLowerCase():e},i=this.string.substr(this.pos,e.length);if(r(i)==r(e))return t!==!1&&(this.pos+=e.length),!0},current:function(){return this.string.slice(this.start,this.pos)}},x.StringStream=mr,x.TextMarker=gr,$i(gr),gr.prototype.clear=function(){if(this.explicitlyCleared)return;var e=this.doc.cm,t=e&&!e.curOp;t&&At(e);if(Vi(this,"clear")){var n=this.find();n&&zi(this,"clear",n.from,n.to)}var r=null,i=null;for(var s=0;s<this.lines.length;++s){var o=this.lines[s],u=Er(o.markedSpans,this);u.to!=null&&(i=mi(o)),o.markedSpans=Sr(o.markedSpans,u),u.from!=null?r=mi(o):this.collapsed&&!Dr(this.doc,o)&&e&&vi(o,Ct(e.display))}if(e&&this.collapsed&&!e.options.lineWrapping)for(var s=0;s<this.lines.length;++s){var a=_r(e.doc,this.lines[s]),f=D(e.doc,a);f>e.display.maxLineLength&&(e.display.maxLine=a,e.display.maxLineLength=f,e.display.maxLineChanged=!0)}r!=null&&e&&Pt(e,r,i+1),this.lines.length=0,this.explicitlyCleared=!0,this.atomic&&this.doc.cantEdit&&(this.doc.cantEdit=!1,e&&In(e)),t&&Ot(e)},gr.prototype.find=function(){var e,t;for(var n=0;n<this.lines.length;++n){var r=this.lines[n],i=Er(r.markedSpans,this);if(i.from!=null||i.to!=null){var s=mi(r);i.from!=null&&(e=Ln(s,i.from)),i.to!=null&&(t=Ln(s,i.to))}}return this.type=="bookmark"?e:e&&{from:e,to:t}},gr.prototype.changed=function(){var e=this.find(),t=this.doc.cm;if(!e||!t)return;this.type!="bookmark"&&(e=e.from);var n=hi(this.doc,e.line);lt(t,n);if(e.line>=t.display.showingFrom&&e.line<t.display.showingTo){for(var r=t.display.lineDiv.firstChild;r;r=r.nextSibling)if(r.lineObj==n){r.offsetHeight!=n.height&&vi(n,r.offsetHeight);break}Dt(t,function(){t.curOp.selectionChanged=t.curOp.forceUpdate=t.curOp.updateMaxLine=!0})}},gr.prototype.attachLine=function(e){if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(!t.maybeHiddenMarkers||ns(t.maybeHiddenMarkers,this)==-1)&&(t.maybeUnhiddenMarkers||(t.maybeUnhiddenMarkers=[])).push(this)}this.lines.push(e)},gr.prototype.detachLine=function(e){this.lines.splice(ns(this.lines,e),1);if(!this.lines.length&&this.doc.cm){var t=this.doc.cm.curOp;(t.maybeHiddenMarkers||(t.maybeHiddenMarkers=[])).push(this)}},x.SharedTextMarker=br,$i(br),br.prototype.clear=function(){if(this.explicitlyCleared)return;this.explicitlyCleared=!0;for(var e=0;e<this.markers.length;++e)this.markers[e].clear();zi(this,"clear")},br.prototype.find=function(){return this.primary.find()};var jr=x.LineWidget=function(e,t,n){if(n)for(var r in n)n.hasOwnProperty(r)&&(this[r]=n[r]);this.cm=e,this.node=t};$i(jr),jr.prototype.clear=Fr(function(){var e=this.line.widgets,t=mi(this.line);if(t==null||!e)return;for(var n=0;n<e.length;++n)e[n]==this&&e.splice(n--,1);e.length||(this.line.widgets=null);var r=yi(this.cm,this.line)<this.cm.doc.scrollTop;vi(this.line,Math.max(0,this.line.height-Ir(this))),r&&Vn(this.cm,0,-this.height),Pt(this.cm,t,t+1)}),jr.prototype.changed=Fr(function(){var e=this.height;this.height=null;var t=Ir(this)-e;if(!t)return;vi(this.line,this.line.height+t);var n=mi(this.line);Pt(this.cm,n,n+1)});var Rr=x.Line=function(e,t,n){this.text=e,Br(this,t),this.height=n?n(this):1};$i(Rr),Rr.prototype.lineNo=function(){return mi(this)};var Jr={};ii.prototype={chunkSize:function(){return this.lines.length},removeInner:function(e,t){for(var n=e,r=e+t;n<r;++n){var i=this.lines[n];this.height-=i.height,zr(i),zi(i,"delete")}this.lines.splice(e,t)},collapse:function(e){e.splice.apply(e,[e.length,0].concat(this.lines))},insertInner:function(e,t,n){this.height+=n,this.lines=this.lines.slice(0,e).concat(t).concat(this.lines.slice(e));for(var r=0,i=t.length;r<i;++r)t[r].parent=this},iterN:function(e,t,n){for(var r=e+t;e<r;++e)if(n(this.lines[e]))return!0}},si.prototype={chunkSize:function(){return this.size},removeInner:function(e,t){this.size-=t;for(var n=0;n<this.children.length;++n){var r=this.children[n],i=r.chunkSize();if(e<i){var s=Math.min(t,i-e),o=r.height;r.removeInner(e,s),this.height-=o-r.height,i==s&&(this.children.splice(n--,1),r.parent=null);if((t-=s)==0)break;e=0}else e-=i}if(this.size-t<25){var u=[];this.collapse(u),this.children=[new ii(u)],this.children[0].parent=this}},collapse:function(e){for(var t=0,n=this.children.length;t<n;++t)this.children[t].collapse(e)},insertInner:function(e,t,n){this.size+=t.length,this.height+=n;for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<=o){s.insertInner(e,t,n);if(s.lines&&s.lines.length>50){while(s.lines.length>50){var u=s.lines.splice(s.lines.length-25,25),a=new ii(u);s.height-=a.height,this.children.splice(r+1,0,a),a.parent=this}this.maybeSpill()}break}e-=o}},maybeSpill:function(){if(this.children.length<=10)return;var e=this;do{var t=e.children.splice(e.children.length-5,5),n=new si(t);if(!e.parent){var r=new si(e.children);r.parent=e,e.children=[r,n],e=r}else{e.size-=n.size,e.height-=n.height;var i=ns(e.parent.children,e);e.parent.children.splice(i+1,0,n)}n.parent=e.parent}while(e.children.length>10);e.parent.maybeSpill()},iterN:function(e,t,n){for(var r=0,i=this.children.length;r<i;++r){var s=this.children[r],o=s.chunkSize();if(e<o){var u=Math.min(t,o-e);if(s.iterN(e,u,n))return!0;if((t-=u)==0)break;e=0}else e-=o}}};var oi=0,ui=x.Doc=function(e,t,n){if(!(this instanceof ui))return new ui(e,t,n);n==null&&(n=0),si.call(this,[new ii([new Rr("",null)])]),this.first=n,this.scrollTop=this.scrollLeft=0,this.cantEdit=!1,this.history=wi(),this.cleanGeneration=1,this.frontier=n;var r=Ln(n,0);this.sel={from:r,to:r,head:r,anchor:r,shift:!1,extend:!1,goalColumn:null},this.id=++oi,this.modeOption=t,typeof e=="string"&&(e=Ss(e)),ri(this,{from:r,to:r,text:e},null,{head:r,anchor:r})};ui.prototype=rs(si.prototype,{constructor:ui,iter:function(e,t,n){n?this.iterN(e-this.first,t-e,n):this.iterN(this.first,this.first+this.size,e)},insert:function(e,t){var n=0;for(var r=0,i=t.length;r<i;++r)n+=t[r].height;this.insertInner(e-this.first,t,n)},remove:function(e,t){this.removeInner(e-this.first,t)},getValue:function(e){var t=di(this,this.first,this.first+this.size);return e===!1?t:t.join(e||"\n")},setValue:function(e){var t=Ln(this.first,0),n=this.first+this.size-1;En(this,{from:t,to:Ln(n,hi(this,n).text.length),text:Ss(e),origin:"setValue"},{head:t,anchor:t},!0)},replaceRange:function(e,t,n,r){t=Dn(this,t),n=n?Dn(this,n):t,kn(this,e,t,n,r)},getRange:function(e,t,n){var r=pi(this,Dn(this,e),Dn(this,t));return n===!1?r:r.join(n||"\n")},getLine:function(e){var t=this.getLineHandle(e);return t&&t.text},setLine:function(e,t){Hn(this,e)&&kn(this,t,Ln(e,0),Dn(this,Ln(e)))},removeLine:function(e){e?kn(this,"",Dn(this,Ln(e-1)),Dn(this,Ln(e))):kn(this,"",Ln(0,0),Dn(this,Ln(1,0)))},getLineHandle:function(e){if(Hn(this,e))return hi(this,e)},getLineNumber:function(e){return mi(e)},getLineHandleVisualStart:function(e){return typeof e=="number"&&(e=hi(this,e)),_r(this,e)},lineCount:function(){return this.size},firstLine:function(){return this.first},lastLine:function(){return this.first+this.size-1},clipPos:function(e){return Dn(this,e)},getCursor:function(e){var t=this.sel,n;return e==null||e=="head"?n=t.head:e=="anchor"?n=t.anchor:e=="end"||e===!1?n=t.to:n=t.from,Mn(n)},somethingSelected:function(){return!An(this.sel.head,this.sel.anchor)},setCursor:_t(function(e,t,n){var r=Dn(this,typeof e=="number"?Ln(e,t||0):e);n?Bn(this,r):Fn(this,r,r)}),setSelection:_t(function(e,t,n){Fn(this,Dn(this,e),Dn(this,t||e),n)}),extendSelection:_t(function(e,t,n){Bn(this,Dn(this,e),t&&Dn(this,t),n)}),getSelection:function(e){return this.getRange(this.sel.from,this.sel.to,e)},replaceSelection:function(e,t,n){En(this,{from:this.sel.from,to:this.sel.to,text:Ss(e),origin:n},t||"around")},undo:_t(function(){xn(this,"undo")}),redo:_t(function(){xn(this,"redo")}),setExtending:function(e){this.sel.extend=e},historySize:function(){var e=this.history;return{undo:e.done.length,redo:e.undone.length}},clearHistory:function(){this.history=wi(this.history.maxGeneration)},markClean:function(){this.cleanGeneration=this.changeGeneration()},changeGeneration:function(){return this.history.lastOp=this.history.lastOrigin=null,this.history.generation},isClean:function(e){return this.history.generation==(e||this.cleanGeneration)},getHistory:function(){return{done:Ci(this.history.done),undone:Ci(this.history.undone)}},setHistory:function(e){var t=this.history=wi(this.history.maxGeneration);t.done=e.done.slice(0),t.undone=e.undone.slice(0)},markText:function(e,t,n){return yr(this,Dn(this,e),Dn(this,t),n,"range")},setBookmark:function(e,t){var n={replacedWith:t&&(t.nodeType==null?t.widget:t),insertLeft:t&&t.insertLeft};return e=Dn(this,e),yr(this,e,e,n,"bookmark")},findMarksAt:function(e){e=Dn(this,e);var t=[],n=hi(this,e.line).markedSpans;if(n)for(var r=0;r<n.length;++r){var i=n[r];(i.from==null||i.from<=e.ch)&&(i.to==null||i.to>=e.ch)&&t.push(i.marker.parent||i.marker)}return t},getAllMarks:function(){var e=[];return this.iter(function(t){var n=t.markedSpans;if(n)for(var r=0;r<n.length;++r)n[r].from!=null&&e.push(n[r].marker)}),e},posFromIndex:function(e){var t,n=this.first;return this.iter(function(r){var i=r.text.length+1;if(i>e)return t=e,!0;e-=i,++n}),Dn(this,Ln(n,t))},indexFromPos:function(e){e=Dn(this,e);var t=e.ch;return e.line<this.first||e.ch<0?0:(this.iter(this.first,e.line,function(e){t+=e.text.length+1}),t)},copy:function(e){var t=new ui(di(this,this.first,this.first+this.size),this.modeOption,this.first);return t.scrollTop=this.scrollTop,t.scrollLeft=this.scrollLeft,t.sel={from:this.sel.from,to:this.sel.to,head:this.sel.head,anchor:this.sel.anchor,shift:this.sel.shift,extend:!1,goalColumn:this.sel.goalColumn},e&&(t.history.undoDepth=this.history.undoDepth,t.setHistory(this.getHistory())),t},linkedDoc:function(e){e||(e={});var t=this.first,n=this.first+this.size;e.from!=null&&e.from>t&&(t=e.from),e.to!=null&&e.to<n&&(n=e.to);var r=new ui(di(this,t,n),e.mode||this.modeOption,t);return e.sharedHist&&(r.history=this.history),(this.linked||(this.linked=[])).push({doc:r,sharedHist:e.sharedHist}),r.linked=[{doc:this,isParent:!0,sharedHist:e.sharedHist}],r},unlinkDoc:function(e){e instanceof x&&(e=e.doc);if(this.linked)for(var t=0;t<this.linked.length;++t){var n=this.linked[t];if(n.doc!=e)continue;this.linked.splice(t,1),e.unlinkDoc(this);break}if(e.history==this.history){var r=[e.id];li(e,function(e){r.push(e.id)},!0),e.history=wi(),e.history.done=Ci(this.history.done,r),e.history.undone=Ci(this.history.undone,r)}},iterLinkedDocs:function(e){li(this,e)},getMode:function(){return this.mode},getEditor:function(){return this.cm}}),ui.prototype.eachLine=ui.prototype.iter;var ai="iter insert remove copy getEditor".split(" ");for(var fi in ui.prototype)ui.prototype.hasOwnProperty(fi)&&ns(ai,fi)<0&&(x.prototype[fi]=function(e){return function(){return e.apply(this.doc,arguments)}}(ui.prototype[fi]));$i(ui),x.e_stop=Hi,x.e_preventDefault=_i,x.e_stopPropagation=Di;var Ri,Ui=0;x.on=Fi,x.off=Ii,x.signal=qi;var Ji=30,Ki=x.Pass={toString:function(){return"CodeMirror.Pass"}};Qi.prototype={set:function(e,t){clearTimeout(this.id),this.id=setTimeout(t,e)}},x.countColumn=Gi;var Yi=[""],us=/[\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/,ls=/[\u0300-\u036F\u0483-\u0487\u0488-\u0489\u0591-\u05BD\u05BF\u05C1-\u05C2\u05C4-\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7-\u06E8\u06EA-\u06ED\uA66F\u1DC0–\u1DFF\u20D0–\u20FF\uA670-\uA672\uA674-\uA67D\uA69F\udc00-\udfff\uFE20–\uFE2F]/;x.replaceGetRect=function(e){vs=e};var ms=function(){if(r)return!1;var e=cs("div");return"draggable"in e||"dragDrop"in e}();e?gs=function(e,t){return e.charCodeAt(t-1)==36&&e.charCodeAt(t)==39}:f&&!/Version\/([6-9]|\d\d)\b/.test(navigator.userAgent)?gs=function(e,t){return/\-[^ \-?]|\?[^ !\'\"\),.\-\/:;\?\]\}]/.test(e.slice(t-1,t+1))}:s&&/Chrome\/(?:29|[3-9]\d|\d\d\d)\./.test(navigator.userAgent)?gs=function(e,t){var n=e.charCodeAt(t-1);return n>=8208&&n<=8212}:s&&(gs=function(e,t){if(t>1&&e.charCodeAt(t-1)==45){if(/\w/.test(e.charAt(t-2))&&/[^\-?\.]/.test(e.charAt(t)))return!0;if(t>2&&/[\d\.,]/.test(e.charAt(t-2))&&/[\d\.,]/.test(e.charAt(t)))return!1}return/[~!#%&*)=+}\]\\|\"\.>,:;][({[<]|-[^\-?\.\u2010-\u201f\u2026]|\?[\w~`@#$%\^&*(_=+{[|><]|…[\w~`@#$%\^&*(_=+{[><]/.test(e.slice(t-1,t+1))});var ys,ws,Ss="\n\nb".split(/\n/).length!=3?function(e){var t=0,n=[],r=e.length;while(t<=r){var i=e.indexOf("\n",t);i==-1&&(i=e.length);var s=e.slice(t,e.charAt(i-1)=="\r"?i-1:i),o=s.indexOf("\r");o!=-1?(n.push(s.slice(0,o)),t+=o+1):(n.push(s),t=i+1)}return n}:function(e){return e.split(/\r\n?|\n/)};x.splitLines=Ss;var xs=window.getSelection?function(e){try{return e.selectionStart!=e.selectionEnd}catch(t){return!1}}:function(e){try{var t=e.ownerDocument.selection.createRange()}catch(n){}return!t||t.parentElement()!=e?!1:t.compareEndPoints("StartToEnd",t)!=0},Ts=function(){var e=cs("div");return"oncopy"in e?!0:(e.setAttribute("oncopy","return;"),typeof e.oncopy=="function")}(),Ns={3:"Enter",8:"Backspace",9:"Tab",13:"Enter",16:"Shift",17:"Ctrl",18:"Alt",19:"Pause",20:"CapsLock",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"PrintScrn",45:"Insert",46:"Delete",59:";",91:"Mod",92:"Mod",93:"Mod",109:"-",107:"=",127:"Delete",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",63276:"PageUp",63277:"PageDown",63275:"End",63273:"Home",63234:"Left",63232:"Up",63235:"Right",63233:"Down",63302:"Insert",63272:"Delete"};x.keyNames=Ns,function(){for(var e=0;e<10;e++)Ns[e+48]=String(e);for(var e=65;e<=90;e++)Ns[e]=String.fromCharCode(e);for(var e=1;e<=12;e++)Ns[e+111]=Ns[e+63235]="F"+e}();var Ps,Is=function(){function n(n){return n<=255?e.charAt(n):1424<=n&&n<=1524?"R":1536<=n&&n<=1791?t.charAt(n-1536):1792<=n&&n<=2220?"r":"L"}var e="bbbbbbbbbtstwsbbbbbbbbbbbbbbssstwNN%%%NNNNNN,N,N1111111111NNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNNNLLLLLLLLLLLLLLLLLLLLLLLLLLNNNNbbbbbbsbbbbbbbbbbbbbbbbbbbbbbbbbb,N%%%%NNNNLNNNNN%%11NLNNN1LNNNNNLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLLNLLLLLLLL",t="rrrrrrrrrrrr,rNNmmmmmmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmrrrrrrrnnnnnnnnnn%nnrrrmrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrrmmmmmmmmmmmmmmmmmmmNmmmmrrrrrrrrrrrrrrrrrr",r=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/,i=/[stwN]/,s=/[LRr]/,o=/[Lb1n]/,u=/[1n]/,a="L";return function(e){if(!r.test(e))return!1;var t=e.length,f=[];for(var l=0,c;l<t;++l)f.push(c=n(e.charCodeAt(l)));for(var l=0,
h=a;l<t;++l){var c=f[l];c=="m"?f[l]=h:h=c}for(var l=0,p=a;l<t;++l){var c=f[l];c=="1"&&p=="r"?f[l]="n":s.test(c)&&(p=c,c=="r"&&(f[l]="R"))}for(var l=1,h=f[0];l<t-1;++l){var c=f[l];c=="+"&&h=="1"&&f[l+1]=="1"?f[l]="1":c==","&&h==f[l+1]&&(h=="1"||h=="n")&&(f[l]=h),h=c}for(var l=0;l<t;++l){var c=f[l];if(c==",")f[l]="N";else if(c=="%"){for(var d=l+1;d<t&&f[d]=="%";++d);var v=l&&f[l-1]=="!"||d<t-1&&f[d]=="1"?"1":"N";for(var m=l;m<d;++m)f[m]=v;l=d-1}}for(var l=0,p=a;l<t;++l){var c=f[l];p=="L"&&c=="1"?f[l]="L":s.test(c)&&(p=c)}for(var l=0;l<t;++l)if(i.test(f[l])){for(var d=l+1;d<t&&i.test(f[d]);++d);var g=(l?f[l-1]:a)=="L",y=(d<t-1?f[d]:a)=="L",v=g||y?"L":"R";for(var m=l;m<d;++m)f[m]=v;l=d-1}var b=[],w;for(var l=0;l<t;)if(o.test(f[l])){var E=l;for(++l;l<t&&o.test(f[l]);++l);b.push({from:E,to:l,level:0})}else{var S=l,x=b.length;for(++l;l<t&&f[l]!="L";++l);for(var m=S;m<l;)if(u.test(f[m])){S<m&&b.splice(x,0,{from:S,to:m,level:1});var T=m;for(++m;m<l&&u.test(f[m]);++m);b.splice(x,0,{from:T,to:m,level:2}),S=m}else++m;S<l&&b.splice(x,0,{from:S,to:l,level:1})}return b[0].level==1&&(w=e.match(/^\s+/))&&(b[0].from=w[0].length,b.unshift({from:0,to:w[0].length,level:0})),es(b).level==1&&(w=e.match(/\s+$/))&&(es(b).to-=w[0].length,b.push({from:t-w[0].length,to:t,level:0})),b[0].level!=es(b).level&&b.push({from:t,to:t,level:b[0].level}),b}}();return x.version="3.20.0",x}(),CodeMirror.defineMode("javascript",function(e,t){function a(e,t){var n=!1,r;while((r=e.next())!=null){if(r==t&&!n)return!1;n=!n&&r=="\\"}return n}function c(e,t,n){return f=e,l=n,t}function h(e,t){var n=e.next();if(n=='"'||n=="'")return t.tokenize=p(n),t.tokenize(e,t);if(n=="."&&e.match(/^\d+(?:[eE][+\-]?\d+)?/))return c("number","number");if(n=="."&&e.match(".."))return c("spread","meta");if(/[\[\]{}\(\),;\:\.]/.test(n))return c(n);if(n=="="&&e.eat(">"))return c("=>");if(n=="0"&&e.eat(/x/i))return e.eatWhile(/[\da-f]/i),c("number","number");if(/\d/.test(n))return e.match(/^\d*(?:\.\d*)?(?:[eE][+\-]?\d+)?/),c("number","number");if(n=="/")return e.eat("*")?(t.tokenize=d,d(e,t)):e.eat("/")?(e.skipToEnd(),c("comment","comment")):t.lastType=="operator"||t.lastType=="keyword c"||t.lastType=="sof"||/^[\[{}\(,;:]$/.test(t.lastType)?(a(e,"/"),e.eatWhile(/[gimy]/),c("regexp","string-2")):(e.eatWhile(u),c("operator",null,e.current()));if(n=="`")return t.tokenize=v,v(e,t);if(n=="#")return e.skipToEnd(),c("error","error");if(u.test(n))return e.eatWhile(u),c("operator",null,e.current());e.eatWhile(/[\w\$_]/);var r=e.current(),i=o.propertyIsEnumerable(r)&&o[r];return i&&t.lastType!="."?c(i.type,i.style,r):c("variable","variable",r)}function p(e){return function(t,n){return a(t,e)||(n.tokenize=h),c("string","string")}}function d(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=h;break}n=r=="*"}return c("comment","comment")}function v(e,t){var n=!1,r;while((r=e.next())!=null){if(!n&&(r=="`"||r=="$"&&e.eat("{"))){t.tokenize=h;break}n=!n&&r=="\\"}return c("quasi","string-2",e.current())}function g(e,t){t.fatArrowAt&&(t.fatArrowAt=null);var n=e.string.indexOf("=>",e.start);if(n<0)return;var r=0,i=!1;for(var s=n-1;s>=0;--s){var o=e.string.charAt(s),u=m.indexOf(o);if(u>=0&&u<3){if(!r){++s;break}if(--r==0)break}else if(u>=3&&u<6)++r;else if(/[$\w]/.test(o))i=!0;else if(i&&!r){++s;break}}i&&!r&&(t.fatArrowAt=s)}function b(e,t,n,r,i,s){this.indented=e,this.column=t,this.type=n,this.prev=i,this.info=s,r!=null&&(this.align=r)}function w(e,t){for(var n=e.localVars;n;n=n.next)if(n.name==t)return!0;for(var r=e.context;r;r=r.prev)for(var n=r.vars;n;n=n.next)if(n.name==t)return!0}function E(e,t,n,r,s){var o=e.cc;S.state=e,S.stream=s,S.marked=null,S.cc=o,e.lexical.hasOwnProperty("align")||(e.lexical.align=!0);for(;;){var u=o.length?o.pop():i?D:_;if(u(n,r)){while(o.length&&o[o.length-1].lex)o.pop()();return S.marked?S.marked:n=="variable"&&w(e,r)?"variable-2":t}}}function x(){for(var e=arguments.length-1;e>=0;e--)S.cc.push(arguments[e])}function T(){return x.apply(null,arguments),!0}function N(e){function n(t){for(var n=t;n;n=n.next)if(n.name==e)return!0;return!1}var r=S.state;if(r.context){S.marked="def";if(n(r.localVars))return;r.localVars={name:e,next:r.localVars}}else{if(n(r.globalVars))return;t.globalVars&&(r.globalVars={name:e,next:r.globalVars})}}function k(){S.state.context={prev:S.state.context,vars:S.state.localVars},S.state.localVars=C}function L(){S.state.localVars=S.state.context.vars,S.state.context=S.state.context.prev}function A(e,t){var n=function(){var n=S.state,r=n.indented;n.lexical.type=="stat"&&(r=n.lexical.indented),n.lexical=new b(r,S.stream.column(),e,null,n.lexical,t)};return n.lex=!0,n}function O(){var e=S.state;e.lexical.prev&&(e.lexical.type==")"&&(e.indented=e.lexical.indented),e.lexical=e.lexical.prev)}function M(e){return function(t){return t==e?T():e==";"?x():T(arguments.callee)}}function _(e,t){return e=="var"?T(A("vardef",t.length),Z,M(";"),O):e=="keyword a"?T(A("form"),D,_,O):e=="keyword b"?T(A("form"),_,O):e=="{"?T(A("}"),Q,O):e==";"?T():e=="if"?T(A("form"),D,_,O,it):e=="function"?T(lt):e=="for"?T(A("form"),st,O,_,O):e=="variable"?T(A("stat"),W):e=="switch"?T(A("form"),D,A("}","switch"),M("{"),Q,O,O):e=="case"?T(D,M(":")):e=="default"?T(M(":")):e=="catch"?T(A("form"),k,M("("),ct,M(")"),_,O,L):e=="module"?T(A("form"),k,vt,L,O):e=="class"?T(A("form"),ht,dt,O):e=="export"?T(A("form"),mt,O):e=="import"?T(A("form"),gt,O):x(A("stat"),D,M(";"),O)}function D(e){return H(e,!1)}function P(e){return H(e,!0)}function H(e,t){if(S.state.fatArrowAt==S.stream.start){var n=t?z:U;if(e=="(")return T(k,K(et,")"),M("=>"),n,L);if(e=="variable")return x(k,et,M("=>"),n,L)}var r=t?I:F;return y.hasOwnProperty(e)?T(r):e=="function"?T(lt):e=="keyword c"?T(t?j:B):e=="("?T(A(")"),B,Et,M(")"),O,r):e=="operator"||e=="spread"?T(t?P:D):e=="["?T(A("]"),P,wt,O,r):e=="{"?T(K(V,"}"),r):T()}function B(e){return e.match(/[;\}\)\],]/)?x():x(D)}function j(e){return e.match(/[;\}\)\],]/)?x():x(P)}function F(e,t){return e==","?T(D):I(e,t,!1)}function I(e,t,n){var r=n==0?F:I,i=n==0?D:P;if(t=="=>")return T(k,n?z:U,L);if(e=="operator")return/\+\+|--/.test(t)?T(r):t=="?"?T(D,M(":"),i):T(i);if(e=="quasi")return S.cc.push(r),q(t);if(e==";")return;if(e=="(")return T(K(P,")","call"),r);if(e==".")return T(X,r);if(e=="[")return T(A("]"),B,M("]"),O,r)}function q(e){if(!e)debugger;return e.slice(e.length-2)!="${"?T():T(D,R)}function R(e){if(e=="}")return S.marked="string-2",S.state.tokenize=v,T()}function U(e){return g(S.stream,S.state),e=="{"?x(_):x(D)}function z(e){return g(S.stream,S.state),e=="{"?x(_):x(P)}function W(e){return e==":"?T(O,_):x(F,M(";"),O)}function X(e){if(e=="variable")return S.marked="property",T()}function V(e,t){if(e=="variable"){S.marked="property";if(t=="get"||t=="set")return T($)}else if(e=="number"||e=="string")S.marked=e+" property";else if(e=="[")return T(D,M("]"),J);if(y.hasOwnProperty(e))return T(J)}function $(e){return e!="variable"?x(J):(S.marked="property",T(lt))}function J(e){if(e==":")return T(P);if(e=="(")return x(lt)}function K(e,t,n){function r(n){if(n==","){var i=S.state.lexical;return i.info=="call"&&(i.pos=(i.pos||0)+1),T(e,r)}return n==t?T():T(M(t))}return function(i){return i==t?T():n===!1?x(e,r):x(A(t,n),e,r,O)}}function Q(e){return e=="}"?T():x(_,Q)}function G(e){if(s&&e==":")return T(Y)}function Y(e){if(e=="variable")return S.marked="variable-3",T()}function Z(){return x(et,G,nt,rt)}function et(e,t){if(e=="variable")return N(t),T();if(e=="[")return T(K(et,"]"));if(e=="{")return T(K(tt,"}"))}function tt(e,t){return e=="variable"&&!S.stream.match(/^\s*:/,!1)?(N(t),T(nt)):(e=="variable"&&(S.marked="property"),T(M(":"),et,nt))}function nt(e,t){if(t=="=")return T(P)}function rt(e){if(e==",")return T(Z)}function it(e,t){if(e=="keyword b"&&t=="else")return T(A("form"),_,O)}function st(e){if(e=="(")return T(A(")"),ot,M(")"))}function ot(e){return e=="var"?T(Z,M(";"),at):e==";"?T(at):e=="variable"?T(ut):x(D,M(";"),at)}function ut(e,t){return t=="in"||t=="of"?(S.marked="keyword",T(D)):T(F,at)}function at(e,t){return e==";"?T(ft):t=="in"||t=="of"?(S.marked="keyword",T(D)):x(D,M(";"),ft)}function ft(e){e!=")"&&T(D)}function lt(e,t){if(t=="*")return S.marked="keyword",T(lt);if(e=="variable")return N(t),T(lt);if(e=="(")return T(k,K(ct,")"),_,L)}function ct(e){return e=="spread"?T(ct):x(et,G)}function ht(e,t){if(e=="variable")return N(t),T(pt)}function pt(e,t){if(t=="extends")return T(D)}function dt(e){if(e=="{")return T(K(V,"}"))}function vt(e,t){if(e=="string")return T(_);if(e=="variable")return N(t),T(bt)}function mt(e,t){return t=="*"?(S.marked="keyword",T(bt,M(";"))):t=="default"?(S.marked="keyword",T(D,M(";"))):x(_)}function gt(e){return e=="string"?T():x(yt,bt)}function yt(e,t){return e=="{"?T(K(yt,"}")):(e=="variable"&&N(t),T())}function bt(e,t){if(t=="from")return S.marked="keyword",T(D)}function wt(e){return e=="for"?x(Et):e==","?T(K(P,"]",!1)):x(K(P,"]",!1))}function Et(e){if(e=="for")return T(st,Et);if(e=="if")return T(D,Et)}var n=e.indentUnit,r=t.statementIndent,i=t.json,s=t.typescript,o=function(){function e(e){return{type:e,style:"keyword"}}var t=e("keyword a"),n=e("keyword b"),r=e("keyword c"),i=e("operator"),o={type:"atom",style:"atom"},u={"if":e("if"),"while":t,"with":t,"else":n,"do":n,"try":n,"finally":n,"return":r,"break":r,"continue":r,"new":r,"delete":r,"throw":r,"var":e("var"),"const":e("var"),let:e("var"),"function":e("function"),"catch":e("catch"),"for":e("for"),"switch":e("switch"),"case":e("case"),"default":e("default"),"in":i,"typeof":i,"instanceof":i,"true":o,"false":o,"null":o,"undefined":o,NaN:o,Infinity:o,"this":e("this"),module:e("module"),"class":e("class"),"super":e("atom"),yield:r,"export":e("export"),"import":e("import"),"extends":r};if(s){var a={type:"variable",style:"variable-3"},f={"interface":e("interface"),"extends":e("extends"),constructor:e("constructor"),"public":e("public"),"private":e("private"),"protected":e("protected"),"static":e("static"),string:a,number:a,bool:a,any:a};for(var l in f)u[l]=f[l]}return u}(),u=/[+\-*&%=<>!?|~^]/,f,l,m="([{}])",y={atom:!0,number:!0,variable:!0,string:!0,regexp:!0,"this":!0},S={state:null,column:null,marked:null,cc:null},C={name:"this",next:{name:"arguments"}};return O.lex=!0,{startState:function(e){var r={tokenize:h,lastType:"sof",cc:[],lexical:new b((e||0)-n,0,"block",!1),localVars:t.localVars,context:t.localVars&&{vars:t.localVars},indented:0};return t.globalVars&&(r.globalVars=t.globalVars),r},token:function(e,t){e.sol()&&(t.lexical.hasOwnProperty("align")||(t.lexical.align=!1),t.indented=e.indentation(),g(e,t));if(t.tokenize!=d&&e.eatSpace())return null;var n=t.tokenize(e,t);return f=="comment"?n:(t.lastType=f!="operator"||l!="++"&&l!="--"?f:"incdec",E(t,n,f,l,e))},indent:function(e,i){if(e.tokenize==d)return CodeMirror.Pass;if(e.tokenize!=h)return 0;var s=i&&i.charAt(0),o=e.lexical;for(var u=e.cc.length-1;u>=0;--u){var a=e.cc[u];if(a==O)o=o.prev;else if(a!=it)break}o.type=="stat"&&s=="}"&&(o=o.prev),r&&o.type==")"&&o.prev.type=="stat"&&(o=o.prev);var f=o.type,l=s==f;return f=="vardef"?o.indented+(e.lastType=="operator"||e.lastType==","?o.info+1:0):f=="form"&&s=="{"?o.indented:f=="form"?o.indented+n:f=="stat"?o.indented+(e.lastType=="operator"||e.lastType==","?r||n:0):o.info=="switch"&&!l&&t.doubleIndentSwitch!=0?o.indented+(/^(?:case|default)\b/.test(i)?n:2*n):o.align?o.column+(l?0:1):o.indented+(l?0:n)},electricChars:":{}",blockCommentStart:i?null:"/*",blockCommentEnd:i?null:"*/",lineComment:i?null:"//",fold:"brace",helperType:i?"json":"javascript",jsonMode:i}}),CodeMirror.defineMIME("text/javascript","javascript"),CodeMirror.defineMIME("text/ecmascript","javascript"),CodeMirror.defineMIME("application/javascript","javascript"),CodeMirror.defineMIME("application/ecmascript","javascript"),CodeMirror.defineMIME("application/json",{name:"javascript",json:!0}),CodeMirror.defineMIME("application/x-json",{name:"javascript",json:!0}),CodeMirror.defineMIME("text/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMIME("application/typescript",{name:"javascript",typescript:!0}),CodeMirror.defineMode("coffeescript",function(e){function n(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function v(e,n){if(e.sol()){n.scope.align===null&&(n.scope.align=!1);var a=n.scope.offset;if(e.eatSpace()){var f=e.indentation();return f>a&&n.scope.type=="coffee"?"indent":f<a?"dedent":null}a>0&&b(e,n)}if(e.eatSpace())return null;var p=e.peek();if(e.match("####"))return e.skipToEnd(),"comment";if(e.match("###"))return n.tokenize=g,n.tokenize(e,n);if(p==="#")return e.skipToEnd(),"comment";if(e.match(/^-?[0-9\.]/,!1)){var v=!1;e.match(/^-?\d*\.\d+(e[\+\-]?\d+)?/i)&&(v=!0),e.match(/^-?\d+\.\d*/)&&(v=!0),e.match(/^-?\.\d+/)&&(v=!0);if(v)return e.peek()=="."&&e.backUp(1),"number";var y=!1;e.match(/^-?0x[0-9a-f]+/i)&&(y=!0),e.match(/^-?[1-9]\d*(e[\+\-]?\d+)?/)&&(y=!0),e.match(/^-?0(?![\dx])/i)&&(y=!0);if(y)return"number"}if(e.match(c))return n.tokenize=m(e.current(),"string"),n.tokenize(e,n);if(e.match(h)){if(e.current()!="/"||e.match(/^.*\//,!1))return n.tokenize=m(e.current(),"string-2"),n.tokenize(e,n);e.backUp(1)}return e.match(r)||e.match(u)?"operator":e.match(i)?"punctuation":e.match(d)?"atom":e.match(l)?"keyword":e.match(s)?"variable":e.match(o)?"property":(e.next(),t)}function m(n,r){var i=n.length==1;return function(s,o){while(!s.eol()){s.eatWhile(/[^'"\/\\]/);if(s.eat("\\")){s.next();if(i&&s.eol())return r}else{if(s.match(n))return o.tokenize=v,r;s.eat(/['"\/]/)}}return i&&(e.mode.singleLineStringErrors?r=t:o.tokenize=v),r}}function g(e,t){while(!e.eol()){e.eatWhile(/[^#]/);if(e.match("###")){t.tokenize=v;break}e.eatWhile("#")}return"comment"}function y(t,n,r){r=r||"coffee";var i=0,s=!1,o=null;for(var u=n.scope;u;u=u.prev)if(u.type==="coffee"){i=u.offset+e.indentUnit;break}r!=="coffee"?(s=null,o=t.column()+t.current().length):n.scope.align&&(n.scope.align=!1),n.scope={offset:i,type:r,prev:n.scope,align:s,alignOffset:o}}function b(e,t){if(!t.scope.prev)return;if(t.scope.type==="coffee"){var n=e.indentation(),r=!1;for(var i=t.scope;i;i=i.prev)if(n===i.offset){r=!0;break}if(!r)return!0;while(t.scope.prev&&t.scope.offset!==n)t.scope=t.scope.prev;return!1}return t.scope=t.scope.prev,!1}function w(e,n){var r=n.tokenize(e,n),i=e.current();if(i===".")return r=n.tokenize(e,n),i=e.current(),/^\.[\w$]+$/.test(i)?"variable":t;i==="return"&&(n.dedent+=1),((i==="->"||i==="=>")&&!n.lambda&&!e.peek()||r==="indent")&&y(e,n);var s="[({".indexOf(i);s!==-1&&y(e,n,"])}".slice(s,s+1)),a.exec(i)&&y(e,n),i=="then"&&b(e,n);if(r==="dedent"&&b(e,n))return t;s="])}".indexOf(i);if(s!==-1){while(n.scope.type=="coffee"&&n.scope.prev)n.scope=n.scope.prev;n.scope.type==i&&(n.scope=n.scope.prev)}return n.dedent>0&&e.eol()&&n.scope.type=="coffee"&&(n.scope.prev&&(n.scope=n.scope.prev),n.dedent-=1),r}var t="error",r=/^(?:->|=>|\+[+=]?|-[\-=]?|\*[\*=]?|\/[\/=]?|[=!]=|<[><]?=?|>>?=?|%=?|&=?|\|=?|\^=?|\~|!|\?)/,i=/^(?:[()\[\]{},:`=;]|\.\.?\.?)/,s=/^[_A-Za-z$][_A-Za-z$0-9]*/,o=/^(@|this\.)[_A-Za-z$][_A-Za-z$0-9]*/,u=n(["and","or","not","is","isnt","in","instanceof","typeof"]),a=["for","while","loop","if","unless","else","switch","try","catch","finally","class"],f=["break","by","continue","debugger","delete","do","in","of","new","return","then","this","throw","when","until"],l=n(a.concat(f));a=n(a);var c=/^('{3}|\"{3}|['\"])/,h=/^(\/{3}|\/)/,p=["Infinity","NaN","undefined","null","true","false","on","off","yes","no"],d=n(p),E={startState:function(e){return{tokenize:v,scope:{offset:e||0,type:"coffee",prev:null,align:!1},lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=t.scope.align===null&&t.scope;n&&e.sol()&&(n.align=!1);var r=w(e,t);return n&&r&&r!="comment"&&(n.align=!0),t.lastToken={style:r,content:e.current()},e.eol()&&e.lambda&&(t.lambda=!1),r},indent:function(e,t){if(e.tokenize!=v)return 0;var n=e.scope,r=t&&"])}".indexOf(t.charAt(0))>-1;if(r)while(n.type=="coffee"&&n.prev)n=n.prev;var i=r&&n.type===t.charAt(0);return n.align?n.alignOffset-(i?1:0):(i?n.prev:n).offset},lineComment:"#",fold:"indent"};return E}),CodeMirror.defineMIME("text/x-coffeescript","coffeescript"),CodeMirror.defineMode("ruby",function(e){function t(e){var t={};for(var n=0,r=e.length;n<r;++n)t[e[n]]=!0;return t}function u(e,t,n){return n.tokenize.push(e),e(t,n)}function a(e,t){o=null;if(e.sol()&&e.match("=begin")&&e.eol())return t.tokenize.push(p),"comment";if(e.eatSpace())return null;var n=e.next(),r;if(n=="`"||n=="'"||n=='"')return u(c(n,"string",n=='"'||n=="`"),e,t);if(n=="/"&&!e.eol()&&e.peek()!=" ")return u(c(n,"string-2",!0),e,t);if(n=="%"){var i="string",a=!0;e.eat("s")?i="atom":e.eat(/[WQ]/)?i="string":e.eat(/[r]/)?i="string-2":e.eat(/[wxq]/)&&(i="string",a=!1);var f=e.eat(/[^\w\s]/);return f?(s.propertyIsEnumerable(f)&&(f=s[f]),u(c(f,i,a,!0),e,t)):"operator"}if(n=="#")return e.skipToEnd(),"comment";if(n=="<"&&(r=e.match(/^<-?[\`\"\']?([a-zA-Z_?]\w*)[\`\"\']?(?:;|$)/)))return u(h(r[1]),e,t);if(n=="0")return e.eat("x")?e.eatWhile(/[\da-fA-F]/):e.eat("b")?e.eatWhile(/[01]/):e.eatWhile(/[0-7]/),"number";if(/\d/.test(n))return e.match(/^[\d_]*(?:\.[\d_]+)?(?:[eE][+\-]?[\d_]+)?/),"number";if(n=="?"){while(e.match(/^\\[CM]-/));return e.eat("\\")?e.eatWhile(/\w/):e.next(),"string"}return n==":"?e.eat("'")?u(c("'","atom",!1),e,t):e.eat('"')?u(c('"',"atom",!0),e,t):e.eat(/[\<\>]/)?(e.eat(/[\<\>]/),"atom"):e.eat(/[\+\-\*\/\&\|\:\!]/)?"atom":e.eat(/[a-zA-Z$@_]/)?(e.eatWhile(/[\w]/),e.eat(/[\?\!\=]/),"atom"):"operator":n=="@"&&e.match(/^@?[a-zA-Z_]/)?(e.eat("@"),e.eatWhile(/[\w]/),"variable-2"):n=="$"?(e.eat(/[a-zA-Z_]/)?e.eatWhile(/[\w]/):e.eat(/\d/)?e.eat(/\d/):e.next(),"variable-3"):/[a-zA-Z_]/.test(n)?(e.eatWhile(/[\w]/),e.eat(/[\?\!]/),e.eat(":")?"atom":"ident"):n!="|"||!t.varList&&t.lastTok!="{"&&t.lastTok!="do"?/[\(\)\[\]{}\\;]/.test(n)?(o=n,null):n=="-"&&e.eat(">")?"arrow":/[=+\-\/*:\.^%<>~|]/.test(n)?(e.eatWhile(/[=+\-\/*:\.^%<>~|]/),"operator"):null:(o="|",null)}function f(){var e=1;return function(t,n){if(t.peek()=="}"){e--;if(e==0)return n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)}else t.peek()=="{"&&e++;return a(t,n)}}function l(){var e=!1;return function(t,n){return e?(n.tokenize.pop(),n.tokenize[n.tokenize.length-1](t,n)):(e=!0,a(t,n))}}function c(e,t,n,r){return function(i,s){var o=!1,u;s.context.type==="read-quoted-paused"&&(s.context=s.context.prev,i.eat("}"));while((u=i.next())!=null){if(u==e&&(r||!o)){s.tokenize.pop();break}if(n&&u=="#"&&!o){if(i.eat("{")){e=="}"&&(s.context={prev:s.context,type:"read-quoted-paused"}),s.tokenize.push(f());break}if(/[@\$]/.test(i.peek())){s.tokenize.push(l());break}}o=!o&&u=="\\"}return t}}function h(e){return function(t,n){return t.match(e)?n.tokenize.pop():t.skipToEnd(),"string"}}function p(e,t){return e.sol()&&e.match("=end")&&e.eol()&&t.tokenize.pop(),e.skipToEnd(),"comment"}var n=t(["alias","and","BEGIN","begin","break","case","class","def","defined?","do","else","elsif","END","end","ensure","false","for","if","in","module","next","not","or","redo","rescue","retry","return","self","super","then","true","undef","unless","until","when","while","yield","nil","raise","throw","catch","fail","loop","callcc","caller","lambda","proc","public","protected","private","require","load","require_relative","extend","autoload","__END__","__FILE__","__LINE__","__dir__"]),r=t(["def","class","case","for","while","do","module","then","catch","loop","proc","begin"]),i=t(["end","until"]),s={"[":"]","{":"}","(":")"},o;return{startState:function(){return{tokenize:[a],indented:0,context:{type:"top",indented:-e.indentUnit},continuedLine:!1,lastTok:null,varList:!1}},token:function(e,t){e.sol()&&(t.indented=e.indentation());var s=t.tokenize[t.tokenize.length-1](e,t),u;if(s=="ident"){var a=e.current();s=n.propertyIsEnumerable(e.current())?"keyword":/^[A-Z]/.test(a)?"tag":t.lastTok=="def"||t.lastTok=="class"||t.varList?"def":"variable",r.propertyIsEnumerable(a)?u="indent":i.propertyIsEnumerable(a)?u="dedent":(a=="if"||a=="unless")&&e.column()==e.indentation()&&(u="indent")}if(o||s&&s!="comment")t.lastTok=a||o||s;return o=="|"&&(t.varList=!t.varList),u=="indent"||/[\(\[\{]/.test(o)?t.context={prev:t.context,type:o||s,indented:t.indented}:(u=="dedent"||/[\)\]\}]/.test(o))&&t.context.prev&&(t.context=t.context.prev),e.eol()&&(t.continuedLine=o=="\\"||s=="operator"),s},indent:function(t,n){if(t.tokenize[t.tokenize.length-1]!=a)return 0;var r=n&&n.charAt(0),i=t.context,o=i.type==s[r]||i.type=="keyword"&&/^(?:end|until|else|elsif|when|rescue)\b/.test(n);return i.indented+(o?0:e.indentUnit)+(t.continuedLine?e.indentUnit:0)},electricChars:"}de",lineComment:"#"}}),CodeMirror.defineMIME("text/x-ruby","ruby"),CodeMirror.defineMode("clojure",function(){function f(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function v(e,t,n){this.indent=e,this.type=t,this.prev=n}function m(e,t,n){e.indentStack=new v(t,n,e.indentStack)}function g(e){e.indentStack=e.indentStack.prev}function y(e,t){return e==="0"&&t.eat(/x/i)?(t.eatWhile(d.hex),!0):((e=="+"||e=="-")&&d.digit.test(t.peek())&&(t.eat(d.sign),e=t.next()),d.digit.test(e)?(t.eat(e),t.eatWhile(d.digit),"."==t.peek()&&(t.eat("."),t.eatWhile(d.digit)),t.eat(d.exponent)&&(t.eat(d.sign),t.eatWhile(d.digit)),!0):!1)}function b(e){var t=e.next();if(t.match(/[a-z]/)&&e.match(/[a-z]+/,!0))return;t==="u"&&e.match(/[0-9a-z]{4}/i,!0)}var e="builtin",t="comment",n="string",r="string-2",i="atom",s="number",o="bracket",u="keyword",a=2,l=f("true false nil"),c=f("defn defn- def def- defonce defmulti defmethod defmacro defstruct deftype defprotocol defrecord defproject deftest slice defalias defhinted defmacro- defn-memo defnk defnk defonce- defunbound defunbound- defvar defvar- let letfn do case cond condp for loop recur when when-not when-let when-first if if-let if-not . .. -> ->> doto and or dosync doseq dotimes dorun doall load import unimport ns in-ns refer try catch finally throw with-open with-local-vars binding gen-class gen-and-load-class gen-and-save-class handler-case handle"),h=f("* *' *1 *2 *3 *agent* *allow-unresolved-vars* *assert* *clojure-version* *command-line-args* *compile-files* *compile-path* *compiler-options* *data-readers* *e *err* *file* *flush-on-newline* *fn-loader* *in* *math-context* *ns* *out* *print-dup* *print-length* *print-level* *print-meta* *print-readably* *read-eval* *source-path* *unchecked-math* *use-context-classloader* *verbose-defrecords* *warn-on-reflection* + +' - -' -> ->> ->ArrayChunk ->Vec ->VecNode ->VecSeq -cache-protocol-fn -reset-methods .. / < <= = == > >= EMPTY-NODE accessor aclone add-classpath add-watch agent agent-error agent-errors aget alength alias all-ns alter alter-meta! alter-var-root amap ancestors and apply areduce array-map aset aset-boolean aset-byte aset-char aset-double aset-float aset-int aset-long aset-short assert assoc assoc! assoc-in associative? atom await await-for await1 bases bean bigdec bigint biginteger binding bit-and bit-and-not bit-clear bit-flip bit-not bit-or bit-set bit-shift-left bit-shift-right bit-test bit-xor boolean boolean-array booleans bound-fn bound-fn* bound? butlast byte byte-array bytes case cast char char-array char-escape-string char-name-string char? chars chunk chunk-append chunk-buffer chunk-cons chunk-first chunk-next chunk-rest chunked-seq? class class? clear-agent-errors clojure-version coll? comment commute comp comparator compare compare-and-set! compile complement concat cond condp conj conj! cons constantly construct-proxy contains? count counted? create-ns create-struct cycle dec dec' decimal? declare default-data-readers definline definterface defmacro defmethod defmulti defn defn- defonce defprotocol defrecord defstruct deftype delay delay? deliver denominator deref derive descendants destructure disj disj! dissoc dissoc! distinct distinct? doall dorun doseq dosync dotimes doto double double-array doubles drop drop-last drop-while empty empty? ensure enumeration-seq error-handler error-mode eval even? every-pred every? ex-data ex-info extend extend-protocol extend-type extenders extends? false? ffirst file-seq filter filterv find find-keyword find-ns find-protocol-impl find-protocol-method find-var first flatten float float-array float? floats flush fn fn? fnext fnil for force format frequencies future future-call future-cancel future-cancelled? future-done? future? gen-class gen-interface gensym get get-in get-method get-proxy-class get-thread-bindings get-validator group-by hash hash-combine hash-map hash-set identical? identity if-let if-not ifn? import in-ns inc inc' init-proxy instance? int int-array integer? interleave intern interpose into into-array ints io! isa? iterate iterator-seq juxt keep keep-indexed key keys keyword keyword? last lazy-cat lazy-seq let letfn line-seq list list* list? load load-file load-reader load-string loaded-libs locking long long-array longs loop macroexpand macroexpand-1 make-array make-hierarchy map map-indexed map? mapcat mapv max max-key memfn memoize merge merge-with meta method-sig methods min min-key mod munge name namespace namespace-munge neg? newline next nfirst nil? nnext not not-any? not-empty not-every? not= ns ns-aliases ns-imports ns-interns ns-map ns-name ns-publics ns-refers ns-resolve ns-unalias ns-unmap nth nthnext nthrest num number? numerator object-array odd? or parents partial partition partition-all partition-by pcalls peek persistent! pmap pop pop! pop-thread-bindings pos? pr pr-str prefer-method prefers primitives-classnames print print-ctor print-dup print-method print-simple print-str printf println println-str prn prn-str promise proxy proxy-call-with-super proxy-mappings proxy-name proxy-super push-thread-bindings pvalues quot rand rand-int rand-nth range ratio? rational? rationalize re-find re-groups re-matcher re-matches re-pattern re-seq read read-line read-string realized? reduce reduce-kv reductions ref ref-history-count ref-max-history ref-min-history ref-set refer refer-clojure reify release-pending-sends rem remove remove-all-methods remove-method remove-ns remove-watch repeat repeatedly replace replicate require reset! reset-meta! resolve rest restart-agent resultset-seq reverse reversible? rseq rsubseq satisfies? second select-keys send send-off seq seq? seque sequence sequential? set set-error-handler! set-error-mode! set-validator! set? short short-array shorts shuffle shutdown-agents slurp some some-fn sort sort-by sorted-map sorted-map-by sorted-set sorted-set-by sorted? special-symbol? spit split-at split-with str string? struct struct-map subs subseq subvec supers swap! symbol symbol? sync take take-last take-nth take-while test the-ns thread-bound? time to-array to-array-2d trampoline transient tree-seq true? type unchecked-add unchecked-add-int unchecked-byte unchecked-char unchecked-dec unchecked-dec-int unchecked-divide-int unchecked-double unchecked-float unchecked-inc unchecked-inc-int unchecked-int unchecked-long unchecked-multiply unchecked-multiply-int unchecked-negate unchecked-negate-int unchecked-remainder-int unchecked-short unchecked-subtract unchecked-subtract-int underive unquote unquote-splicing update-in update-proxy use val vals var-get var-set var? vary-meta vec vector vector-of vector? when when-first when-let when-not while with-bindings with-bindings* with-in-str with-loading-context with-local-vars with-meta with-open with-out-str with-precision with-redefs with-redefs-fn xml-seq zero? zipmap *default-data-reader-fn* as-> cond-> cond->> reduced reduced? send-via set-agent-send-executor! set-agent-send-off-executor! some-> some->>"),p=f("ns fn def defn defmethod bound-fn if if-not case condp when while when-not when-first do future comment doto locking proxy with-open with-precision reify deftype defrecord defprotocol extend extend-protocol extend-type try catch let letfn binding loop for doseq dotimes when-let if-let defstruct struct-map assoc testing deftest handler-case handle dotrace deftrace"),d={digit:/\d/,digit_or_colon:/[\d:]/,hex:/[0-9a-f]/i,sign:/[+-]/,exponent:/e/i,keyword_char:/[^\s\(\[\;\)\]]/,symbol:/[\w*+!\-\._?:\/]/};return{startState:function(){return{indentStack:null,indentation:0,mode:!1}},token:function(f,v){v.indentStack==null&&f.sol()&&(v.indentation=f.indentation());if(f.eatSpace())return null;var w=null;switch(v.mode){case"string":var E,S=!1;while((E=f.next())!=null){if(E=='"'&&!S){v.mode=!1;break}S=!S&&E=="\\"}w=n;break;default:var x=f.next();if(x=='"')v.mode="string",w=n;else if(x=="\\")b(f),w=r;else if(x=="'"&&!d.digit_or_colon.test(f.peek()))w=i;else if(x==";")f.skipToEnd(),w=t;else if(y(x,f))w=s;else if(x=="("||x=="["||x=="{"){var T="",N=f.column(),C;if(x=="(")while((C=f.eat(d.keyword_char))!=null)T+=C;T.length>0&&(p.propertyIsEnumerable(T)||/^(?:def|with)/.test(T))?m(v,N+a,x):(f.eatSpace(),f.eol()||f.peek()==";"?m(v,N+1,x):m(v,N+f.current().length,x)),f.backUp(f.current().length-1),w=o}else if(x==")"||x=="]"||x=="}")w=o,v.indentStack!=null&&v.indentStack.type==(x==")"?"(":x=="]"?"[":"{")&&g(v);else{if(x==":")return f.eatWhile(d.symbol),i;f.eatWhile(d.symbol),c&&c.propertyIsEnumerable(f.current())?w=u:h&&h.propertyIsEnumerable(f.current())?w=e:l&&l.propertyIsEnumerable(f.current())?w=i:w=null}}return w},indent:function(e){return e.indentStack==null?e.indentation:e.indentStack.indent},lineComment:";;"}}),CodeMirror.defineMIME("text/x-clojure","clojure"),CodeMirror.defineMode("python",function(e,t){function r(e){return new RegExp("^(("+e.join(")|(")+"))\\b")}function b(e,t){if(e.sol()){var r=t.scopes[0].offset;if(e.eatSpace()){var c=e.indentation();return c>r?y="indent":c<r&&(y="dedent"),null}r>0&&S(e,t)}if(e.eatSpace())return null;var h=e.peek();if(h==="#")return e.skipToEnd(),"comment";if(e.match(/^[0-9\.]/,!1)){var p=!1;e.match(/^\d*\.\d+(e[\+\-]?\d+)?/i)&&(p=!0),e.match(/^\d+\.\d*/)&&(p=!0),e.match(/^\.\d+/)&&(p=!0);if(p)return e.eat(/J/i),"number";var d=!1;e.match(/^0x[0-9a-f]+/i)&&(d=!0),e.match(/^0b[01]+/i)&&(d=!0),e.match(/^0o[0-7]+/i)&&(d=!0),e.match(/^[1-9]\d*(e[\+\-]?\d+)?/)&&(e.eat(/J/i),d=!0),e.match(/^0(?![\dx])/i)&&(d=!0);if(d)return e.eat(/L/i),"number"}return e.match(v)?(t.tokenize=w(e.current()),t.tokenize(e,t)):e.match(a)||e.match(u)?null:e.match(o)||e.match(i)||e.match(l)?"operator":e.match(s)?null:e.match(m)?"keyword":e.match(g)?"builtin":e.match(f)?t.lastToken=="def"||t.lastToken=="class"?"def":"variable":(e.next(),n)}function w(e){function s(s,o){while(!s.eol()){s.eatWhile(/[^'"\\]/);if(s.eat("\\")){s.next();if(r&&s.eol())return i}else{if(s.match(e))return o.tokenize=b,i;s.eat(/['"]/)}}if(r){if(t.singleLineStringErrors)return n;o.tokenize=b}return i}while("rub".indexOf(e.charAt(0).toLowerCase())>=0)e=e.substr(1);var r=e.length==1,i="string";return s.isString=!0,s}function E(t,n,r){r=r||"py";var i=0;if(r==="py"){if(n.scopes[0].type!=="py"){n.scopes[0].offset=t.indentation();return}for(var s=0;s<n.scopes.length;++s)if(n.scopes[s].type==="py"){i=n.scopes[s].offset+e.indentUnit;break}}else i=t.column()+t.current().length;n.scopes.unshift({offset:i,type:r})}function S(e,t,n){n=n||"py";if(t.scopes.length==1)return;if(t.scopes[0].type==="py"){var r=e.indentation(),i=-1;for(var s=0;s<t.scopes.length;++s)if(r===t.scopes[s].offset){i=s;break}if(i===-1)return!0;while(t.scopes[0].offset!==r)t.scopes.shift();return!1}return n==="py"?(t.scopes[0].offset=e.indentation(),!1):t.scopes[0].type!=n?!0:(t.scopes.shift(),!1)}function x(e,t){y=null;var r=t.tokenize(e,t),i=e.current();if(i===".")return r=e.match(f,!1)?null:n,r===null&&t.lastStyle==="meta"&&(r="meta"),r;if(i==="@")return e.match(f,!1)?"meta":n;(r==="variable"||r==="builtin")&&t.lastStyle==="meta"&&(r="meta");if(i==="pass"||i==="return")t.dedent+=1;i==="lambda"&&(t.lambda=!0),(i===":"&&!t.lambda&&t.scopes[0].type=="py"||y==="indent")&&E(e,t);var s="[({".indexOf(i);return s!==-1&&E(e,t,"])}".slice(s,s+1)),y==="dedent"&&S(e,t)?n:(s="])}".indexOf(i),s!==-1&&S(e,t,i)?n:(t.dedent>0&&e.eol()&&t.scopes[0].type=="py"&&(t.scopes.length>1&&t.scopes.shift(),t.dedent-=1),r))}var n="error",i=t.singleOperators||new RegExp("^[\\+\\-\\*/%&|\\^~<>!]"),s=t.singleDelimiters||new RegExp("^[\\(\\)\\[\\]\\{\\}@,:`=;\\.]"),o=t.doubleOperators||new RegExp("^((==)|(!=)|(<=)|(>=)|(<>)|(<<)|(>>)|(//)|(\\*\\*))"),u=t.doubleDelimiters||new RegExp("^((\\+=)|(\\-=)|(\\*=)|(%=)|(/=)|(&=)|(\\|=)|(\\^=))"),a=t.tripleDelimiters||new RegExp("^((//=)|(>>=)|(<<=)|(\\*\\*=))"),f=t.identifiers||new RegExp("^[_A-Za-z][_A-Za-z0-9]*"),l=r(["and","or","not","is","in"]),c=["as","assert","break","class","continue","def","del","elif","else","except","finally","for","from","global","if","import","lambda","pass","raise","return","try","while","with","yield"],h=["abs","all","any","bin","bool","bytearray","callable","chr","classmethod","compile","complex","delattr","dict","dir","divmod","enumerate","eval","filter","float","format","frozenset"
,"getattr","globals","hasattr","hash","help","hex","id","input","int","isinstance","issubclass","iter","len","list","locals","map","max","memoryview","min","next","object","oct","open","ord","pow","property","range","repr","reversed","round","set","setattr","slice","sorted","staticmethod","str","sum","super","tuple","type","vars","zip","__import__","NotImplemented","Ellipsis","__debug__"],p={builtins:["apply","basestring","buffer","cmp","coerce","execfile","file","intern","long","raw_input","reduce","reload","unichr","unicode","xrange","False","True","None"],keywords:["exec","print"]},d={builtins:["ascii","bytes","exec","print"],keywords:["nonlocal","False","True","None"]};t.extra_keywords!=undefined&&(c=c.concat(t.extra_keywords)),t.extra_builtins!=undefined&&(h=h.concat(t.extra_builtins));if(!t.version||parseInt(t.version,10)!==3){c=c.concat(p.keywords),h=h.concat(p.builtins);var v=new RegExp("^(([rub]|(ur)|(br))?('{3}|\"{3}|['\"]))","i")}else{c=c.concat(d.keywords),h=h.concat(d.builtins);var v=new RegExp("^(([rb]|(br))?('{3}|\"{3}|['\"]))","i")}var m=r(c),g=r(h),y=null,T={startState:function(e){return{tokenize:b,scopes:[{offset:e||0,type:"py"}],lastStyle:null,lastToken:null,lambda:!1,dedent:0}},token:function(e,t){var n=x(e,t);t.lastStyle=n;var r=e.current();return r&&n&&(t.lastToken=r),e.eol()&&t.lambda&&(t.lambda=!1),n},indent:function(e){return e.tokenize!=b?e.tokenize.isString?CodeMirror.Pass:0:e.scopes[0].offset},lineComment:"#",fold:"indent"};return T}),CodeMirror.defineMIME("text/x-python","python"),function(){"use strict";var e=function(e){return e.split(" ")};CodeMirror.defineMIME("text/x-cython",{name:"python",extra_keywords:e("by cdef cimport cpdef ctypedef enum exceptextern gil include nogil property publicreadonly struct union DEF IF ELIF ELSE")})}(),function(){function e(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function t(e){return function(t,n){return t.match(e)?n.tokenize=null:t.skipToEnd(),"string"}}var n={name:"clike",keywords:e("abstract and array as break case catch class clone const continue declare default do else elseif enddeclare endfor endforeach endif endswitch endwhile extends final for foreach function global goto if implements interface instanceof namespace new or private protected public static switch throw trait try use var while xor die echo empty exit eval include include_once isset list require require_once return print unset __halt_compiler self static parent yield insteadof finally"),blockKeywords:e("catch do else elseif for foreach if switch try while finally"),atoms:e("true false null TRUE FALSE NULL __CLASS__ __DIR__ __FILE__ __LINE__ __METHOD__ __FUNCTION__ __NAMESPACE__ __TRAIT__"),builtin:e("func_num_args func_get_arg func_get_args strlen strcmp strncmp strcasecmp strncasecmp each error_reporting define defined trigger_error user_error set_error_handler restore_error_handler get_declared_classes get_loaded_extensions extension_loaded get_extension_funcs debug_backtrace constant bin2hex hex2bin sleep usleep time mktime gmmktime strftime gmstrftime strtotime date gmdate getdate localtime checkdate flush wordwrap htmlspecialchars htmlentities html_entity_decode md5 md5_file crc32 getimagesize image_type_to_mime_type phpinfo phpversion phpcredits strnatcmp strnatcasecmp substr_count strspn strcspn strtok strtoupper strtolower strpos strrpos strrev hebrev hebrevc nl2br basename dirname pathinfo stripslashes stripcslashes strstr stristr strrchr str_shuffle str_word_count strcoll substr substr_replace quotemeta ucfirst ucwords strtr addslashes addcslashes rtrim str_replace str_repeat count_chars chunk_split trim ltrim strip_tags similar_text explode implode setlocale localeconv parse_str str_pad chop strchr sprintf printf vprintf vsprintf sscanf fscanf parse_url urlencode urldecode rawurlencode rawurldecode readlink linkinfo link unlink exec system escapeshellcmd escapeshellarg passthru shell_exec proc_open proc_close rand srand getrandmax mt_rand mt_srand mt_getrandmax base64_decode base64_encode abs ceil floor round is_finite is_nan is_infinite bindec hexdec octdec decbin decoct dechex base_convert number_format fmod ip2long long2ip getenv putenv getopt microtime gettimeofday getrusage uniqid quoted_printable_decode set_time_limit get_cfg_var magic_quotes_runtime set_magic_quotes_runtime get_magic_quotes_gpc get_magic_quotes_runtime import_request_variables error_log serialize unserialize memory_get_usage var_dump var_export debug_zval_dump print_r highlight_file show_source highlight_string ini_get ini_get_all ini_set ini_alter ini_restore get_include_path set_include_path restore_include_path setcookie header headers_sent connection_aborted connection_status ignore_user_abort parse_ini_file is_uploaded_file move_uploaded_file intval floatval doubleval strval gettype settype is_null is_resource is_bool is_long is_float is_int is_integer is_double is_real is_numeric is_string is_array is_object is_scalar ereg ereg_replace eregi eregi_replace split spliti join sql_regcase dl pclose popen readfile rewind rmdir umask fclose feof fgetc fgets fgetss fread fopen fpassthru ftruncate fstat fseek ftell fflush fwrite fputs mkdir rename copy tempnam tmpfile file file_get_contents stream_select stream_context_create stream_context_set_params stream_context_set_option stream_context_get_options stream_filter_prepend stream_filter_append fgetcsv flock get_meta_tags stream_set_write_buffer set_file_buffer set_socket_blocking stream_set_blocking socket_set_blocking stream_get_meta_data stream_register_wrapper stream_wrapper_register stream_set_timeout socket_set_timeout socket_get_status realpath fnmatch fsockopen pfsockopen pack unpack get_browser crypt opendir closedir chdir getcwd rewinddir readdir dir glob fileatime filectime filegroup fileinode filemtime fileowner fileperms filesize filetype file_exists is_writable is_writeable is_readable is_executable is_file is_dir is_link stat lstat chown touch clearstatcache mail ob_start ob_flush ob_clean ob_end_flush ob_end_clean ob_get_flush ob_get_clean ob_get_length ob_get_level ob_get_status ob_get_contents ob_implicit_flush ob_list_handlers ksort krsort natsort natcasesort asort arsort sort rsort usort uasort uksort shuffle array_walk count end prev next reset current key min max in_array array_search extract compact array_fill range array_multisort array_push array_pop array_shift array_unshift array_splice array_slice array_merge array_merge_recursive array_keys array_values array_count_values array_reverse array_reduce array_pad array_flip array_change_key_case array_rand array_unique array_intersect array_intersect_assoc array_diff array_diff_assoc array_sum array_filter array_map array_chunk array_key_exists pos sizeof key_exists assert assert_options version_compare ftok str_rot13 aggregate session_name session_module_name session_save_path session_id session_regenerate_id session_decode session_register session_unregister session_is_registered session_encode session_start session_destroy session_unset session_set_save_handler session_cache_limiter session_cache_expire session_set_cookie_params session_get_cookie_params session_write_close preg_match preg_match_all preg_replace preg_replace_callback preg_split preg_quote preg_grep overload ctype_alnum ctype_alpha ctype_cntrl ctype_digit ctype_lower ctype_graph ctype_print ctype_punct ctype_space ctype_upper ctype_xdigit virtual apache_request_headers apache_note apache_lookup_uri apache_child_terminate apache_setenv apache_response_headers apache_get_version getallheaders mysql_connect mysql_pconnect mysql_close mysql_select_db mysql_create_db mysql_drop_db mysql_query mysql_unbuffered_query mysql_db_query mysql_list_dbs mysql_list_tables mysql_list_fields mysql_list_processes mysql_error mysql_errno mysql_affected_rows mysql_insert_id mysql_result mysql_num_rows mysql_num_fields mysql_fetch_row mysql_fetch_array mysql_fetch_assoc mysql_fetch_object mysql_data_seek mysql_fetch_lengths mysql_fetch_field mysql_field_seek mysql_free_result mysql_field_name mysql_field_table mysql_field_len mysql_field_type mysql_field_flags mysql_escape_string mysql_real_escape_string mysql_stat mysql_thread_id mysql_client_encoding mysql_get_client_info mysql_get_host_info mysql_get_proto_info mysql_get_server_info mysql_info mysql mysql_fieldname mysql_fieldtable mysql_fieldlen mysql_fieldtype mysql_fieldflags mysql_selectdb mysql_createdb mysql_dropdb mysql_freeresult mysql_numfields mysql_numrows mysql_listdbs mysql_listtables mysql_listfields mysql_db_name mysql_dbname mysql_tablename mysql_table_name pg_connect pg_pconnect pg_close pg_connection_status pg_connection_busy pg_connection_reset pg_host pg_dbname pg_port pg_tty pg_options pg_ping pg_query pg_send_query pg_cancel_query pg_fetch_result pg_fetch_row pg_fetch_assoc pg_fetch_array pg_fetch_object pg_fetch_all pg_affected_rows pg_get_result pg_result_seek pg_result_status pg_free_result pg_last_oid pg_num_rows pg_num_fields pg_field_name pg_field_num pg_field_size pg_field_type pg_field_prtlen pg_field_is_null pg_get_notify pg_get_pid pg_result_error pg_last_error pg_last_notice pg_put_line pg_end_copy pg_copy_to pg_copy_from pg_trace pg_untrace pg_lo_create pg_lo_unlink pg_lo_open pg_lo_close pg_lo_read pg_lo_write pg_lo_read_all pg_lo_import pg_lo_export pg_lo_seek pg_lo_tell pg_escape_string pg_escape_bytea pg_unescape_bytea pg_client_encoding pg_set_client_encoding pg_meta_data pg_convert pg_insert pg_update pg_delete pg_select pg_exec pg_getlastoid pg_cmdtuples pg_errormessage pg_numrows pg_numfields pg_fieldname pg_fieldsize pg_fieldtype pg_fieldnum pg_fieldprtlen pg_fieldisnull pg_freeresult pg_result pg_loreadall pg_locreate pg_lounlink pg_loopen pg_loclose pg_loread pg_lowrite pg_loimport pg_loexport http_response_code get_declared_traits getimagesizefromstring socket_import_stream stream_set_chunk_size trait_exists header_register_callback class_uses session_status session_register_shutdown echo print global static exit array empty eval isset unset die include require include_once require_once"),multiLineStrings:!0,hooks:{$:function(e){return e.eatWhile(/[\w\$_]/),"variable-2"},"<":function(e,n){return e.match(/<</)?(e.eatWhile(/[\w\.]/),n.tokenize=t(e.current().slice(3)),n.tokenize(e,n)):!1},"#":function(e){while(!e.eol()&&!e.match("?>",!1))e.next();return"comment"},"/":function(e){if(e.eat("/")){while(!e.eol()&&!e.match("?>",!1))e.next();return"comment"}return!1}}};CodeMirror.defineMode("php",function(e,t){function s(e,t){var n=t.curMode==i;e.sol()&&t.pending!='"'&&(t.pending=null);if(!n){if(e.match(/^<\?\w*/))return t.curMode=i,t.curState=t.php,"meta";if(t.pending=='"'){while(!e.eol()&&e.next()!='"');var s="string"}else if(t.pending&&e.pos<t.pending.end){e.pos=t.pending.end;var s=t.pending.style}else var s=r.token(e,t.curState);t.pending=null;var o=e.current(),u=o.search(/<\?/);return u!=-1&&(s=="string"&&/\"$/.test(o)&&!/\?>/.test(o)?t.pending='"':t.pending={end:e.pos,style:s},e.backUp(o.length-u)),s}return n&&t.php.tokenize==null&&e.match("?>")?(t.curMode=r,t.curState=t.html,"meta"):i.token(e,t.curState)}var r=CodeMirror.getMode(e,"text/html"),i=CodeMirror.getMode(e,n);return{startState:function(){var e=CodeMirror.startState(r),n=CodeMirror.startState(i);return{html:e,php:n,curMode:t.startOpen?i:r,curState:t.startOpen?n:e,pending:null}},copyState:function(e){var t=e.html,n=CodeMirror.copyState(r,t),s=e.php,o=CodeMirror.copyState(i,s),u;return e.curMode==r?u=n:u=o,{html:n,php:o,curMode:e.curMode,curState:u,pending:e.pending}},token:s,indent:function(e,t){return e.curMode!=i&&/^\s*<\//.test(t)||e.curMode==i&&/^\?>/.test(t)?r.indent(e.html,t):e.curMode.indent(e.curState,t)},electricChars:"/{}:",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",innerMode:function(e){return{state:e.curState,mode:e.curMode}}}},"htmlmixed","clike"),CodeMirror.defineMIME("application/x-httpd-php","php"),CodeMirror.defineMIME("application/x-httpd-php-open",{name:"php",startOpen:!0}),CodeMirror.defineMIME("text/x-php",n)}(),CodeMirror.defineMIME("text/x-erlang","erlang"),CodeMirror.defineMode("erlang",function(e){function t(e,t,n){e.in_record=n=="record";switch(n){case"atom":return"atom";case"attribute":return"attribute";case"boolean":return"special";case"builtin":return"builtin";case"comment":return"comment";case"fun":return"meta";case"function":return"tag";case"guard":return"property";case"keyword":return"keyword";case"macro":return"variable-2";case"number":return"number";case"operator":return"operator";case"record":return"bracket";case"string":return"string";case"type":return"def";case"variable":return"variable";case"error":return"error";case"separator":return null;case"open_paren":return null;case"close_paren":return null;default:return null}}function g(e,g){if(g.in_string)return g.in_string=!E(e),t(g,e,"string");if(g.in_atom)return g.in_atom=!S(e),t(g,e,"atom");if(e.eatSpace())return t(g,e,"whitespace");if(A(g).token==""&&e.match(/-\s*[a-zß-öø-ÿ][\wØ-ÞÀ-Öß-öø-ÿ]*/))return T(e.current(),n)?t(g,e,"type"):t(g,e,"attribute");var x=e.next();if(x=="%")return e.skipToEnd(),t(g,e,"comment");if(x=="?")return e.eatWhile(v),t(g,e,"macro");if(x=="#")return e.eatWhile(v),t(g,e,"record");if(x=="$")return e.next()=="\\"&&!e.match(m)?t(g,e,"error"):t(g,e,"number");if(x=="'"){if(!(g.in_atom=!S(e))){if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),L(g),t(g,e,"fun");if(e.match(/\s*\(/,!1)||e.match(/\s*:/,!1))return t(g,e,"function")}return t(g,e,"atom")}if(x=='"')return g.in_string=!E(e),t(g,e,"string");if(/[A-Z_Ø-ÞÀ-Ö]/.test(x))return e.eatWhile(v),t(g,e,"variable");if(/[a-z_ß-öø-ÿ]/.test(x)){e.eatWhile(v);if(e.match(/\s*\/\s*[0-9]/,!1))return e.match(/\s*\/\s*[0-9]/,!0),L(g),t(g,e,"fun");var N=e.current();return T(N,r)?(O(g,e),t(g,e,"keyword")):e.match(/\s*\(/,!1)?T(N,d)&&(!y(e,":")||y(e,"erlang:"))?t(g,e,"builtin"):T(N,p)?t(g,e,"guard"):t(g,e,"function"):T(N,o)?t(g,e,"operator"):e.match(/\s*:/,!1)?N=="erlang"?t(g,e,"builtin"):t(g,e,"function"):T(N,["true","false"])?t(g,e,"boolean"):t(g,e,"atom")}var C=/[0-9]/,k=/[0-9a-zA-Z]/;return C.test(x)?(e.eatWhile(C),e.eat("#")?e.eatWhile(k):(e.eat(".")&&e.eatWhile(C),e.eat(/[eE]/)&&(e.eat(/[-+]/),e.eatWhile(C))),t(g,e,"number")):b(e,f,l)?(O(g,e),t(g,e,"open_paren")):b(e,c,h)?(O(g,e),t(g,e,"close_paren")):w(e,i,s)?(g.in_record||O(g,e),t(g,e,"separator")):w(e,u,a)?t(g,e,"operator"):t(g,e,null)}function y(e,t){var n=e.start,r=t.length;if(r<=n){var i=e.string.slice(n-r,n);return i==t}return!1}function b(e,t,n){if(e.current().length==1&&t.test(e.current())){e.backUp(1);while(t.test(e.peek())){e.next();if(T(e.current(),n))return!0}e.backUp(e.current().length-1)}return!1}function w(e,t,n){if(e.current().length==1&&t.test(e.current())){while(t.test(e.peek()))e.next();while(0<e.current().length){if(T(e.current(),n))return!0;e.backUp(1)}e.next()}return!1}function E(e){return x(e,'"',"\\")}function S(e){return x(e,"'","\\")}function x(e,t,n){while(!e.eol()){var r=e.next();if(r==t)return!0;r==n&&e.next()}return!1}function T(e,t){return-1<t.indexOf(e)}function N(t,n){var r=e.indentUnit,i=A(t).token,s=C(n,/[^a-z]/);return t.in_string||t.in_atom?CodeMirror.Pass:i==""?0:T(i,l)?A(t).column+i.length:i=="when"?A(t).column+i.length+1:i=="fun"&&s==""?A(t).column+i.length:i=="->"?T(s,["end","after","catch"])?A(t,2).column:A(t,2).token=="fun"?A(t,2).column+r:A(t,2).token==""?r:A(t).indent+r:T(s,["after","catch","of"])?A(t).indent:A(t).column+r}function C(e,t){var n=e.match(t);return n?e.slice(0,n.index):e}function k(e){this.token=e?e.current():"",this.column=e?e.column():0,this.indent=e?e.indentation():0}function L(e){return e.tokenStack.pop()}function A(e,t){var n=e.tokenStack.length,r=t?t:1;return n<r?new k:e.tokenStack[n-r]}function O(e,t){var n=t.current(),r=A(e).token;return n=="."?(e.tokenStack=[],!1):T(n,[",",":","of","cond","let","query"])?!1:M(r,n)?!1:D(r,n)?(L(e),!1):_(r,n)?(L(e),O(e,t)):T(n,["after","catch"])?!1:(e.tokenStack.push(new k(t)),!0)}function M(e,t){switch(e+" "+t){case"when ;":return!0;default:return!1}}function _(e,t){switch(e+" "+t){case"when ->":return!0;case"-> end":return!0;default:return!1}}function D(e,t){switch(e+" "+t){case"( )":return!0;case"[ ]":return!0;case"{ }":return!0;case"<< >>":return!0;case"begin end":return!0;case"case end":return!0;case"fun end":return!0;case"if end":return!0;case"receive end":return!0;case"try end":return!0;case"-> catch":return!0;case"-> after":return!0;case"-> ;":return!0;default:return!1}}var n=["-type","-spec","-export_type","-opaque"],r=["after","begin","catch","case","cond","end","fun","if","let","of","query","receive","try","when"],i=/[\->\.,:;]/,s=["->",";",":",".",","],o=["and","andalso","band","bnot","bor","bsl","bsr","bxor","div","not","or","orelse","rem","xor"],u=/[\+\-\*\/<>=\|:!]/,a=["+","-","*","/",">",">=","<","=<","=:=","==","=/=","/=","||","<-","!"],f=/[<\(\[\{]/,l=["<<","(","[","{"],c=/[>\)\]\}]/,h=["}","]",")",">>"],p=["is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_record","is_reference","is_tuple","atom","binary","bitstring","boolean","function","integer","list","number","pid","port","record","reference","tuple"],d=["abs","adler32","adler32_combine","alive","apply","atom_to_binary","atom_to_list","binary_to_atom","binary_to_existing_atom","binary_to_list","binary_to_term","bit_size","bitstring_to_list","byte_size","check_process_code","contact_binary","crc32","crc32_combine","date","decode_packet","delete_module","disconnect_node","element","erase","exit","float","float_to_list","garbage_collect","get","get_keys","group_leader","halt","hd","integer_to_list","internal_bif","iolist_size","iolist_to_binary","is_alive","is_atom","is_binary","is_bitstring","is_boolean","is_float","is_function","is_integer","is_list","is_number","is_pid","is_port","is_process_alive","is_record","is_reference","is_tuple","length","link","list_to_atom","list_to_binary","list_to_bitstring","list_to_existing_atom","list_to_float","list_to_integer","list_to_pid","list_to_tuple","load_module","make_ref","module_loaded","monitor_node","node","node_link","node_unlink","nodes","notalive","now","open_port","pid_to_list","port_close","port_command","port_connect","port_control","pre_loaded","process_flag","process_info","processes","purge_module","put","register","registered","round","self","setelement","size","spawn","spawn_link","spawn_monitor","spawn_opt","split_binary","statistics","term_to_binary","time","throw","tl","trunc","tuple_size","tuple_to_list","unlink","unregister","whereis"],v=/[\w@Ø-ÞÀ-Öß-öø-ÿ]/,m=/[0-7]{1,3}|[bdefnrstv\\"']|\^[a-zA-Z]|x[0-9a-zA-Z]{2}|x{[0-9a-zA-Z]+}/;return{startState:function(){return{tokenStack:[],in_record:!1,in_string:!1,in_atom:!1}},token:function(e,t){return g(e,t)},indent:function(e,t){return N(e,t)},lineComment:"%"}}),CodeMirror.defineMode("clike",function(e,t){function p(e,t){var n=e.next();if(f[n]){var r=f[n](e,t);if(r!==!1)return r}if(n=='"'||n=="'")return t.tokenize=d(n),t.tokenize(e,t);if(/[\[\]{}\(\),;\:\.]/.test(n))return h=n,null;if(/\d/.test(n))return e.eatWhile(/[\w\.]/),"number";if(n=="/"){if(e.eat("*"))return t.tokenize=v,v(e,t);if(e.eat("/"))return e.skipToEnd(),"comment"}if(c.test(n))return e.eatWhile(c),"operator";e.eatWhile(/[\w\$_]/);var i=e.current();return s.propertyIsEnumerable(i)?(u.propertyIsEnumerable(i)&&(h="newstatement"),"keyword"):o.propertyIsEnumerable(i)?(u.propertyIsEnumerable(i)&&(h="newstatement"),"builtin"):a.propertyIsEnumerable(i)?"atom":"variable"}function d(e){return function(t,n){var r=!1,i,s=!1;while((i=t.next())!=null){if(i==e&&!r){s=!0;break}r=!r&&i=="\\"}if(s||!r&&!l)n.tokenize=null;return"string"}}function v(e,t){var n=!1,r;while(r=e.next()){if(r=="/"&&n){t.tokenize=null;break}n=r=="*"}return"comment"}function m(e,t,n,r,i){this.indented=e,this.column=t,this.type=n,this.align=r,this.prev=i}function g(e,t,n){var r=e.indented;return e.context&&e.context.type=="statement"&&(r=e.context.indented),e.context=new m(r,t,n,null,e.context)}function y(e){var t=e.context.type;if(t==")"||t=="]"||t=="}")e.indented=e.context.indented;return e.context=e.context.prev}var n=e.indentUnit,r=t.statementIndentUnit||n,i=t.dontAlignCalls,s=t.keywords||{},o=t.builtin||{},u=t.blockKeywords||{},a=t.atoms||{},f=t.hooks||{},l=t.multiLineStrings,c=/[+\-*&%=<>!?|\/]/,h;return{startState:function(e){return{tokenize:null,context:new m((e||0)-n,0,"top",!1),indented:0,startOfLine:!0}},token:function(e,t){var n=t.context;e.sol()&&(n.align==null&&(n.align=!1),t.indented=e.indentation(),t.startOfLine=!0);if(e.eatSpace())return null;h=null;var r=(t.tokenize||p)(e,t);if(r=="comment"||r=="meta")return r;n.align==null&&(n.align=!0);if(h!=";"&&h!=":"&&h!=","||n.type!="statement")if(h=="{")g(t,e.column(),"}");else if(h=="[")g(t,e.column(),"]");else if(h=="(")g(t,e.column(),")");else if(h=="}"){while(n.type=="statement")n=y(t);n.type=="}"&&(n=y(t));while(n.type=="statement")n=y(t)}else h==n.type?y(t):((n.type=="}"||n.type=="top")&&h!=";"||n.type=="statement"&&h=="newstatement")&&g(t,e.column(),"statement");else y(t);return t.startOfLine=!1,r},indent:function(e,t){if(e.tokenize!=p&&e.tokenize!=null)return CodeMirror.Pass;var s=e.context,o=t&&t.charAt(0);s.type=="statement"&&o=="}"&&(s=s.prev);var u=o==s.type;return s.type=="statement"?s.indented+(o=="{"?0:r):s.align&&(!i||s.type!=")")?s.column+(u?0:1):s.type==")"&&!u?s.indented+r:s.indented+(u?0:n)},electricChars:"{}",blockCommentStart:"/*",blockCommentEnd:"*/",lineComment:"//",fold:"brace"}}),function(){function e(e){var t={},n=e.split(" ");for(var r=0;r<n.length;++r)t[n[r]]=!0;return t}function n(e,t){if(!t.startOfLine)return!1;for(;;){if(!e.skipTo("\\")){e.skipToEnd(),t.tokenize=null;break}e.next();if(e.eol()){t.tokenize=n;break}}return"meta"}function r(e,t){var n;while((n=e.next())!=null)if(n=='"'&&!e.eat('"')){t.tokenize=null;break}return"string"}function i(e,t){for(var n=0;n<e.length;++n)CodeMirror.defineMIME(e[n],t)}var t="auto if break int case long char register continue return default short do sizeof double static else struct entry switch extern typedef float union for unsigned goto while enum void const signed volatile";i(["text/x-csrc","text/x-c","text/x-chdr"],{name:"clike",keywords:e(t),blockKeywords:e("case do else for if switch while struct"),atoms:e("null"),hooks:{"#":n}}),i(["text/x-c++src","text/x-c++hdr"],{name:"clike",keywords:e(t+" asm dynamic_cast namespace reinterpret_cast try bool explicit new "+"static_cast typeid catch operator template typename class friend private "+"this using const_cast inline public throw virtual delete mutable protected "+"wchar_t"),blockKeywords:e("catch class do else finally for if struct switch try while"),atoms:e("true false null"),hooks:{"#":n}}),CodeMirror.defineMIME("text/x-java",{name:"clike",keywords:e("abstract assert boolean break byte case catch char class const continue default do double else enum extends final finally float for goto if implements import instanceof int interface long native new package private protected public return short static strictfp super switch synchronized this throw throws transient try void volatile while"),blockKeywords:e("catch class do else finally for if switch try while"),atoms:e("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),CodeMirror.defineMIME("text/x-csharp",{name:"clike",keywords:e("abstract as base break case catch checked class const continue default delegate do else enum event explicit extern finally fixed for foreach goto if implicit in interface internal is lock namespace new operator out override params private protected public readonly ref return sealed sizeof stackalloc static struct switch this throw try typeof unchecked unsafe using virtual void volatile while add alias ascending descending dynamic from get global group into join let orderby partial remove select set value var yield"),blockKeywords:e("catch class do else finally for foreach if struct switch try while"),builtin:e("Boolean Byte Char DateTime DateTimeOffset Decimal Double Guid Int16 Int32 Int64 Object SByte Single String TimeSpan UInt16 UInt32 UInt64 bool byte char decimal double short int long object sbyte float string ushort uint ulong"),atoms:e("true false null"),hooks:{"@":function(e,t){return e.eat('"')?(t.tokenize=r,r(e,t)):(e.eatWhile(/[\w\$_]/),"meta")}}}),CodeMirror.defineMIME("text/x-scala",{name:"clike",keywords:e("abstract case catch class def do else extends false final finally for forSome if implicit import lazy match new null object override package private protected return sealed super this throw trait try trye type val var while with yield _ : = => <- <: <% >: # @ assert assume require print println printf readLine readBoolean readByte readShort readChar readInt readLong readFloat readDouble AnyVal App Application Array BufferedIterator BigDecimal BigInt Char Console Either Enumeration Equiv Error Exception Fractional Function IndexedSeq Integral Iterable Iterator List Map Numeric Nil NotNull Option Ordered Ordering PartialFunction PartialOrdering Product Proxy Range Responder Seq Serializable Set Specializable Stream StringBuilder StringContext Symbol Throwable Traversable TraversableOnce Tuple Unit Vector :: #:: Boolean Byte Character CharSequence Class ClassLoader Cloneable Comparable Compiler Double Exception Float Integer Long Math Number Object Package Pair Process Runtime Runnable SecurityManager Short StackTraceElement StrictMath String StringBuffer System Thread ThreadGroup ThreadLocal Throwable Triple Void"),blockKeywords:e("catch class do else finally for forSome if match switch try while"),atoms:e("true false null"),hooks:{"@":function(e){return e.eatWhile(/[\w\$_]/),"meta"}}}),i(["x-shader/x-vertex","x-shader/x-fragment"],{name:"clike",keywords:e("float int bool void vec2 vec3 vec4 ivec2 ivec3 ivec4 bvec2 bvec3 bvec4 mat2 mat3 mat4 sampler1D sampler2D sampler3D samplerCube sampler1DShadow sampler2DShadowconst attribute uniform varying break continue discard return for while do if else struct in out inout"),blockKeywords:e("for while do if else struct"),builtin:e("radians degrees sin cos tan asin acos atan pow exp log exp2 sqrt inversesqrt abs sign floor ceil fract mod min max clamp mix step smootstep length distance dot cross normalize ftransform faceforward reflect refract matrixCompMult lessThan lessThanEqual greaterThan greaterThanEqual equal notEqual any all not texture1D texture1DProj texture1DLod texture1DProjLod texture2D texture2DProj texture2DLod texture2DProjLod texture3D texture3DProj texture3DLod texture3DProjLod textureCube textureCubeLod shadow1D shadow2D shadow1DProj shadow2DProj shadow1DLod shadow2DLod shadow1DProjLod shadow2DProjLod dFdx dFdy fwidth noise1 noise2 noise3 noise4"),atoms:e("true false gl_FragColor gl_SecondaryColor gl_Normal gl_Vertex gl_MultiTexCoord0 gl_MultiTexCoord1 gl_MultiTexCoord2 gl_MultiTexCoord3 gl_MultiTexCoord4 gl_MultiTexCoord5 gl_MultiTexCoord6 gl_MultiTexCoord7 gl_FogCoord gl_Position gl_PointSize gl_ClipVertex gl_FrontColor gl_BackColor gl_FrontSecondaryColor gl_BackSecondaryColor gl_TexCoord gl_FogFragCoord gl_FragCoord gl_FrontFacing gl_FragColor gl_FragData gl_FragDepth gl_ModelViewMatrix gl_ProjectionMatrix gl_ModelViewProjectionMatrix gl_TextureMatrix gl_NormalMatrix gl_ModelViewMatrixInverse gl_ProjectionMatrixInverse gl_ModelViewProjectionMatrixInverse gl_TexureMatrixTranspose gl_ModelViewMatrixInverseTranspose gl_ProjectionMatrixInverseTranspose gl_ModelViewProjectionMatrixInverseTranspose gl_TextureMatrixInverseTranspose gl_NormalScale gl_DepthRange gl_ClipPlane gl_Point gl_FrontMaterial gl_BackMaterial gl_LightSource gl_LightModel gl_FrontLightModelProduct gl_BackLightModelProduct gl_TextureColor gl_EyePlaneS gl_EyePlaneT gl_EyePlaneR gl_EyePlaneQ gl_FogParameters gl_MaxLights gl_MaxClipPlanes gl_MaxTextureUnits gl_MaxTextureCoords gl_MaxVertexAttribs gl_MaxVertexUniformComponents gl_MaxVaryingFloats gl_MaxVertexTextureImageUnits gl_MaxTextureImageUnits gl_MaxFragmentUniformComponents gl_MaxCombineTextureImageUnits gl_MaxDrawBuffers"),hooks:{"#":n}})}(),CodeMirror.defineMode("haskell",function(e,t){function n(e,t,n){return t(n),n(e,t)}function h(e,t){if(e.eatWhile(c))return null;var h=e.next();if(l.test(h)){if(h=="{"&&e.eat("-")){var v="comment";return e.eat("#")&&(v="meta"),n(e,t,p(v,1))}return null}if(h=="'")return e.eat("\\")?e.next():e.next(),e.eat("'")?"string":"error";if(h=='"')return n(e,t,d);if(i.test(h))return e.eatWhile(a),e.eat(".")?"qualifier":"variable-2";if(r.test(h))return e.eatWhile(a),"variable";if(s.test(h)){if(h=="0"){if(e.eat(/[xX]/))return e.eatWhile(o),"integer";if(e.eat(/[oO]/))return e.eatWhile(u),"number"}e.eatWhile(s);var v="number";return e.eat(".")&&(v="number",e.eatWhile(s)),e.eat(/[eE]/)&&(v="number",e.eat(/[-+]/),e.eatWhile(s)),v}if(f.test(h)){if(h=="-"&&e.eat(/-/)){e.eatWhile(/-/);if(!e.eat(f))return e.skipToEnd(),"comment"}var v="variable";return h==":"&&(v="variable-2"),e.eatWhile(f),v}return"error"}function p(e,t){return t==0?h:function(n,r){var i=t;while(!n.eol()){var s=n.next();if(s=="{"&&n.eat("-"))++i;else if(s=="-"&&n.eat("}")){--i;if(i==0)return r(h),e}}return r(p(e,i)),e}}function d(e,t){while(!e.eol()){var n=e.next();if(n=='"')return t(h),"string";if(n=="\\"){if(e.eol()||e.eat(c))return t(v),"string";e.eat("&")||e.next()}}return t(h),"error"}function v(e,t){return e.eat("\\")?n(e,t,d):(e.next(),t(h),"error")}var r=/[a-z_]/,i=/[A-Z]/,s=/[0-9]/,o=/[0-9A-Fa-f]/,u=/[0-7]/,a=/[a-z_A-Z0-9']/,f=/[-!#$%&*+.\/<=>?@\\^|~:]/,l=/[(),;[\]`{}]/,c=/[ \t\v\f]/,m=function(){function n(t){return function(){for(var n=0;n<arguments.length;n++)e[arguments[n]]=t}}var e={};n("keyword")("case","class","data","default","deriving","do","else","foreign","if","import","in","infix","infixl","infixr","instance","let","module","newtype","of","then","type","where","_"),n("keyword")("..",":","::","=","\\",'"',"<-","->","@","~","=>"),n("builtin")("!!","$!","$","&&","+","++","-",".","/","/=","<","<=","=<<","==",">",">=",">>",">>=","^","^^","||","*","**"),n("builtin")("Bool","Bounded","Char","Double","EQ","Either","Enum","Eq","False","FilePath","Float","Floating","Fractional","Functor","GT","IO","IOError","Int","Integer","Integral","Just","LT","Left","Maybe","Monad","Nothing","Num","Ord","Ordering","Rational","Read","ReadS","Real","RealFloat","RealFrac","Right","Show","ShowS","String","True"),n("builtin")("abs","acos","acosh","all","and","any","appendFile","asTypeOf","asin","asinh","atan","atan2","atanh","break","catch","ceiling","compare","concat","concatMap","const","cos","cosh","curry","cycle","decodeFloat","div","divMod","drop","dropWhile","either","elem","encodeFloat","enumFrom","enumFromThen","enumFromThenTo","enumFromTo","error","even","exp","exponent","fail","filter","flip","floatDigits","floatRadix","floatRange","floor","fmap","foldl","foldl1","foldr","foldr1","fromEnum","fromInteger","fromIntegral","fromRational","fst","gcd","getChar","getContents","getLine","head","id","init","interact","ioError","isDenormalized","isIEEE","isInfinite","isNaN","isNegativeZero","iterate","last","lcm","length","lex","lines","log","logBase","lookup","map","mapM","mapM_","max","maxBound","maximum","maybe","min","minBound","minimum","mod","negate","not","notElem","null","odd","or","otherwise","pi","pred","print","product","properFraction","putChar","putStr","putStrLn","quot","quotRem","read","readFile","readIO","readList","readLn","readParen","reads","readsPrec","realToFrac","recip","rem","repeat","replicate","return","reverse","round","scaleFloat","scanl","scanl1","scanr","scanr1","seq","sequence","sequence_","show","showChar","showList","showParen","showString","shows","showsPrec","significand","signum","sin","sinh","snd","span","splitAt","sqrt","subtract","succ","sum","tail","take","takeWhile","tan","tanh","toEnum","toInteger","toRational","truncate","uncurry","undefined","unlines","until","unwords","unzip","unzip3","userError","words","writeFile","zip","zip3","zipWith","zipWith3");var r=t.overrideKeywords;if(r)for(var i in r)r.hasOwnProperty(i)&&(e[i]=r[i]);return e}();return{startState:function(){return{f:h}},copyState:function(e){return{f:e.f}},token:function(e,t){var n=t.f(e,function(e){t.f=e}),r=e.current();return m.hasOwnProperty(r)?m[r]:n},blockCommentStart:"{-",blockCommentEnd:"-}",lineComment:"--"}}),CodeMirror.defineMIME("text/x-haskell","haskell"),CodeMirror.defineMode("markdown",function(e,t){function A(e,t,n){return t.f=t.inline=n,n(e,t)}function O(e,t,n){return t.f=t.block=n,n(e,t)}function M(e){return e.linkTitle=!1,e.em=!1,e.strong=!1,e.quote=0,!n&&e.f==D&&(e.f=j,e.block=_),e.trailingSpace=0,e.trailingSpaceNewLine=!1,e.thisLineHasContent=!1,null}function _(e,n){var r=n.list!==!1
;n.list!==!1&&n.indentationDiff>=0?(n.indentationDiff<4&&(n.indentation-=n.indentationDiff),n.list=null):n.list!==!1&&n.indentation>0?(n.list=null,n.listDepth=Math.floor(n.indentation/4)):n.list!==!1&&(n.list=!1,n.listDepth=0);var i=null;if(n.indentationDiff>=4)return n.indentation-=4,e.skipToEnd(),a;if(e.eatSpace())return null;if(i=e.match(C))n.header=i[0].length<=6?i[0].length:6;else if(n.prevLineHasContent&&(i=e.match(k)))n.header=i[0].charAt(0)=="="?1:2;else if(e.eat(">")){n.indentation++,n.quote=1,e.eatSpace();while(e.eat(">"))e.eatSpace(),n.quote++}else{if(e.peek()==="[")return A(e,n,I);if(e.match(S,!0))return d;if((!n.prevLineHasContent||r)&&(e.match(x,!0)||e.match(T,!0)))n.indentation+=4,n.list=!0,n.listDepth++,t.taskLists&&e.match(N,!1)&&(n.taskList=!0);else if(t.fencedCodeBlocks&&e.match(/^```([\w+#]*)/,!0))return n.localMode=s(RegExp.$1),n.localMode&&(n.localState=n.localMode.startState()),O(e,n,P),a}return A(e,n,n.inline)}function D(e,t){var i=r.token(e,t.htmlState);return n&&i==="tag"&&t.htmlState.type!=="openTag"&&!t.htmlState.context&&(t.f=j,t.block=_),t.md_inside&&e.current().indexOf(">")!=-1&&(t.f=j,t.block=_,t.htmlState.context=undefined),i}function P(e,t){return e.sol()&&e.match(/^```/,!0)?(t.localMode=t.localState=null,t.f=j,t.block=_,a):t.localMode?t.localMode.token(e,t.localState):(e.skipToEnd(),a)}function H(e){var t=[];if(e.taskOpen)return"meta";if(e.taskClosed)return"property";e.strong&&t.push(E),e.em&&t.push(w),e.linkText&&t.push(y),e.code&&t.push(a),e.header&&(t.push(u),t.push(u+e.header)),e.quote&&t.push(e.quote%2?f:l);if(e.list!==!1){var n=(e.listDepth-1)%3;n?n===1?t.push(h):t.push(p):t.push(c)}return e.trailingSpaceNewLine?t.push("trailing-space-new-line"):e.trailingSpace&&t.push("trailing-space-"+(e.trailingSpace%2?"a":"b")),t.length?t.join(" "):null}function B(e,t){return e.match(L,!0)?H(t):undefined}function j(e,n){var r=n.text(e,n);if(typeof r!="undefined")return r;if(n.list)return n.list=null,H(n);if(n.taskList){var i=e.match(N,!0)[1]!=="x";return i?n.taskOpen=!0:n.taskClosed=!0,n.taskList=!1,H(n)}n.taskOpen=!1,n.taskClosed=!1;var s=e.sol(),u=e.next();if(u==="\\")return e.next(),H(n);if(n.linkTitle){n.linkTitle=!1;var a=u;u==="("&&(a=")"),a=(a+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1");var f="^\\s*(?:[^"+a+"\\\\]+|\\\\\\\\|\\\\.)"+a;if(e.match(new RegExp(f),!0))return b}if(u==="`"){var l=H(n),c=e.pos;e.eatWhile("`");var h=1+e.pos-c;return n.code?h===o?(n.code=!1,l):H(n):(o=h,n.code=!0,H(n))}if(n.code)return H(n);if(u==="!"&&e.match(/\[[^\]]*\] ?(?:\(|\[)/,!1))return e.match(/\[[^\]]*\]/),n.inline=n.f=F,v;if(u==="["&&e.match(/.*\](\(| ?\[)/,!1))return n.linkText=!0,H(n);if(u==="]"&&n.linkText){var p=H(n);return n.linkText=!1,n.inline=n.f=F,p}if(u==="<"&&e.match(/^(https?|ftps?):\/\/(?:[^\\>]|\\.)+>/,!1))return A(e,n,z(m,">"));if(u==="<"&&e.match(/^[^> \\]+@(?:[^\\>]|\\.)+>/,!1))return A(e,n,z(g,">"));if(u==="<"&&e.match(/^\w/,!1)){if(e.string.indexOf(">")!=-1){var d=e.string.substring(1,e.string.indexOf(">"));/markdown\s*=\s*('|"){0,1}1('|"){0,1}/.test(d)&&(n.md_inside=!0)}return e.backUp(1),O(e,n,D)}if(u==="<"&&e.match(/^\/\w*?>/))return n.md_inside=!1,"tag";var y=!1;if(!t.underscoresBreakWords&&u==="_"&&e.peek()!=="_"&&e.match(/(\w)/,!1)){var w=e.pos-2;if(w>=0){var E=e.string.charAt(w);E!=="_"&&E.match(/(\w)/,!1)&&(y=!0)}}var l=H(n);if(u==="*"||u==="_"&&!y){if(!s||e.peek()!==" "){if(n.strong===u&&e.eat(u))return n.strong=!1,l;if(!n.strong&&e.eat(u))return n.strong=u,H(n);if(n.em===u)return n.em=!1,l;if(!n.em)return n.em=u,H(n)}}else if(u===" ")if(e.eat("*")||e.eat("_")){if(e.peek()===" ")return H(n);e.backUp(1)}return u===" "&&(e.match(/ +$/,!1)?n.trailingSpace++:n.trailingSpace&&(n.trailingSpaceNewLine=!0)),H(n)}function F(e,t){if(e.eatSpace())return null;var n=e.next();return n==="("||n==="["?A(e,t,z(b,n==="("?")":"]")):"error"}function I(e,t){return e.match(/^[^\]]*\]:/,!0)?(t.f=q,y):A(e,t,j)}function q(e,t){return e.eatSpace()?null:(e.match(/^[^\s]+/,!0),e.peek()===undefined?t.linkTitle=!0:e.match(/^(?:\s+(?:"(?:[^"\\]|\\\\|\\.)+"|'(?:[^'\\]|\\\\|\\.)+'|\((?:[^)\\]|\\\\|\\.)+\)))?/,!0),t.f=t.inline=j,b)}function U(e){return R[e]||(e=(e+"").replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),R[e]=new RegExp("^(?:[^\\\\]|\\\\.)*?("+e+")")),R[e]}function z(e,t,n){return n=n||j,function(r,i){return r.match(U(t)),i.inline=i.f=n,e}}var n=CodeMirror.modes.hasOwnProperty("xml"),r=CodeMirror.getMode(e,n?{name:"xml",htmlMode:!0}:"text/plain"),i={html:"htmlmixed",js:"javascript",json:"application/json",c:"text/x-csrc","c++":"text/x-c++src",java:"text/x-java",csharp:"text/x-csharp","c#":"text/x-csharp",scala:"text/x-scala"},s=function(){var t,n={},r={},s,o=[];for(var u in CodeMirror.modes)CodeMirror.modes.propertyIsEnumerable(u)&&o.push(u);for(t=0;t<o.length;t++)n[o[t]]=o[t];var a=[];for(var u in CodeMirror.mimeModes)CodeMirror.mimeModes.propertyIsEnumerable(u)&&a.push({mime:u,mode:CodeMirror.mimeModes[u]});for(t=0;t<a.length;t++)s=a[t].mime,r[s]=a[t].mime;for(var f in i)if(i[f]in n||i[f]in r)n[f]=i[f];return function(t){return n[t]?CodeMirror.getMode(e,n[t]):null}}();t.underscoresBreakWords===undefined&&(t.underscoresBreakWords=!0),t.fencedCodeBlocks===undefined&&(t.fencedCodeBlocks=!1),t.taskLists===undefined&&(t.taskLists=!1);var o=0,u="header",a="comment",f="atom",l="number",c="variable-2",h="variable-3",p="keyword",d="hr",v="tag",m="link",g="link",y="link",b="string",w="em",E="strong",S=/^([*\-=_])(?:\s*\1){2,}\s*$/,x=/^[*\-+]\s+/,T=/^[0-9]+\.\s+/,N=/^\[(x| )\](?=\s)/,C=/^#+/,k=/^(?:\={1,}|-{1,})$/,L=/^[^!\[\]*_\\<>` "'(]+/,R=[];return{startState:function(){return{f:_,prevLineHasContent:!1,thisLineHasContent:!1,block:_,htmlState:CodeMirror.startState(r),indentation:0,inline:j,text:B,linkText:!1,linkTitle:!1,em:!1,strong:!1,header:0,taskList:!1,list:!1,listDepth:0,quote:0,trailingSpace:0,trailingSpaceNewLine:!1}},copyState:function(e){return{f:e.f,prevLineHasContent:e.prevLineHasContent,thisLineHasContent:e.thisLineHasContent,block:e.block,htmlState:CodeMirror.copyState(r,e.htmlState),indentation:e.indentation,localMode:e.localMode,localState:e.localMode?CodeMirror.copyState(e.localMode,e.localState):null,inline:e.inline,text:e.text,linkTitle:e.linkTitle,em:e.em,strong:e.strong,header:e.header,taskList:e.taskList,list:e.list,listDepth:e.listDepth,quote:e.quote,trailingSpace:e.trailingSpace,trailingSpaceNewLine:e.trailingSpaceNewLine,md_inside:e.md_inside}},token:function(e,t){if(e.sol()){if(e.match(/^\s*$/,!0))return t.prevLineHasContent=!1,M(t);t.prevLineHasContent=t.thisLineHasContent,t.thisLineHasContent=!0,t.header=0,t.taskList=!1,t.code=!1,t.trailingSpace=0,t.trailingSpaceNewLine=!1,t.f=t.block;var n=e.match(/^\s*/,!0)[0].replace(/\t/g,"    ").length,r=Math.floor((n-t.indentation)/4)*4;r>4&&(r=4);var i=t.indentation+r;t.indentationDiff=i-t.indentation,t.indentation=i;if(n>0)return null}return t.f(e,t)},blankLine:M,getType:H}},"xml"),CodeMirror.defineMIME("text/x-markdown","markdown"),function(){"use strict";function e(e,n,r,i){function u(t){var r=s(e,n);if(!r||r.to.line-r.from.line<o)return null;var u=e.findMarksAt(r.from);for(var a=0;a<u.length;++a)if(u[a].__isFold&&i!=="fold"){if(!t)return null;r.cleared=!0,u[a].clear()}return r}var s=r&&(r.call?r:r.rangeFinder);s||(s=e.getHelper(n,"fold"));if(!s)return;typeof n=="number"&&(n=CodeMirror.Pos(n,0));var o=r&&r.minFoldSize||0,a=u(!0);if(r&&r.scanUp)while(!a&&n.line>e.firstLine())n=CodeMirror.Pos(n.line-1,0),a=u(!1);if(!a||a.cleared||i==="unfold")return;var f=t(r);CodeMirror.on(f,"mousedown",function(){l.clear()});var l=e.markText(a.from,a.to,{replacedWith:f,clearOnEnter:!0,__isFold:!0});l.on("clear",function(t,n){CodeMirror.signal(e,"unfold",e,t,n)}),CodeMirror.signal(e,"fold",e,a.from,a.to)}function t(e){var t=e&&e.widget||"↔";if(typeof t=="string"){var n=document.createTextNode(t);t=document.createElement("span"),t.appendChild(n),t.className="CodeMirror-foldmarker"}return t}CodeMirror.newFoldFunction=function(t,n){return function(r,i){e(r,i,{rangeFinder:t,widget:n})}},CodeMirror.defineExtension("foldCode",function(t,n,r){e(this,t,n,r)}),CodeMirror.registerHelper("fold","combine",function(){var e=Array.prototype.slice.call(arguments,0);return function(t,n){for(var r=0;r<e.length;++r){var i=e[r](t,n);if(i)return i}}})}(),function(){"use strict";function t(e){this.options=e,this.from=this.to=0}function n(e){return e===!0&&(e={}),e.gutter==null&&(e.gutter="CodeMirror-foldgutter"),e.indicatorOpen==null&&(e.indicatorOpen="CodeMirror-foldgutter-open"),e.indicatorFolded==null&&(e.indicatorFolded="CodeMirror-foldgutter-folded"),e}function r(t,n){var r=t.findMarksAt(e(n));for(var i=0;i<r.length;++i)if(r[i].__isFold&&r[i].find().from.line==n)return!0}function i(e){if(typeof e=="string"){var t=document.createElement("div");return t.className=e,t}return e.cloneNode(!0)}function s(t,n,s){var o=t.state.foldGutter.options,u=n;t.eachLine(n,s,function(n){var s=null;if(r(t,u))s=i(o.indicatorFolded);else{var a=e(u,0),f=o.rangeFinder||t.getHelper(a,"fold"),l=f&&f(t,a);l&&l.from.line+1<l.to.line&&(s=i(o.indicatorOpen))}t.setGutterMarker(n,o.gutter,s),++u})}function o(e){var t=e.getViewport(),n=e.state.foldGutter;if(!n)return;e.operation(function(){s(e,t.from,t.to)}),n.from=t.from,n.to=t.to}function u(t,n,r){var i=t.state.foldGutter.options;if(r!=i.gutter)return;t.foldCode(e(n,0),i.rangeFinder)}function a(e){var t=e.state.foldGutter,n=e.state.foldGutter.options;t.from=t.to=0,clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){o(e)},n.foldOnChangeTimeSpan||600)}function f(e){var t=e.state.foldGutter,n=e.state.foldGutter.options;clearTimeout(t.changeUpdate),t.changeUpdate=setTimeout(function(){var n=e.getViewport();t.from==t.to||n.from-t.to>20||t.from-n.to>20?o(e):e.operation(function(){n.from<t.from&&(s(e,n.from,t.from),t.from=n.from),n.to>t.to&&(s(e,t.to,n.to),t.to=n.to)})},n.updateViewportTimeSpan||400)}function l(e,t){var n=e.state.foldGutter,r=t.line;r>=n.from&&r<n.to&&s(e,r,r+1)}CodeMirror.defineOption("foldGutter",!1,function(e,r,i){i&&i!=CodeMirror.Init&&(e.clearGutter(e.state.foldGutter.options.gutter),e.state.foldGutter=null,e.off("gutterClick",u),e.off("change",a),e.off("viewportChange",f),e.off("fold",l),e.off("unfold",l),e.off("swapDoc",o)),r&&(e.state.foldGutter=new t(n(r)),o(e),e.on("gutterClick",u),e.on("change",a),e.on("viewportChange",f),e.on("fold",l),e.on("unfold",l),e.on("swapDoc",o))});var e=CodeMirror.Pos}(),CodeMirror.registerHelper("fold","brace",function(e,t){function o(i){for(var o=t.ch,u=0;;){var a=o<=0?-1:r.lastIndexOf(i,o-1);if(a==-1){if(u==1)break;u=1,o=r.length;continue}if(u==1&&a<t.ch)break;s=e.getTokenTypeAt(CodeMirror.Pos(n,a+1));if(!/^(comment|string)/.test(s))return a+1;o=a-1}}var n=t.line,r=e.getLine(n),i,s,u="{",a="}",i=o("{");i==null&&(u="[",a="]",i=o("["));if(i==null)return;var f=1,l=e.lastLine(),c,h;e:for(var p=n;p<=l;++p){var d=e.getLine(p),v=p==n?i:0;for(;;){var m=d.indexOf(u,v),g=d.indexOf(a,v);m<0&&(m=d.length),g<0&&(g=d.length),v=Math.min(m,g);if(v==d.length)break;if(e.getTokenTypeAt(CodeMirror.Pos(p,v+1))==s)if(v==m)++f;else if(!--f){c=p,h=v;break e}++v}}if(c==null||n==c&&h==i)return;return{from:CodeMirror.Pos(n,i),to:CodeMirror.Pos(c,h)}}),CodeMirror.braceRangeFinder=CodeMirror.fold.brace,CodeMirror.registerHelper("fold","import",function(e,t){function n(t){if(t<e.firstLine()||t>e.lastLine())return null;var n=e.getTokenAt(CodeMirror.Pos(t,1));/\S/.test(n.string)||(n=e.getTokenAt(CodeMirror.Pos(t,n.end+1)));if(n.type!="keyword"||n.string!="import")return null;for(var r=t,i=Math.min(e.lastLine(),t+10);r<=i;++r){var s=e.getLine(r),o=s.indexOf(";");if(o!=-1)return{startCh:n.end,end:CodeMirror.Pos(r,o)}}}var t=t.line,r=n(t),i;if(!r||n(t-1)||(i=n(t-2))&&i.end.line==t-1)return null;for(var s=r.end;;){var o=n(s.line+1);if(o==null)break;s=o.end}return{from:e.clipPos(CodeMirror.Pos(t,r.startCh+1)),to:s}}),CodeMirror.importRangeFinder=CodeMirror.fold["import"],CodeMirror.registerHelper("fold","include",function(e,t){function n(t){if(t<e.firstLine()||t>e.lastLine())return null;var n=e.getTokenAt(CodeMirror.Pos(t,1));/\S/.test(n.string)||(n=e.getTokenAt(CodeMirror.Pos(t,n.end+1)));if(n.type=="meta"&&n.string.slice(0,8)=="#include")return n.start+8}var t=t.line,r=n(t);if(r==null||n(t-1)!=null)return null;for(var i=t;;){var s=n(i+1);if(s==null)break;++i}return{from:CodeMirror.Pos(t,r+1),to:e.clipPos(CodeMirror.Pos(i))}}),CodeMirror.includeRangeFinder=CodeMirror.fold.include,CodeMirror.registerHelper("fold","comment",function(e,t){var n=e.getModeAt(t),r=n.blockCommentStart,i=n.blockCommentEnd;if(!r||!i)return;var s=t.line,o=e.getLine(s),u;for(var a=t.ch,f=0;;){var l=a<=0?-1:o.lastIndexOf(r,a-1);if(l==-1){if(f==1)return;f=1,a=o.length;continue}if(f==1&&l<t.ch)return;if(/comment/.test(e.getTokenTypeAt(CodeMirror.Pos(s,l+1)))){u=l+r.length;break}a=l-1}var c=1,h=e.lastLine(),p,d;e:for(var v=s;v<=h;++v){var m=e.getLine(v),g=v==s?u:0;for(;;){var y=m.indexOf(r,g),b=m.indexOf(i,g);y<0&&(y=m.length),b<0&&(b=m.length),g=Math.min(y,b);if(g==m.length)break;if(g==y)++c;else if(!--c){p=v,d=g;break e}++g}}if(p==null||s==p&&d==u)return;return{from:CodeMirror.Pos(s,u),to:CodeMirror.Pos(p,d)}}),function(){function e(e){return typeof e=="string"?{token:function(t){if(t.match(e))return"searching";t.next(),t.skipTo(e.charAt(0))||t.skipToEnd()}}:{token:function(t){if(t.match(e))return"searching";while(!t.eol()){t.next();if(t.match(e,!1))break}}}}function t(){this.posFrom=this.posTo=this.query=null,this.overlay=null}function n(e){return e.state.search||(e.state.search=new t)}function r(e,t,n){return e.getSearchCursor(t,n,typeof t=="string"&&t==t.toLowerCase())}function i(e,t,n,r){e.openDialog?e.openDialog(t,r):r(prompt(n,""))}function s(e,t,n,r){e.openConfirm?e.openConfirm(t,r):confirm(n)&&r[0]()}function o(e){var t=e.match(/^\/(.*)\/([a-z]*)$/);return t?new RegExp(t[1],t[2].indexOf("i")==-1?"":"i"):e}function a(t,r){var s=n(t);if(s.query)return f(t,r);i(t,u,"Search for:",function(n){t.operation(function(){if(!n||s.query)return;s.query=o(n),t.removeOverlay(s.overlay),s.overlay=e(s.query),t.addOverlay(s.overlay),s.posFrom=s.posTo=t.getCursor(),f(t,r)})})}function f(e,t){e.operation(function(){var i=n(e),s=r(e,i.query,t?i.posFrom:i.posTo);if(!s.find(t)){s=r(e,i.query,t?CodeMirror.Pos(e.lastLine()):CodeMirror.Pos(e.firstLine(),0));if(!s.find(t))return}e.setSelection(s.from(),s.to()),e.scrollIntoView({from:s.from(),to:s.to()}),i.posFrom=s.from(),i.posTo=s.to()})}function l(e){e.operation(function(){var t=n(e);if(!t.query)return;t.query=null,e.removeOverlay(t.overlay)})}function d(e,t){i(e,c,"Replace:",function(n){if(!n)return;n=o(n),i(e,h,"Replace with:",function(i){if(t)e.operation(function(){for(var t=r(e,n);t.findNext();)if(typeof n!="string"){var s=e.getRange(t.from(),t.to()).match(n);t.replace(i.replace(/\$(\d)/,function(e,t){return s[t]}))}else t.replace(i)});else{l(e);var o=r(e,n,e.getCursor()),u=function(){var t=o.from(),i;if(!(i=o.findNext())){o=r(e,n);if(!(i=o.findNext())||t&&o.from().line==t.line&&o.from().ch==t.ch)return}e.setSelection(o.from(),o.to()),e.scrollIntoView({from:o.from(),to:o.to()}),s(e,p,"Replace?",[function(){a(i)},u])},a=function(e){o.replace(typeof n=="string"?i:i.replace(/\$(\d)/,function(t,n){return e[n]})),u()};u()}})})}var u='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',c='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>',h='With: <input type="text" style="width: 10em"/>',p="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";CodeMirror.commands.find=function(e){l(e),a(e)},CodeMirror.commands.findNext=a,CodeMirror.commands.findPrev=function(e){a(e,!0)},CodeMirror.commands.clearSearch=l,CodeMirror.commands.replace=d,CodeMirror.commands.replaceAll=function(e){d(e,!0)}}(),function(){function t(t,n,r,i){this.atOccurrence=!1,this.doc=t,i==null&&typeof n=="string"&&(i=!1),r=r?t.clipPos(r):e(0,0),this.pos={from:r,to:r};if(typeof n!="string")n.global||(n=new RegExp(n.source,n.ignoreCase?"ig":"g")),this.matches=function(r,i){if(r){n.lastIndex=0;var s=t.getLine(i.line).slice(0,i.ch),o=0,u,a;for(;;){n.lastIndex=o;var f=n.exec(s);if(!f)break;u=f,a=u.index,o=u.index+(u[0].length||1);if(o==s.length)break}var l=u&&u[0].length||0;l||(a==0&&s.length==0?u=undefined:a!=t.getLine(i.line).length&&l++)}else{n.lastIndex=i.ch;var s=t.getLine(i.line),u=n.exec(s),l=u&&u[0].length||0,a=u&&u.index;a+l!=s.length&&!l&&(l=1)}if(u&&l)return{from:e(i.line,a),to:e(i.line,a+l),match:u}};else{i&&(n=n.toLowerCase());var s=i?function(e){return e.toLowerCase()}:function(e){return e},o=n.split("\n");o.length==1?n.length?this.matches=function(r,i){var o=s(t.getLine(i.line)),u=n.length,a;if(r?i.ch>=u&&(a=o.lastIndexOf(n,i.ch-u))!=-1:(a=o.indexOf(n,i.ch))!=-1)return{from:e(i.line,a),to:e(i.line,a+u)}}:this.matches=function(){}:this.matches=function(n,r){var i=r.line,u=n?o.length-1:0,a=o[u],f=s(t.getLine(i)),l=n?f.indexOf(a)+a.length:f.lastIndexOf(a);if(n?l>r.ch||l!=a.length:l<r.ch||l!=f.length-a.length)return;for(;;){if(n?!i:i==t.lineCount()-1)return;f=s(t.getLine(i+=n?-1:1)),a=o[n?--u:++u];if(u>0&&u<o.length-1){if(f!=a)return;continue}var c=n?f.lastIndexOf(a):f.indexOf(a)+a.length;if(n?c!=f.length-a.length:c!=a.length)return;var h=e(r.line,l),p=e(i,c);return{from:n?p:h,to:n?h:p}}}}}var e=CodeMirror.Pos;t.prototype={findNext:function(){return this.find(!1)},findPrevious:function(){return this.find(!0)},find:function(t){function i(t){var r=e(t,0);return n.pos={from:r,to:r},n.atOccurrence=!1,!1}var n=this,r=this.doc.clipPos(t?this.pos.from:this.pos.to);for(;;){if(this.pos=this.matches(t,r))return(!this.pos.from||!this.pos.to)&&console.log(this.matches,this.pos),this.atOccurrence=!0,this.pos.match||!0;if(t){if(!r.line)return i(0);r=e(r.line-1,this.doc.getLine(r.line-1).length)}else{var s=this.doc.lineCount();if(r.line==s-1)return i(s);r=e(r.line+1,0)}}},from:function(){if(this.atOccurrence)return this.pos.from},to:function(){if(this.atOccurrence)return this.pos.to},replace:function(t){if(!this.atOccurrence)return;var n=CodeMirror.splitLines(t);this.doc.replaceRange(n,this.pos.from,this.pos.to),this.pos.to=e(this.pos.from.line+n.length-1,n[n.length-1].length+(n.length==1?this.pos.from.ch:0))}},CodeMirror.defineExtension("getSearchCursor",function(e,n,r){return new t(this.doc,e,n,r)}),CodeMirror.defineDocExtension("getSearchCursor",function(e,n,r){return new t(this,e,n,r)})}(),function(){function e(e,t,n){var r=e.getWrapperElement(),i;return i=r.appendChild(document.createElement("div")),n?i.className="CodeMirror-dialog CodeMirror-dialog-bottom":i.className="CodeMirror-dialog CodeMirror-dialog-top",typeof t=="string"?i.innerHTML=t:i.appendChild(t),i}function t(e,t){e.state.currentNotificationClose&&e.state.currentNotificationClose(),e.state.currentNotificationClose=t}CodeMirror.defineExtension("openDialog",function(n,r,i){function a(){if(o)return;o=!0,s.parentNode.removeChild(s)}t(this,null);var s=e(this,n,i&&i.bottom),o=!1,u=this,f=s.getElementsByTagName("input")[0],l;if(f)CodeMirror.on(f,"keydown",function(e){if(i&&i.onKeyDown&&i.onKeyDown(e,f.value,a))return;if(e.keyCode==13||e.keyCode==27)CodeMirror.e_stop(e),a(),u.focus(),e.keyCode==13&&r(f.value)}),i&&i.onKeyUp&&CodeMirror.on(f,"keyup",function(e){i.onKeyUp(e,f.value,a)}),i&&i.value&&(f.value=i.value),f.focus(),CodeMirror.on(f,"blur",a);else if(l=s.getElementsByTagName("button")[0])CodeMirror.on(l,"click",function(){a(),u.focus()}),l.focus(),CodeMirror.on(l,"blur",a);return a}),CodeMirror.defineExtension("openConfirm",function(n,r,i){function l(){if(u)return;u=!0,s.parentNode.removeChild(s),a.focus()}t(this,null);var s=e(this,n,i&&i.bottom),o=s.getElementsByTagName("button"),u=!1,a=this,f=1;o[0].focus();for(var c=0;c<o.length;++c){var h=o[c];(function(e){CodeMirror.on(h,"click",function(t){CodeMirror.e_preventDefault(t),l(),e&&e(a)})})(r[c]),CodeMirror.on(h,"blur",function(){--f,setTimeout(function(){f<=0&&l()},200)}),CodeMirror.on(h,"focus",function(){++f})}}),CodeMirror.defineExtension("openNotification",function(n,r){function a(){if(o)return;o=!0,clearTimeout(u),i.parentNode.removeChild(i)}t(this,a);var i=e(this,n,r&&r.bottom),s=r&&(r.duration===undefined?5e3:r.duration),o=!1,u;CodeMirror.on(i,"click",function(e){CodeMirror.e_preventDefault(e),a()}),s&&(u=setTimeout(a,r.duration))})}(),function(){"use strict";function n(n){"activeLine"in n.state&&(n.removeLineClass(n.state.activeLine,"wrap",e),n.removeLineClass(n.state.activeLine,"background",t))}function r(r){var i=r.getLineHandleVisualStart(r.getCursor().line);if(r.state.activeLine==i)return;n(r),r.addLineClass(i,"wrap",e),r.addLineClass(i,"background",t),r.state.activeLine=i}var e="CodeMirror-activeline",t="CodeMirror-activeline-background";CodeMirror.defineOption("styleActiveLine",!1,function(e,t,i){var s=i&&i!=CodeMirror.Init;t&&!s?(r(e),e.on("cursorActivity",r)):!t&&s&&(e.off("cursorActivity",r),n(e),delete e.state.activeLine)})}(),function(){"use strict";function r(e){var n=e.search(t);return n==-1?0:n}var e={},t=/[^\s\u00a0]/,n=CodeMirror.Pos;CodeMirror.commands.toggleComment=function(e){var t=e.getCursor("start"),n=e.getCursor("end");e.uncomment(t,n)||e.lineComment(t,n)},CodeMirror.defineExtension("lineComment",function(i,s,o){o||(o=e);var u=this,a=u.getModeAt(i),f=o.lineComment||a.lineComment;if(!f){if(o.blockCommentStart||a.blockCommentStart)o.fullLines=!0,u.blockComment(i,s,o);return}var l=u.getLine(i.line);if(l==null)return;var c=Math.min(s.ch!=0||s.line==i.line?s.line+1:s.line,u.lastLine()+1),h=o.padding==null?" ":o.padding,p=o.commentBlankLines||i.line==s.line;u.operation(function(){if(o.indent){var e=l.slice(0,r(l));for(var s=i.line;s<c;++s){var a=u.getLine(s),d=e.length;if(!p&&!t.test(a))continue;a.slice(0,d)!=e&&(d=r(a)),u.replaceRange(e+f+h,n(s,0),n(s,d))}}else for(var s=i.line;s<c;++s)(p||t.test(u.getLine(s)))&&u.replaceRange(f+h,n(s,0))})}),CodeMirror.defineExtension("blockComment",function(r,i,s){s||(s=e);var o=this,u=o.getModeAt(r),a=s.blockCommentStart||u.blockCommentStart,f=s.blockCommentEnd||u.blockCommentEnd;if(!a||!f){(s.lineComment||u.lineComment)&&s.fullLines!=0&&o.lineComment(r,i,s);return}var l=Math.min(i.line,o.lastLine());l!=r.line&&i.ch==0&&t.test(o.getLine(l))&&--l;var c=s.padding==null?" ":s.padding;if(r.line>l)return;o.operation(function(){if(s.fullLines!=0){var e=t.test(o.getLine(l));o.replaceRange(c+f,n(l)),o.replaceRange(a+c,n(r.line,0));var h=s.blockCommentLead||u.blockCommentLead;if(h!=null)for(var p=r.line+1;p<=l;++p)(p!=l||e)&&o.replaceRange(h+c,n(p,0))}else o.replaceRange(f,i),o.replaceRange(a,r)})}),CodeMirror.defineExtension("uncomment",function(r,i,s){s||(s=e);var o=this,u=o.getModeAt(r),a=Math.min(i.line,o.lastLine()),f=Math.min(r.line,a),l=s.lineComment||u.lineComment,c=[],h=s.padding==null?" ":s.padding,p;e:{if(!l)break e;for(var d=f;d<=a;++d){var v=o.getLine(d),m=v.indexOf(l);if(!(m!=-1||d==a&&d!=f||!t.test(v)))break e;if(d!=f&&m>-1&&t.test(v.slice(0,m)))break e;c.push(v)}o.operation(function(){for(var e=f;e<=a;++e){var t=c[e-f],r=t.indexOf(l),i=r+l.length;if(r<0)continue;t.slice(i,i+h.length)==h&&(i+=h.length),p=!0,o.replaceRange("",n(e,r),n(e,i))}});if(p)return!0}var g=s.blockCommentStart||u.blockCommentStart,y=s.blockCommentEnd||u.blockCommentEnd;if(!g||!y)return!1;var b=s.blockCommentLead||u.blockCommentLead,w=o.getLine(f),E=a==f?w:o.getLine(a),S=w.indexOf(g),x=E.lastIndexOf(y);return x==-1&&f!=a&&(E=o.getLine(--a),x=E.lastIndexOf(y)),S==-1||x==-1?!1:(o.operation(function(){o.replaceRange("",n(a,x-(h&&E.slice(x-h.length,x)==h?h.length:0)),n(a,x+y.length));var e=S+g.length;h&&w.slice(e,e+h.length)==h&&(e+=h.length),o.replaceRange("",n(f,S),n(f,e));if(b)for(var r=f+1;r<=a;++r){var i=o.getLine(r),s=i.indexOf(b);if(s==-1||t.test(i.slice(0,s)))continue;var u=s+b.length;h&&i.slice(u,u+h.length)==h&&(u+=h.length),o.replaceRange("",n(r,s),n(r,u))}}),!0)})}(),function(){function n(e){var t=e.getCursor(),n=e.getTokenAt(t);if(n.type!="comment")return CodeMirror.Pass;var r=CodeMirror.innerMode(e.getMode(),n.state).mode,i;if(r.blockCommentStart&&r.blockCommentContinue){var s=n.string.indexOf(r.blockCommentEnd),o=e.getRange(CodeMirror.Pos(t.line,0),CodeMirror.Pos(t.line,n.end)),u;if(s==-1||s!=n.string.length-r.blockCommentEnd.length)if(n.string.indexOf(r.blockCommentStart)==0){i=o.slice(0,n.start);if(!/^\s*$/.test(i)){i="";for(var a=0;a<n.start;++a)i+=" "}}else(u=o.indexOf(r.blockCommentContinue))!=-1&&u+r.blockCommentContinue.length>n.start&&/^\s*$/.test(o.slice(0,u))&&(i=o.slice(0,u));i!=null&&(i+=r.blockCommentContinue)}if(i==null&&r.lineComment){var f=e.getLine(t.line),u=f.indexOf(r.lineComment);u>-1&&(i=f.slice(0,u),/\S/.test(i)?i=null:i+=r.lineComment+f.slice(u+r.lineComment.length).match(/^\s*/)[0])}if(i==null)return CodeMirror.Pass;e.replaceSelection("\n"+i,"end")}var e=["clike","css","javascript"];for(var t=0;t<e.length;++t)CodeMirror.extendMode(e[t],{blockCommentContinue:" * "});CodeMirror.defineOption("continueComments",null,function(e,t,r){r&&r!=CodeMirror.Init&&e.removeKeyMap("continueComment");if(t){var i={name:"continueComment"};i[typeof t=="string"?t:"Enter"]=n,e.addKeyMap(i)}})}(),function(){"use strict";function t(t,n,r,i){if(!i||n>r)return 0;var s=t.clipPos(e(n,0)),o=t.clipPos(e(r)),u=t.getRange(s,o);n<=t.firstLine()?t.replaceRange("",s,e(o.line+1,0)):t.replaceRange("",e(s.line-1),o);var a=s.line+i;if(a<=t.firstLine())return t.replaceRange(u+"\n",e(a,0)),t.firstLine()-s.line;var f=t.clipPos(e(a-1));return t.replaceRange("\n"+u,f),f.line+1-s.line}function n(n,r){var i=n.getCursor("head"),s=n.getCursor("anchor");n.operation(function(){var o=t(n,Math.min(i.line,s.line),Math.max(i.line,s.line),r);n.setSelection(e(s.line+o,s.ch),e(i.line+o,i.ch))})}var e=CodeMirror.Pos;CodeMirror.commands.moveLinesUp=function(e){n(e,-1)},CodeMirror.commands.moveLinesDown=function(e){n(e,1)},CodeMirror.keyMap["default"]["Alt-Up"]="moveLinesUp",CodeMirror.keyMap["default"]["Alt-Down"]="moveLinesDown"}(),function(){"use strict";var e=[{keys:["<Left>"],type:"keyToKey",toKeys:["h"]},{keys:["<Right>"],type:"keyToKey",toKeys:["l"]},{keys:["<Up>"],type:"keyToKey",toKeys:["k"]},{keys:["<Down>"],type:"keyToKey",toKeys:["j"]},{keys:["<Space>"],type:"keyToKey",toKeys:["l"]},{keys:["<BS>"],type:"keyToKey",toKeys:["h"]},{keys:["<C-Space>"],type:"keyToKey",toKeys:["W"]},{keys:["<C-BS>"],type:"keyToKey",toKeys:["B"]},{keys:["<S-Space>"],type:"keyToKey",toKeys:["w"]},{keys:["<S-BS>"],type:"keyToKey",toKeys:["b"]},{keys:["<C-n>"],type:"keyToKey",toKeys:["j"]},{keys:["<C-p>"],type:"keyToKey",toKeys:["k"]},{keys:["C-["],type:"keyToKey",toKeys:["<Esc>"]},{keys:["<C-c>"],type:"keyToKey",toKeys:["<Esc>"]},{keys:["s"],type:"keyToKey",toKeys:["c","l"],context:"normal"},{keys:["s"],type:"keyToKey",toKeys:["x","i"],context:"visual"},{keys:["S"],type:"keyToKey",toKeys:["c","c"],context:"normal"},{keys:["S"],type:"keyToKey",toKeys:["d","c","c"],context:"visual"},{keys:["<Home>"],type:"keyToKey",toKeys:["0"]},{keys:["<End>"],type:"keyToKey",toKeys:["$"]},{keys:["<PageUp>"],type:"keyToKey",toKeys:["<C-b>"]},{keys:["<PageDown>"],type:"keyToKey",toKeys:["<C-f>"]},{keys:["H"],type:"motion",motion:"moveToTopLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["M"],type:"motion",motion:"moveToMiddleLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["L"],type:"motion",motion:"moveToBottomLine",motionArgs:{linewise:!0,toJumplist:!0}},{keys:["h"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!1}},{keys:["l"],type:"motion",motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["j"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,linewise:!0}},{keys:["k"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,linewise:!0}},{keys:["g","j"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!0}},{keys:["g","k"],type:"motion",motion:"moveByDisplayLines",motionArgs:{forward:!1}},{keys:["w"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1}},{keys:["W"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!1,bigWord:!0}},{keys:["e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,inclusive:!0}},{keys:["E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!0,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["b"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1}},{keys:["B"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!1,bigWord:!0}},{keys:["g","e"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,inclusive:!0}},{keys:["g","E"],type:"motion",motion:"moveByWords",motionArgs:{forward:!1,wordEnd:!0,bigWord:!0,inclusive:!0}},{keys:["{"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!1,toJumplist:!0}},{keys:["}"],type:"motion",motion:"moveByParagraph",motionArgs:{forward:!0,toJumplist:!0}},{keys:["<C-f>"],type:"motion",motion:"moveByPage",motionArgs:{forward:!0}},{keys:["<C-b>"],type:"motion",motion:"moveByPage",motionArgs:{forward:!1}},{keys:["<C-d>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!0,explicitRepeat:!0}},{keys:["<C-u>"],type:"motion",motion:"moveByScroll",motionArgs:{forward:!1,explicitRepeat:!0}},{keys:["g","g"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["G"],type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!0,explicitRepeat:!0,linewise:!0,toJumplist:!0}},{keys:["0"],type:"motion",motion:"moveToStartOfLine"},{keys:["^"],type:"motion",motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["+"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0}},{keys:["-"],type:"motion",motion:"moveByLines",motionArgs:{forward:!1,toFirstChar:!0}},{keys:["_"],type:"motion",motion:"moveByLines",motionArgs:{forward:!0,toFirstChar:!0,repeatOffset:-1}},{keys:["$"],type:"motion",motion:"moveToEol",motionArgs:{inclusive:!0}},{keys:["%"],type:"motion",motion:"moveToMatchedSymbol",motionArgs:{inclusive:!0,toJumplist:!0}},{keys:["f","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["F","character"],type:"motion",motion:"moveToCharacter",motionArgs:{forward:!1}},{keys:["t","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!0,inclusive:!0}},{keys:["T","character"],type:"motion",motion:"moveTillCharacter",motionArgs:{forward:!1}},{keys:[";"],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!0}},{keys:[","],type:"motion",motion:"repeatLastCharacterSearch",motionArgs:{forward:!1}},{keys:["'","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["`","character"],type:"motion",motion:"goToMark",motionArgs:{toJumplist:!0}},{keys:["]","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0}},{keys:["[","`"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1}},{keys:["]","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!0,linewise:!0}},{keys:["[","'"],type:"motion",motion:"jumpToMark",motionArgs:{forward:!1,linewise:!0}},{keys:["]","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!0,toJumplist:!0}},{keys:["[","character"],type:"motion",motion:"moveToSymbol",motionArgs:{forward:!1,toJumplist:!0}},{keys:["|"],type:"motion",motion:"moveToColumn",motionArgs:{}},{keys:["d"],type:"operator",operator:"delete"},{keys:["y"],type:"operator",operator:"yank"},{keys:["c"],type:"operator",operator:"change"},{keys:[">"],type:"operator",operator:"indent",operatorArgs:{indentRight:!0}},{keys:["<"],type:"operator",operator:"indent",operatorArgs:{indentRight:!1}},{keys:["g","~"],type:"operator",operator:"swapcase"},{keys:["n"],type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:!0}},{keys:["N"],type:"motion",motion:"findNext",motionArgs:{forward:!1,toJumplist:!0}},{keys:["x"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!0},operatorMotionArgs:{visualLine:!1}},{keys:["X"],type:"operatorMotion",operator:"delete",motion:"moveByCharacters",motionArgs:{forward:!1},operatorMotionArgs:{visualLine:!0}},{keys:["D"],type:"operatorMotion",operator:"delete",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["Y"],type:"operatorMotion",operator:"yank",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["C"],type:"operatorMotion",operator:"change",motion:"moveToEol",motionArgs:{inclusive:!0},operatorMotionArgs:{visualLine:!0}},{keys:["~"],type:"operatorMotion",operator:"swapcase",operatorArgs:{shouldMoveCursor:!0},motion:"moveByCharacters",motionArgs:{forward:!0}},{keys:["<C-i>"],type:"action",action:"jumpListWalk",actionArgs:{forward:!0}},{keys:["<C-o>"],type:"action",action:"jumpListWalk"
,actionArgs:{forward:!1}},{keys:["a"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"charAfter"}},{keys:["A"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"eol"}},{keys:["i"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"inplace"}},{keys:["I"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{insertAt:"firstNonBlank"}},{keys:["o"],type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!0}},{keys:["O"],type:"action",action:"newLineAndEnterInsertMode",isEdit:!0,interlaceInsertRepeat:!0,actionArgs:{after:!1}},{keys:["v"],type:"action",action:"toggleVisualMode"},{keys:["V"],type:"action",action:"toggleVisualMode",actionArgs:{linewise:!0}},{keys:["J"],type:"action",action:"joinLines",isEdit:!0},{keys:["p"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!0,isEdit:!0}},{keys:["P"],type:"action",action:"paste",isEdit:!0,actionArgs:{after:!1,isEdit:!0}},{keys:["r","character"],type:"action",action:"replace",isEdit:!0},{keys:["@","character"],type:"action",action:"replayMacro"},{keys:["q","character"],type:"action",action:"enterMacroRecordMode"},{keys:["R"],type:"action",action:"enterInsertMode",isEdit:!0,actionArgs:{replace:!0}},{keys:["u"],type:"action",action:"undo"},{keys:["<C-r>"],type:"action",action:"redo"},{keys:["m","character"],type:"action",action:"setMark"},{keys:['"',"character"],type:"action",action:"setRegister"},{keys:["z","z"],type:"action",action:"scrollToCursor",actionArgs:{position:"center"}},{keys:["z","."],type:"action",action:"scrollToCursor",actionArgs:{position:"center"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","t"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"}},{keys:["z","<CR>"],type:"action",action:"scrollToCursor",actionArgs:{position:"top"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["z","-"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"}},{keys:["z","b"],type:"action",action:"scrollToCursor",actionArgs:{position:"bottom"},motion:"moveToFirstNonWhiteSpaceCharacter"},{keys:["."],type:"action",action:"repeatLastEdit"},{keys:["<C-a>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!0,backtrack:!1}},{keys:["<C-x>"],type:"action",action:"incrementNumberToken",isEdit:!0,actionArgs:{increase:!1,backtrack:!1}},{keys:["a","character"],type:"motion",motion:"textObjectManipulation"},{keys:["i","character"],type:"motion",motion:"textObjectManipulation",motionArgs:{textObjectInner:!0}},{keys:["/"],type:"search",searchArgs:{forward:!0,querySrc:"prompt",toJumplist:!0}},{keys:["?"],type:"search",searchArgs:{forward:!1,querySrc:"prompt",toJumplist:!0}},{keys:["*"],type:"search",searchArgs:{forward:!0,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:["#"],type:"search",searchArgs:{forward:!1,querySrc:"wordUnderCursor",toJumplist:!0}},{keys:[":"],type:"ex"}],t=function(){function n(e,t){var n=e.state.vim;if(n.insertMode||n.exMode)return;var r=t.head;r.ch&&r.ch==e.doc.getLine(r.line).length&&r.ch--}function o(e,t){var n=[];for(var r=e;r<e+t;r++)n.push(String.fromCharCode(r));return n}function d(e,t){return t>=e.firstLine()&&t<=e.lastLine()}function v(e){return/^[a-z]$/.test(e)}function m(e){return"()[]{}".indexOf(e)!=-1}function g(e){return r.test(e)}function y(e){return/^[A-Z]$/.test(e)}function b(e){return/^\s*$/.test(e)}function w(e,t){for(var n=0;n<t.length;n++)if(t[n]==e)return!0;return!1}function x(e){return e.state.vim||(e.state.vim={inputState:new k,lastEditInputState:undefined,lastEditActionCommand:undefined,lastHPos:-1,lastHSPos:-1,lastMotion:null,marks:{},insertMode:!1,insertModeRepeat:undefined,visualMode:!1,visualLine:!1}),e.state.vim}function N(){T={searchQuery:null,searchIsReversed:!1,jumpList:E(),macroModeState:S(),lastChararacterSearch:{increment:0,forward:!0,selectedCharacter:""},registerController:new A({})}}function k(){this.prefixRepeat=[],this.motionRepeat=[],this.operator=null,this.operatorArgs=null,this.motion=null,this.motionArgs=null,this.keyBuffer=[],this.registerName=null}function L(e,t){this.clear(),e&&this.set(e,t)}function A(e){this.registers=e,this.unamedRegister=e['"']=new L}function H(e,t,n){var r=Math.min(Math.max(e.firstLine(),t.line),e.lastLine()),i=W(e,r)-1;i=n?i+1:i;var s=Math.min(Math.max(0,t.ch),i);return{line:r,ch:s}}function B(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}function j(e,t,n){return{line:e.line+t,ch:e.ch+n}}function F(e,t){for(var n=0;n<e.length;n++)if(e[n]!=t[n]&&t[n]!="character")return!1;return!0}function I(e,t,n){return function(){for(var r=0;r<n;r++)t(e)}}function q(e){return{line:e.line,ch:e.ch}}function R(e,t){return e.ch==t.ch&&e.line==t.line}function U(e,t){return e.line<t.line?!0:e.line==t.line&&e.ch<t.ch?!0:!1}function z(e,t,n){var r=U(e,t),i=U(t,n);return r&&i}function W(e,t){return e.getLine(t).length}function X(e){return e.split("").reverse().join("")}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e.replace(/([.?*+$\[\]\/\\(){}|\-])/g,"\\$1")}function J(e){e.off("mousedown",J);var t=e.state.vim;t.visualMode=!1,t.visualLine=!1;var n=e.getCursor("anchor"),r=e.getCursor("head");R(n,r)||e.setCursor(H(e,r)),CodeMirror.signal(e,"vim-mode-change",{mode:"normal"})}function K(e,t,n){var r=e.getRange(t,n);if(/\n\s*$/.test(r)){var i=r.split("\n");i.pop();var s;for(var s=i.pop();i.length>0&&s&&b(s);s=i.pop())n.line--,n.ch=0;s?(n.line--,n.ch=W(e,n.line)):n.ch=0}}function Q(e,t,n){t.ch=0,n.ch=0,n.line++}function G(e){if(!e)return 0;var t=e.search(/\S/);return t==-1?e.length:t}function Y(e,t,n,r,i){var s=e.getCursor(),o=e.getLine(s.line),u=s.ch,a=o.substring(u),f;i?f=a.search(/\w/):f=a.search(/\S/);if(f==-1)return null;u+=f,a=o.substring(u);var l=o.substring(0,u),c;r?c=/^\S+/:/\w/.test(o.charAt(u))?c=/^\w+/:c=/^[^\w\s]+/;var h=c.exec(a),p=u,d=u+h[0].length,v=X(l),m=c.exec(v);m&&(p-=m[0].length);if(t){var g=o.substring(d),y=g.match(/^\s*/)[0].length;if(y>0)d+=y;else{var b=v.length-p,w=v.substring(b),E=w.match(/^\s*/)[0].length;p-=E}}return{start:{line:s.line,ch:p},end:{line:s.line,ch:d}}}function Z(e,t,n){R(t,n)||T.jumpList.add(e,t,n)}function et(e,t){T.lastChararacterSearch.increment=e,T.lastChararacterSearch.forward=t.forward,T.lastChararacterSearch.selectedCharacter=t.selectedCharacter}function rt(e,t,n,r){var i=e.getCursor(),s=n?1:-1,o=n?e.lineCount():-1,u=i.ch,a=i.line,f=e.getLine(a),l={lineText:f,nextCh:f.charAt(u),lastCh:null,index:u,symb:r,reverseSymb:(n?{")":"(","}":"{"}:{"(":")","{":"}"})[r],forward:n,depth:0,curMoveThrough:!1},c=tt[r];if(!c)return i;var h=nt[c].init,p=nt[c].isComplete;h&&h(l);while(a!==o&&t){l.index+=s,l.nextCh=l.lineText.charAt(l.index);if(!l.nextCh){a+=s,l.lineText=e.getLine(a)||"";if(s>0)l.index=0;else{var d=l.lineText.length;l.index=d>0?d-1:0}l.nextCh=l.lineText.charAt(l.index)}p(l)&&(i.line=a,i.ch=l.index,t--)}return l.nextCh||l.curMoveThrough?{line:a,ch:l.index}:i}function it(e,t,n,r,o){var u=t.line,a=t.ch,f=e.getLine(u),l=n?1:-1,c=r?s:i;if(o&&f==""){u+=l,f=e.getLine(u);if(!d(e,u))return null;a=n?0:f.length}for(;;){if(o&&f=="")return{from:0,to:0,line:u};var h=l>0?f.length:-1,p=h,v=h;while(a!=h){var m=!1;for(var g=0;g<c.length&&!m;++g)if(c[g].test(f.charAt(a))){p=a;while(a!=h&&c[g].test(f.charAt(a)))a+=l;v=a,m=p!=v;if(p==t.ch&&u==t.line&&v==p+l)continue;return{from:Math.min(p,v+1),to:Math.max(p,v),line:u}}m||(a+=l)}u+=l;if(!d(e,u))return null;f=e.getLine(u),a=l>0?0:f.length}throw new Error("The impossible happened.")}function st(e,t,n,r,i){var s=e.getCursor(),o=q(s),u=[];(n&&!r||!n&&r)&&t++;var a=!n||!r;for(var f=0;f<t;f++){var l=it(e,s,n,i,a);if(!l){var c=W(e,e.lastLine());u.push(n?{line:e.lastLine(),from:c,to:c}:{line:0,from:0,to:0});break}u.push(l),s={line:l.line,ch:n?l.to-1:l.from}}var h=u.length!=t,p=u[0],d=u.pop();return n&&!r?(!h&&(p.from!=o.ch||p.line!=o.line)&&(d=u.pop()),{line:d.line,ch:d.from}):n&&r?{line:d.line,ch:d.to-1}:!n&&r?(!h&&(p.to!=o.ch||p.line!=o.line)&&(d=u.pop()),{line:d.line,ch:d.to}):{line:d.line,ch:d.from}}function ot(e,t,n,r){var i=e.getCursor(),s=i.ch,o;for(var u=0;u<t;u++){var a=e.getLine(i.line);o=ft(s,a,r,n,!0);if(o==-1)return null;s=o}return{line:e.getCursor().line,ch:o}}function ut(e,t){var n=e.getCursor().line;return H(e,{line:n,ch:t-1})}function at(e,t,n,r){if(!w(n,h))return;t.marks[n]&&t.marks[n].clear(),t.marks[n]=e.setBookmark(r)}function ft(e,t,n,r,i){var s;return r?(s=t.indexOf(n,e+1),s!=-1&&!i&&(s-=1)):(s=t.lastIndexOf(n,e-1),s!=-1&&!i&&(s+=1)),s}function lt(e){return e==="string"||e==="comment"?1:0}function ct(e,t,n){var r=t.line,i=t.ch;n=n?n:e.getLine(r).charAt(i);var s=e.getTokenAt({line:r,ch:i+1}).type,o=lt(s),u={"(":")",")":"(","[":"]","]":"[","{":"}","}":"{"}[n];if(!u)return t;var a={"(":1,"{":1,"[":1}[n]||-1,f=a===1?e.lineCount():-1,l=1,c=n,h=i,p=e.getLine(r);while(r!==f&&l>0){h+=a,c=p.charAt(h);if(!c){r+=a,p=e.getLine(r)||"";if(a>0)h=0;else{var d=p.length;h=d>0?d-1:0}c=p.charAt(h)}var v=e.getTokenAt({line:r,ch:h+1}).type,m=lt(v);o>=m&&(c===n?l++:c===u&&l--)}return c?{line:r,ch:h}:t}function ht(e,t,n){var r=e.getCursor(),i=ct(e,r,t),s=ct(e,i);return s.ch+=n?1:0,i.ch+=n?0:1,{start:s,end:i}}function pt(e,t,n){var r=e.getCursor(),i=e.getLine(r.line),s=i.split(""),o,u,a,f,l=s.indexOf(t);r.ch<l?r.ch=l:l<r.ch&&s[r.ch]==t&&(u=r.ch,--r.ch);if(s[r.ch]==t&&!u)o=r.ch+1;else for(a=r.ch;a>-1&&!o;a--)s[a]==t&&(o=a+1);if(o&&!u)for(a=o,f=s.length;a<f&&!u;a++)s[a]==t&&(u=a);return!o||!u?{start:r,end:r}:(n&&(--o,++u),{start:{line:r.line,ch:o},end:{line:r.line,ch:u}})}function dt(){}function vt(e){var t=e.state.vim;return t.searchState_||(t.searchState_=new dt)}function mt(e,t,n,r,i){e.openDialog?e.openDialog(t,r,{bottom:!0,value:i.value,onKeyDown:i.onKeyDown,onKeyUp:i.onKeyUp}):r(prompt(n,""))}function gt(e){var t=!1,n=[];for(var r=0;r<e.length;r++){var i=e.charAt(r);!t&&i=="/"&&n.push(r),t=i=="\\"}return n}function yt(e,t,n){if(e instanceof RegExp)return e;var r=gt(e),i,s;if(!r.length)i=e;else{i=e.substring(0,r[0]);var o=e.substring(r[0]);s=o.indexOf("i")!=-1}if(!i)return null;n&&(t=/^[^A-Z]*$/.test(i));var u=new RegExp(i,t||s?"i":undefined);return u}function bt(e,t){e.openNotification?e.openNotification('<span style="color: red">'+t+"</span>",{bottom:!0,duration:5e3}):alert(t)}function wt(e,t){var n="";return e&&(n+='<span style="font-family: monospace">'+e+"</span>"),n+='<input type="text"/> <span style="color: #888">',t&&(n+='<span style="color: #888">',n+=t,n+="</span>"),n}function St(e,t){var n=(t.prefix||"")+" "+(t.desc||""),r=wt(t.prefix,t.desc);mt(e,r,n,t.onClose,t)}function xt(e,t){if(e instanceof RegExp&&t instanceof RegExp){var n=["global","multiline","ignoreCase","source"];for(var r=0;r<n.length;r++){var i=n[r];if(e[i]!==t[i])return!1}return!0}return!1}function Tt(e,t,n,r){if(!t)return;var i=vt(e),s=yt(t,!!n,!!r);if(!s)return;return Ct(e,s),xt(s,i.getQuery())?s:(i.setQuery(s),s)}function Nt(e){if(e.source.charAt(0)=="^")var t=!0;return{token:function(n){if(t&&!n.sol()){n.skipToEnd();return}var r=n.match(e,!1);if(r){if(r[0].length==0)return n.next(),"searching";if(!n.sol()){n.backUp(1);if(!e.exec(n.next()+r[0]))return n.next(),null}return n.match(e),"searching"}while(!n.eol()){n.next();if(n.match(e,!1))break}},query:e}}function Ct(e,t){var n=vt(e).getOverlay();if(!n||t!=n.query)n&&e.removeOverlay(n),n=Nt(t),e.addOverlay(n),vt(e).setOverlay(n)}function kt(e,t,n,r){return r===undefined&&(r=1),e.operation(function(){var i=e.getCursor(),s=e.getSearchCursor(n,i);for(var o=0;o<r;o++){var u=s.find(t);o==0&&u&&R(s.from(),i)&&(u=s.find(t));if(!u){s=e.getSearchCursor(n,t?{line:e.lastLine()}:{line:e.firstLine(),ch:0});if(!s.find(t))return}}return s.from()})}function Lt(e){e.removeOverlay(vt(e).getOverlay()),vt(e).setOverlay(null)}function At(e,t,n){return typeof e!="number"&&(e=e.line),t instanceof Array?w(e,t):n?e>=t&&e<=n:e==t}function Ot(e){var t=e.getScrollInfo(),n=6,r=10,i=e.coordsChar({left:0,top:n+t.top},"local"),s=t.clientHeight-r+t.top,o=e.coordsChar({left:0,top:s},"local");return{top:i.line,bottom:o.line}}function _t(e){var t,n,r=[];while(e){n=/<\w+-.+?>|<\w+>|./.exec(e);if(n===null)break;t=n[0],e=e.substring(n.index+t.length),r.push(t)}return r}function Ht(e,t,n,r,i,s,o){function f(){e.operation(function(){while(!u)l(),c();h()})}function l(){var t=e.getRange(i.from(),i.to()),n=t.replace(s,o);i.replace(n)}function c(){var t=i.findNext();t?At(i.from(),n,r)?(e.scrollIntoView(i.from(),30),e.setSelection(i.from(),i.to()),a=i.from(),u=!1):u=!0:u=!0}function h(t){t&&t(),e.focus();if(a){e.setCursor(a);var n=e.state.vim;n.exMode=!1,n.lastHPos=n.lastHSPos=a.ch}}function p(t,n,r){CodeMirror.e_stop(t);var i=CodeMirror.keyName(t);switch(i){case"Y":l(),c();break;case"N":c();break;case"A":e.operation(f);break;case"L":l();case"Q":case"Esc":case"Ctrl-C":case"Ctrl-[":h(r)}u&&h(r)}e.state.vim.exMode=!0;var u=!1,a=i.from();c();if(u)throw new Error("No matches for "+s.source);if(!t){f();return}St(e,{prefix:"replace with <strong>"+o+"</strong> (y/n/a/q/l)",onKeyDown:p})}function Bt(){function e(e,t){var n=e;y(n)&&(t=="Shift"?t=null:n=n.toLowerCase()),t&&(n=t.charAt(0)+"-"+n);var r={Enter:"CR",Backspace:"BS",Delete:"Del"}[n];return n=r?r:n,n=n.length>1?"<"+n+">":n,n}function t(e){return function(t){CodeMirror.Vim.handleKey(t,e)}}function r(r,i){for(var s=0;s<r.length;s++){var o=r[s];!i&&w(o,l)&&(o="'"+o+"'");var u=e(r[s],i),a=i?i+"-"+o:o;n[a]=t(u)}}var n={nofallthrough:!0,disableInput:!0,style:"fat-cursor"};return r(u),r(u,"Shift"),r(u,"Ctrl"),r(l),r(l,"Ctrl"),r(f),r(f,"Ctrl"),r(c),r(c,"Ctrl"),n}function jt(e){var t=e.state.vim,n=T.macroModeState.inReplay;n||(e.off("change",zt),e.off("cursorActivity",Wt),CodeMirror.off(e.getInputField(),"keydown",Vt)),!n&&t.insertModeRepeat>1&&($t(e,t,t.insertModeRepeat-1,!0),t.lastEditInputState.repeatOverride=t.insertModeRepeat),delete t.insertModeRepeat,e.setCursor(e.getCursor().line,e.getCursor().ch-1,!0),t.insertMode=!1,e.setOption("keyMap","vim"),e.toggleOverwrite(!1),CodeMirror.signal(e,"vim-mode-change",{mode:"normal"})}function Ft(e,t){var n,r,i=T.registerController.getRegister(t),s=i.toString(),o=e.macroKeyBuffer;qt(e);do{n=/<\w+-.+?>|<\w+>|./.exec(s);if(n===null)break;r=n[0],s=s.substring(n.index+r.length),o.push(r)}while(s);return o}function It(e,t){var n=t.join("");T.registerController.setRegisterText(e,n)}function qt(e){if(e.isMacroPlaying)return;var t=e.macroKeyBuffer;t.length=0}function Rt(e,t,n){t.isMacroPlaying=!0;for(var r=0,i=n.length;r<i;r++)CodeMirror.Vim.handleKey(e,n[r]);t.isMacroPlaying=!1}function Ut(e,t){if(e.isMacroPlaying)return;var n=e.macroKeyBuffer;n.push(t)}function zt(e,t){var n=T.macroModeState,r=n.lastInsertModeChanges;while(t){r.expectCursorActivityForChange=!0;if(t.origin=="+input"||t.origin=="paste"||t.origin===undefined){var i=t.text.join("\n");r.changes.push(i)}t=t.next}}function Wt(){var e=T.macroModeState,t=e.lastInsertModeChanges;t.expectCursorActivityForChange?t.expectCursorActivityForChange=!1:t.changes=[]}function Xt(e){this.keyName=e}function Vt(e){function i(){return n.changes.push(new Xt(r)),!0}var t=T.macroModeState,n=t.lastInsertModeChanges,r=CodeMirror.keyName(e);(r.indexOf("Delete")!=-1||r.indexOf("Backspace")!=-1)&&CodeMirror.lookupKey(r,["vim-insert"],i)}function $t(e,t,n,r){function u(){s?O.processAction(e,t,t.lastEditActionCommand):O.evalInput(e,t)}function a(n){i.lastInsertModeChanges.changes.length>0&&(n=t.lastEditActionCommand?n:1,Jt(e,n,i))}var i=T.macroModeState;i.inReplay=!0;var s=!!t.lastEditActionCommand,o=t.inputState;t.inputState=t.lastEditInputState;if(s&&t.lastEditActionCommand.interlaceInsertRepeat)for(var f=0;f<n;f++)u(),a(1);else r||u(),a(n);t.inputState=o,t.insertMode&&!r&&jt(e),i.inReplay=!1}function Jt(e,t,n){function i(t){return typeof t=="string"?CodeMirror.commands[t](e):t(e),!0}var r=n.lastInsertModeChanges;for(var s=0;s<t;s++)for(var o=0;o<r.changes.length;o++){var u=r.changes[o];if(u instanceof Xt)CodeMirror.lookupKey(u.keyName,["vim-insert"],i);else{var a=e.getCursor();e.replaceRange(u,a,a)}}}CodeMirror.defineOption("vimMode",!1,function(e,t){t?(e.setOption("keyMap","vim"),CodeMirror.signal(e,"vim-mode-change",{mode:"normal"}),e.on("beforeSelectionChange",n),x(e)):e.state.vim&&(e.setOption("keyMap","default"),e.off("beforeSelectionChange",n),e.state.vim=null)});var r=/[\d]/,i=[/\w/,/[^\w\s]/],s=[/\S/],u=o(65,26),a=o(97,26),f=o(48,10),l="~`!@#$%^&*()_-+=[{}]\\|/?.,<>:;\"'".split(""),c=["Left","Right","Up","Down","Space","Backspace","Esc","Home","End","PageUp","PageDown","Enter"],h=[].concat(u,a,f,["<",">"]),p=[].concat(u,a,f,["-",'"']),E=function(){function s(s,o,u){function l(n){var r=++t%e,o=i[r];o&&o.clear(),i[r]=s.setBookmark(n)}var a=t%e,f=i[a];if(f){var c=f.find();c&&!R(c,o)&&l(o)}else l(o);l(u),n=t,r=t-e+1,r<0&&(r=0)}function o(s,o){t+=o,t>n?t=n:t<r&&(t=r);var u=i[(e+t)%e];if(u&&!u.find()){var a=o>0?1:-1,f,l=s.getCursor();do{t+=a,u=i[(e+t)%e];if(u&&(f=u.find())&&!R(l,f))break}while(t<n&&t>r)}return u}var e=100,t=-1,n=0,r=0,i=new Array(e);return{cachedCursor:undefined,add:s,move:o}},S=function(){return{macroKeyBuffer:[],latestRegister:undefined,inReplay:!1,lastInsertModeChanges:{changes:[],expectCursorActivityForChange:!1},enteredMacroMode:undefined,isMacroPlaying:!1,toggle:function(e,t){this.enteredMacroMode?(this.enteredMacroMode(),this.enteredMacroMode=undefined):(this.latestRegister=t,this.enteredMacroMode=e.openDialog("(recording)["+t+"]",null,{bottom:!0}))}}},T,C={buildKeyMap:function(){},getRegisterController:function(){return T.registerController},resetVimGlobalState_:N,getVimGlobalState_:function(){return T},maybeInitVimState_:x,InsertModeKey:Xt,map:function(e,t){Pt.map(e,t)},defineEx:function(e,t,n){if(e.indexOf(t)!==0)throw new Error('(Vim.defineEx) "'+t+'" is not a prefix of "'+e+'", command not registered');Dt[e]=n,Pt.commandMap_[t]={name:e,shortName:t,type:"api"}},handleKey:function(t,n){var r,i=x(t),s=T.macroModeState;if(s.enteredMacroMode&&n=="q"){D.exitMacroRecordMode(),i.inputState=new k;return}if(n=="<Esc>"){i.inputState=new k,i.visualMode&&J(t);return}!i.visualMode&&!R(t.getCursor("head"),t.getCursor("anchor"))&&(i.visualMode=!0,i.visualLine=!1,CodeMirror.signal(t,"vim-mode-change",{mode:"visual"}),t.on("mousedown",J));if(n!="0"||n=="0"&&i.inputState.getRepeat()===0)r=O.matchCommand(n,e,i);if(!r){g(n)&&i.inputState.pushRepeatDigit(n);return}if(r.type=="keyToKey")for(var o=0;o<r.toKeys.length;o++)this.handleKey(t,r.toKeys[o]);else s.enteredMacroMode&&Ut(s,n),O.processCommand(t,i,r)},handleEx:function(e,t){Pt.processCommand(e,t)}};k.prototype.pushRepeatDigit=function(e){this.operator?this.motionRepeat=this.motionRepeat.concat(e):this.prefixRepeat=this.prefixRepeat.concat(e)},k.prototype.getRepeat=function(){var e=0;if(this.prefixRepeat.length>0||this.motionRepeat.length>0)e=1,this.prefixRepeat.length>0&&(e*=parseInt(this.prefixRepeat.join(""),10)),this.motionRepeat.length>0&&(e*=parseInt(this.motionRepeat.join(""),10));return e},L.prototype={set:function(e,t){this.text=e,this.linewise=!!t},append:function(e,t){t||this.linewise?(this.text+="\n"+e,this.linewise=!0):this.text+=e},clear:function(){this.text="",this.linewise=!1},toString:function(){return this.text}},A.prototype={pushText:function(e,t,n,r){r&&n.charAt(0)=="\n"&&(n=n.slice(1)+"\n"),r&&n.charAt(n.length-1)!=="\n"&&(n+="\n");var i=this.isValidRegister(e)?this.getRegister(e):null;if(!i){switch(t){case"yank":this.registers[0]=new L(n,r);break;case"delete":case"change":n.indexOf("\n")==-1?this.registers["-"]=new L(n,r):(this.shiftNumericRegisters_(),this.registers[1]=new L(n,r))}this.unamedRegister.set(n,r);return}var s=y(e);s?(i.append(n,r),this.unamedRegister.append(n,r)):(i.set(n,r),this.unamedRegister.set(n,r))},setRegisterText:function(e,t,n){this.getRegister(e).set(t,n)},getRegister:function(e){return this.isValidRegister(e)?(e=e.toLowerCase(),this.registers[e]||(this.registers[e]=new L),this.registers[e]):this.unamedRegister},isValidRegister:function(e){return e&&w(e,p)},shiftNumericRegisters_:function(){for(var e=9;e>=2;e--)this.registers[e]=this.getRegister(""+(e-1))}};var O={matchCommand:function(e,t,n){function f(t){return i.length<t.keys.length?(r.keyBuffer.push(e),null):(t.keys[i.length-1]=="character"&&(r.selectedCharacter=o),r.keyBuffer=[],t)}var r=n.inputState,i=r.keyBuffer.concat(e),s=[],o;for(var u=0;u<t.length;u++){var a=t[u];if(F(i,a.keys)){if(r.operator&&a.type=="action")continue;if(a.keys[i.length-1]=="character"){o=i[i.length-1];if(o.length>1)switch(o){case"<CR>":o="\n";break;case"<Space>":o=" ";break;default:continue}}s.push(a)}}if(!s.length)return r.keyBuffer=[],null;if(s.length==1)return f(s[0]);var l=n.visualMode?"visual":"normal",c=s[0];for(var u=0;u<s.length;u++)if(s[u].context==l){c=s[u];break}return f(c)},processCommand:function(e,t,n){t.inputState.repeatOverride=n.repeatOverride;switch(n.type){case"motion":this.processMotion(e,t,n);break;case"operator":this.processOperator(e,t,n);break;case"operatorMotion":this.processOperatorMotion(e,t,n);break;case"action":this.processAction(e,t,n);break;case"search":this.processSearch(e,t,n);break;case"ex":case"keyToEx":this.processEx(e,t,n);break;default:}},processMotion:function(e,t,n){t.inputState.motion=n.motion,t.inputState.motionArgs=B(n.motionArgs),this.evalInput(e,t)},processOperator:function(e,t,n){var r=t.inputState;if(r.operator){if(r.operator==n.operator){r.motion="expandToLine",r.motionArgs={linewise:!0},this.evalInput(e,t);return}t.inputState=new k}r.operator=n.operator,r.operatorArgs=B(n.operatorArgs),t.visualMode&&this.evalInput(e,t)},processOperatorMotion:function(e,t,n){var r=t.visualMode,i=B(n.operatorMotionArgs);i&&r&&i.visualLine&&(t.visualLine=!0),this.processOperator(e,t,n),r||this.processMotion(e,t,n)},processAction:function(e,t,n){var r=t.inputState,i=r.getRepeat(),s=!!i,o=B(n.actionArgs)||{};r.selectedCharacter&&(o.selectedCharacter=r.selectedCharacter),n.operator&&this.processOperator(e,t,n),n.motion&&this.processMotion(e,t,n),(n.motion||n.operator)&&this.evalInput(e,t),o.repeat=i||1,o.repeatIsExplicit=s,o.registerName=r.registerName,t.inputState=new k,t.lastMotion=null,n.isEdit&&this.recordLastEdit(t,r,n),D[n.action](e,o,t)},processSearch:function(e,t,n){function u(r,i,s){try{Tt(e,r,i,s)}catch(o){bt(e,"Invalid regex: "+r);return}O.processMotion(e,t,{type:"motion",motion:"findNext",motionArgs:{forward:!0,toJumplist:n.searchArgs.toJumplist}})}function a(t){e.scrollTo(o.left,o.top),u(t,!0,!0)}function f(t,n){var i;try{i=Tt(e,n,!0,!0)}catch(s){}i?e.scrollIntoView(kt(e,!r,i),30):(Lt(e),e.scrollTo(o.left,o.top))}function l(t,n,r){var i=CodeMirror.keyName(t);if(i=="Esc"||i=="Ctrl-C"||i=="Ctrl-[")Tt(e,s),Lt(e),e.scrollTo(o.left,o.top),CodeMirror.e_stop(t),r(),e.focus()}if(!e.getSearchCursor)return;var r=n.searchArgs.forward;vt(e).setReversed(!r);var i=r?"/":"?",s=vt(e).getQuery(),o=e.getScrollInfo();switch(n.searchArgs.querySrc){case"prompt":St(e,{onClose:a,prefix:i,desc:Et,onKeyUp:f,onKeyDown:l});break;case"wordUnderCursor":var c=Y(e,!1,!0,!1,!0),h=!0;c||(c=Y(e,!1,!0,!1,!1),h=!1);if(!c)return;var p=e.getLine(c.start.line).substring(c.start.ch,c.end.ch);h?p="\\b"+p+"\\b":p=$(p),T.jumpList.cachedCursor=e.getCursor(),e.setCursor(c.start),u(p,!0,!1)}},processEx:function(e,t,n){function r(t){Pt.processCommand(e,t)}function i(t,n,r){var i=CodeMirror.keyName(t);if(i=="Esc"||i=="Ctrl-C"||i=="Ctrl-[")CodeMirror.e_stop(t),r(),e.focus()}n.type=="keyToEx"?Pt.processCommand(e,n.exArgs.input):t.visualMode?St(e,{onClose:r,prefix:":",value:"'<,'>",onKeyDown:i}):St(e,{onClose:r,prefix:":",onKeyDown:i})},evalInput:function(e,t){var n=t.inputState,r=n.motion,i=n.motionArgs||{},s=n.operator,o=n.operatorArgs||{},u=n.registerName,a=e.getCursor("head"),f=e.getCursor("anchor"),l=q(a),c=q(l),h,p;s&&this.recordLastEdit(t,n),n.repeatOverride!==undefined?p=n.repeatOverride:p=n.getRepeat();if(p>0&&i.explicitRepeat)i.repeatIsExplicit=!0;else if(i.noRepeat||!i.explicitRepeat&&p===0)p=1,i.repeatIsExplicit=!1;n.selectedCharacter&&(i.selectedCharacter=o.selectedCharacter=n.selectedCharacter),i.repeat=p,t.inputState=new k;if(r){var d=M[r](e,i,t);t.lastMotion=M[r];if(!d)return;if(i.toJumplist){var v=T.jumpList,m=v.cachedCursor;m?(Z(e,m,d),delete v.cachedCursor):Z(e,c,d)}d instanceof Array?(l=d[0],h=d[1]):h=d,h||(h={ch:l.ch,line:l.line});if(t.visualMode){U(f,a)&&(R(f,h)||U(h,f))?f.ch+=1:U(a,f)&&(R(f,h)||U(f,h))&&(f.ch-=1),a=h;if(t.visualLine)if(U(f,a)){f.ch=0;var g=e.lastLine();a.line>g&&(a.line=g),a.ch=W(e,a.line)}else a.ch=0,f.ch=W(e,f.line);e.setSelection(f,a),at(e,t,"<",U(f,a)?f:a),at(e,t,">",U(f,a)?a:f)}else s||(h=H(e,h),e.setCursor(h.line,h.ch))}if(s){var y=!1;t.lastMotion=null,o.repeat=p,t.visualMode&&(l=f,h=a,i.inclusive=!0);if(U(h,l)){var b=l;l=h,h=b,y=!0}i.inclusive&&(!t.visualMode||!y)&&h.ch++;var w=i.linewise||t.visualMode&&t.visualLine;w?Q(e,l,h):i.forward&&K(e,l,h),o.registerName=u,o.linewise=w,_[s](e,o,t,l,h,c),t.visualMode&&J(e)}},recordLastEdit:function(e,t,n){var r=T.macroModeState;if(r.inReplay)return;e.lastEditInputState=t,e.lastEditActionCommand=n,r.lastInsertModeChanges.changes=[],r.lastInsertModeChanges.expectCursorActivityForChange=!1}},M={moveToTopLine:function(e,t){var n=Ot(e).top+t.repeat-1;return{line:n,ch:G(e.getLine(n))}},moveToMiddleLine:function(e){var t=Ot(e),n=Math.floor((t.top+t.bottom)*.5);return{line:n,ch:G(e.getLine(n))}},moveToBottomLine:function(e,t){var n=Ot(e).bottom-t.repeat+1;return{line:n,ch:G(e.getLine(n))}},expandToLine:function(e,t){var n=e.getCursor();return{line:n.line+t.repeat-1,ch:Infinity}},findNext:function(e,t){var n=vt(e),r=n.getQuery();if(!r)return;var i=!t.forward;return i=n.isReversed()?!i:i,Ct(e,r),kt(e,i,r,t.repeat)},goToMark:function(e,t,n){var r=n.marks[t.selectedCharacter];return r?r.find():null},jumpToMark:function(e,t,n){var r=e.getCursor();for(var i=0;i<t.repeat;i++){var s=r;for(var o in n.marks){if(!v(o))continue;var u=n.marks[o].find(),a=t.forward?U(u,s):U(s,u);if(a)continue;if(t.linewise&&u.line==s.line)continue;var f=R(s,r),l=t.forward?z(s,u,r):z(r,u,s);if(f||l)r=u}}return t.linewise&&(r.ch=G(e.getLine(r.line))),r},moveByCharacters:function(e,t){var n=e.getCursor(),r=t.repeat,i=t.forward?n.ch+r:n.ch-r;return{line:n.line,ch:i}},moveByLines:function(e,t,n){var r=e.getCursor(),i=r.ch;switch(n.lastMotion){case this.moveByLines:case this.moveByDisplayLines:case this.moveByScroll:case this.moveToColumn:case this.moveToEol:i=n.lastHPos;break;default:n.lastHPos=i}var s=t.repeat+(t.repeatOffset||0),o=t.forward?r.line+s:r.line-s,u=e.firstLine(),a=e.lastLine();if(o<u&&r.line==u||o>a&&r.line==a)return;return t.toFirstChar&&(i=G(e.getLine(o)),n.lastHPos=i),n.lastHSPos=e.charCoords({line:o,ch:i},"div").left,{line:o,ch:i}},moveByDisplayLines:function(e,t,n){var r=e.getCursor();switch(n.lastMotion){case this.moveByDisplayLines:case this.moveByScroll:case this.moveByLines:case this.moveToColumn:case this.moveToEol:break;default:n.lastHSPos=e.charCoords(r,"div").left}var i=t.repeat,s=e.findPosV(r,t.forward?i:-i,"line",n.lastHSPos);if(s.hitSide)if(t.forward)var o=e.charCoords(s,"div"),u={top:o.top+8,left:n.lastHSPos},s=e.coordsChar(u,"div");else{var a=e.charCoords({line:e.firstLine(),ch:0},"div");a.left=n.lastHSPos,s=e.coordsChar(a,"div")}return n.lastHPos=s.ch,s},moveByPage:function(e,t){var n=e.getCursor(),r=t.repeat;e.moveV(t.forward?r:-r,"page");var i=e.getCursor();return e.setCursor(n),i},moveByParagraph:function(e,t){var n=e.getCursor().line,r=t.repeat,i=t.forward?1:-1;for(var s=0;s<r;s++){if(!t.forward&&n===e.firstLine()||t.forward&&n==e.lastLine())break;n+=i;while(n!==e.firstLine()&&n!=e.lastLine()&&e.getLine(n))n+=i}return{line:n,ch:0}},moveByScroll:function(e,t,n){var r=e.getScrollInfo(),i=null,s=t.repeat;s||(s=r.clientHeight/(2*e.defaultTextHeight()));var o=e.charCoords(e.getCursor(),"local");t.repeat=s;var i=M.moveByDisplayLines(e,t,n);if(!i)return null;var u=e.charCoords(i,"local");return e.scrollTo(null,r.top+u.top-o.top),i},moveByWords:function(e,t){return st(e,t.repeat,!!t.forward,!!t.wordEnd,!!t.bigWord)},moveTillCharacter:function(e,t){var n=t.repeat,r=ot(e,n,t.forward,t.selectedCharacter),i=t.forward?-1:1;return et(i,t),r?(r.ch+=i,r):e.getCursor()},moveToCharacter:function(e,t){var n=t.repeat;return et(0,t),ot(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToSymbol:function(e,t){var n=t.repeat;return rt(e,n,t.forward,t.selectedCharacter)||e.getCursor()},moveToColumn:function(e,t,n){var r=t.repeat;return n.lastHPos=r-1,n.lastHSPos=e.charCoords(e.getCursor(),"div").left,ut(e,r)},moveToEol:function(e,t,n){var r=e.getCursor();n.lastHPos=Infinity;var i={line:r.line+t.repeat-1,ch:Infinity},s=e.clipPos(i);return s.ch--,n.lastHSPos=e.charCoords(s,"div").left,i},moveToFirstNonWhiteSpaceCharacter:function(e){var t=e.getCursor();return{line:t.line,ch:G(e.getLine(t.line))}},moveToMatchedSymbol:function(e){var t=e.getCursor(),n=t.line,r=t.ch,i=e.getLine(n),s,o=e.getTokenAt(t).type,u=lt(o);do{s=i.charAt(r++);if(s&&m(s)){var a=e.getTokenAt({line:n,ch:r}).type,f=lt(a);if(u>=f)break}}while(s);return s?ct(e,{line:n,ch:r-1},s):t},moveToStartOfLine:function(e){var t=e.getCursor();return{line:t.line,ch:0}},moveToLineOrEdgeOfDocument:function(e,t){var n=t.forward?e.lastLine():e.firstLine();return t.repeatIsExplicit&&(n=t.repeat-e.getOption("firstLineNumber")),{line:n,ch:G(e.getLine(n))}},textObjectManipulation:function(e,t){var n=t.selectedCharacter,r=!t.textObjectInner;if(!P[n])return null;var i=P[n](e,r),s=i.start,o=i.end;return[s,o]},repeatLastCharacterSearch:function(e,t){var n=T.lastChararacterSearch,r=t.repeat,i=t.forward===n.forward,s=(n.increment?1:0)*(i?-1:1);e.moveH(-s,"char"),t.inclusive=i?!0:!1;var o=ot(e,r,i,n.selectedCharacter);return o?(o.ch+=s,o):(e.moveH(s,"char"),e.getCursor())}},_={change:function(e,t,n,r,i){T.registerController.pushText(t.registerName,"change",e.getRange(r,i),t.linewise);if(t.linewise){var s=i.line>e.lastLine()?"":"\n";e.replaceRange(s,r,i),e.indentLine(r.line,"smart"),r.ch=null}else{var o=e.getRange(r,i);if(!b(o)){var u=/\s+$/.exec(o);u&&(i=j(i,0,-u[0].length))}e.replaceRange("",r,i)}D.enterInsertMode(e,{},e.state.vim),e.setCursor(r)},"delete":function(e,t,n,r,i){t.linewise&&i.line>e.lastLine()&&r.line>e.firstLine()&&(r.line--,r.ch=W(e,r.line)),T.registerController.pushText(t.registerName,"delete",e.getRange(r,i),t.linewise),e.replaceRange("",r,i),t.linewise?e.setCursor(M.moveToFirstNonWhiteSpaceCharacter(e)):e.setCursor(r)},indent:function(e,t,n,r,i){var s=r.line,o=i.line,u=n.visualMode?t.repeat:1;t.linewise&&o--;for(var a=s;a<=o;a++)for(var f=0;f<u;f++)e.indentLine(a,t.indentRight);e.setCursor(r),e.setCursor(M.moveToFirstNonWhiteSpaceCharacter(e))},swapcase:function(e,t,n,r,i,s){var o=e.getRange(r,i),u="";for(var a=0;a<o.length;a++){var f=o.charAt(a);u+=y(f)?f.toLowerCase():f.toUpperCase()}e.replaceRange(u,r,i),t.shouldMoveCursor||e.setCursor(s)},yank:function(e,t,n,r,i,s){T.registerController.pushText(t.registerName,"yank",e.getRange(r,i),t.linewise),e.setCursor(s)}},D={jumpListWalk:function(e,t,n){if(n.visualMode)return;var r=t.repeat,i=t.forward,s=T.jumpList,o=s.move(e,i?r:-r),u=o?o.find():undefined;u=u?u:e.getCursor(),e.setCursor(u)},scrollToCursor:function(e,t){var n=e.getCursor().line,r=e.charCoords({line:n,ch:0},"local"),i=e.getScrollInfo().clientHeight,s=r.top,o=r.bottom-s;switch(t.position){case"center":s=s-i/2+o;break;case"bottom":s=s-i+o*1.4;break;case"top":s+=o*.4}e.scrollTo(null,s)},replayMacro:function(e,t){var n=t.selectedCharacter,r=t.repeat,i=T.macroModeState;n=="@"&&(n=i.latestRegister);var s=Ft(i,n);while(r--)Rt(e,i,s)},exitMacroRecordMode:function(){var e=T.macroModeState;e.toggle(),It(e.latestRegister,e.macroKeyBuffer)},enterMacroRecordMode:function(e,t){var n=T.macroModeState,r=t.selectedCharacter;n.toggle(e,r),qt(n)},enterInsertMode:function(e,t,n){if(e.getOption("readOnly"))return;n.insertMode=!0,n.insertModeRepeat=t&&t.repeat||1;var r=t?t.insertAt:null;if(r=="eol"){var i=e.getCursor();i={line:i.line,ch:W(e,i.line)},e.setCursor(i)}else r=="charAfter"?e.setCursor(j(e.getCursor(),0,1)):r=="firstNonBlank"&&e.setCursor(M.moveToFirstNonWhiteSpaceCharacter(e));e.setOption("keyMap","vim-insert"),t&&t.replace?(e.toggleOverwrite(!0),e.setOption("keyMap","vim-replace"),CodeMirror.signal(e,"vim-mode-change",{mode:"replace"})):(e.setOption("keyMap","vim-insert"),CodeMirror.signal(e,"vim-mode-change",{mode:"insert"})),T.macroModeState.inReplay||(e.on("change",zt),e.on("cursorActivity",Wt),CodeMirror.on(e.getInputField(),"keydown",Vt))},toggleVisualMode:function(e,t,n){var r=t.repeat,i=e.getCursor(),s;n.visualMode?(i=e.getCursor("anchor"),s=e.getCursor("head"),!n.visualLine&&t.linewise?(n.visualLine=!0,i.ch=U(i,s)?0:W(e,i.line),s.ch=U(i,s)?W(e,s.line):0,e.setSelection(i,s),CodeMirror.signal(e,"vim-mode-change",{mode:"visual",subMode:"linewise"})):n.visualLine&&!t.linewise?(n.visualLine=!1
,CodeMirror.signal(e,"vim-mode-change",{mode:"visual"})):J(e)):(e.on("mousedown",J),n.visualMode=!0,n.visualLine=!!t.linewise,n.visualLine?(i.ch=0,s=H(e,{line:i.line+r-1,ch:W(e,i.line)},!0)):s=H(e,{line:i.line,ch:i.ch+r},!0),!t.repeatIsExplicit&&!n.visualLine?(e.setCursor(s),e.setSelection(s,i)):e.setSelection(i,s),CodeMirror.signal(e,"vim-mode-change",{mode:"visual",subMode:n.visualLine?"linewise":""})),at(e,n,"<",U(i,s)?i:s),at(e,n,">",U(i,s)?s:i)},joinLines:function(e,t,n){var r,i;if(n.visualMode)r=e.getCursor("anchor"),i=e.getCursor("head"),i.ch=W(e,i.line)-1;else{var s=Math.max(t.repeat,2);r=e.getCursor(),i=H(e,{line:r.line+s-1,ch:Infinity})}var o=0;e.operation(function(){for(var t=r.line;t<i.line;t++){o=W(e,r.line);var n={line:r.line+1,ch:W(e,r.line+1)},s=e.getRange(r,n);s=s.replace(/\n\s*/g," "),e.replaceRange(s,r,n)}var u={line:r.line,ch:o};e.setCursor(u)})},newLineAndEnterInsertMode:function(e,t,n){n.insertMode=!0;var r=e.getCursor();if(r.line===e.firstLine()&&!t.after)e.replaceRange("\n",{line:e.firstLine(),ch:0}),e.setCursor(e.firstLine(),0);else{r.line=t.after?r.line:r.line-1,r.ch=W(e,r.line),e.setCursor(r);var i=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;i(e)}this.enterInsertMode(e,{repeat:t.repeat},n)},paste:function(e,t){var n=e.getCursor(),r=T.registerController.getRegister(t.registerName);if(!r.text)return;for(var i="",s=0;s<t.repeat;s++)i+=r.text;var o=r.linewise;o?t.after?(i="\n"+i.slice(0,i.length-1),n.ch=W(e,n.line)):n.ch=0:n.ch+=t.after?1:0,e.replaceRange(i,n);var u,a;o&&t.after?u={line:n.line+1,ch:G(e.getLine(n.line+1))}:o&&!t.after?u={line:n.line,ch:G(e.getLine(n.line))}:!o&&t.after?(a=e.indexFromPos(n),u=e.posFromIndex(a+i.length-1)):(a=e.indexFromPos(n),u=e.posFromIndex(a+i.length)),e.setCursor(u)},undo:function(e,t){e.operation(function(){I(e,CodeMirror.commands.undo,t.repeat)(),e.setCursor(e.getCursor("anchor"))})},redo:function(e,t){I(e,CodeMirror.commands.redo,t.repeat)()},setRegister:function(e,t,n){n.inputState.registerName=t.selectedCharacter},setMark:function(e,t,n){var r=t.selectedCharacter;at(e,n,r,e.getCursor())},replace:function(e,t,n){var r=t.selectedCharacter,i=e.getCursor(),s,o;if(n.visualMode)i=e.getCursor("start"),o=e.getCursor("end"),o=e.clipPos({line:o.line,ch:o.ch+1});else{var u=e.getLine(i.line);s=i.ch+t.repeat,s>u.length&&(s=u.length),o={line:i.line,ch:s}}if(r=="\n")n.visualMode||e.replaceRange("",i,o),(CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent)(e);else{var a=e.getRange(i,o);a=a.replace(/[^\n]/g,r),e.replaceRange(a,i,o),n.visualMode?(e.setCursor(i),J(e)):e.setCursor(j(o,0,-1))}},incrementNumberToken:function(e,t){var n=e.getCursor(),r=e.getLine(n.line),i=/-?\d+/g,s,o,u,a,f;while((s=i.exec(r))!==null){f=s[0],o=s.index,u=o+f.length;if(n.ch<u)break}if(!t.backtrack&&u<=n.ch)return;if(!f)return;var l=t.increase?1:-1,c=parseInt(f)+l*t.repeat,h={ch:o,line:n.line},p={ch:u,line:n.line};a=c.toString(),e.replaceRange(a,h,p),e.setCursor({line:n.line,ch:o+a.length-1})},repeatLastEdit:function(e,t,n){var r=n.lastEditInputState;if(!r)return;var i=t.repeat;i&&t.repeatIsExplicit?n.lastEditInputState.repeatOverride=i:i=n.lastEditInputState.repeatOverride||i,$t(e,n,i,!1)}},P={w:function(e,t){return Y(e,t,!0,!1)},W:function(e,t){return Y(e,t,!0,!0)},"{":function(e,t){return ht(e,"}",t)},"(":function(e,t){return ht(e,")",t)},"[":function(e,t){return ht(e,"]",t)},"'":function(e,t){return pt(e,"'",t)},'"':function(e,t){return pt(e,'"',t)}},tt={"(":"bracket",")":"bracket","{":"bracket","}":"bracket","[":"section","]":"section","*":"comment","/":"comment",m:"method",M:"method","#":"preprocess"},nt={bracket:{isComplete:function(e){if(e.nextCh===e.symb){e.depth++;if(e.depth>=1)return!0}else e.nextCh===e.reverseSymb&&e.depth--;return!1}},section:{init:function(e){e.curMoveThrough=!0,e.symb=(e.forward?"]":"[")===e.symb?"{":"}"},isComplete:function(e){return e.index===0&&e.nextCh===e.symb}},comment:{isComplete:function(e){var t=e.lastCh==="*"&&e.nextCh==="/";return e.lastCh=e.nextCh,t}},method:{init:function(e){e.symb=e.symb==="m"?"{":"}",e.reverseSymb=e.symb==="{"?"}":"{"},isComplete:function(e){return e.nextCh===e.symb?!0:!1}},preprocess:{init:function(e){e.index=0},isComplete:function(e){if(e.nextCh==="#"){var t=e.lineText.match(/#(\w+)/)[1];if(t==="endif"){if(e.forward&&e.depth===0)return!0;e.depth++}else if(t==="if"){if(!e.forward&&e.depth===0)return!0;e.depth--}if(t==="else"&&e.depth===0)return!0}return!1}}};dt.prototype={getQuery:function(){return T.query},setQuery:function(e){T.query=e},getOverlay:function(){return this.searchOverlay},setOverlay:function(e){this.searchOverlay=e},isReversed:function(){return T.isReversed},setReversed:function(e){T.isReversed=e}};var Et="(Javascript regexp)",Mt=[{name:"map",type:"builtIn"},{name:"write",shortName:"w",type:"builtIn"},{name:"undo",shortName:"u",type:"builtIn"},{name:"redo",shortName:"red",type:"builtIn"},{name:"sort",shortName:"sor",type:"builtIn"},{name:"substitute",shortName:"s",type:"builtIn"},{name:"nohlsearch",shortName:"noh",type:"builtIn"},{name:"delmarks",shortName:"delm",type:"builtin"}];t.ExCommandDispatcher=function(){this.buildCommandMap_()},t.ExCommandDispatcher.prototype={processCommand:function(e,t){var n=e.state.vim;n.visualMode&&J(e);var r=new CodeMirror.StringStream(t),i={};i.input=t;try{this.parseInput_(e,r,i)}catch(s){bt(e,s);return}var o;if(!i.commandName)i.line!==undefined&&(o="move");else{var u=this.matchCommand_(i.commandName);if(u){o=u.name,this.parseCommandArgs_(r,i,u);if(u.type=="exToKey"){for(var a=0;a<u.toKeys.length;a++)CodeMirror.Vim.handleKey(e,u.toKeys[a]);return}if(u.type=="exToEx"){this.processCommand(e,u.toInput);return}}}if(!o){bt(e,'Not an editor command ":'+t+'"');return}try{Dt[o](e,i)}catch(s){bt(e,s)}},parseInput_:function(e,t,n){t.eatWhile(":"),t.eat("%")?(n.line=e.firstLine(),n.lineEnd=e.lastLine()):(n.line=this.parseLineSpec_(e,t),n.line!==undefined&&t.eat(",")&&(n.lineEnd=this.parseLineSpec_(e,t)));var r=t.match(/^(\w+)/);return r?n.commandName=r[1]:n.commandName=t.match(/.*/)[0],n},parseLineSpec_:function(e,t){var n=t.match(/^(\d+)/);if(n)return parseInt(n[1],10)-1;switch(t.next()){case".":return e.getCursor().line;case"$":return e.lastLine();case"'":var r=e.state.vim.marks[t.next()];if(r&&r.find())return r.find().line;throw new Error("Mark not set");default:return t.backUp(1),undefined}},parseCommandArgs_:function(e,t,n){if(e.eol())return;t.argString=e.match(/.*/)[0];var r=n.argDelimiter||/\s+/,i=V(t.argString).split(r);i.length&&i[0]&&(t.args=i)},matchCommand_:function(e){for(var t=e.length;t>0;t--){var n=e.substring(0,t);if(this.commandMap_[n]){var r=this.commandMap_[n];if(r.name.indexOf(e)===0)return r}}return null},buildCommandMap_:function(){this.commandMap_={};for(var e=0;e<Mt.length;e++){var t=Mt[e],n=t.shortName||t.name;this.commandMap_[n]=t}},map:function(t,n){if(t!=":"&&t.charAt(0)==":"){var r=t.substring(1);n!=":"&&n.charAt(0)==":"?this.commandMap_[r]={name:r,type:"exToEx",toInput:n.substring(1)}:this.commandMap_[r]={name:r,type:"exToKey",toKeys:_t(n)}}else n!=":"&&n.charAt(0)==":"?e.unshift({keys:_t(t),type:"keyToEx",exArgs:{input:n.substring(1)}}):e.unshift({keys:_t(t),type:"keyToKey",toKeys:_t(n)})}};var Dt={map:function(e,t){var n=t.args;if(!n||n.length<2){e&&bt(e,"Invalid mapping: "+t.input);return}Pt.map(n[0],n[1],e)},move:function(e,t){O.processCommand(e,e.state.vim,{type:"motion",motion:"moveToLineOrEdgeOfDocument",motionArgs:{forward:!1,explicitRepeat:!0,linewise:!0},repeatOverride:t.line+1})},sort:function(e,t){function o(){if(t.argString){var e=new CodeMirror.StringStream(t.argString);e.eat("!")&&(n=!0);if(e.eol())return;if(!e.eatSpace())throw new Error("invalid arguments "+e.match(/.*/)[0]);var o=e.match(/[a-z]+/);if(o){o=o[0],r=o.indexOf("i")!=-1,i=o.indexOf("u")!=-1;var u=o.indexOf("d")!=-1&&1,a=o.indexOf("x")!=-1&&1,f=o.indexOf("o")!=-1&&1;if(u+a+f>1)throw new Error("invalid arguments");s=u&&"decimal"||a&&"hex"||f&&"octal"}if(e.eatSpace()&&e.match(/\/.*\//))throw new Error("patterns not supported")}}function g(e,t){if(n){var i;i=e,e=t,t=i}r&&(e=e.toLowerCase(),t=t.toLowerCase());var o=s&&h.exec(e),u=s&&h.exec(t);return o?(o=parseInt((o[1]+o[2]).toLowerCase(),p),u=parseInt((u[1]+u[2]).toLowerCase(),p),o-u):e<t?-1:1}var n,r,i,s;o();var u=t.line||e.firstLine(),a=t.lineEnd||t.line||e.lastLine();if(u==a)return;var f={line:u,ch:0},l={line:a,ch:W(e,a)},c=e.getRange(f,l).split("\n"),h=s=="decimal"?/(-?)([\d]+)/:s=="hex"?/(-?)(?:0x)?([0-9a-f]+)/i:s=="octal"?/([0-7]+)/:null,p=s=="decimal"?10:s=="hex"?16:s=="octal"?8:null,d=[],v=[];if(s)for(var m=0;m<c.length;m++)h.exec(c[m])?d.push(c[m]):v.push(c[m]);else v=c;d.sort(g),v.sort(g),c=n?d.concat(v):v.concat(d);if(i){var y=c,b;c=[];for(var m=0;m<y.length;m++)y[m]!=b&&c.push(y[m]),b=y[m]}e.replaceRange(c.join("\n"),f,l)},substitute:function(e,t){if(!e.getSearchCursor)throw new Error("Search feature not available. Requires searchcursor.js or any other getSearchCursor implementation.");var n=t.argString,r=gt(n);if(r[0]!==0){bt(e,"Substitutions should be of the form :s/pattern/replace/");return}var i=n.substring(r[0]+1,r[1]),s="",o,u,a=!1;r[1]&&(s=n.substring(r[1]+1,r[2]));if(r[2]){var f=n.substring(r[2]+1).split(" ");o=f[0],u=parseInt(f[1])}o&&(o.indexOf("c")!=-1&&(a=!0,o.replace("c","")),i=i+"/"+o);if(i)try{Tt(e,i,!0,!0)}catch(l){bt(e,"Invalid regex: "+i);return}var c=vt(e),h=c.getQuery(),p=t.line!==undefined?t.line:e.getCursor().line,d=t.lineEnd||p;u&&(p=d,d=p+u-1);var v=H(e,{line:p,ch:0}),m=e.getSearchCursor(h,v);Ht(e,a,p,d,m,h,s)},redo:CodeMirror.commands.redo,undo:CodeMirror.commands.undo,write:function(e){CodeMirror.commands.save?CodeMirror.commands.save(e):e.save()},nohlsearch:function(e){Lt(e)},delmarks:function(e,t){if(!t.argString||!t.argString.trim()){bt(e,"Argument required");return}var n=e.state.vim,r=new CodeMirror.StringStream(t.argString.trim());while(!r.eol()){r.eatSpace();var i=r.pos;if(!r.match(/[a-zA-Z]/,!1)){bt(e,"Invalid argument: "+t.argString.substring(i));return}var s=r.next();if(r.match("-",!0)){if(!r.match(/[a-zA-Z]/,!1)){bt(e,"Invalid argument: "+t.argString.substring(i));return}var o=s,u=r.next();if(!(v(o)&&v(u)||y(o)&&y(u))){bt(e,"Invalid argument: "+o+"-");return}var a=o.charCodeAt(0),f=u.charCodeAt(0);if(a>=f){bt(e,"Invalid argument: "+t.argString.substring(i));return}for(var l=0;l<=f-a;l++){var c=String.fromCharCode(a+l);delete n.marks[c]}}else delete n.marks[s]}}},Pt=new t.ExCommandDispatcher;return CodeMirror.keyMap.vim=Bt(),CodeMirror.keyMap["vim-insert"]={Esc:jt,"Ctrl-[":jt,"Ctrl-C":jt,"Ctrl-N":"autocomplete","Ctrl-P":"autocomplete",Enter:function(e){var t=CodeMirror.commands.newlineAndIndentContinueComment||CodeMirror.commands.newlineAndIndent;t(e)},fallthrough:["default"]},CodeMirror.keyMap["vim-replace"]={Backspace:"goCharLeft",fallthrough:["vim-insert"]},N(),C};CodeMirror.Vim=t()}(),function(){"use strict";function t(e,t){return e.line==t.line&&e.ch==t.ch}function r(e){n.push(e),n.length>50&&n.shift()}function i(e){if(!n.length)return r(e);n[n.length-1]+=e}function s(e){return n[n.length-(e?Math.min(e,1):1)]||""}function o(){return n.length>1&&n.pop(),s()}function a(e,n,s,o,a){a==null&&(a=e.getRange(n,s)),o&&u&&u.cm==e&&t(n,u.pos)&&e.isClean(u.gen)?i(a):r(a),e.replaceRange("",n,s,"+delete"),o?u={cm:e,pos:n,gen:e.changeGeneration()}:u=null}function f(e,t,n){return e.findPosH(t,n,"char",!0)}function l(e,t,n){return e.findPosH(t,n,"word",!0)}function c(e,t,n){return e.findPosV(t,n,"line",e.doc.sel.goalColumn)}function h(e,t,n){return e.findPosV(t,n,"page",e.doc.sel.goalColumn)}function p(t,n,r){var i=n.line,s=t.getLine(i),o=/\S/.test(r<0?s.slice(0,n.ch):s.slice(n.ch)),u=t.firstLine(),a=t.lastLine();for(;;){i+=r;if(i<u||i>a)return t.clipPos(e(i-r,r<0?0:null));s=t.getLine(i);var f=/\S/.test(s);if(f)o=!0;else if(o)return e(i,0)}}function d(t,n,r){var i=n.line,s=n.ch,o=t.getLine(n.line),u=!1;for(;;){var a=o.charAt(s+(r<0?-1:0));if(!a){if(i==(r<0?t.firstLine():t.lastLine()))return e(i,s);o=t.getLine(i+r);if(!/\S/.test(o))return e(i,s);i+=r,s=r<0?o.length:0;continue}if(u&&/[!?.]/.test(a))return e(i,s+(r>0?1:0));u||(u=/\w/.test(a)),s+=r}}function v(n,r,i){var s;if(n.findMatchingBracket&&(s=n.findMatchingBracket(r,!0))&&s.match&&(s.forward?1:-1)==i)return i>0?e(s.to.line,s.to.ch+1):s.to;for(var o=!0;;o=!1){var u=n.getTokenAt(r),a=e(r.line,i<0?u.start:u.end);if(!(o&&i>0&&u.end==r.ch||!/\w/.test(u.string)))return a;var f=n.findPosH(a,i,"char");if(t(a,f))return r;r=f}}function m(e,t){var n=e.state.emacsPrefix;return n?(T(e),n=="-"?-1:Number(n)):t?null:1}function g(e){var t=typeof e=="string"?function(t){t.execCommand(e)}:e;return function(e){var n=m(e);t(e);for(var r=1;r<n;++r)t(e)}}function y(e,n,r){var i=e.getCursor(),s=m(e);s<0&&(r=-r,s=-s);for(var o=0;o<s;++o){var u=n(e,i,r);if(t(u,i))break;i=u}return i}function b(e,t){var n=function(n){n.extendSelection(y(n,e,t))};return n.motion=!0,n}function w(e,t,n){a(e,e.getCursor(),y(e,t,n),!0)}function E(e,t){if(e.state.emacsPrefix){t!="-"&&(e.state.emacsPrefix+=t);return}e.state.emacsPrefix=t,e.on("keyHandled",x),e.on("inputRead",N)}function x(e,t){!e.state.emacsPrefixMap&&!S.hasOwnProperty(t)&&T(e)}function T(e){e.state.emacsPrefix=null,e.off("keyHandled",x),e.off("inputRead",N)}function N(e,t){var n=m(e);if(n>1&&t.origin=="+input"){var r=t.text.join("\n"),i="";for(var s=1;s<n;++s)i+=r;e.replaceSelection(i,"end","+input")}}function C(e){e.state.emacsPrefixMap=!0,e.addKeyMap(D),e.on("keyHandled",k),e.on("inputRead",k)}function k(e,t){if(!(typeof t!="string"||!/^\d$/.test(t)&&t!="Ctrl-U"))return;e.removeKeyMap(D),e.state.emacsPrefixMap=!1,e.off("keyHandled",k),e.off("inputRead",k)}function L(e){e.setCursor(e.getCursor()),e.setExtending(!0),e.on("change",function(){e.setExtending(!1)})}function A(e,t,n){e.openDialog?e.openDialog(t+': <input type="text" style="width: 10em"/>',n,{bottom:!0}):n(prompt(t,""))}function O(e,t){var n=e.getCursor(),r=e.findPosH(n,1,"word");e.replaceRange(t(e.getRange(n,r)),n,r),e.setCursor(r)}function M(t){var n=t.getCursor(),r=n.line,i=n.ch,s=[];while(r>=t.firstLine()){var o=t.getLine(r);for(var u=i==null?o.length:i;u>0;){var i=o.charAt(--u);if(i==")")s.push("(");else if(i=="]")s.push("[");else if(i=="}")s.push("{");else if(/[\(\{\[]/.test(i)&&(!s.length||s.pop()!=i))return t.extendSelection(e(r,u))}--r,i=null}}function P(e){D[e]=function(t){E(t,e)},_["Ctrl-"+e]=function(t){E(t,e)},S["Ctrl-"+e]=!0}var e=CodeMirror.Pos,n=[],u=null,S={"Alt-G":!0,"Ctrl-X":!0,"Ctrl-Q":!0,"Ctrl-U":!0},_=CodeMirror.keyMap.emacs={"Ctrl-W":function(e){a(e,e.getCursor("start"),e.getCursor("end"))},"Ctrl-K":g(function(t){var n=t.getCursor(),r=t.clipPos(e(n.line)),i=t.getRange(n,r);/\S/.test(i)||(i+="\n",r=e(n.line+1,0)),a(t,n,r,!0,i)}),"Alt-W":function(e){r(e.getSelection())},"Ctrl-Y":function(e){var t=e.getCursor();e.replaceRange(s(m(e)),t,t,"paste"),e.setSelection(t,e.getCursor())},"Alt-Y":function(e){e.replaceSelection(o())},"Ctrl-Space":L,"Ctrl-Shift-2":L,"Ctrl-F":b(f,1),"Ctrl-B":b(f,-1),Right:b(f,1),Left:b(f,-1),"Ctrl-D":function(e){w(e,f,1)},Delete:function(e){w(e,f,1)},"Ctrl-H":function(e){w(e,f,-1)},Backspace:function(e){w(e,f,-1)},"Alt-F":b(l,1),"Alt-B":b(l,-1),"Alt-D":function(e){w(e,l,1)},"Alt-Backspace":function(e){w(e,l,-1)},"Ctrl-N":b(c,1),"Ctrl-P":b(c,-1),Down:b(c,1),Up:b(c,-1),"Ctrl-A":"goLineStart","Ctrl-E":"goLineEnd",End:"goLineEnd",Home:"goLineStart","Alt-V":b(h,-1),"Ctrl-V":b(h,1),PageUp:b(h,-1),PageDown:b(h,1),"Ctrl-Up":b(p,-1),"Ctrl-Down":b(p,1),"Alt-A":b(d,-1),"Alt-E":b(d,1),"Alt-K":function(e){w(e,d,1)},"Ctrl-Alt-K":function(e){w(e,v,1)},"Ctrl-Alt-Backspace":function(e){w(e,v,-1)},"Ctrl-Alt-F":b(v,1),"Ctrl-Alt-B":b(v,-1),"Shift-Ctrl-Alt-2":function(e){e.setSelection(y(e,v,1),e.getCursor())},"Ctrl-Alt-T":function(e){var t=v(e,e.getCursor(),-1),n=v(e,t,1),r=v(e,n,1),i=v(e,r,-1);e.replaceRange(e.getRange(i,r)+e.getRange(n,i)+e.getRange(t,n),t,r)},"Ctrl-Alt-U":g(M),"Alt-Space":function(t){var n=t.getCursor(),r=n.ch,i=n.ch,s=t.getLine(n.line);while(r&&/\s/.test(s.charAt(r-1)))--r;while(i<s.length&&/\s/.test(s.charAt(i)))++i;t.replaceRange(" ",e(n.line,r),e(n.line,i))},"Ctrl-O":g(function(e){e.replaceSelection("\n","start")}),"Ctrl-T":g(function(t){var n=t.getCursor();n.ch<t.getLine(n.line).length&&(n=e(n.line,n.ch+1));var r=t.findPosH(n,-2,"char"),i=t.getRange(r,n);if(i.length!=2)return;t.setSelection(r,n),t.replaceSelection(i.charAt(1)+i.charAt(0),"end")}),"Alt-C":g(function(e){O(e,function(e){var t=e.search(/\w/);return t==-1?e:e.slice(0,t)+e.charAt(t).toUpperCase()+e.slice(t+1).toLowerCase()})}),"Alt-U":g(function(e){O(e,function(e){return e.toUpperCase()})}),"Alt-L":g(function(e){O(e,function(e){return e.toLowerCase()})}),"Alt-;":"toggleComment","Ctrl-/":g("undo"),"Shift-Ctrl--":g("undo"),"Ctrl-Z":g("undo"),"Cmd-Z":g("undo"),"Shift-Alt-,":"goDocStart","Shift-Alt-.":"goDocEnd","Ctrl-S":"findNext","Ctrl-R":"findPrev","Ctrl-G":"clearSearch","Shift-Alt-5":"replace","Alt-/":"autocomplete","Ctrl-J":"newlineAndIndent",Enter:!1,Tab:"indentAuto","Alt-G":function(e){e.setOption("keyMap","emacs-Alt-G")},"Ctrl-X":function(e){e.setOption("keyMap","emacs-Ctrl-X")},"Ctrl-Q":function(e){e.setOption("keyMap","emacs-Ctrl-Q")},"Ctrl-U":C};CodeMirror.keyMap["emacs-Ctrl-X"]={Tab:function(e){e.indentSelection(m(e,!0)||e.getOption("indentUnit"))},"Ctrl-X":function(e){e.setSelection(e.getCursor("head"),e.getCursor("anchor"))},"Ctrl-S":"save","Ctrl-W":"save",S:"saveAll",F:"open",U:g("undo"),K:"close",Delete:function(e){a(e,e.getCursor(),d(e,e.getCursor(),1),!0)},auto:"emacs",nofallthrough:!0,disableInput:!0},CodeMirror.keyMap["emacs-Alt-G"]={G:function(e){var t=m(e,!0);if(t!=null&&t>0)return e.setCursor(t-1);A(e,"Goto line",function(t){var n;t&&!isNaN(n=Number(t))&&n==n|0&&n>0&&e.setCursor(n-1)})},auto:"emacs",nofallthrough:!0,disableInput:!0},CodeMirror.keyMap["emacs-Ctrl-Q"]={Tab:g("insertTab"),auto:"emacs",nofallthrough:!0};var D={"Ctrl-G":T};for(var H=0;H<10;++H)P(String(H));P("-")}(),function(){function t(t){this.tokens=[],this.tokens.links={},this.options=t||f.defaults,this.rules=e.normal,this.options.gfm&&(this.options.tables?this.rules=e.tables:this.rules=e.gfm)}function r(e,t){this.options=t||f.defaults,this.links=e,this.rules=n.normal;if(!this.links)throw new Error("Tokens array requires a `links` property.");this.options.gfm?this.options.breaks?this.rules=n.breaks:this.rules=n.gfm:this.options.pedantic&&(this.rules=n.pedantic)}function i(e){this.tokens=[],this.token=null,this.options=e||f.defaults}function s(e,t){return e.replace(t?/&/g:/&(?!#?\w+;)/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#39;")}function o(e,t){return e=e.source,t=t||"",function n(r,i){return r?(i=i.source||i,i=i.replace(/(^|[^\[])\^/g,"$1"),e=e.replace(r,i),n):new RegExp(e,t)}}function u(){}function a(e){var t=1,n,r;for(;t<arguments.length;t++){n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}function f(e,n){try{return n&&(n=a({},f.defaults,n)),i.parse(t.lex(e,n),n)}catch(r){r.message+="\nPlease report this to https://github.com/chjj/marked.";if((n||f.defaults).silent)return"<p>An error occured:</p><pre>"+s(r.message+"",!0)+"</pre>";throw r}}var e={newline:/^\n+/,code:/^( {4}[^\n]+\n*)+/,fences:u,hr:/^( *[-*_]){3,} *(?:\n+|$)/,heading:/^ *(#{1,6}) *([^\n]+?) *#* *(?:\n+|$)/,nptable:u,lheading:/^([^\n]+)\n *(=|-){3,} *\n*/,blockquote:/^( *>[^\n]+(\n[^\n]+)*\n*)+/,list:/^( *)(bull) [\s\S]+?(?:hr|\n{2,}(?! )(?!\1bull )\n*|\s*$)/,html:/^ *(?:comment|closed|closing) *(?:\n{2,}|\s*$)/,def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +["(]([^\n]+)[")])? *(?:\n+|$)/,table:u,paragraph:/^((?:[^\n]+\n?(?!hr|heading|lheading|blockquote|tag|def))+)\n*/,text:/^[^\n]+/};e.bullet=/(?:[*+-]|\d+\.)/,e.item=/^( *)(bull) [^\n]*(?:\n(?!\1bull )[^\n]*)*/,e.item=o(e.item,"gm")(/bull/g,e.bullet)(),e.list=o(e.list)(/bull/g,e.bullet)("hr",/\n+(?=(?: *[-*_]){3,} *(?:\n+|$))/)(),e._tag="(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:/|@)\\b",e.html=o(e.html)("comment",/<!--[\s\S]*?-->/)("closed",/<(tag)[\s\S]+?<\/\1>/)("closing",/<tag(?:"[^"]*"|'[^']*'|[^'">])*?>/)(/tag/g,e._tag)(),e.paragraph=o(e.paragraph)("hr",e.hr)("heading",e.heading)("lheading",e.lheading)("blockquote",e.blockquote)("tag","<"+e._tag)("def",e.def)(),e.normal=a({},e),e.gfm=a({},e.normal,{fences:/^ *(`{3,}|~{3,}) *(\w+)? *\n([\s\S]+?)\s*\1 *(?:\n+|$)/,paragraph:/^/}),e.gfm.paragraph=o(e.paragraph)("(?!","(?!"+e.gfm.fences.source.replace("\\1","\\2")+"|")(),e.tables=a({},e.gfm,{nptable:/^ *(\S.*\|.*)\n *([-:]+ *\|[-| :]*)\n((?:.*\|.*(?:\n|$))*)\n*/,table:/^ *\|(.+)\n *\|( *[-:]+[-| :]*)\n((?: *\|.*(?:\n|$))*)\n*/}),t.rules=e,t.lex=function(e,n){var r=new t(n);return r.lex(e)},t.prototype.lex=function(e){return e=e.replace(/\r\n|\r/g,"\n").replace(/\t/g,"    ").replace(/\u00a0/g," ").replace(/\u2424/g,"\n"),this.token(e,!0)},t.prototype.token=function(t,n){var t=t.replace(/^ +$/gm,""),r,i,s,o,u,a,f,l,c;while(t){if(s=this.rules.newline.exec(t))t=t.substring(s[0].length),s[0].length>1&&this.tokens.push({type:"space"});if(s=this.rules.code.exec(t)){t=t.substring(s[0].length),s=s[0].replace(/^ {4}/gm,""),this.tokens.push({type:"code",text:this.options.pedantic?s:s.replace(/\n+$/,"")});continue}if(s=this.rules.fences.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"code",lang:s[2],text:s[3]});continue}if(s=this.rules.heading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[1].length,text:s[2]});continue}if(n&&(s=this.rules.nptable.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].split(/ *\| */);this.tokens.push(a);continue}if(s=this.rules.lheading.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"heading",depth:s[2]==="="?1:2,text:s[1]});continue}if(s=this.rules.hr.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"hr"});continue}if(s=this.rules.blockquote.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"blockquote_start"}),s=s[0].replace(/^ *> ?/gm,""),this.token(s,n),this.tokens.push({type:"blockquote_end"});continue}if(s=this.rules.list.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"list_start",ordered:isFinite(s[2])}),s=s[0].match(this.rules.item),this.options.smartLists&&(o=e.bullet.exec(s[0])[0]),r=!1,c=s.length,l=0;for(;l<c;l++)a=s[l],f=a.length,a=a.replace(/^ *([*+-]|\d+\.) +/,""),~a.indexOf("\n ")&&(f-=a.length,a=this.options.pedantic?a.replace(/^ {1,4}/gm,""):a.replace(new RegExp("^ {1,"+f+"}","gm"),"")),this.options.smartLists&&l!==c-1&&(u=e.bullet.exec(s[l+1])[0],o!==u&&(o[1]!=="."||u[1]!==".")&&(t=s.slice(l+1).join("\n")+t,l=c-1)),i=r||/\n\n(?!\s*$)/.test(a),l!==c-1&&(r=a[a.length-1]==="\n",i||(i=r)),this.tokens.push({type:i?"loose_item_start":"list_item_start"}),this.token(a,!1),this.tokens.push({type:"list_item_end"});this.tokens.push({type:"list_end"});continue}if(s=this.rules.html.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:this.options.sanitize?"paragraph":"html",pre:s[1]==="pre",text:s[0]});continue}if(n&&(s=this.rules.def.exec(t))){t=t.substring(s[0].length),this.tokens.links[s[1].toLowerCase()]={href:s[2],title:s[3]};continue}if(n&&(s=this.rules.table.exec(t))){t=t.substring(s[0].length),a={type:"table",header:s[1].replace(/^ *| *\| *$/g,"").split(/ *\| */),align:s[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:s[3].replace(/(?: *\| *)?\n$/,"").split("\n")};for(l=0;l<a.align.length;l++)/^ *-+: *$/.test(a.align[l])?a.align[l]="right":/^ *:-+: *$/.test(a.align[l])?a.align[l]="center":/^ *:-+ *$/.test(a.align[l])?a.align[l]="left":a.align[l]=null;for(l=0;l<a.cells.length;l++)a.cells[l]=a.cells[l].replace(/^ *\| *| *\| *$/g,"").split(/ *\| */);this.tokens.push(a);continue}if(n&&(s=this.rules.paragraph.exec(t))){t=t.substring(s[0].length),this.tokens.push({type:"paragraph",text:s[1][s[1].length-1]==="\n"?s[1].slice(0,-1):s[1]});continue}if(s=this.rules.text.exec(t)){t=t.substring(s[0].length),this.tokens.push({type:"text",text:s[0]});continue}if(t)throw new Error("Infinite loop on byte: "+t.charCodeAt(0))}return this.tokens};var n={escape:/^\\([\\`*{}\[\]()#+\-.!_>])/,autolink:/^<([^ >]+(@|:\/)[^ >]+)>/,url:u,tag:/^<!--[\s\S]*?-->|^<\/?\w+(?:"[^"]*"|'[^']*'|[^'">])*?>/,link:/^!?\[(inside)\]\(href\)/,reflink:/^!?\[(inside)\]\s*\[([^\]]*)\]/,nolink:/^!?\[((?:\[[^\]]*\]|[^\[\]])*)\]/,strong:/^__([\s\S]+?)__(?!_)|^\*\*([\s\S]+?)\*\*(?!\*)/,em:/^\b_((?:__|[\s\S])+?)_\b|^\*((?:\*\*|[\s\S])+?)\*(?!\*)/,code:/^(`+)\s*([\s\S]*?[^`])\s*\1(?!`)/,br:/^ {2,}\n(?!\s*$)/,del:u,text:/^[\s\S]+?(?=[\\<!\[_*`]| {2,}\n|$)/};n._inside=/(?:\[[^\]]*\]|[^\]]|\](?=[^\[]*\]))*/,n._href=/\s*<?([^\s]*?)>?(?:\s+['"]([\s\S]*?)['"])?\s*/,n.link=o(n.link)("inside",n._inside)("href",n._href)(),n.reflink=o(n.reflink)("inside",n._inside)(),n.normal=a({},n),n.pedantic=a({},n.normal,{strong:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,em:/^_(?=\S)([\s\S]*?\S)_(?!_)|^\*(?=\S)([\s\S]*?\S)\*(?!\*)/}),n.gfm=a({},n.normal,{escape:o(n.escape)("])","~|])")(),url:/^(https?:\/\/[^\s<]+[^<.,:;"')\]\s])/,del:/^~~(?=\S)([\s\S]*?\S)~~/,text:o(n.text)("]|","~]|")("|","|https?://|")()}),n.breaks=a({},n.gfm,{br:o(n.br)("{2,}","*")(),text:o(n.gfm.text)("{2,}","*")()}),r.rules=n,r.output=function(e,t,n){var i=new r(t,n);return i.output(e)},r.prototype.output=function(e){var t="",n,r,i,o;while(e){if(o=this.rules.escape.exec(e)){e=e.substring(o[0].length),t+=o[1];continue}if(o=this.rules.autolink.exec(e)){e=e.substring(o[0].length),o[2]==="@"?(r=o[1][6]===":"?this.mangle(o[1].substring(7)):this.mangle(o[1]),i=this.mangle("mailto:")+r):(r=s(o[1]),i=r),t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.url.exec(e)){e=e.substring(o[0].length),r=s(o[1]),i=r,t+='<a href="'+i+'">'+r+"</a>";continue}if(o=this.rules.tag.exec(e)){e=e.substring(o[0].length),t+=this.options.sanitize?s(o[0]):o[0];continue}if(o=this.rules.link.exec(e)){e=e.substring(o[0].length),t+=this.outputLink(o,{href:o[2],title:o[3]});continue}if((o=this.rules.reflink.exec(e))||(o=this.rules.nolink.exec(e))){e=e.substring(o[0].length),n=(o[2]||o[1]).replace(/\s+/g," "),n=this.links[n.toLowerCase()];if(!n||!n.href){t+=o[0][0],e=o[0].substring(1)+e;continue}t+=this.outputLink(o,n);continue}if(o=this.rules.strong.exec(e)){e=e.substring(o[0].length),t+="<strong>"+this.output(o[2]||o[1])+"</strong>";continue}if(o=this.rules.em.exec(e)){e=e.substring(o[0].length),t+="<em>"+this.output(o[2]||o[1])+"</em>";continue}if(o=this.rules.code.exec(e)){e=e.substring(o[0].length),t+="<code>"+s(o[2],!0)+"</code>";continue}if(o=this.rules.br.exec(e)){e=e.substring(o[0].length),t+="<br>";continue}if(o=this.rules.del.exec(e)){e=e.substring(o[0].length),t+="<del>"+this.output(o[1])+"</del>";continue}if(o=this.rules.text.exec(e)){e=e.substring(o[0].length),t+=s(o[0]);continue}if(e)throw new Error("Infinite loop on byte: "+e.charCodeAt(0))}return t},r.prototype.outputLink=function(e,t){return e[0][0]!=="!"?'<a href="'+s(t.href)+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"+this.output(e[1])+"</a>":'<img src="'+s(t.href)+'" alt="'+s(e[1])+'"'+(t.title?' title="'+s(t.title)+'"':"")+">"},r.prototype.mangle=function(e){var t="",n=e.length,r=0,i;for(;r<n;r++)i=e.charCodeAt(r),Math.random()>.5&&(i="x"+i.toString(16)),t+="&#"+i+";";return t},i.parse=function(e,t){var n=new i(t);return n.parse(e)},i.prototype.parse=function(e){this.inline=new r(e.links,this.options),this.tokens=e.reverse();var t="";while(this.next())t+=this.tok();return t},i.prototype.next=function(){return this.token=this.tokens.pop()},i.prototype.peek=function(){return this.tokens[this.tokens.length-1]||0},i.prototype.parseText=function(){var e=this.token.text;while(this.peek().type==="text")e+="\n"+this.next().text;return this.inline.output(e)},i.prototype.tok=function(){switch(this.token.type){case"space":return"";case"hr":return"<hr>\n";case"heading":return"<h"+this.token.depth+">"+this.inline.output(this.token.text)+"</h"+this.token.depth+">\n";case"code":if(this.options.highlight){var e=this.options.highlight(this.token.text,this.token.lang);e!=null&&e!==this.token.text&&(this.token.escaped=!0,this.token.text=e)}return this.token.escaped||(this.token.text=s(this.token.text,!0)),"<pre><code"+(this.token.lang?' class="'+this.options.langPrefix+this.token.lang+'"':"")+">"+this.token.text+"</code></pre>\n";case"table":var t="",n,r,i,o,u;t+="<thead>\n<tr>\n";for(r=0;r<this.token.header.length;r++)n=this.inline.output(this.token.header[r]),t+=this.token.align[r]?'<th align="'+this.token.align[r]+'">'+n+"</th>\n":"<th>"+n+"</th>\n";t+="</tr>\n</thead>\n",t+="<tbody>\n";for(r=0;r<this.token.cells.length;r++){i=this.token.cells[r],t+="<tr>\n";for(u=0;u<i.length;u++)o=this.inline.output(i[u]),t+=this.token.align[u]?'<td align="'+this.token.align[u]+'">'+o+"</td>\n":"<td>"+o+"</td>\n";t+="</tr>\n"}return t+="</tbody>\n","<table>\n"+t+"</table>\n";case"blockquote_start":var t="";while(this.next().type!=="blockquote_end")t+=this.tok();return"<blockquote>\n"+t+"</blockquote>\n";case"list_start":var a=this.token.ordered?"ol":"ul",t="";while(this.next().type!=="list_end")t+=this.tok();return"<"+a+">\n"+t+"</"+a+">\n";case"list_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.token.type==="text"?this.parseText():this.tok();return"<li>"+t+"</li>\n";case"loose_item_start":var t="";while(this.next().type!=="list_item_end")t+=this.tok();return"<li>"+t+"</li>\n";case"html":return!this.token.pre&&!this.options.pedantic?this.inline.output(this.token.text):this.token.text;case"paragraph":return"<p>"+this.inline.output(this.token.text)+"</p>\n";case"text":return"<p>"+this.parseText()+"</p>\n"}},u.exec=u,f.options=f.setOptions=function(e){return a(f.defaults,e),f},f.defaults={gfm:!0,tables:!0,breaks:!1,pedantic:!1,sanitize:!1,smartLists:!1,silent:!1,highlight:null,langPrefix:"lang-"},f.Parser=i,f.parser=i.parse,f.Lexer=t,f.lexer=t.lex,f.InlineLexer=r,f.inlineLexer=r.output,f.parse=f,typeof exports=="object"?module.exports=f:typeof define=="function"&&define.amd?define(function(){return f}):this.marked=f}.call(function(){return this||(typeof window!="undefined"?window:global)}());var hljs=new function(){function e(e){return e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function t(e){for(var t=e.firstChild;t;t=t.nextSibling){if(t.nodeName=="CODE")return t;if(t.nodeType!=3||!t.nodeValue.match(/\s+/))break}}function n(e,t){return Array.prototype.map.call(e.childNodes,function(e){return e.nodeType==3?t?e.nodeValue.replace(/\n/g,""):e.nodeValue:e.nodeName=="BR"?"\n":n(e,t)}).join("")}function r(e){var t=(e.className+" "+e.parentNode.className).split(/\s+/);t=t.map(function(e){return e.replace(/^language-/,"")});for(var n=0;n<t.length;n++)if(p[t[n]]||t[n]=="no-highlight")return t[n]}function i(e){var t=[];return function n(e,r){for(var i=e.firstChild;i;i=i.nextSibling)i.nodeType==3?r+=i.nodeValue.length:i.nodeName=="BR"?r+=1:i.nodeType==1&&(t.push({event:"start",offset:r,node:i}),r=n(i,r),t.push({event:"stop",offset:r,node:i}));return r}(e,0),t}function s(t,n,r){function u(){return t.length&&n.length?t[0].offset!=n[0].offset?t[0].offset<n[0].offset?t:n:n[0].event=="start"?t:n:t.length?t:n}function a(t){function n(t){return" "+t.nodeName+'="'+e(t.value)+'"'}return"<"+t.nodeName+Array.prototype.map.call(t.attributes,n).join("")+">"}var i=0,s="",o=[];while(t.length||n.length){var f=u().splice(0,1)[0];s+=e(r.substr(i,f.offset-i)),i=f.offset;if(f.event=="start")s+=a(f.node),o.push(f.node);else if(f.event=="stop"){var l,c=o.length;do c--,l=o[c],s+="</"+l.nodeName.toLowerCase()+">";while(l!=f.node);o.splice(c,1);while(c<o.length)s+=a(o[c]),c++}}return s+e(r.substr(i))}function o(e){function t(t,n){return RegExp(t,"m"+(e.cI?"i":"")+(n?"g":""))}function n(e,r){if(e.compiled)return;e.compiled=!0;var i=[];if(e.k){var s={};function o(e,t){t.split(" ").forEach(function(t){var n=t.split("|");s[n[0]]=[e,n[1]?Number(n[1]):1],i.push(n[0])})}e.lR=t(e.l||hljs.IR,!0);if(typeof e.k=="string")o("keyword",e.k);else for(var u in e.k){if(!e.k.hasOwnProperty(u))continue;o(u,e.k[u])}e.k=s}r&&(e.bWK&&(e.b="\\b("+i.join("|")+")\\s"),e.bR=t(e.b?e.b:"\\B|\\b"),!e.e&&!e.eW&&(e.e="\\B|\\b"),e.e&&(e.eR=t(e.e)),e.tE=e.e||"",e.eW&&r.tE&&(e.tE+=(e.e?"|":"")+r.tE)),e.i&&(e.iR=t(e.i)),e.r===undefined&&(e.r=1),e.c||(e.c=[]);for(var a=0;a<e.c.length;a++)e.c[a]=="self"&&
(e.c[a]=e),n(e.c[a],e);e.starts&&n(e.starts,r);var f=[];for(var a=0;a<e.c.length;a++)f.push(e.c[a].b);e.tE&&f.push(e.tE),e.i&&f.push(e.i),e.t=f.length?t(f.join("|"),!0):{exec:function(e){return null}}}n(e)}function u(t,n){function r(e,t){for(var n=0;n<t.c.length;n++){var r=t.c[n].bR.exec(e);if(r&&r.index==0)return t.c[n]}}function i(e,t){if(e.e&&e.eR.test(t))return e;if(e.eW)return i(e.parent,t)}function s(e,t){return t.i&&t.iR.test(e)}function f(e,t){var n=y.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function l(){var t=e(w);if(!b.k)return t;var n="",r=0;b.lR.lastIndex=0;var i=b.lR.exec(t);while(i){n+=t.substr(r,i.index-r);var s=f(b,i);s?(S+=s[1],n+='<span class="'+s[0]+'">'+i[0]+"</span>"):n+=i[0],r=b.lR.lastIndex,i=b.lR.exec(t)}return n+t.substr(r)}function c(){if(b.sL&&!p[b.sL])return e(w);var t=b.sL?u(b.sL,w):a(w);return b.r>0&&(S+=t.keyword_count,E+=t.r),'<span class="'+t.language+'">'+t.value+"</span>"}function h(){return b.sL!==undefined?c():l()}function v(t,n){var r=t.cN?'<span class="'+t.cN+'">':"";t.rB?(x+=r,w=""):t.eB?(x+=e(n)+r,w=""):(x+=r,w=n),b=Object.create(t,{parent:{value:b}}),E+=t.r}function m(t,n){w+=t;if(n===undefined)return x+=h(),0;var o=r(n,b);if(o)return x+=h(),v(o,n),o.rB?0:n.length;var u=i(b,n);if(u){!u.rE&&!u.eE&&(w+=n),x+=h();do b.cN&&(x+="</span>"),b=b.parent;while(b!=u.parent);return u.eE&&(x+=e(n)),w="",u.starts&&v(u.starts,""),u.rE?0:n.length}if(s(n,b))throw"Illegal";return w+=n,n.length||1}var y=p[t];o(y);var b=y,w="",E=0,S=0,x="";try{var T,N,C=0;for(;;){b.t.lastIndex=C,T=b.t.exec(n);if(!T)break;N=m(n.substr(C,T.index-C),T[0]),C=T.index+N}return m(n.substr(C)),{r:E,keyword_count:S,value:x,language:t}}catch(k){if(k=="Illegal")return{r:0,keyword_count:0,value:e(n)};throw k}}function a(t){var n={keyword_count:0,r:0,value:e(t)},r=n;for(var i in p){if(!p.hasOwnProperty(i))continue;var s=u(i,t);s.language=i,s.keyword_count+s.r>r.keyword_count+r.r&&(r=s),s.keyword_count+s.r>n.keyword_count+n.r&&(r=n,n=s)}return r.language&&(n.second_best=r),n}function f(e,t,n){return t&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,n,r,i){return n.replace(/\t/g,t)})),n&&(e=e.replace(/\n/g,"<br>")),e}function l(e,t,o){var l=n(e,o),c=r(e);if(c=="no-highlight")return;var h=c?u(c,l):a(l);c=h.language;var p=i(e);if(p.length){var v=document.createElement("pre");v.innerHTML=h.value,h.value=s(p,i(v),l)}h.value=f(h.value,t,o);var m=e.className;m.match("(\\s|^)(language-)?"+c+"(\\s|$)")||(m=m?m+" "+c:c),e.innerHTML=h.value,e.className=m,e.result={language:c,kw:h.keyword_count,re:h.r},h.second_best&&(e.second_best={language:h.second_best.language,kw:h.second_best.keyword_count,re:h.second_best.r})}function c(){if(c.called)return;c.called=!0,Array.prototype.map.call(document.getElementsByTagName("pre"),t).filter(Boolean).forEach(function(e){l(e,hljs.tabReplace)})}function h(){window.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)}var p={};this.LANGUAGES=p,this.highlight=u,this.highlightAuto=a,this.fixMarkup=f,this.highlightBlock=l,this.initHighlighting=c,this.initHighlightingOnLoad=h,this.IR="[a-zA-Z][a-zA-Z0-9_]*",this.UIR="[a-zA-Z_][a-zA-Z0-9_]*",this.NR="\\b\\d+(\\.\\d+)?",this.CNR="(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",this.BNR="\\b(0b[01]+)",this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",this.BE={b:"\\\\[\\s\\S]",r:0},this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0},this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0},this.CLCM={cN:"comment",b:"//",e:"$"},this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"},this.HCM={cN:"comment",b:"#",e:"$"},this.NM={cN:"number",b:this.NR,r:0},this.CNM={cN:"number",b:this.CNR,r:0},this.BNM={cN:"number",b:this.BNR,r:0},this.inherit=function(e,t){var n={};for(var r in e)n[r]=e[r];if(t)for(var r in t)n[r]=t[r];return n}};hljs.LANGUAGES.cs=function(e){return{k:"abstract as base bool break byte case catch char checked class const continue decimal default delegate do double else enum event explicit extern false finally fixed float for foreach goto if implicit in int interface internal is lock long namespace new null object operator out override params private protected public readonly ref return sbyte sealed short sizeof stackalloc static string struct switch this throw true try typeof uint ulong unchecked unsafe ushort using virtual volatile void while ascending descending from get group into join let orderby partial select set value var where yield",c:[{cN:"comment",b:"///",e:"$",rB:!0,c:[{cN:"xmlDocTag",b:"///|<!--|-->"},{cN:"xmlDocTag",b:"</?",e:">"}]},e.CLCM,e.CBLCLM,{cN:"preprocessor",b:"#",e:"$",k:"if else elif endif define undef warning error line region endregion pragma checksum"},{cN:"string",b:'@"',e:'"',c:[{b:'""'}]},e.ASM,e.QSM,e.CNM]}}(hljs),hljs.LANGUAGES.ruby=function(e){var t="[a-zA-Z_][a-zA-Z0-9_]*(\\!|\\?)?",n="[a-zA-Z_]\\w*[!?=]?|[-+~]\\@|<<|>>|=~|===?|<=>|[<>]=?|\\*\\*|[-/+%^&*~`|]|\\[\\]=?",r={keyword:"and false then defined module in return redo if BEGIN retry end for true self when next until do begin unless END rescue nil else break undef not super class case require yield alias while ensure elsif or include"},i={cN:"yardoctag",b:"@[A-Za-z]+"},s=[{cN:"comment",b:"#",e:"$",c:[i]},{cN:"comment",b:"^\\=begin",e:"^\\=end",c:[i],r:10},{cN:"comment",b:"^__END__",e:"\\n$"}],o={cN:"subst",b:"#\\{",e:"}",l:t,k:r},u=[e.BE,o],a=[{cN:"string",b:"'",e:"'",c:u,r:0},{cN:"string",b:'"',e:'"',c:u,r:0},{cN:"string",b:"%[qw]?\\(",e:"\\)",c:u},{cN:"string",b:"%[qw]?\\[",e:"\\]",c:u},{cN:"string",b:"%[qw]?{",e:"}",c:u},{cN:"string",b:"%[qw]?<",e:">",c:u,r:10},{cN:"string",b:"%[qw]?/",e:"/",c:u,r:10},{cN:"string",b:"%[qw]?%",e:"%",c:u,r:10},{cN:"string",b:"%[qw]?-",e:"-",c:u,r:10},{cN:"string",b:"%[qw]?\\|",e:"\\|",c:u,r:10}],f={cN:"function",bWK:!0,e:" |$|;",k:"def",c:[{cN:"title",b:n,l:t,k:r},{cN:"params",b:"\\(",e:"\\)",l:t,k:r}].concat(s)},l=s.concat(a.concat([{cN:"class",bWK:!0,e:"$|;",k:"class module",c:[{cN:"title",b:"[A-Za-z_]\\w*(::\\w+)*(\\?|\\!)?",r:0},{cN:"inheritance",b:"<\\s*",c:[{cN:"parent",b:"("+e.IR+"::)?"+e.IR}]}].concat(s)},f,{cN:"constant",b:"(::)?(\\b[A-Z]\\w*(::)?)+",r:0},{cN:"symbol",b:":",c:a.concat([{b:n}]),r:0},{cN:"symbol",b:t+":",r:0},{cN:"number",b:"(\\b0[0-7_]+)|(\\b0x[0-9a-fA-F_]+)|(\\b[1-9][0-9_]*(\\.[0-9_]+)?)|[0_]\\b",r:0},{cN:"number",b:"\\?\\w"},{cN:"variable",b:"(\\$\\W)|((\\$|\\@\\@?)(\\w+))"},{b:"("+e.RSR+")\\s*",c:s.concat([{cN:"regexp",b:"/",e:"/[a-z]*",i:"\\n",c:[e.BE,o]}]),r:0}]));return o.c=l,f.c[1].c=l,{l:t,k:r,c:l}}(hljs),hljs.LANGUAGES.javascript=function(e){return{k:{keyword:"in if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const",literal:"true false null undefined NaN Infinity"},c:[e.ASM,e.QSM,e.CLCM,e.CBLCLM,e.CNM,{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBLCLM,{cN:"regexp",b:"/",e:"/[gim]*",i:"\\n",c:[{b:"\\\\/"}]},{b:"<",e:">;",sL:"xml"}],r:0},{cN:"function",bWK:!0,e:"{",k:"function",c:[{cN:"title",b:"[A-Za-z$_][0-9A-Za-z$_]*"},{cN:"params",b:"\\(",e:"\\)",c:[e.CLCM,e.CBLCLM],i:"[\"'\\(]"}],i:"\\[|%"}]}}(hljs),hljs.LANGUAGES.css=function(e){var t={cN:"function",b:e.IR+"\\(",e:"\\)",c:[e.NM,e.ASM,e.QSM]};return{cI:!0,i:"[=/|']",c:[e.CBLCLM,{cN:"id",b:"\\#[A-Za-z0-9_-]+"},{cN:"class",b:"\\.[A-Za-z0-9_-]+",r:0},{cN:"attr_selector",b:"\\[",e:"\\]",i:"$"},{cN:"pseudo",b:":(:)?[a-zA-Z0-9\\_\\-\\+\\(\\)\\\"\\']+"},{cN:"at_rule",b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{cN:"at_rule",b:"@",e:"[{;]",eE:!0,k:"import page media charset",c:[t,e.ASM,e.QSM,e.NM]},{cN:"tag",b:e.IR,r:0},{cN:"rules",b:"{",e:"}",i:"[^\\s]",r:0,c:[e.CBLCLM,{cN:"rule",b:"[^\\s]",rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:"[A-Z\\_\\.\\-]+",e:":",eE:!0,i:"[^\\s]",starts:{cN:"value",eW:!0,eE:!0,c:[t,e.NM,e.QSM,e.ASM,e.CBLCLM,{cN:"hexcolor",b:"\\#[0-9A-F]+"},{cN:"important",b:"!important"}]}}]}]}]}}(hljs),hljs.LANGUAGES.xml=function(e){var t="[A-Za-z0-9\\._:-]+",n={eW:!0,c:[{cN:"attribute",b:t,r:0},{b:'="',rB:!0,e:'"',c:[{cN:"value",b:'"',eW:!0}]},{b:"='",rB:!0,e:"'",c:[{cN:"value",b:"'",eW:!0}]},{b:"=",c:[{cN:"value",b:"[^\\s/>]+"}]}]};return{cI:!0,c:[{cN:"pi",b:"<\\?",e:"\\?>",r:10},{cN:"doctype",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},{cN:"comment",b:"<!--",e:"-->",r:10},{cN:"cdata",b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{title:"style"},c:[n],starts:{e:"</style>",rE:!0,sL:"css"}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{title:"script"},c:[n],starts:{e:"</script>",rE:!0,sL:"javascript"}},{b:"<%",e:"%>",sL:"vbscript"},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"title",b:"[^ />]+"},n]}]}}(hljs),hljs.LANGUAGES.java=function(e){return{k:"false synchronized int abstract float private char boolean static null if const for true while long throw strictfp finally protected import native final return void enum else break transient new catch instanceof byte super volatile case assert short package default double public try this switch continue throws",c:[{cN:"javadoc",b:"/\\*\\*",e:"\\*/",c:[{cN:"javadoctag",b:"@[A-Za-z]+"}],r:10},e.CLCM,e.CBLCLM,e.ASM,e.QSM,{cN:"class",bWK:!0,e:"{",k:"class interface",i:":",c:[{bWK:!0,k:"extends implements",r:10},{cN:"title",b:e.UIR}]},e.CNM,{cN:"annotation",b:"@[A-Za-z]+"}]}}(hljs),hljs.LANGUAGES.python=function(e){var t={cN:"prompt",b:"^(>>>|\\.\\.\\.) "},n=[{cN:"string",b:"(u|b)?r?'''",e:"'''",c:[t],r:10},{cN:"string",b:'(u|b)?r?"""',e:'"""',c:[t],r:10},{cN:"string",b:"(u|r|ur)'",e:"'",c:[e.BE],r:10},{cN:"string",b:'(u|r|ur)"',e:'"',c:[e.BE],r:10},{cN:"string",b:"(b|br)'",e:"'",c:[e.BE]},{cN:"string",b:'(b|br)"',e:'"',c:[e.BE]}].concat([e.ASM,e.QSM]),r={cN:"title",b:e.UIR},i={cN:"params",b:"\\(",e:"\\)",c:["self",e.CNM,t].concat(n)},s={bWK:!0,e:":",i:"[${=;\\n]",c:[r,i],r:10};return{k:{keyword:"and elif is global as in if from raise for except finally print import pass return exec else break not with class assert yield try while continue del or def lambda nonlocal|10",built_in:"None True False Ellipsis NotImplemented"},i:"(</|->|\\?)",c:n.concat([t,e.HCM,e.inherit(s,{cN:"function",k:"def"}),e.inherit(s,{cN:"class",k:"class"}),e.CNM,{cN:"decorator",b:"@",e:"$"},{b:"\\b(print|exec)\\("}])}}(hljs),hljs.LANGUAGES.coffeescript=function(e){var t={keyword:"in if for while finally new do return else break catch instanceof throw try this switch continue typeof delete debugger super then unless until loop of by when and or is isnt not",literal:"true false null undefined yes no on off ",reserved:"case default function var void with const let enum export import native __hasProp __extends __slice __bind __indexOf"},n="[A-Za-z$_][0-9A-Za-z$_]*",r={cN:"title",b:n},i={cN:"subst",b:"#\\{",e:"}",k:t,c:[e.BNM,e.CNM]};return{k:t,c:[e.BNM,e.CNM,e.ASM,{cN:"string",b:'"""',e:'"""',c:[e.BE,i]},{cN:"string",b:'"',e:'"',c:[e.BE,i],r:0},{cN:"comment",b:"###",e:"###"},e.HCM,{cN:"regexp",b:"///",e:"///",c:[e.HCM]},{cN:"regexp",b:"//[gim]*"},{cN:"regexp",b:"/\\S(\\\\.|[^\\n])*/[gim]*"},{b:"`",e:"`",eB:!0,eE:!0,sL:"javascript"},{cN:"function",b:n+"\\s*=\\s*(\\(.+\\))?\\s*[-=]>",rB:!0,c:[r,{cN:"params",b:"\\(",e:"\\)"}]},{cN:"class",bWK:!0,k:"class",e:"$",i:":",c:[{bWK:!0,k:"extends",eW:!0,i:":",c:[r]},r]},{cN:"property",b:"@"+n}]}}(hljs),function(e){typeof module=="function"?module.exports=e(this.jQuery||require("jquery")):this.NProgress=e(this.jQuery)}(function(e){function r(e,t,n){return e<t?t:e>n?n:e}function i(e){return(-1+e)*100}function s(e,t,r){var s;return n.positionUsing==="translate3d"?s={transform:"translate3d("+i(e)+"%,0,0)"}:n.positionUsing==="translate"?s={transform:"translate("+i(e)+"%,0)"}:s={"margin-left":i(e)+"%"},s.transition="all "+t+"ms "+r,s}var t={};t.version="0.1.2";var n=t.settings={minimum:.08,easing:"ease",positionUsing:"",speed:200,trickle:!0,trickleRate:.02,trickleSpeed:800,showSpinner:!0,template:'<div class="bar" role="bar"><div class="peg"></div></div><div class="spinner" role="spinner"><div class="spinner-icon"></div></div>'};return t.configure=function(t){return e.extend(n,t),this},t.status=null,t.set=function(e){var i=t.isStarted();e=r(e,n.minimum,1),t.status=e===1?null:e;var o=t.render(!i),u=o.find('[role="bar"]'),a=n.speed,f=n.easing;return o[0].offsetWidth,o.queue(function(r){n.positionUsing===""&&(n.positionUsing=t.getPositioningCSS()),u.css(s(e,a,f)),e===1?(o.css({transition:"none",opacity:1}),o[0].offsetWidth,setTimeout(function(){o.css({transition:"all "+a+"ms linear",opacity:0}),setTimeout(function(){t.remove(),r()},a)},a)):setTimeout(r,a)}),this},t.isStarted=function(){return typeof t.status=="number"},t.start=function(){t.status||t.set(0);var e=function(){setTimeout(function(){if(!t.status)return;t.trickle(),e()},n.trickleSpeed)};return n.trickle&&e(),this},t.done=function(e){return!e&&!t.status?this:t.inc(.3+.5*Math.random()).set(1)},t.inc=function(e){var n=t.status;return n?(typeof e!="number"&&(e=(1-n)*r(Math.random()*n,.1,.95)),n=r(n+e,0,.994),t.set(n)):t.start()},t.trickle=function(){return t.inc(Math.random()*n.trickleRate)},t.render=function(r){if(t.isRendered())return e("#nprogress");e("html").addClass("nprogress-busy");var s=e("<div id='nprogress'>").html(n.template),o=r?"-100":i(t.status||0);return s.find('[role="bar"]').css({transition:"all 0 linear",transform:"translate3d("+o+"%,0,0)"}),n.showSpinner||s.find('[role="spinner"]').remove(),s.appendTo(document.body),s},t.remove=function(){e("html").removeClass("nprogress-busy"),e("#nprogress").remove()},t.isRendered=function(){return e("#nprogress").length>0},t.getPositioningCSS=function(){var e=document.body.style,t="WebkitTransform"in e?"Webkit":"MozTransform"in e?"Moz":"msTransform"in e?"ms":"OTransform"in e?"O":"";return t+"Perspective"in e?"translate3d":t+"Transform"in e?"translate":"margin"},t}),function(){window.log=function(){log.history=log.history||[],log.history.push(arguments);if(this.console)return arguments.callee=arguments.callee.caller,console.debug.apply(console,arguments)},function(e){var t,n,r,i;n=function(){},r="assert,count,debug,dir,dirxml,error,exception,group,groupCollapsed,groupEnd,info,log,markTimeline,profile,profileEnd,time,timeEnd,trace,warn".split(","),i=[];while(t=r.pop())i.push(e[t]=e[t]||n);return i}(window.console=window.console||{}),document.createElement("include"),document.createElement("template"),document.createElement("view")}.call(this),function(){var e;Object.defaultOptions=function(e,t){var n;return n={},Object.merge(n,e),Object.merge(n,t),n},Object.mergeNew=Object.defaultOptions,e={}.hasOwnProperty,Object["extends"]=function(t,n){var r,i;r=function(){return this.constructor=t};for(i in n)e.call(n,i)&&(t[i]=n[i]);return r.prototype=n.prototype,t.prototype=new r,t.__super__=n.prototype,t},Object.inspect=function(e){return Object.isString(e)||!e?e:JSON.stringify(e)},Function.prototype.wrap=function(e){var t;return t=this,function(){var n;return n=Array.prototype.slice.call(arguments,0),n.unshift(t),e.apply(null,n)}},String.prototype.has=function(e){return this.indexOf(e)>=0},String.prototype.contains=String.prototype.has,String.prototype.escapeRegExp=function(){return this.replace(/([\\/'*+?|()\[\]{}.^$])/g,"\\$1")},String.prototype.camelize=function(){return this.replace(/([\-_][a-z])/g,function(e){return e.toUpperCase().replace(/[\-_]/,"")})},String.prototype.toUnderscore=function(){return this.toTransformedCamel("_")},String.prototype.toDash=function(){return this.toTransformedCamel("-")},String.prototype.toTransformedCamel=function(e){var t;return t=this.replace(/([A-Z])/g,function(t){return e+t.toLowerCase()}),t.startsWith(e)?t.substr(1):t},String.prototype.toLowerFirst=function(){return this[0].toLowerCase()+this.substr(1)},String.prototype.toUpperFirst=function(){return this[0].toUpperCase()+this.substr(1)},String.prototype.replaceAll=function(e,t){return this.replace(new RegExp(e,"g"),t)},String.prototype.startsWith=function(e){return this.indexOf(e)===0},String.prototype.endsWith=function(e){return e.length<=this.length&&this.lastIndexOf(e)===this.length-e.length},String.prototype.repeat=function(e){return Array(e+1).join(this)},Number.prototype.times=function(e){var t,n;t=0,n=[];while(t<this)n.push(e(t++));return n}}.call(this),function(){var e=[].slice;$(document).ajaxSend(function(e,t,n){var r;return r=$("meta[name='csrf-token']").attr("content"),t.setRequestHeader("X-CSRF-Token",r)}),jQuery.requestFrame=function(e){return window.requestAnimationFrame?window.requestAnimationFrame(e):window.mozRequestAnimationFrame?window.mozRequestAnimationFrame(e):window.setTimeout(e,0)},jQuery.wait=function(e,t){var n,r,i;return t||(t=e,e=0),n=$.Deferred(),t&&n.done(t),n.fail(function(){return clearTimeout(i)}),r=function(){return n.resolve()},i=setTimeout(r,e),n},jQuery.waitAndTry=function(e,t){var n;return t||(t=e,e=100),n=jQuery.waitEvery(e,function(){if(t()===!0)return n.resolve()}),n},jQuery.waitEvery=function(e,t){var n,r,i;return n=$.Deferred(),t&&n.progress(t),n.done(function(){return clearInterval(i)}),n.fail(function(){return clearInterval(i)}),r=function(){return n.notify()},i=setInterval(r,e),n},jQuery.debug=function(e){if(window.console)return window.console.debug(e)},jQuery.delegate=function(e,t,n,r){return $(document).delegate(e,t,n,r),this},jQuery["delete"]=function(e,t,n,r){return $.ajax({url:e,data:t,type:"DELETE",success:n,dataType:r})},jQuery.put=function(e,t,n,r){return $.ajax({url:e,data:t,type:"PUT",success:n,dataType:r||"json"})},jQuery.fn.cssValue=function(){var t,n,r,i,s,o;n=1<=arguments.length?e.call(arguments,0):[],r=0;for(s=0,o=n.length;s<o;s++)t=n[s],i=this.css(t),Object.isString(i)&&(i=parseInt(i.replace("px",""),10)),r+=i;return r},jQuery.fn.dataArray=function(e){var t;return t=[],this.each(function(){return t.push($(this).data(e))}),t},jQuery.fn.formData=function(e,t){var n,r;return e?this.find("#"+e).val(t):(n=this.filter("form"),n=n.first(),r={},n.find("input:not(:checkbox):not(:radio), textarea, select").each(function(e,t){if(t.name)return r[t.name]=$(t).val()}),n.find("input:checkbox, input:radio").each(function(e,t){var i,s;return i=$(t),t.name&&(i.is("input:radio")?i.is(":checked")&&(r[t.name]=i.val()):i.is("input:checkbox")?r[t.name]=i.is(":checked"):n.find("input[name='"+t.name+"']").length>1?(r[s=t.name]||(r[s]=[]),i.is(":checked")&&r[t.name].push(i.val())):r[t.name]=i.is(":checked")),!0})),r},jQuery.fn.postForm=function(e){var t;return $.isFunction(e)&&(e={success:e}),t=this.filter("form"),t.each(function(t,n){var r,i,s;return i=null,e.pjax&&(r={push:!1,replace:!1,timeout:25e3}),s=$.extend({url:n.action||window.location.href,type:"POST",data:null},r,e),s.data=$.extend(s.data,$(n).formData()),s.pjax?$.pjax(s):s.djax?App.djax(s):$.ajax(s)}),this},jQuery.fn.embeddedData=function(e){var t,n,r,i,s;return n="script[type='text/js-data']",t=null,this.is(n)?t=this:e?t=this.find(e).filter(n).first():t=this.children(n).first(),t?(s=t.text(),s?(i='{"value":'+s+"}",r=$.parseJSON(i),r.value):s):null},jQuery.fn.identify=function(e){var t;return t=0,e=e||"anon",this.each(function(){var n;if($(this).attr("id"))return;for(;;){t++,n=e+"_"+t;if(!($("#"+n).length>0))break}return $(this).attr("id",n)})},jQuery.fn.disableSelection=function(){return this.each(function(){return $(this).attr("unselectable","on").css({"-moz-user-select":"none","-webkit-user-select":"none","user-select":"none"}).each(function(){return this.onselectstart=function(){return!1}})})},jQuery.fn.invoke=function(){var t,n;return n=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],$(this).each(function(e,r){return console.debug(r),r[n].apply(r,t)})},jQuery.fn.outerHtml=function(){return $("<div/>").append(this).html()},jQuery.fn.viewScrollInfo=function(e){var t,n,r,i,s;return this.length>0?(e=e||{},s=$(window).scrollTop(),n=$(window).height()+s,i=this.offset().top+(e.offsetTop||0),t=i+this.height()+(e.offsetBottom||0),r=!1,t>n?r=s+(t-n):t<s&&(r=s-(s-i)),{bottom:t,top:i,bottomBound:n,topBound:s,scrollTop:r,inView:r===!1}):{}},jQuery.fn.scrollIntoView=function(e){var t;t=this.viewScrollInfo();if(!t.inView)return $("html, body").animate({scrollTop:t.scrollTop},e||"slow")},jQuery.fn.isWithinView=function(e){return this.viewScrollInfo(e).inView},jQuery.fn.waypoint=function(e){var t;Object.isFunction(e)?t=e:t=e.callback;if(this.height()&&this.isWithinView(e)){if(!this.data("waypoint-in-view"))return t(!0,this),this.data("waypoint-in-view",!0)}else if(this.data("waypoint-in-view"))return t(!1,this),this.data("waypoint-in-view",!1)}}.call(this),function(){var e,t,n;t=Object.getPrototypeOf(kizzy("")),t.isEmpty=function(){return Object.isEmpty(this._||{})},t.fetch=function(e,t){var n;return n=this.get(e),n==null&&(n=Object.isFunction(t)?t():t,this.set(e,n)),n},e={},n=kizzy,window.kizzy=function(t){return e[t]||(e[t]=n(t)),e[t]}}.call(this),function(){marked.setOptions({breaks:!1,smartLists:!0,highlight:function(e,t){var n;if(!t)return e;n=t;switch(t){case"js":case"jscript":n="javascript";break;case"coffee":n="coffeescript"}return hljs.highlight(n,e).value}})}.call(this),function(){var e,t,n,r,i,s,o,u,a,f;u=0,t=[],a=[],o=[],n=function(e,n){e&&e(),u>0&&u--;if(a.length>0)return f.apply(null,a.shift());if(u===0)return t.each(function(e){if(e)return e()}),t=[]},e=function(e){return u>0?t.push(e):e()},i=function(e){return/(.js)$/i.test(e)},r=function(e){return/(.css)$/i.test(e)},s=function(t,r){var l,c,h;if($.isArray(t)){for(c=0,h=t.length;c<h;c++)l=t[c],s(l);e(r);return}return u++,t.has("?")&&(t=t.substring(0,t.indexOf("?"))),o.any(function(e){return e!=null?e.has(t):void 0})?(n(r,t),!1):(r=r||function(){return App.log("Loaded "+t)},o.push(t),i(t)&&u>1?a.push([t,r]):f(t,r))},f=function(e,t){var s;return App.log("Loading "+e),i(e)?(s=document.createElement("script"),s.src=e):r(e)?(s=document.createElement("link"),s.rel="stylesheet",s.type="text/css",s.href=e):console&&console.log("Unknown file type to load."),s.onreadystatechange=function(){if(s.readyState==="loaded"||s.readyState==="complete")return s.onreadystatechange=null,n(t,e)},s.onload=function(){return n(t,e)},document.head.appendChild(s)},$(function(){return $("script, link").each(function(e,t){var n;n=t.src||t.href;if(n)return o.push(n)})}),window.Assets={load:s,complete:e}}.call(this),function(){var e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x;c=[],b=[],g=[],n=[],o=function(){var e,t,n;App.localStorage=kizzy("app"),f(),u(),App.ui.init();for(t=0,n=c.length;t<n;t++)e=c[t],e();return App.Controller&&(App.controller=new App.Controller("#app")),l(),r(),App.inited=!0},y=function(){var e,t,n,r;App.confirmModal.hide(),$.pjax.render(),u(!0),r=[];for(t=0,n=b.length;t<n;t++)e=b[t],r.push(e());return r},e=function(e,t){arguments.length===1&&(t=e,e=!1),c.push(t);if(e)return b.push(t)},f=function(){var e,t;return e=$("html"),t=window.navigator.userAgent.toLowerCase(),t.contains("mac os x")&&e.addClass("mac"),t.contains("mozilla")&&!t.contains("webkit")&&e.addClass("moz"),$(window).scroll(function(){return $(window).scrollTop()>5?e.addClass("scrolling"):e.removeClass("scrolling")}),$(window).scroll()},a=function(){var e;return e=$(document),typeof e.foundationAlerts=="function"&&e.foundationAlerts(),typeof e.foundationButtons=="function"&&e.foundationButtons(),typeof e.foundationAccordion=="function"&&e.foundationAccordion(),typeof e.foundationNavigation=="function"&&e.foundationNavigation(),typeof e.foundationMediaQueryViewer=="function"&&e.foundationMediaQueryViewer(),$("html").hasClass("touch")||typeof e.foundationTooltips=="function"&&e.foundationTooltips(),$("input, textarea").placeholder()},u=function(e){return this.element=$("#app"),App.header=new App.Controls.Header("#main_header"),App.confirmModal=new App.Controls.ConfirmModal("#confirm_modal"),App.alerts=new App.Controls.AlertMessageBox("#global_alerts",{showFx:"slideDown",hideFx:"slideUp"}),App.tabs=new App.Controls.TabsController(this.element),App.dropdowns=new App.Controls.DropdownsController(this.element),App.comments=new App.Controls.CommentsController(this.element),App.votes=new App.Controls.VotesController(this.element),App.labelVotes=new App.Controls.LabelVotesController(this.element),App.forms=new App.Controls.FormsController(this.element),App.notifications=new App.Controls.NotificationsController(this.element),App.stars=new App.Controls.StarsController(this.element),App.ui.update(),a()},l=function(){if(window.location.hash)return $.wait(1e3,function(){var e;e=$(decodeURI(window.location.hash));if(e.length===1)return $(window).scrollTop(Math.max(0,e.offset().top-15)),e.click()})},x=function(){return $("body").addClass("loading"),NProgress.start()},p=function(e){return NProgress.set(e)},s=function(){return $("body").removeClass("loading"),NProgress.done()},r=function(){var e,t,n;for(t=0,n=g.length;t<n;t++)e=g[t],e();return g=[],s(),App.ui.updateLayout(),App.loaded=!0},m=function(e){return App.loaded?e():g.push(e)},S=function(e){var t,i,s,o;Object.isString(e)?(App.controllerName=e,e=App.ns(e)):App.controllerName=null;if(App.inited){y(),i={},e&&e===App.PageController&&App.controller&&(i.reinit=!0),App.PageController=e,App.controller=e?new e("#app",i):null;for(s=0,o=n.length;s<o;s++)t=n[s],t();return n=[],r(),App.pageView()}return App.Controller=e},t=function(e){return n.push(e)},i=function(e,t,n){var r;return t==null&&(t=""),n==null&&(n=!1),t===!0&&(t="success"),t===!1&&(t="error"),e?(r="<div class='row'><div class='twelve columns'><div class='alert-box "+t+" flash-msg'>"+e+"<a class='close'>x</a></div></div></div>",$("#flash")[n?"append":"html"](r).slideDown()):$("#flash").slideUp()},h=function(){return App.session.env==="development"},d=function(){if(h())return window.log.apply(window,arguments)},E=function(e,t,n){var r;return r=this.routes[e]||e,r.startsWith("/")&&(r=""+window.location.protocol+"//"+window.location.host+r),n&&(r+=r.contains("?")?"&":"?",r+=decodeURIComponent($.param(n))),App.template(r,t,{open:"%7B",close:"%7D"})},v=function(e,t,n){var r,i;return n==null&&(n=App),i=null,r=null,e.split(".").each(function(e,t,s){if(e!=="App"||t!==0)return i=n,s.length-1===t?(r=e,n=n[e]):n=n[e]=n[e]||{}}),t!==void 0?(i[r]=t,Object.isFunction(t)&&(t.nsKey=r,t.ns=e),t):n},w=function(e,t){var n;return t==null&&(t=document.title),n={url:e,title:t},window.history.replaceState(n,t,e)},window.App=Object.extended({Logging:{},Controls:{},Views:{},deferCallbacks:{}}),App.merge({init:e,afterLoad:t,isDevelopmentEnv:h,showLoading:x,hideLoading:s,doneLoading:r,loadingProgress:p,setController:S,log:d,flash:i,route:E,ns:v,replaceHistoryState:w,ready:m,construct:can.Construct.extend,shellElements:function(){return $("#uvTab, #shell, #main_header, #main_footer, #IntercomDefaultWidget")},isGuestUser:function(){return!App.currentUser.id||App.currentUser.guest}}),$(function(){return o()})}.call(this),function(){var e,t;e=navigator.userAgent.toLowerCase(),t=navigator.appVersion,App.Browser={Chrome:e.indexOf("chrome")>-1,IPad:e.indexOf("ipad")>-1,IPhone:e.indexOf("iphone")>-1,Android:e.indexOf("android")>-1,WebKit:e.indexOf("webkit")},App.Browser.MobileWebKit=App.Browser.WebKit&&e.indexOf("mobile")>-1,App.Browser.IsMobile=App.Browser.IPad||App.Browser.IPhone||App.Browser.Android}.call(this),function(){var e,t,n,r;App.Control=can.Construct.extend({defaults:{}},{setup:function(e,n){var r;this.element=$(e),this.options=Object.defaultOptions(this.constructor.defaults,n||{});if(this.element.length>0)return r=this.element.data("controls"),r||(r=[],this.element.data("controls",r)),r.push(this),t.call(this)},destroy:function(){return r.call(this)},track:function(e,t){var n,r,i;t==null&&(t={}),r=this.trackingName||((i=this.options)!=null?i.trackingName:void 0),App.isDevelopmentEnv()&&!r&&r!==""&&console.warn("trackingName missing, event = "+e);if(r)return n=""+r+": "+e,App.track(n,t),App.debug(""+n+" was tracked")}}),t=function(){if(this.events)return this.superClass&&this.superClass.prototype.events&&(this.events=Object.mergeNew(this.superClass.prototype.events,this.events)),this._bindings=[],Object.keys(this.events,function(t){return function(n,r){return n.split(",").each(function(n){return t._bindings.push(e.call(t,n,r))})}}(this))},e=function(e,t){var n,r,i,s,o;return s=e.split(" ").last(),i=s.replace("|"," "),o=this,r=function(e,n){return t.call(o,$(this),e,n)},e===i?(this.element.on(i,r),function(){return this.element.off(i,r)}):(n=this.element,e.startsWith("window")?(n=$(window),e=null):e.startsWith("#")?n=$("body"):e.startsWith("body")&&(n=$("body"),e=e.replace("body ","")),e&&(e=e.replace(" "+s,"")),n.on(i,e,r),function(){return n.off(i,e,r)})},r=function(){if(this._bindings)return this._bindings.each(function(e){return function(e){return e()}}(this))},n=$.cleanData,$.cleanData=function(e){return $.each(e,function(e,t){var n;n=$(t).data("controls");if(n)return n.each(function(e){return e.destroy()}),n.length=0}),n(e)}}.call(this),function(){App.observe=function(e){if(e){if(e.constructor===can.Observe||e.constructor===can.Observe.List)return e;if(Object.isArray(e))return new can.Observe.List(e);if(!Object.isObject(e))return can.compute(e)}return new can.Observe(e)}}.call(this),function(){App.ui={templates:{}}}.call(this),function(){var e,t,n;App.template=function(e,t,n){return n==null&&(n={}),e?(n.open=n.open||"{{",n.close=n.close||"}}",t&&$.each(t,function(t,r){return e=e.replaceAll(n.open+t+n.close,r)}),e):""},App.ui.Template=function(){function r(e,t){this.options=t!=null?t:{},this.$template=this.$el||$(e),this.$template.data("template",this),this.name=this.$template.attr("class")||this.$template.attr("id")}return r.keepBindings=!1,r.prototype.context=function(){return this.contexts?this.contexts.last():null},r.prototype.parentContext=function(e){return this.contexts?this.contexts[this.contexts.length-((e||1)+1)]:null},r.prototype.render=function(t,n,r,i){var s,o,u;n==null&&(n={}),i==null&&(i={}),this.filters=this.options.filters||App.ui.Template.filters,r&&(this.filters=Object.mergeNew(this.filters,r)),this.contextMap=i.contextMap||{},this.includeData=i.includeData||{},this.debug=!!i.debug,o=$(this.$template.html()),this.data=i.rootData||n,this._initContexts(n,i),u=[],o.each(function(t){return function(n,r){var i;return i=$(r),t._processNode(i),u.push(e(i))}}(this)),u=u.join(""),s=$(t),s.html(u),s.attr("data-context","root"),s.data("context",this.data);if(!i.contextMap)return s.find("[data-context-key]").each(function(e){return function(t,r){var i;i=$(r),n=e.contextMap[i.data("context-key")];if(n)return i.data("context",n)}}(this))},r.prototype._initContexts=function(e,t){var n;return t.contexts?this.contexts=t.contexts:(n=t.parentContext||this.parentContext(),n?this.contexts=[n,e]:this.contexts=[e])},r.prototype._processNode=function(t,n){var r,i,s;if(t.is("script"))return;s=t.data();if(!Object.isEmpty(s)){if(s.bindEach&&!n)return r=this._processBindingValue(s.bindEach),r&&Object.isArray(r)?(i=[],$.each(r,function(n){return function(r,s){return n._withChildContext(s,function(){var r;return n.debug&&(console.log(n.context()),console.log(n.parentContext())),r=t.clone(),r.removeAttr("data-bind-each"),n._processContextMapping(r),n._processNode(r,!0),i.push(e(r))})}}(this)),t.replaceWith(i.join(""))):t.remove(),t;s.template&&(s.bindTo?this._withChildContext(this._processBindingValue(s.bindTo),function(e){return function(){if(e.context())return e._processTemplate(t,s)}}(this)):this._processTemplate(t,s)),Object.keys(s,function(e){return function(n){return e._processBinding(t,n,s)}}(this))}t.children().each(function(e){return function(t,n){return s.bindTo?e._withChildContext(e._processBindingValue(s.bindTo),function(){return e._processNode($(n))}):e._processNode($(n))}}(this)),t===this.$caseNode&&(this.caseValue=this.prevCaseValue);if(t.is("include"))return t.replaceWith(e(t))},r.prototype._withChildContext=function(e,t){return this.contexts.push(e),t(),this.contexts.pop()},r.prototype._processTemplate=function(e,t){var n;return e.render(this.context(),t.template,this.filters,{root:this.$template.parent(),contextMap:this.contextMap,includeData:t,contexts:this.contexts}),e.attr("data-template-selector",t.template),n=e.data("template"),this._processContextMapping(e)},r.prototype._processContextMapping=function(e){var t;if(!e.data("context-key"))return t=App.token(),this.contextMap[t]=this.context(),e.attr("data-context-key",t)},r.prototype._processBinding=function(e,r,i){var s,o,u,a;this.$node=e,this._currentBinding="data-"+r.toDash();if(r.match(/bind[A-Z]/)){s=r.substr(4),s!=="When"&&(a=this._processBindingValue(i[r])),e.removeAttr(this._currentBinding),u=a!=null;switch(s){case"Each":case"To":break;case"Class":if(u)return e.addClass(a);break;case"Text":if(u)return e.text(a);break;case"Html":if(u
)return e.html(a);break;case"ReplaceWith":if(u)return e.replaceWith(a);break;case"Value":if(a!=null)return e.is("textarea")?e.html(a):e.attr("value",a);break;case"Case":return this.prevCaseValue=this.caseValue,this.caseValue=(a||"").toString(),this.$caseNode=e;case"When":o=e.data("bind-case")?this.prevCaseValue:this.caseValue;if(o!==(i[r]||"").toString())return t(e);break;case"ShowIf":return a?e.show():e.hide();case"HideIf":return a?e.hide():e.show();case"ShowUnless":return a?e.hide():e.show();case"HideUnless":return a?e.show():e.hide();case"If":if(!a)return t(e);break;case"Unless":if(a)return t(e);break;default:if(s.match(/^Data[A-Z]/)){if(u)return n(e,s,a)}else if(u)return e.attr(s.toDash(),a)}}},r.prototype._processBindingValue=function(e){if(!e)return null;e=e.toString();if(e.contains("{{")){while(e.contains("{{"))e=this._processNextBindingToken(e);if(!e.has("::")&&!e.has("|"))return e}return this._processValuePaths(e)},r.prototype._processNextBindingToken=function(e){var t,n,r,i;return i=e.indexOf("{{")+2,t=e.indexOf("}}"),n=e.substr(i,t-i),r=this._processValuePaths(n)||"",e.replaceAll("{{"+n.escapeRegExp()+"}}",r)},r.prototype._processValuePaths=function(e){var t,n,r,i;return i=null,r=e.split("||"),r.length>1?r.find(function(e){return function(t){return i=e._processValuePaths(t.trim())}}(this)):(t=e.split("&&"),t.length>1?(n=null,i=t.every(function(e){return function(t){return n=e._processValuePath(t.trim())}}(this)),i&&(i=n)):i=this._processValuePath(e.trim())),i},r.prototype._processValuePath=function(e){var t,n,r,i,s,o,u;if(e){r=e,n=e.split("|"),e=n.shift().trim();switch(e){case"@":s=this.context();break;case"@@":s=this.parentContext();break;case"true":s=!0;break;case"false":s=!1;break;case".":s=this.data;break;default:i=parseInt(e,10),isNaN(i)?e.indexOf("@@")===0?s=this._processValue(App.ns(e.substr(2),void 0,this.parentContext())):e.indexOf("@")===0?s=this._processValue(App.ns(e.substr(1),void 0,this.context())):e.indexOf("%")===0?s=this._processValue(App.ns(e.substr(1),void 0,this.includeData||{})):e.indexOf("=")===0?s=e.substr(1):e.indexOf('"')===0?s=e.split('"')[1]:e.indexOf("'")===0?s=e.split("'")[1]:e.indexOf("App.")===0?s=this._processValue(App.ns(e,void 0)):e.indexOf("$")===0?s=this._processValue(App.ns(e.substr(1),void 0,App.data)):e.indexOf("!")===0?s=!this._processValuePath(e.substr(1)):(s=this._processValue(App.ns(e,void 0,this.data)),s===void 0&&this.filters[e.split("::")[0]]&&(s=this._processFilter(e,s,r))):s=i}for(o=0,u=n.length;o<u;o++)t=n[o],s=this._processFilter(t,s,r);return s}},r.prototype._processValue=function(e){return Object.isFunction(e)?e(this.context()):e},r.prototype._processFilter=function(e,t,n){var r,i;return r=e.split("::"),e=r.shift().trim(),r=r.map(function(e){return function(t){return e._processValuePath(t.trim())}}(this)),e&&this.filters[e]&&(i={value:t,valuePath:n,data:this.data,parentContext:this.parentContext(),context:this.context(),includeData:this.includeData,element:this.$node,binding:this._currentBinding,template:this,args:r,filter:function(e){return function(t){return e.filters[t](i)}}(this),expr:function(e){return function(t){return e._processValuePath(t)}}(this)},t=i.filter(e)),t},r}(),t=function(e){return e.remove(),e.data("template-removed",!0)},n=function(e,t,n){return e.data(t.substr(4).toLowerFirst(),n),e.attr(t.toDash(),n)},e=function(e){return e.is("include")?(e.attr("data-context-key")&&e.children().attr("data-context-key",e.attr("data-context-key")),e.children().attr("data-template-selector",e.attr("data-template-selector")),e.html()):e.data("template-removed")?"":e.outerHtml()}}.call(this),function(){var e,t,n,r;t=[],r=[],e=null,App.init(function(){return App.PubSub.init()}),n=kizzy("pubSubSettings"),App.PubSub={registrations:{},status:"disconnected",init:function(){return this.connect()},connect:function(){if(window.Pusher&&this.status==="disconnected")return this.status="connecting",this.client=new Pusher(pusherKey),this.status="connected",App.ConnectionManager.notify("pubsub:connected")},disconnect:function(){if(this.status!=="disconnected")return this.client.disconnect(),this.client=null,this.registrations={},this.status="disconnected",App.ConnectionManager.notify("pubsub:disconnected")},ping:function(e){return e==null&&(e={}),typeof e.success=="function"?e.success():void 0},healthy:null,checkHealth:function(){return this.register("private","health",function(e){return App.log("Health check successfully received"),App.PubSub.healthy=!0}),$.wait(1e3,function(){return $.post(App.route("health_check"),{},function(){return $.wait(5e3,function(){if(App.PubSub.healthy!==!0)return App.PubSub.healthy=!1,App.ConnectionManager.notify("pubsub:unhealthy"),App.log("Health check failed to return anything after 5 seconds"),App.track("PubSub: Failed to contact server")})})})},register:function(e,t,n){var r;return this.client?(r=this.channelPath(e,t),this.registrations[r]?!1:(this.registrations[r]=n,this.subscribe(e,t,n))):!1},channel:function(e,t){var n;return n=this.client.channel(this.channelName(e)),t&&!n&&(n=this.client.subscribe(this.channelName(e))),n},subscribe:function(e,t,n){var r,i;return this.connect(),this.client?(i=this.channel(e,!0),r=function(r){return App.debug("Message received through "+e+"/"+t+" with data "+Object.inspect(r)),n(r)},i.bind(t,r),function(){return i.unbind(t,r)}):!1},channelPath:function(e,t){return"/"+this.channelName(e)+"/"+t},channelName:function(e){return e==="private"?App.session.private_channel_name:e}}}.call(this),function(){App.init(function(){return $(document).ajaxSend(function(e,t,n){if(!n.silent)return App.showLoading()}).ajaxComplete(function(e,t,n){if(!(n.silent||n.deferred||n.pjax))return App.hideLoading()}).ajaxError(function(e,t,n,r){if(r!=="abort")return App.isDevelopmentEnv()?document.write(t.responseText):n.success&&n.dataType==="json"&&n.success({success:!1,exception:r}),App.lastAjaxError={xhr:t,settings:n,ex:r}})})}.call(this),function(){var e,t,n,r;r=function(){var e,t;if(App.currentUser)return window.mixpanel&&!App.reportingFullInfoSet&&(e=Object.clone(App.currentUser),e.$email=e.email,e.$created=e.created_at,e.$name=e.name,e.$username=e.username,e.$last_login=e.last_login,e.env=(t=App.session)!=null?t.env:void 0,delete e.last_login,delete e.username,delete e.name,delete e.created,delete e.email,mixpanel.register(e),e.guest||mixpanel.people.set(e),e.id&&!e.guest&&!App.reportingIdentified&&(mixpanel.people.identify(e.id),App.reportingIdentified=!0),mixpanel.name_tag(""+e.$email+"/"+(e.$username||"none")),e.$email&&e.$username&&(App.reportingFullInfoSet=!0)),window.woopra&&(e=Object.clone(App.currentUser),e.created_on=(new Date(e.created_at)).toLocaleDateString("en-US"),woopra.identify(e),woopra.track()),$.waitAndTry(function(){var e,t;if(window._rollbar)return _rollbarParams.person={email:App.currentUser.email,username:App.currentUser.username,id:App.currentUser.id},e=$("body"),_rollbarParams.context=""+e.attr("id")+"#"+((t=e.attr("class"))!=null?t.split(" ")[0]:void 0),_rollbar.context=_rollbarParams.context,_rollbar.person=_rollbarParams.person,!0})},n=function(){var e;if(window.FB)try{FB.XFBML.parse($("#shell_content")[0])}catch(t){e=t,App.log(e)}if(window.twttr)try{twttr.widgets.load()}catch(t){e=t,App.log(e)}if(window.Intercom)try{Intercom("reattach_activator")}catch(t){e=t,App.log(e)}return mixpanel.track_pageview(),typeof pSUPERFLY!="undefined"&&pSUPERFLY!==null?pSUPERFLY.virtualPage(location.pathname,document.title):void 0},e=function(){return $("body").delegate("[data-track]","click",function(e){var t,n,r,i;e.preventDefault(),r=((i=App.controller)!=null?i.track:void 0)||App.track,t=$(this).data("track-data");if(t)try{t=JSON.parse(t)}catch(s){n=s,App.log(n),t=nil}return t||(t=$(this).data(),delete t.track),r($(this).data("track"),t)})},App.track=function(e,t,n){var r,i;t==null&&(t={}),t.env=(i=App.session)!=null?i.env:void 0,App.currentUser?(t.signed_in=!0,t.username=App.currentUser.username,t.has_username=!!App.currentUser.username,t.email=App.currentUser.email,t.has_github=!!App.currentUser.github_username,t.is_guest=App.currentUser.guest,t.honor=App.currentUser.honor,t.rank=App.currentUser.rank,t.current_language=App.currentUser.current_language):t.signed_in=!1,t.url=window.location.href,t.window_title=document.title,t.controllerName=App.data.controllerName;try{window.mixpanel&&mixpanel.track(e,t,n),_gaq&&_gaq.push(["_trackEvent"],"All",e);if(window.woopra&&!e.endsWith(": Loaded")&&t.woopra!==!1)return woopra.track(e,t)}catch(s){return r=s,App.log(r)}},t=0,App.pageView=function(){return t++,r(),t===1?e():n()}}.call(this),function(){}.call(this),function(){App.consts={colors:{ranks:{white:"#FFF",yellow:"#ECB613",blue:"#3C7EBB",purple:"#9574E6",black:"#333"},drabPurple:"#564E6D",charts:{green:"rgb(125, 204, 119)",red:"#C05C48",lime:"rgb(183, 194, 102)",teal:"rgb(102, 194, 179)",blue:"rgb(102, 154, 194)",purple:"rgb(129, 126, 192)",purple2:"rgb(160, 126, 192)",pink:"rgb(192, 126, 126)",gray:"rgb(139, 139, 139)",darkgray:"rgb(109, 109, 109)",orange:"rgb(206, 168, 128)"}},messages:{success:["Good Job!","Impressive!","Outstanding!","Correct!","Great!","Correctamundo!","Excellent!"],fail:["Incorrect!","Nope! Try again."]},languages:{javascript:"JavaScript",coffeescript:"CoffeeScript",ruby:"Ruby"}}}.call(this),function(){var e;App.init(function(){return $(document).on("click","a:not([target])",function(e){var t;return t=$(this).attr("href"),t&&t.indexOf("#")!==0&&!e.isDefaultPrevented()&&!(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)&&App.confirmUnload(e,function(){return App.ignoreConfirm=!0,window.location.href=t}),!0})}),e=!1,App.confirmUnload=function(e,t,n){return t==null&&(t=function(){}),n==null&&(n=function(){}),!App.ignoreConfirm&&!e.isDefaultPrevented()&&App.controller&&App.controller.confirmUnload?(e.preventDefault(),App.controller.confirmUnload(t,n)):t()},App.trigger=function(e,t){return Object.isString(e)&&(e=$.Event(e)),$("#app").trigger(e,t),e}}.call(this),function(){App.debug=function(e,t){if(App.isDevelopmentEnv())return App.log(e,t)},App.log=function(e,t){var n;if(e){console.log(e),t&&Object.isString(e)&&(e={level:t,msg:e});if(e.msg)return(n=window._rollbar)!=null?n.push(e):void 0}}}.call(this),function(){var e;App.Model=function(){function t(e){this._bindings={},this.update(e)}return t.prototype.update=function(e){return this._data=Object.clone(this.data||e,!0),this.data=e},t.prototype.notify=function(){return e("",this.data,this._data,this._bindings),this.update(this.data)},t.prototype.attr=function(e,t){var n;return n=App.ns(e,t,this.data),t!=null&&this.notify(),n},t.prototype.bind=function(e,t){return this._bindings[e]=this._bindings[e]||[],this._bindings[e].push(t)},t.prototype.dataBind=function(e,t){var n;return Object.isString(e)&&e[0]==="%"?(n=e.substr(1),this.bind(n,t),t(this.attr(n))):t(e)},t}(),e=function(t,n,r,i){if(!Object.equal(n,r)){i[t]&&i[t].each(function(e){return e(n,r)}),n instanceof App.Model&&(n.notify(),n=n.data,r&&(r=r.data));if(Object.isObject(n))return Object.keys(n).each(function(s){var o;return o=t===""?"":t+".",e(o+s,n[s],r[s],i)})}}}.call(this),function(){$("body").on("pjax:start",function(){return App.loaded=!1}),App.init(function(){return $.pjax.defaults.timeout=6e3,$.pjax.defaults.delayedRendering=!0,$.pjax.defaults.keeps="#template_helpers",$("body").on("click","a",function(e){var t,n;n=e.currentTarget,t=$(n);if(e.isDefaultPrevented()||e.ignorePjax)return;if(t.is(".js-ignore-pjax, .is-disabled, [data-method], [data-remote], [data-disable-with], [data-confirm], [target]"))return;if(e.which>1||e.metaKey||e.ctrlKey||e.shiftKey||e.altKey)return;if(location.protocol===!n.protocol||location.host===!n.host)return;if(n.target)return;if(n.hash&&n.href.replace(n.hash,"")===location.href.replace(location.hash,""))return;if(n.href===location.href+"#"||!n.href)return;return e.preventDefault(),App.confirmUnload(e,function(){return App.load({url:n.href,scrollTo:t.data("pjax-scroll-to")!==!1,type:t.data("pjax-type")||t.data("pjax-method")||"GET"})})})}),App.pjaxLoaded=function(){return $("body").hasClass("pjax")},App.load=function(e){var t,n;e==null&&(e={}),Object.isString(e)&&(e={url:e}),e.url||(e.params?(t=Object.mergeNew(App.locationParams(),e.params),e.url=""+window.location.pathname+"?"+$.param(t),e.params=null):e.url=window.location.href,e.replace=e.replace!==!1,e.push=e.push===!0,e.scrollTo=e.scrollTo||!1);if((n=e.type)==="DELETE"||n==="PUT")e.data||(e.data={}),e.data._method=e.type.toLowerCase(),e.type="POST";return e.type==="POST"&&(e.replace=e.replace!==!1,e.push=e.push===!0),$.wait(100,function(){return $.pjax(e)})}}.call(this),function(){var e,t;t=!1,App.rapheal=function(n){return t||e()?n():$.wait(100,function(){return App.rapheal(n)})},e=function(){return window.Raphael&&!t?(t=!0,Raphael.fn.donutChartRedux=function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d;u==null&&(u=0),f=function(){var s,o,u,a,f;o=0,s=0,u=i.length,a=0;while(o<u)a+=i[o++];o=0,f=[];while(o<u)l[o].animate({slice:[e,t,n,r,s,s+=2*Math.PI*i[o]/a]},1500,"<>"),f.push(o++);return f},l=this.set(),p=this,this.customAttributes.slice=function(e,t,n,r,i,s){var o;return o=s-i>Math.PI,{path:[["M",e+n*Math.cos(i),t+n*Math.sin(i)],["L",e+r*Math.cos(i),t+r*Math.sin(i)],["A",r,r,0,+o,1,e+r*Math.cos(s),t+r*Math.sin(s)],["L",e+n*Math.cos(s),t+n*Math.sin(s)],["A",n,n,0,+o,0,e+n*Math.cos(i),t+n*Math.sin(i)],"Z"]}},c=void 0,h=i.length,a=0,d=0,c=0;while(c<h)d+=i[c],c++;c=0,a=u;while(c<h)l.push(p.path().attr({slice:[e,t,n,r,a,a+=2*Math.PI*i[c]/d],fill:s[c],stroke:o})),c++;return l.setValue=function(e,t){if(e<h)return i[e]=t,f()},l},Raphael.donutChartStyle1=function(e,t,n,r,i,s){var o,u,a,f,l;s==null&&(s={}),s.value1Color=s.value1Color||"#BB432C",s.value2Color=s.value2Color||"#564E6D",s.backColor=s.backColor||"rgba(255,255,255,0.125)",s.maxCircleValue=s.maxCircleValue||100,s.startPoint>=0||(s.startPoint=4.75),f=t/2,a=(t-n)/2,r=s.maxCircleValue*(r/100),i=s.maxCircleValue*(i/100),o=s.maxCircleValue-r-i,l=Raphael(e,t,t),u=l.donutChartRedux(f,f,f,a,[100-s.maxCircleValue,r,i,o],["transparent",s.value1Color,s.value2Color,s.backColor],null,s.startPoint||0);if(s.centerColor)return l.circle(f,f,f-n).attr({fill:s.centerColor})},!0):!1}}.call(this),function(){var e,t,n;e=!1,n=!1,App.init(!0,t=function(r){r==null&&(r=0),$.wait(500,function(){if(window.FB&&!e)return FB.Event.subscribe("edge.create",function(e){return function(e){return App.track("Social: Facebook: Liked"),$.post("/users/"+App.currentUser.id,{user:{fb_liked:!0}},function(e){if(e.success)return App.trigger("fb:edge.create")})}}(this)),FB.Event.subscribe("edge.remove",function(e){return function(e){return App.track("Social: Facebook: Un-Liked"),$.post("/users/"+App.currentUser.id,{user:{fb_liked:!1}},function(e){if(e.success)return App.trigger("fb:edge.remove")})}}(this)),FB.Event.subscribe("message.send",function(e){return function(e){return App.track("Social: Facebook: Message Sent"),App.trigger("fb:message.send")}}(this)),e=!0});if(window.twttr&&!n){twttr.ready(function(e){return function(){return twttr.events.bind("follow",function(e){return $.post("/users/"+App.currentUser.id,{user:{twitter_following_us:!0}},function(e){if(e.success)return App.track("Social: Twitter: Following Us"),App.trigger("twitter:follow")})}),n=!0}}(this));if(!(r>3||e))return t(r++)}}),App.social={shareWin:function(e,t){var n,r,i,s;return t==null&&(t={}),s=t.width||550,n=t.height||450,r=t.left||Math.round(screen.width/2-s/2),i=t.top||Math.round(screen.height/2-n/2),window.open(e,"social","left="+r+",top="+i+",width="+s+",height="+n+",personalbar=0,toolbar=0,scrollbars=1,resizable=1")},twitter:{share:function(e){return App.social.shareWin("http://twitter.com/home?status="+encodeURIComponent(e))}},facebook:{share:function(e){var t,n,r,i;return e==null&&(e={}),n=encodeURIComponent(e.imageUrl||$('meta[property="og:image"]').attr("content")),i=encodeURIComponent(e.url||$('meta[property="og:url"]').attr("content")),r=encodeURIComponent(e.title||$('meta[property="og:title"]').attr("content")),t=encodeURIComponent(e.body||$('meta[property="og:description"]').attr("content")),App.social.shareWin("http://www.facebook.com/sharer/sharer.php?s=100&p[url]="+i+"&p[images][0]="+n+"&p[title]="+r+"&p[summary]="+t,e)}}}}.call(this),function(){}.call(this),function(){App.ui.init=function(){return $(window).resize(App.ui._updateLayout)},App.ui.theme=function(){return $("body").hasClass("inverted-theme")?"inverted":"dark"},App.ui.editorTheme=function(e){return e==null&&(e=App.ui.theme()),"cw-"+e},App.ui.update=function(){return App.ui.initDataHelpers(),App.ui.highlightCodeBlocks(),App.ui.updateTextTime(),App.ui.autoLoadViews(),App.ui.initCustomSelects(),App.ui.updateLayout()},App.ui.autoLoadViews=function(){return $("view").each(function(e,t){var n,r,i,s;n=$(this);if(!(n.data("view")||n.closest("template").length>0))return i=n.data("view-type"),i?i="App.Views."+i:i="App.View",r=new App.ns(i),s=new r(n)})},App.ui.updateLayout=function(){return $(window).resize()},App.ui._updateLayout=function(){return App.ui.updateBodyClasses(),App.ui.updateDataVerticalFill()},App.ui.initDataHelpers=function(){return App.ui.updateDataHelpers()},App.ui.updateDataHelpers=function(){return App.ui.updateDataMeters(),App.ui.updateDataVerticalFill()},App.ui.updateTextTime=function(){return $("[data-text-time]").each(function(){var e,t;e=$(this),t=e.data("text-time");if(t)return e.text(vagueTime.get({from:new Date,to:parseInt(t,10),units:"s"}))}),$.wait(2e4,function(){return App.ui.updateTextTime()})},App.ui.hideTooltips=function(){return $.wait(0,function(){return $(".tooltip").fadeOut()})},App.ui.updateDataMeters=function(){return $("[data-meter]").each(function(){var e;return e=$(this),$.requestFrame(function(){var t;return t=e.attr("data-meter")+"%",e.append('<div class="item-meter">'),e.children(".item-meter").animate({width:t},1500)})})},App.ui.footerHeight=function(){return this._footerHeight||(this._footerHeight=$("#main_footer").height()+30)},App.ui.updateDataVerticalFill=function(){return $("[data-vertical-fill]").each(function(){var e,t,n,r,i;e=$(this),r=e.height("auto").height();if(!e.data("ignoreVerticalFill"))return t=e.data("vertical-fill"),t==="parent"&&(t={min:e.parent().height()},t.max=t.min),Object.isNumber(t)&&(t={min:t}),i=e.offset(),t.offset&&(i.top+=t.offset),t.offsetParent&&(i.top-=e.parent().offset().top),n=Math.max(t.min,$(window).height()-i.top-App.ui.footerHeight()),t.fitWithinView||(n=Math.max(n,r)),t.max&&(n=Math.min(n,t.max)),e.height(n)})},App.ui.clearFormErrorMessages=function(){return $("form .alert-box.error").hide()},App.ui.setFieldError=function(e,t,n){var r,i,s,o,u,a;return n==null&&(n={}),i=$(e),r=i.closest(".field")[t?"addClass":"removeClass"]("has-error"),u=r.find("small"),o=i.closest("form").find(".alert-box.error"),o.find("[data-selector='"+e+"']").remove(),n.fieldName&&o.find("[data-field='"+n.fieldName+"']").remove(),t?(u.length===0&&(u=$("<small></small>"),r.find(".field_value").append(u)),u.html(t).fadeIn(),a=n.fieldLabel||App.ui.getFieldLabelText(r),n.ignoreMsg||(s=$("<li></li>"),s.attr("data-selector",e),s.html(""+a+" "+t),n.msgClass&&this.msg.addClass(n.msgClass),o.find("ul").append(s),o.fadeIn())):(u.hide(),o.find("li").length===0&&!n.ignoreMsg&&o.hide()),{$field:i,$container:r,$small:u,labelText:a,$msg:s,$msgBox:o}},App.ui.getFieldLabelText=function(e){var t,n;return t=$(e),t.is(".field")||(t=t.closest(".field")),n=t.find("label"),n.clone().find("*").remove().end().text()},App.ui.highlightCodeBlocks=function(e){return e==null&&(e=$("body")),e.find("code").each(function(e,t){var n,r,i,s,o;n=$(t);if(!n.data("highlighted")&&!!n.html()){s=n.data("language");try{return!s&&((o=n.attr("class"))!=null?o.contains("lang-"):void 0)&&(s=n.attr("class").split(" ")[0].replace("lang-",""),s==="js"&&(s="javascript")),s?r=hljs.highlight(s,n.text()):r=hljs.highlightAuto(n.text()),n.html(r.value),n.data("highlighted",!0)}catch(u){return i=u,console.log("Failed to highlight: "+i.message),App.log(i)}}})},App.ui.updateBodyClasses=function(){var e;$("body")[$(window).height()>$("#shell").height()+200?"addClass":"removeClass"]("short-content"),e=$(window).width();if(e>768&&App.smallScreen)return App.smallScreen=!1,$("body").removeClass("small-screen").addClass("medium-screen");if(e<=768&&!App.smallScreen)return App.smallScreen=!0,$("body").removeClass("medium-screen").addClass("small-screen")},App.ui.initCustomSelects=function(e){},App.ui.updateSelectValues=function(e,t){return t==null&&(t="select"),$(e||"body").find("select").each(function(){var e;e=$(this);if(e.attr("value"))return e.val(e.attr("value"))})}}.call(this),function(){App.UriBuilder=function(){function e(e){var t,n,r;e=e||window.location.href,this.url=decodeURIComponent(e),n=this.url.split("?"),this.path=n[0],r=n.length===2?n[1]:"",this.params={},r&&(t=r.split("&"),t.each(function(e){return function(t){return t=t.split("="),e.params[t[0]]=t[1]}}(this)))}return e.prototype.build=function(){var e,t;return e=$.param(this.params),t=e?"?"+e:"",this.path+t},e}()}.call(this),function(){App.token=function(){return Math.random().toString(36).substr(2)},App.isView=function(e){return $("body").hasClass(""+e+"_view")},App.locationParams=function(){return purl(window.location.href).param()||{}},App.replaceUrlParams=function(e,t){var n;return Object.isFunction(e)&&(e=e(App.locationParams())),e=$.param(e),n=""+(t||location.pathname)+"?"+e,App.replaceHistoryState(n)}}.call(this),function(){var e;App.ConnectionManager={notify:function(t,n){var r;return App.debug(t),(r=e[t])!=null?r.call(this,n):void 0}},e={"pubsub:up":function(){},"pubsub:down":function(){return App.PubSub.ping()},"pubsub:timeout":function(){}}}.call(this),function(){App.djax=function(e){return new App.DjaxRequest(e)},App.djax.isProgress=function(e){return Object.isObject(e)?e._type==="progress":!1},App.DjaxRequest=function(){function e(e){var t;App.DjaxRequest.push(this),this.pollDuration=500,this.options=e,e.type||(e.type="POST"),e.data||(e.data={}),App.djax.threaded&&(e.data.threaded_defer=!0),t=e.success||function(){},e.success=function(n){return function(r){var i;t(r);if(r.dmid)return n.dmid=r.dmid,i=App.DjaxRequest.data[r.dmid],i?n.handleData(i):(n.status="polling",n.poll());if(e.deferred)return n.handleData(r)}}(this),this.ajax=$.ajax(e)}return e.data={},e.requests=[],e.find=function(e){return this.requests.find(function(t){return t.dmid===e})},e.register=function(){var e;return e=App.PubSub.register("private","defer_response",function(e){var t;return App.log("defer response received:"),App.log(e),t=App.DjaxRequest.find(e.dmid),t?t.handleData(e):App.DjaxRequest.data[e.dmid]=e})},e.push=function(e){return this.register(),this.requests.push(e)},e.remove=function(e){var t;t=this.requests.indexOf(e);if(t>=0)return this.requests.splice(t,1)},e.prototype.handleData=function(e,t){var n;if(!App.djax.isProgress(e)&&this.status!=="complete"){App.hideLoading(),t=t||this.options.deferred||this.options.success;if(t)return n=function(e){return function(n){return t(n),e.status="complete",delete App.DjaxRequest.data[e.dmid],App.DjaxRequest.remove(e)}}(this),e.cached?(this.status==="retrieving cache",this.getCache(n)):n(e)}},e.prototype.poll=function(){if(this.pollDuration>3e3)return;return $.wait(this.pollDuration+=250,function(e){return function(){if(e.status==="polling")return App.debug("polling server for deferred data"),e.getCache(function(t){return App.djax.isProgress(t)?e.poll():e.handleData(t)})}}(this))},e.prototype.cancel=function(){return this.status="cancelled"},e.prototype.getCache=function(e,t){if(this.dmid&&this.status!=="retrieving cache")return $.ajax({url:App.route("djax_cache",{dmid:this.dmid}),silent:!0,success:function(n){return function(n){return n?e(n):typeof t=="function"?t():void 0}}(this)})},e}()}.call(this),function(){App.init(function(){return App.PubSub.Ping.register()}),App.PubSub.Ping=can.Construct.extend({queue:[],find:function(e){return this.queue.find(function(t){return t.id===e})},register:function(){return App.PubSub.register("private","pong",function(e){var t;if(e.pingId){t=App.PubSub.Ping.find(e.pingId);if(t)return t.done()}})},push:function(e){return this.register(),this.queue.push(e)}},{init:function(e){var t;return this.options=e,App.PubSub.Ping.push(this),this.id=App.token(),this.status="open",this._locals={},t=function(t){return function(n){var r,i;return(i=t._locals.timeout)!=null&&i.reject(),r=$.wait(e.timeout||5e3,function(){return t.fail(n)})}}(this),t("ping"),App.PubSub.client.publish("/ping",{"private":App.session.private_channel_name,pingId:this.id}).then(function(n){return function(){if(!n.isComplete())return n.status="pinged",typeof e.ping=="function"&&e.ping(n),t("pong")}}(this))},cancel:function(){var e,t;if(!this.isComplete())return this.status="cancelled",this._cleanup(),typeof (e=this.options).cancel=="function"&&e.cancel(this),typeof (t=this.options).completed=="function"?t.completed(this):void 0},done:function(){var e,t;if(!this.isComplete())return this.status!=="pinged"&&typeof options.ping=="function"&&options.ping(this),this.status="success",this._cleanup(),typeof (e=this.options).success=="function"&&e.success(this),typeof (t=this.options).completed=="function"?t.completed(this):void 0},fail:function(e){var t,n;if(!this.isComplete())return this.status="failed",this._cleanup(),typeof (t=this.options).fail=="function"&&t.fail(this),typeof (n=this.options).completed=="function"&&n.completed(this),App.ConnectionManager.notify("pubsub:timeout")},isComplete:function(){switch(this.status){case"cancelled":case"success":case"failed":return!0;default:return!1}},_cleanup:function(){var e;return(e=this._locals.timeout)!=null&&e.reject(),App.PubSub.Ping.queue.remove(this)}})}.call(this),function(){var e;App.ui.Template.filters={count:function(t){return e(t.value)},"any?":function(t){return e(t.value)>0},"many?":function(t){return e(t.value)>1},"one?":function(t){return e(t.value)===1},"none?":function(t){return t.value?e(t.value)===0:!0},"zero?":function(t){return e(t.value)===0},disabled_class:function(e){if(e.value)return"is-disabled"},active_class:function(e){if(e.value)return"is-active"},"current_user_is_admin?":function(){return App.currentUser.role==="admin"},"guest_user?":function(){return App.isGuestUser()},prepend:function(e){return e.args[0]+e.value},append:function(e){return e.value+e.args[0]},lt:function(e){return e.value<e.args[0]},gt:function(e){return e.value>e.args[0]},eq:function(e){return e.value===e.args[0]},ne:function(e){return e.value!==e.args[0]},"in":function(e){return(e.args[0]||[]).indexOf(e.value)>=0},nin:function(e){return(e.args[0]||[]).indexOf(e.value)===-1},lower_case:function(e){var t;return(t=e.value)!=null?t.toString().toLowerCase():void 0},upper_case:function(e){var t;return(t=e.value)!=null?t.toString().toUpperCase():void 0},upper_first:function(e){var t;return(t=e.value)!=null?t.toString().toUpperFirst():void 0},take:function(e){var t;return(t=e.value)!=null?t.first(e.args[0]):void 0},skip:function(e){var t;return(t=e.value)!=null?t.from(e.args[0]):void 0}},e=function(e){return Object.isArray(e)?e.length:e?e:0}}.call(this),function(){var e;jQuery.fn.render=function(t,n,r,i){return e.call(this,t,n,function(e,t,n){return e.render(t,n,r,i)},i)},jQuery.fn.replaceRender=function(t,n,r,i){var s;return s=$(),e.call(this,t,n,function(e,t,n){var o,u;return u=$("<div/>"),e.render(u,n,r,i),o=u.children(),o.data("template",e),o.data("context",n),t.replaceWith(o),$.merge(s,o)},i),s},jQuery.fn.renderPartial=function(e,t){var n;return t==null&&(t={}),n=this.view(),t.rootData=t.rootData||n.data,n.renderPartial(this,e,t)},e=function(e,t,n,r){return r=r||{},this.each(function(i,s){var o,u;o=$(s),t=t||o.data("template")||o.data("template-selector"),e=e||o.contextData()||{};if(t)return t instanceof App.ui.Template||(r.root?(u=r.root.find(t),u.length>0||(u=$(t))):u=$(t),u=u.eq(0),t=u.data("template")||new App.ui.Template(u)),n.call(this,t,o,e)}),this},jQuery.fn.view=function(){return this.data("view")||this.closest("view").data("view")},jQuery.fn.renderViews=function(){return this.find("view").each(function(e,t){return $(t).renderView()}),App.ui.update()},jQuery.fn.renderView=function(e){return this.each(function(){return $(this).view().render({data:e})})},jQuery.fn.contextData=function(e,t){var n;return e?(n=this.data("context"),Object.isFunction(e)&&(e=e(n)),e&&this.data("context",t?Object.merge(this.data("context")||{},e):e),this):this.data("context")},jQuery.fn.rootContext=function(){return this.parents('[data-context="root"]').eq(0)},jQuery.fn.parentContexts=function(){return this.parents("[data-context-key], [data-context], [data-template-selector]")},jQuery.fn.parentContext=function(){return this.parentContexts().eq(0)},jQuery.fn.parentContextData=function(e,t){return this.parentContext().contextData(e,t)},jQuery.fn.removeFromParentContext=function(e){var t,n,r;return r=e.indexOf("@")===0?this.parentContextData():this.rootContext().contextData(),n=this.contextData(),r&&n&&(t=r[e.substr(1)],t&&t.remove(n)),this}}.call(this),function(){var e;App.View=can.Construct.extend({setup:function(e,t){var n,r;return this.options=t!=null?t:{},this.element=$(e),this.placeholder=this.element.find(".view-placeholder").eq(0),this.$templates=this.element.children('script[type="template"]'),this.template=new App.ui.Template(this.options.template?$(this.options.template):this.$templates.eq(0)),this.options.target?this.target=this.options.target:(this.target=this.element.find(".view").eq(0),this.target.length>0||(this.target=$('<div class="view"></div>').appendTo(this.element))),this.data=this.options.data||this.element.data("view-data"),this.element.removeAttr("data-view-data"),this.element.data("view-options")&&(this.options=Object.merge(this.element.data("view-options"),this.options)),this.filters=this.filters||this.options.filters||{},n=(r=this.constructor.superClass)!=null?r.prototype.filters:void 0,n&&(this.filters=Object.mergeNew(n,this.filters)),this.options.render&&this.on("render",this.options.render),this.element.data("view",this),this.init&&this.init()},destroy:function(){return this._bindings&&this._bindings.each(function(e){return function(e){return e()}}(this)),this.element.data("view",null)},render:function(e){return e==null&&(e={}),this.setFilters(e.filters),e.data&&(this.data=e.data),App.ui.hideTooltips(),this.target.render(this.data,this.template,this.filters,e).show(),this.target.data("view",this),this.placeholder.hide(),e.updateUi!==!1&&this.options.updateUi!==!1&&App.ui.update(),this.renderEvents&&(this._callChildPartialRenderEvents(this.target,{partial:!1},e),this.renderEvents.view&&this.renderEvents.view.call(this,{options:e})),this.trigger("view:render",{options:e}),location.hash&&!this.rendered&&this.element.find(location.hash).scrollIntoView("fast"),this.rendered=!0,this},trigger:function(e,t){return t=t||{},t.view=this,this.element.trigger(e,t)},on:function(e,t){return e="view:"+e,this._bindings=this._bindings||[],this._bindings.push(function(n){return function(){return n.element.off(e,null,t)}}(this)),this.element.on(e,null,t)},renderPartial:function(e,t,n){var r,i;return Object.isString(t)?n=n||{}:t instanceof App.ui.Template||(n=t||{},t=n.template),n=n||{},this.setFilters(n.filters),App.ui.hideTooltips(),r=Object.isString(e)?this.element.find(e):$(e),r.contextData(n.context||n.data||$.noop),r=r.replaceRender(r.contextData(),t,this.filters,n),t=r.data("template").name,i={element:r,template:t,partial:!0,options:n},this.renderEvents&&(this._callPartialRenderEvent(r,i),this._callChildPartialRenderEvents(r,i),this.renderEvents.partial&&this.renderEvents.partial.call(this,i)),this.trigger("view:render",i),n.updateUi!==!1&&this.options.updateUi!==!1&&App.ui.update(),r.attr("data-context","partial"),r},setFilters:function(e){if(e)return this.filters=Object.mergeNew(this.filters,e)},_callChildPartialRenderEvents:function(e,t){return this.target.find("[data-template-selector]").each(function(e){return function(n,r){return e._callPartialRenderEvent($(r),t)}}(this))},_callPartialRenderEvent:function(e,t){var n;n=Object.clone(t),e.data("template-selector")&&(n.template=e.data("template-selector").substr(1));if(this.renderEvents[n.template])return n.element=e,this.renderEvents[n.template].call(this,n)}}),e=$.cleanData,$.cleanData=function(t){return $.each(t,function(e,t){var n;return(n=$(t).data("view"))!=null?n.destroy():void 0}),e(t)}}.call(this),function(){App.Controls.Stashable=App.Control({cache:function(){return this._cache||(this._cache=kizzy(this.stashGroup()),this._cache._=this._cache._||{}),this._cache},stashGroup:function(){return this.options.stashGroup||"default_group"},getStash:function(){if(this.stashId)return this.cache().get(this
.stashId)},updateStash:function(e,t){e==null&&(e=this.getValue()),e===this.getValue()&&(e===""&&(e=" "),e===this.originalValue&&(e=null));if(e||this.cache().get(this.stashId))if(this.stashId)return this.cache().set(this.stashId,e,t||this.expiresIn)},setStashId:function(e){if(this.stashId!==e)return this.setValue(this.getValue(),e,!0)},emptyStash:function(){return this.cache().clear()},setValue:function(e,t,n){return e===this.getValue()?!1:(this.updateStash(),this.originalValue=e,t&&(this.stashId=t),n&&(e=this.getStash()||e),e===" "&&(e=""),this._setValue(e))},isDirty:function(){return!!this.originalValue&&this.getValue()!==this.originalValue},markClean:function(){return this.originalValue=this.getValue(),this.updateStash()}})}.call(this),function(){var e,t,n,r,i,s;t="default",i=function(e,t){var n;return((n=t.options.commands)!=null?n[e]:void 0)?(t.options.commands[e](),!0):!1},CodeMirror.commands.save=function(e){return i("save",e)},CodeMirror.commands.test=function(e){return i("test",e)},App.Controls.TextEditor=App.Controls.Stashable({defaults:{value:null,allowFullScreen:!0,tabSize:2,theme:null,mode:null,lineNumbers:!0,readOnly:!1,highlightActiveLine:!0,emptyStashOnSave:!1,save:null,change:null,stashGroup:"code_editor",successMessage:App.consts.messages.success,foldGutter:!0,lineWrapping:!1,styleActiveLine:!0,width:"100%",height:null,esc:null}},{init:function(){var e,n;return(n=this.options).mode||(n.mode=App.data.language),this.keyMap=this.options.keyMap||App.localStorage.get("editorKeyMap")||t,this.options.theme=this.options.theme||App.data.editorTheme||App.ui.editorTheme(),this.width=this.options.width,this.height=this.element.height(),this.element.addClass("text-editor-container"),this.textarea=this.element.find("textarea"),this.textarea.length===1&&(this.options.value=this.textarea.val(),this.textarea.hide()),this.container=this.element.find(".js-editor"),this.editor=new CodeMirror(this.container[0],{value:this.options.value||"",mode:this.options.mode,tabSize:this.options.tabSize,smartIndent:!1,readOnly:this.options.readOnly,lineNumbers:this.options.lineNumbers,lineWrapping:this.options.lineWrapping,foldGutter:this.options.foldGutter,styleActiveLine:this.options.styleActiveLine,electricChars:!1,gutters:["CodeMirror-linenumbers","CodeMirror-foldgutter"],keyMap:this.keyMap,extraKeys:this.extraKeys(),commands:this.options.commands}),this.setTheme(this.options.theme),this.editor.on("change",function(e){return function(){return e.element.trigger("texteditor.change")}}(this)),this.editor.on("focus",function(e){return function(){return e.focused=!0,e.element.trigger("texteditor.focus")}}(this)),this.editor.on("blur",function(e){return function(){return e.focused=!1,e.element.trigger("texteditor.blur")}}(this)),this.editor.on("scroll",function(e){return function(){return e.element.trigger("texteditor.scroll")}}(this)),this.editor.on("keydown",function(e){return function(t,n){var r;r=$.Event("texteditor.keydown",{keyCode:n.keyCode,metaKey:n.metaKey,ctrlKey:n.ctrlKey}),e.element.trigger(r);if(r.defaultPrevented)return n.preventDefault()}}(this)),(this.options.value||this.options.stashId)&&this.setValue(this.options.value,this.options.stashId,this.options.preferStash),$.wait(0,function(e){return function(){e.resize();if(e.keyMap!==t)return e.setBindings(e.keyMap)}}(this)),e=this.element.find(".editor-msg-container"),e.appendTo(this.container),this.messages=new App.Controls.AlertMessageBox(e,{boxContainer:!1,showClose:!0,displayDuration:0,successMessage:this.options.successMessage,sanatize:function(e,t){return e?e.replace("Test::Error: ",""):e}}),this.minHeight=this.element.height()},events:{"texteditor.change":function(){var e;this.updateStash(),this.options.change&&this.options.change(this),this.textarea.html(this.editor.getValue());if(((e=this.textarea)!=null?e.length:void 0)>0)return this.textarea.val(this.getValue())},"li.expand click":function(){return this.enterFullScreen()},"li.shrink click":function(){return this.exitFullScreen()},"window resize":function(){return this.resize()}},extraKeys:function(){var e;return e={"Cmd-Enter":function(e){return function(){return e.onSubmit()}}(this)},this.keyMap!=="vim"&&(e=Object.merge(e,{Esc:function(e){return function(){return e.options.esc?e.options.esc(e):e.toggleFullScreen()}}(this),"Cmd-/":function(e){return function(){return e.toggleComment()}}(this),"Cmd-.":function(e){return function(){return e.blockComment()}}(this),Tab:function(e){return function(){return e.indent()}}(this),"Shift-Tab":function(e){return function(){return e.lineUndent()}}(this)})),this.options.extraKeys&&(e=Object.merge(e,this.options.extraKeys)),e},setExtraKeys:function(e){return this.options.extraKeys=e,this.editor.setOption("extraKeys",this.extraKeys())},toggleBindings:function(e){return this.setBindings(this.keyMap!==e?e:t)},setBindings:function(e){return this.keyMap=e,this.editor.setOption("keyMap",e),this.editor.setOption("extraKeys",this.extraKeys()),App.localStorage.set("editorKeyMap",this.keyMap)},setOption:function(e,t){var n;return this.options.name=t,n="set"+e.toUpperFirst(),this[n]?this[n](t):this.editor.setOption(e,t)},onSubmit:function(){return this.element.trigger("texteditor.submit",this,this.getValue())},getCursorLineStart:function(){return this.editor.getCursor("start").line},getCursorLineEnd:function(){return this.editor.getCursor("end").line},lineComment:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),this.editor.lineComment(CodeMirror.Pos(e,0),CodeMirror.Pos(t,100))},blockComment:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),this.editor.blockComment(CodeMirror.Pos(e,0),CodeMirror.Pos(t,100))},uncomment:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),this.editor.uncomment(CodeMirror.Pos(e,0),CodeMirror.Pos(t,100))},toggleComment:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),this.uncomment(e,t)||this.lineComment(e,t)},tabSpaces:function(){return" ".repeat(this.options.tabSize)},indent:function(){var e,t;return t=this.getCursorLineStart(),e=this.getCursorLineEnd(),t===e?this.editor.replaceSelection(" ".repeat(this.options.tabSize),"end","+input"):this.lineIndent(t,e)},lineIndent:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),r(this.editor,2,function(r){return function(){var i,s;i=r.tabSpaces(),s=[];for(;;){n(r.editor,e,i),e++;if(e>t)break;s.push(void 0)}return s}}(this))},lineUndent:function(e,t){return e==null&&(e=this.getCursorLineStart()),t==null&&(t=this.getCursorLineEnd()),r(this.editor,-2,function(n){return function(){var r,i;r=n.tabSpaces(),e=n.getCursorLineStart(),t=n.getCursorLineEnd(),i=[];for(;;){s(n.editor,e,r),e++;if(e>t)break;i.push(void 0)}return i}}(this))},selectAllCurrentLines:function(){return this.editor.setSelection(CodeMirror.Pos(this.getCursorLineStart(),0),this.editor.getCursor("end"))},setTheme:function(e){return this.editor.setOption("theme",e)},setMode:function(e){return this.editor.setOption("mode",e)},setReadOnly:function(e){return this.editor.setOption("readOnly",e)},setCursor:function(e,t){return e==null&&(e=0),t==null&&(t=0),this.editor.setCursor(CodeMirror.Pos(e,t))},scrollToLine:function(e){return e==null&&(e=0),this.editor.scrollIntoView(CodeMirror.Pos(e,0))},focus:function(){return this.editor.focus()},getValue:function(){return this.editor.getValue()},_setValue:function(e){return e===""&&this.editor.setValue(" "),this.editor.setValue(e||"")},refresh:function(){var e;return e=this.getValue(),this.editor.setValue(""),this._setValue(e)},resize:function(){var e,t;e=this.element.parent(),t=this.fullScreenEnabled?$(window).height()-20:e.height(),this.container.siblings().each(function(e,n){var r;r=$(n);if(r.css("position")==="static"&&r.is(":visible"))return t-=r.outerHeight(!0)});if(t>0)return this.setHeight(t)},setHeight:function(t,n){var r;if(t<1)throw"height cannot be less than 1";(r=this._setHeightWait)!=null&&r.reject();if(n){n===!0&&(n=this.minHeight);if(t<n)return}return this.height=t,this.container.height(t),this.editor.setSize({width:"100%",height:e(this.height)})},save:function(){var e;return this.textarea.val(this.getValue()),this.options.emptyStashOnSave&&this.emptyStash(),typeof (e=this.options).save=="function"?e.save(this):void 0},change:function(e){return this.editor.on("change",function(t){return function(){return e(t)}}(this))},enterFullScreen:function(){if(!this.fullScreenEnabled)return this.fullScreenEnabled=!0,this.options.enterFullScreen?this.options.enterFullScreen():(this.originalScroll=$(window).scrollTop(),this.originalParent=this.element.parent(),this.element.addClass("is-full-screen"),this.element.appendTo("#app"),this.resize()),this.element.find("li.shrink").show(),this.element.find("li.expand").hide(),App.shellElements().hide(),$("html").addClass("has-full-screen-control"),this.focus()},exitFullScreen:function(){if(this.fullScreenEnabled)return this.fullScreenEnabled=!1,this.options.exitFullScreen?this.options.exitFullScreen():(this.element.removeClass("is-full-screen"),this.element.appendTo(this.originalParent),this.element.height("")),$.wait(0,function(e){return function(){return $(window).resize()}}(this)),this.element.find("li.expand").show(),this.element.find("li.shrink").hide(),App.shellElements().show(),$(window).scrollTop(this.originalScroll),$("html").removeClass("has-full-screen-control"),this.focus()},toggleFullScreen:function(){return this.fullScreenEnabled?this.exitFullScreen():this.enterFullScreen()},setBorder:function(e){var t;this.currentBorder,t=this.element.find(".CodeMirror").removeClass("has-"+this.currentBorder+"-border"),this.currentBorder=e;if(e)return t.addClass("has-"+e+"-border")}}),e=function(e){return Object.isNumber(e)?""+e+"px":e},r=function(e,t,n){var r,i;return i=e.getCursor("start"),r=e.getCursor("end"),n(),i=CodeMirror.Pos(i.line,Math.max(0,i.ch+t)),i.line!==r.line?e.setSelection(i,r):e.setCursor(i)},n=function(e,t,n){var r;return n==null&&(n=""),r=e.getLine(t),e.setLine(t,n+r)},s=function(e,t,n){var r;n==null&&(n=""),r=e.getLine(t);if(r.startsWith(n))return e.setLine(t,r.replace(n,""));if(r.startsWith(" "))return e.setLine(t,r.replace(" ",""))}}.call(this),function(){App.Controls.Ide=App.Control({events:{"window popstate, window beforeunload":function(){if(this.editor)return this.editor.updateStash(),this.fixture.updateStash()},"window beforeunload":function(e,t){},"window keydown":function(e,t){if(t.keyCode===8&&!$(t.target).is("input, textarea"))return t.preventDefault(),!1},"#fixture_help click":function(){return App.confirmModal.show({cancelHtml:"Got It",titleHtml:"Test Cases Help",messageHtml:"<p>The test cases section is provided so that you can use Test Driven Development while coding your solution. For some kata, authors may have provided some example test cases to get you started. When you click \"Save and Attempt\" you solution will be validated against the kata author's test cases, which are usually more thorough than the example tests cases that may be provided. <br><br>You run your tests by clicking the \"Test\" button. You can also use the <span class='is-gray-text'>Cmd/Control key + '</span> shortcut to run your test cases.</p> <p>Please read the <a href='http://www.codewars.com/docs/kata-test-framework' class='is-alt' target='_blank'>test framework documentation</a> for more details on writing test cases.</p>"})},"#fixture texteditor.submit":function(){return this.validate()},"#validate_btn click":function(){return this.validate()},"#h_layout click":function(e){return this.setLayout("h")},"#v_layout click":function(e){return this.setLayout("v")},"#maximize_layout click":function(){return this.setLayout("max")},"#minimize_layout click":function(){return this.setLayout("min")},"#vim_mode click":function(){return this.toggleBindings("vim")},"#emacs_mode click":function(){return this.toggleBindings("emacs")},"#light_theme click":function(){return this.setTheme("inverted",!0)},"#dark_theme click":function(){return this.setTheme("dark",!0)}},configureIde:function(){return this.outputPanel=new App.Controls.OutputPanel("#code_results"),this.setBindings(App.localStorage.get("editorKeyMap")),this.setTheme(App.ui.theme())},toggleBindings:function(e){return this.setBindings(this.keybinds!==e?e:"default")},setBindings:function(e){return this.element.find("#vim_mode, #emacs_mode").removeClass("is-active"),e!=="default"&&this.element.find("#"+e+"_mode").addClass("is-active"),this.editor&&(this.editor.setBindings(e),this.fixture.setBindings(e)),$(".markdown-editor").each(function(){var t;return(t=$(this).data("editor"))!=null?t.editor.setBindings(e):void 0}),this.keybinds=e},setTheme:function(e,t){var n;n=App.ui.editorTheme(e),this.editor&&(this.editor.setTheme(n),this.fixture.setTheme(n),$(".markdown-editor").each(function(){var e;return(e=$(this).data("editor"))!=null?e.editor.setTheme(n):void 0}),this.markdownEditor&&this.markdownEditor.editor.setTheme(n)),$(".js-theme-selectors li.is-active").removeClass("is-active"),e==="inverted"?$("#light_theme").addClass("is-active"):$("#dark_theme").addClass("is-active"),$("body").removeClass("dark-theme").removeClass("inverted-theme").addClass(""+e+"-theme");if(t)return $.post(App.route("user_profile"),{user:{site_theme:e}})},toggleTabs:function(){var e;return e=$('a[data-tab="details"]'),e.parent().is(".is-active")?$('a[data-tab="output"]').click():e.click()},toggleFocusedEditor:function(){return this.editor.focused?this.fixture.focus():this.editor.focus()},isOutputVisible:function(){return $("#output_frame").is(":visible")},showOutput:function(){return $('a[data-tab="output"]').click()},showOutputWaiting:function(e){return this.showOutput(),this.outputPanel.working(e||"Waiting for results..."),this.editor.setBorder(),this.fixture.setBorder()},showResults:function(e,t){return this.showOutputWaiting(),this.outputPanel.showResult(e),this.setEditorBorder(t,e.valid)},setEditorBorder:function(e,t){return e.setBorder(t?"green":"red")},reset:function(){return App.confirmModal.show({titleHtml:"Reset your solution?",messageHtml:"This will replace your solution with the default setup. Are you sure?",confirmHtml:"Yes. Do it!",confirm:function(e){return function(){return e.editor.setValue(e.language.setup)}}(this)})},getPackage:function(){return null},validate:function(){return this._validate(App.route("test"))},_validate:function(e){var t;return $("#validate_btn").addClass("is-disabled"),t={code:this.editor.getValue(),fixture:this.fixture.getValue(),"package":this.getPackage(),api_version:2},this.showOutputWaiting(),this.fixture.submitCode(e,t,function(e){return function(t){return t.reason||(t.reason=t.success?"Your Test Passed!":"Test didn't pass: Unknown error"),e.showResults(t,e.fixture),e.fixture.messages.hide(),$("#validate_btn").removeClass("is-disabled")}}(this))},defaultFixtureText:function(e){switch(e){case"ruby":return"# Create your own tests here. These are some of the methods available:\n#  Test.expect(boolean, [optional] message) \n#  Test.assert_equals(actual, expected, [optional] message)\n#  Test.assert_not_equals(actual, expected, [optional] message) ";case"coffeescript":return"# Create your own tests here. These are some of the methods available:\n#  Test.expect(boolean, [optional] message) \n#  Test.assertEquals(actual, expected, [optional] message)\n#  Test.assertSimilar(actual, expected, [optional] message)\n#  Test.assertNotEquals(actual, expected, [optional] message) ";case"javascript":return"// Create your own tests here. These are some of the methods available:\n//  Test.expect(boolean, [optional] message) \n//  Test.assertEquals(actual, expected, [optional] message)\n//  Test.assertSimilar(actual, expected, [optional] message)\n//  Test.assertNotEquals(actual, expected, [optional] message) "}}})}.call(this),function(){App.ns("App.Controls.AlertMessageBox",App.Control({defaults:{displayDuration:5e3,successClassName:"success",warnClassName:"warning",failClassName:"alert",workingClassName:"dark",successMessage:"",failMessage:"",showClose:!1,boxContainer:!0,showFx:"fadeIn",hideFx:"fadeOut",sanatize:null,workingTimeout:null}},{init:function(){this.$box=this.element.find(".alert-box"),this.$box.length===0&&(this.$box=$("<div></div>").addClass("alert-box").appendTo(this.element)),this.$msgContainer=this.$box.find(".message");if(this.$msgContainer.length===0)return this.$msgContainer=this.$box},events:{"a.close click":function(e,t){return t.preventDefault(),t.stopPropagation(),this.hide()}},container:function(){return this.options.boxContainer?this.$box:(this.$box.show(),this.element)},sanatize:function(e,t){return this.options.sanatize?this.options.sanatize(e,t):e},pickMessage:function(e){var t;t=this.options[""+e+"Message"];if($.isArray(t))return t=t.sample();if($.isFunction(t))return t=t(this)},showResult:function(e,t,n){return e?this.success(t,n):this.fail(t,n)},success:function(e,t){return e=this.sanatize(e,"success"),this.$box.removeClass(this.options.failClassName).removeClass(this.options.workingClassName).removeClass(this.options.warnClassName).addClass(this.options.successClassName),this.show(e||this.pickMessage("success"),t)},fail:function(e,t){return e=this.sanatize(e,"fail"),this.$box.addClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.warnClassName).removeClass(this.options.workingClassName),this.show(e||this.pickMessage("fail"),t)},warn:function(e,t){return e=this.sanatize(e,"fail"),this.$box.addClass(this.options.warnClassName).removeClass(this.options.failClassName).removeClass(this.options.successClassName).removeClass(this.options.workingClassName),this.show(e,t)},working:function(e,t){e=this.sanatize(e,"working"),this.$box.addClass(this.options.workingClassName).removeClass(this.options.successClassName).removeClass(this.options.failClassName).removeClass(this.options.warnClassName),this.show(e,t);if(this.options.workingTimeout)return this._workingTimeout=$.wait(this.options.workingTimeout.duration,this.options.workingTimeout.callback)},show:function(e,t){var n;return this.update(e),this.cancelWaitHide(),(n=this._workingTimeout)!=null&&n.reject(),e?this.options.showFx==="hide"?(this.container().stop()[this.options.showFx](),this.waitHide(t)):this.container().show().hide()[this.options.showFx]({complete:function(e){return function(){return e.waitHide(t)}}(this)}):this.hide()},hide:function(e){return e==null&&(e=this.options.hideFx),this._hideFx=this.container().stop()[e]()},cancelWaitHide:function(){var e;return(e=this._waitHide)!=null?e.reject():void 0},waitHide:function(e){if(e>0||e!==0&&this.options.displayDuration>0)return this.cancelWaitHide(),this._waitHide=$.wait(e||this.options.displayDuration,function(e){return function(){return e.hide()}}(this))},update:function(e){if(e)return this.element.show(),this.options.showClose&&(e+="<a class='close'>&times;</a>"),this.$msgContainer.html(e),this.container()[this.options.showFx]()}}))}.call(this),function(){App.Controls.AppSpinner=App.Control({init:function(){}})}.call(this),function(){App.ns("App.Controls.Chart",App.Control({defaults:{collection:null,type:null,steps:null,analysis:{},analysisValue:null,analysisTransform:null,ui:{},filter:null,refresh:0,beforeDraw:null,draw:!0}},{init:function(){(this.options.collection||this.options.steps)&&this.setAnalysis(),this.options.type&&this.setUi();if(this.options.analysis&&this.options.draw)return this.draw()},setAnalysis:function(e){var t,n,r;return e==null&&(e=this.options.analysis),this.defaultAnalysisProps(e),n=this.analysisType(),this.options.steps?(t=this.options.steps.map(function(e){return Object.isString(e)?new Keen.Step(e):e}),this.analysis=new n(t,e)):this.analysis=new n(this.options.collection,e),this.options.filter&&(r=this.analysis).addFilter.apply(r,this.options.filter),this.analysis._getResponse=this.analysis.getResponse,this.analysis.getResponse=function(e){return function(t){return e.options.analysisTransform?e.analysis._getResponse(function(n){return t({result:e.options.analysisTransform(n,t,e)})}):Object.isFunction(e.options.analysisValue)?t({result:e.options.analysisValue(e)}):e.options.analysisValue!=null?t({result:e.options.analysisValue}):e.response!=null?t(e.response):e.analysis._getResponse(t)}}(this)},setUi:function(e){var t;return e==null&&(e=this.options.ui||{}),this.defaultUiProps(e),t=this.uiType(),this.ui=new t(this.analysis,e)},getResponse:function(e){return this.analysis.getResponse(e)},draw:function(e){return this.options.beforeDraw&&(this.response=null,this.options.beforeDraw(this,function(t){return function(){return t._draw(e)}}(this))),this._draw(e)},_draw:function(e){var t;this.ui.draw(this.element[0]);if(this.options.refresh)return(t=this.refresh)!=null&&t.fail(),this.refresh=$.wait(this.options.refresh*1e3,function(e){return function(){return e.draw()}}(this))},analysisType:function(){switch(this.options.type){case"number":case"pie":return Keen.Metric;case"line":return Keen.Series;case"funnel":return Keen.Funnel}},uiType:function(){switch(this.options.type){case"number":return Keen.Number;case"line":return this.data&&this.data.attributes.groupBy?Keen.MultiLineChart:Keen.LineChart;case"funnel":return Keen.FunnelChart;case"pie":return Keen.PieChart}},defaultAnalysisProps:function(e){switch(this.options.type){case"number":case"pie":return e.analysisType=e.analysisType||"sum";case"line":return e.analysisType=e.analysisType||"count",e.timeframe=e.timeframe||"this_7_days",e.interval=e.interval||"daily"}},defaultUiProps:function(e){switch(this.options.type){case"number":return e.height=e.height||"100px",e.width=e.width||"100%",e["border-radius"]="20px 0 0 0",e.backgroundColor?(e["number-background-color"]=e.backgroundColor,e["label-background-color"]=e.backgroundColor):(e["number-background-color"]=App.consts.colors.charts.gray,e["label-background-color"]=App.consts.colors.charts.gray);case"line":case"pie":return e.height=e.height||"215px",e.width=e.width||"100%",e.backgroundColor=e.backgroundColor||"transparent"}}}))}.call(this),function(){App.ns("Controls.CodeChallengeInfoAreas",App.Control({events:{"#show_description a click":function(){return this.descriptionMarkdown=new App.Controls.MarkdownDisplay("#description",{language:App.data.activeLanguage}),this.descriptionMarkdown.setMarkdown(App.data.description),$("#show_description").slideUp(),$("#description_panel").slideDown()},"#show_fixture a click":function(){return App.controller.track("Show Test Cases Clicked"),$("#show_fixture").slideUp(),$("#fixture_panel").slideDown()},"#show_beta_info a click":function(){return $("#show_beta_info").slideUp(),$("#beta_info").slideDown()},"#show_beta_about a click":function(){return $("#show_beta_about").slideUp(),$("#beta_about").slideDown()},"ul.beta-assessment li:not(.is-disabled) click":function(e,t){var n;n=e.data("value");if(n===App.data.vote||n===1&&App.data.vote>0)n=null;return n<0&&!App.comments.hasUserCommented()&&App.data.vote>=0?App.comments.showNewCommentModal({comments:App.isView("discuss")?$(".comments .new-comment"):$(""),title:"Please provide constructive feedback explaining the issues you found.",label:"issue",confirmHtml:"Post Issue",confirm:function(t){return function(){return t.postVote(e,n)}}(this)}):this.postVote(e,n||0)},".assessment-ranks li click":function(e){var t;return e.closest(".assessment-ranks").find("li.is-active").removeClass("is-active"),t=e.data("rank"),t===App.data.assessed_rank&&(t=null),$.post(App.route("assess_rank"),{rank:t},function(e){return function(n){return n.success?(App.data.assessed_rank=t,e.renderFeedback(),e.track("User: Rank Assessed",{rank:t})):App.alerts.fail(n.message||"Failed to cast vote, please try again later")}}(this))}},postVote:function(e,t){return e.closest("ul").addClass("is-disabled").find("li.is-active").removeClass("is-active"),$.post(App.route("challenge_vote"),{vote:t},function(n){return function(r){return e.closest("ul").removeClass("is-disabled"),r.success?(App.data.vote=r.vote,n.renderFeedback(),n.track("User: Kata Vote",{vote:t})):App.alerts.fail(r.message||"Failed to cast vote, please try again later")}}(this))},renderFeedback:function(){return $("#beta_feedback").view().render()},track:function(e,t){return t==null&&(t={}),t.page=App.controller.trackingName,App.track(e,t)}}))}.call(this),function(){App.Controls.CodeChallengePlayer=App.Control({editor:"#code",markdown:"#description"},{init:function(){return this.editor=new App.Controls.TextEditor(this.options.editor,{mode:App.data.activeLanguage,stashGroup:this.options.stashGroup}),this.markdownDisplay=new App.Controls.MarkdownDisplay(this.options.markdown,{language:App.data.activeLanguage}),App.data.bind("activeLanguage",loadLanguage.bind(this)),this.languages={}},setLanguage:function(e){return App.data.attr("activeLanguage",e)},loadLanguage:function(e){return e==null&&(e=App.data.activeLanguage),this.editor.setMode(e),this.languages[e]?this._loadLanguage(this.languages[e]):$.post(App.route("start_playing",{language:e}),{},function(t){return function(n){return t.languages[e]=n,t._loadLanguage(n)}}(this))},_loadLanguage:function(e){return e.views++,this.language=e,this.markdownDisplay.setLanguage(e.name),this.markdownDisplay.setMarkdown(e.description),this.editor.setValue(e.setup,""+e.resultId+"-"+language,e.views>1)}})}.call(this),function(){App.Controls.CodeEditor=App.Controls.TextEditor({emptyCodeMsg:function(){return["Code is missing!","Where is the code?","Why you no send me any code?","Present must your code be before run it we can","Code is missing that is why you fail","Code you must","You must code to survive","Feed me code!","Where did the code go?","The idea here would be to code something...","Well this isn't going very well. We need some code."].sample()},submitCode:function(e,t,n){var r;return this.messages.working("Contacting server..."),this.timeout&&this.timeout.reject(),this.messages.working("Sending..."),NProgress.set(.3),r=App.djax({url:e,data:t,timeout:15e3,success:function(e){return function(t){return t.success?(NProgress.set(.5),e.messages.working("Queueing..."),e.timeout=$.wait(15e3,function(){if(n)return n({reason:"Submission timed out. Please try again."}),n=null,App.ConnectionManager.notify("pubsub:timeout"),r.cancel()})):e.messages.fail(t.reason)}}(this),error:function(e){return function(t){return e.messages.fail("Failed to send to server. Check your internet connection")}}(this),deferred:function(e){return function(t){var r;if(App.djax.isProgress(t))return NProgress.set(.7),t.value==="queued"?r="Waiting to be executed...":r="Running...",e.messages.working(r);if(n)return e.timeout.reject(),t.cached?$.get(App.route("djax_cache",{dmid:t.dmid}),function(t){return t?(n(t),n=null):(App.log("Failed to return cached DJAX response","error"),e.messages.fail("Server failed to return a response."))}):(n(t),n=null)}}(this)})}})}.call(this),function(){App.Controls.CommentsController=App.Control({init:function(){return $.wait(0,function(e){return function(){App.votes.updateVotes();if(window.location.hash)return e.focus(window.location.hash)}}(this))},events:{".comments .js-collapse-all click":function(e){var t;return t=this,e.closest(".comments").find(".comment").each(function(){var e;e=$(this);if(e.find(".js-collapse:visible").length>0)return $.requestFrame(function(){return t.collapseComment(e)})})},".comments .js-collapse-nested click":function(e){return this.collapseComment(e.closest(".comment"))},".comments .comment .js-expand-nested click":function(e){return e.closest(".comment").contextData({collapsed:!1},!0).renderPartial()},".js-show-commenter-solution click":function(e){var t,n;return t=e.closest(".comment"),n=t.contextData(),n.show_solutions?t.contextData({show_solutions:!1},!0).renderPartial():n.solutions?t.contextData({show_solutions:!0},!0).renderPartial():$.post(App.route("user_solution",{userId:n.user_id}),null,function(e){return t=t.contextData({solutions:[e],show_solutions:!0},!0).renderPartial(),App.ui.highlightCodeBlocks(t)}),App.ui.hideTooltips()},".js-new-comment-thread-link click":function(){return $(".comments > .comments-list > .new-comment").scrollIntoView()},".comments .js-show-comments click":function(e,t){var n,r;return n=e.closest(".comments"),r=n.find("ul.comments-list").first(),r.slideToggle({complete:App.ui.updateLayout})},".comments .comment .js-reply click":function(e,t){var n;return n=e.closest(".comment"),n.find(".js-expand-nested").is(":visible")&&(n=n.contextData({collapsed:!1},!0).renderPartial()),this.newComment(n)},".comments .new-comment .js-expand click":function(e,t){var n;return t.preventDefault(),t.stopPropagation(),n=e.closest(".new-comment"),n.data("editor").editor.enterFullScreen(),n.find("dl.tabs > dd:first a").click(),$.wait(function(){return e.parent().removeClass("is-active")})},".comments a.js-remove click":function(e,t){return App.confirmModal.show({messageHtml:"You sure you want to remove this comment?",confirm:function(t){return function(){var n,r,i;return r=e.closest(".comments[data-comment-url]"),n=e.closest(".comment"),i=App.route(r.data("commentUrl"),{comment_id:n.attr("id")}),$["delete"](i,null,function(e){n.find("figure").hide();if(e.success)return n.slideUp({step:App.ui.updateLayout,done:function(){return n.removeFromParentContext("@comments").remove()}}),t.track("Removed")})}}(this)})},".js-show-spoiler click":function(e){var t,n,r;return n=e.closest(".comments[data-comment-url]"),t=e.closest(".comment"),r=App.route(n.data("commentUrl"),{comment_id:t.attr("id")})+"/content",t=t.contextData({markdown:"<i>Loading...</i>"},!0).renderPartial(),$.get(r,function(e){return t.contextData({markdown:e.markdown,markdown_html:e.markdownHtml},!0).renderPartial()})},".comments a.js-flag click":function(e,t){var n,r,i;return r=e.closest(".comments[data-comment-url]"),n=e.closest(".comment"),i=App.route(r.data("commentUrl"),{comment_id:n.attr("id")})+"/flag",$.post(i,{type:e.data("flag")},function(e){return e.success?(App.alerts.success("Successfully "+e.verb+" comment"),e.comment?n.contextData(e.comment):n.contextData().masked=e.flagged,n.renderPartial()):App.alerts.fail(e.reason||e.message||"Was unable to flag comment. Try again later.")})},".comments a.js-edit click":function(e,t){return this.setActionsBar(e,"hide"),this.closeNewComments(e),e.closest(".comment").renderPartial("#_comment_new")},".comments a.js-cancel click":function(e,t){var n,r;return n=e.closest(".new-comment"),r=n.contextData(),r.id?n.renderPartial("#_comment_item"):r.nest_level===1?n.slideUp({speed:"fast",done:function(e){return function(){return n.remove(),e.setActionsBar(n,"show")}}(this)}):n.removeClass("is-active")},".comments a.js-post click":function(e,t){return e.closest(".new-comment").find(".js-resolved").is(":checked")?this.markCommentClosed(e):this.saveComment(e)},".comments .new-comment texteditor.submit":function(e,t){var n;return n=e.closest(".modal"),n.length>0?n.find("li.confirm a.btn").click():e.closest(".new-comment").find(".js-post").click()},".comments .new-comment .preedit input focus":function(e,t){var n;return this.closeNewComments(e),n=e.closest(".new-comment"),n.addClass("is-active"),n.data("editor").focus(),$(window).resize()},".comments .comment-label-filters a:not(.is-active) click":function(e){return this.setFilter(e,"label","no-label")},".comments .comment-state-filters a:not(.is-active) click":function(e){return this.setFilter(e,"state")}},setFilter:function(e,t,n){var r,i;return e.closest(".comment-"+t+"-filters").find(".is-active").removeClass("is-active"),e.addClass("is-active"),r=e.closest(".comments"),i=e.data(t),i==="all"?r.find(" > ul > li.comment").show():(r.find(" > ul > li.comment").hide(),r.find("[data-"+t+'="'+(e.data(t)||n)+'"]').show())},collapseComment:function(e){return e.contextData({collapsed:!0},!0).renderPartial()},newComment:function(e,t){var n,r,i;return r=e.closest(".comment"),t=t||r.find(".nested-comments").first(),this.setActionsBar(e,"hide"),this.closeNewComments(e),n=t.find("ul.comments-list > .new-comment"),i=function(){return n.find("textarea").invoke("focus")},n.length>0?(n.isWithinView()?n.slideToggle({step:App.ui.updateLayout,complete:function(){return n.scrollIntoView("fast"),n.is(":visible")||this.setActionsBar(n,"show"),$.wait(100,i)}}):(n.scrollIntoView("fast"),i()),n.find(".form").slideDown()):(t.show(),n=$("<li/>").appendTo(t.children("ul.comments-list")).renderPartial("#_comment_new",{parentContext:r.contextData(),context:{nest_level:1,active:!0}}),n.isWithinView()?n.hide().slideDown({step:App.ui.updateLayout}):n.scrollIntoView("fast"),$.wait(400,i))},showNewCommentModal:function(e){return e==
null&&(e={}),App.confirmModal.show({titleHtml:e.title||"Please leave a comment",confirmHtml:e.confirmHtml||"Post Comment",cancel:e.cancel,view:function(t){return function(t){var n;return n={active:!0,label:e.label,modal:!0,allowed_labels:e.label?[e.label]:[]},(new App.Views.CommentsView(t,{template:"#_comment_new_modal",focusEditor:!0,data:n})).render()}}(this),confirm:function(t){return function(){return t.saveComment(App.confirmModal.view.element.find(".new-comment"),e.comments),typeof e.confirm=="function"?e.confirm():void 0}}(this)})},saveComment:function(e,t){var n,r,i;if(!this.isPosting){r=this.newCommentInfo(e),n=r.$container.attr("id"),r.data.parent_comment_id=r.parentCommentId,i=App.route(r.commentUrl,{comment_id:n||""});if(r.data.markdown)return this.isPosting=!0,n?$.put(i,r.data,function(e){return function(t){return t.success&&r.$container.renderPartial("#_comment_item",{data:t.comment}),e.isPosting=!1}}(this)):this.addNewComment(i,r,t),this.track("Added")}},markCommentClosed:function(e){var t,n;if(!this.isPosting){t=this.newCommentInfo(e),n=App.route(t.commentUrl,{comment_id:t.parentCommentId})+"/close";if(t.data.markdown||App.currentUser.role==="admin")return this.isPosting=!0,this.addNewComment(n,t),this.track("Closed")}},newCommentInfo:function(e){var t,n;return t=e.closest(".new-comment"),n=t.closest(".comment"),{$container:t,$parentComment:n,parentCommentId:n.attr("id"),commentUrl:t.closest(".comments[data-comment-url]").data("commentUrl"),data:{markdown:t.data("editor").getValue(),masked:t.find(".js-spoiler-flag input").is(":checked"),label:t.find(".dropdown dd.is-active").data("value")}}},addNewComment:function(e,t,n){return n==null&&(n=t.$container),$.post(e,t.data,function(e){return function(r){var i,s;return r.success&&(s=t.$parentComment.length===0,s?(i=$("<li/>"),i.insertAfter(n.next()),t.$container.removeClass("is-active").find("dd.js-default").click(),i.renderPartial("#_comment_item",{data:r.comment}).hide().fadeIn({done:App.ui.updateLayout}),t.$container.data("editor").setValue("")):t.$parentComment.contextData(r.comment).renderPartial()),e.isPosting=!1}}(this))},closeNewComments:function(e){return e.closest(".comments").find(".js-cancel").click()},setActionsBar:function(e,t){return e.closest(".comment").find(".js-actions-bar")[t]()},hasUserCommented:function(e,t){return e==null&&(e=App.currentUser.username),t=t||$(".comments"),t.find("h6:visible a[href*='"+e+"']").length>0},focus:function(e){var t;return $(""+e+" .js-expand-nested").click(),t=function(){return $(""+e+".comment")},t().is(":visible")||t().parent().closest(".comment").find(".js-expand-nested").click(),t().addClass("is-focused").scrollIntoView()},track:function(e,t){return t==null&&(t={}),t.url=window.location.href,t.language=App.data.activeLanguage||App.data.language,t.controllerName=App.data.controllerName,t.reviewId=App.data.reviewId,App.track("Comments: "+e,t)}})}.call(this),function(){App.ns("Controls.CompareSolutionsController",App.Control({events:{".js-compare-solutions click":function(e){var t;return t=e.closest(".js-result-group, .js-solution-group").find(".js-compare"),t.is(":visible")?(t.slideUp(),e.removeClass("is-red-text")):(e.addClass("is-red-text"),t.html()||(t.render({solution:App.data.solution}),App.ui.highlightCodeBlocks(t)),t.slideDown()),App.ui.hideTooltips()}}}))}.call(this),function(){App.Controls.ConfirmModal=App.Control({defaults:{backdrop:!0,show:!1,keyboard:!1,confirm:null,cancel:null,titleHtml:null,messageHtml:null,cancelHtml:"Cancel",confirmHtml:"Confirm"}},{init:function(){return this.element.modal(this.options),$(document).ajaxComplete(function(e){return function(t,n,r){if(e.hideOnAjaxComplete)return e.hide}}(this))},events:{'*[data-dismiss="modal"] click':function(e,t){if(this.showOptions.cancel)return this.showOptions.cancel(t)},"li.alt-confirm a click":function(e,t){this.element.modal("hide");if(this.showOptions.altConfirm)return this.showOptions.altConfirm(t)},'*[data-confirm="modal"] click, li.confirm a click':function(e,t){this.element.modal("hide");if(this.showOptions.confirm)return this.showOptions.confirm(t)}},messageEl:function(){return this.element.find(".modal-body")},show:function(e){var t;return e==null&&(e={}),e=Object.defaultOptions(this.options,e),e.cancelHtml||e.confirm||e.altConfirm||(e.cancelHtml="OK"),e.titleHtml&&this.element.find("h4").html(e.titleHtml),this.view=null,e.view?(t=$('<div class="view"></div>').appendTo(this.messageEl().html("")),this.view=e.view(t)):e.messageHtml?this.messageEl().html(e.messageHtml):e.messageTemplate&&(Object.isString(e.messageTemplate)&&(e.messageTemplate={id:e.messageTemplate}),this.messageEl().render(e.messageTemplate.data,e.messageTemplate.id,e.messageTemplate.filters)),e.cancelHtml&&this.element.find("li.cancel a").html(e.cancelHtml),e.confirm?e.confirmHtml&&this.element.find("li.confirm").show().find("a").html(e.confirmHtml):this.element.find("li.confirm").hide(),e.altConfirm&&e.altConfirmHtml?this.element.find("li.alt-confirm").show().find("a").addClass(e.altConfirmClass).html(e.altConfirmHtml):this.element.find("li.alt-confirm").hide().find("a").attr("class","button"),this.element.find(".modal-footer, .modal-header .close")[e.hideActions?"hide":"show"](),this.element.modal("show"),this.showOptions=e},hide:function(){return this.element.modal("hide")}})}.call(this),function(){App.Controls.DiffController=App.Control({init:function(){},events:{".diff .diff-collapsed-line a click":function(e){var t;return t=e.closest("tr"),t.replaceWith(t.find("td.is-hidden table tr"))}}})}.call(this),function(){App.Controls.DropdownsController=App.Control({init:function(){},events:{".dropdown click":function(e){return this.toggle(e)},click:function(e,t){if($(t.target).closest(".dropdown").length===0)return this.toggle()},".dropdown dd click":function(e){var t;return t=e.closest(".dropdown"),t.children("span").html(e.find("> span").html()||e.html()),t.find("dd.is-active").removeClass("is-active"),e.addClass("is-active")}},toggle:function(e){var t;t=e&&!e.is(".is-focused"),$(".dropdown.is-focused").removeClass("is-focused");if(t)return e.addClass("is-focused")}})}.call(this),function(){App.Controls.FormsController=App.Control({events:{".form-field input focus":function(e){return e.closest(".form-field").addClass("active")},".form-field input blur":function(e){return e.closest(".form-field").removeClass("active")},".form-field .prefix i click":function(e){var t;return t=e.closest(".form-field").find("input")[0],t!=null?t.focus():void 0},"form[data-remote] submit":function(e,t){var n;n=e.closest("[data-form-wrapper]");if(n.length===1)return t.preventDefault(),t.stopPropagation(),e.find(".btn").addClass("is-disabled"),e.postForm({success:function(t){return n.replaceWith(t),e.trigger("submitsuccess",{html:t})}})}}})}.call(this),function(){App.Controls.Header=App.Control({init:function(){return this.adjustMaxHeight()},events:{"window resize":function(){return this.adjustMaxHeight()},"#main_header .has-menu click":function(e){if($("body").hasClass("small-screen"))return e.toggleClass("active")},"#header_profile_link click":function(e){if($("body").hasClass("small-screen"))return e.parent(".has-menu").toggleClass("active"),!1},".train-item a click":function(){return App.load(App.route("train_next",{language:App.currentUser.current_language})),this.track("Train")},"body .sidenav-nubbin click":function(){return $("#app").toggleClass("shift-right")}},track:function(e,t){return t==null&&(t={}),App.track("Header: "+e,t)},adjustMaxHeight:function(){return $(".menu-body").css("max-height",$(window).height()-$("#main_header").height())}})}.call(this),function(){App.ns("Controls.IconListRadios",App.Control({defaults:{routeName:null,trackingName:null}},{events:{"li .icon-container click":function(e,t){return this.setActive(e)}},setActive:function(e){return e.closest(".icon-list").find("li.is-active").removeClass("is-active"),e.closest("li").addClass("is-active")}}))}.call(this),function(){App.Controls.InfiniteScroll=App.Control({defaults:{waypointSelector:".js-infinite-marker",offsetTop:-350}},{init:function(){return this.waypoint(),this.checkWaypoint()},events:{"a.js-infinite-button click":function(e){return this.$waypoint=e,e.html("Loading...").addClass("is-disabled"),this.loadNext()},".js-infinite-button a click":function(e){return this.$waypoint=e.closest(".js-infinite-button"),e.html("Loading...").addClass("is-disabled"),this.loadNext()},"window scroll":function(){return this.checkWaypoint()}},checkWaypoint:function(){return this.$waypoint.waypoint({offsetTop:this.options.offsetTop,callback:function(e){return function(t){if(t)return $.wait(0,function(){return e.loadNext()})}}(this)})},waypoint:function(){return this.$waypoint=this.element.find(this.options.waypointSelector)},replaceLoad:function(e,t){var n;return e==null&&(e=0),t==null&&(t=this.options.url),this.options.url=t,n=new App.UriBuilder(t),n.params.page=e,this.element.load(n.build(),function(e){return function(){return App.ui.update(),e.waypoint()}}(this))},loadNext:function(){var e,t;return e=this.$waypoint.data("page"),t=new App.UriBuilder(this.options.url),t.params.page=e,$.get(t.build(),{},function(e){return function(t){return e.$waypoint.replaceWith(t),$.requestFrame(function(){return e.waypoint(),App.ui.update(),e.options.loaded&&e.options.loaded(e),App.trigger("infinitescrollcontent")})}}(this))}})}.call(this),function(){App.Controls.LabelVotesController=App.Control({defaults:{routeName:"label_vote",trackEventName:"User: Vote"}},{init:function(){return this.updateVotes()},events:{"#app infinitescrollcontent":function(){return this.updateVotes()},"a.vote-label click":function(e,t){var n,r,i,s;return n=e.closest(".vote-labels"),r={refId:n.data("vote-ref-id"),label:e.data("label")},s=n.closest("[data-labels-vote-url]").data("labels-vote-url")||this.options.routeName,i=App.route(s,r),App.track(this.options.trackEventName,{refId:r.refId,label:r.label,name:n.data("vote-name")}),e.hasClass("is-voted")?$["delete"](i,null,function(t){if(t.success)return e.removeClass("is-voted"),e.find("span").html(t.totalVotes)}):$.post(i,null,function(t){if(t.success)return e.addClass("is-voted"),e.find("span").html(t.totalVotes)})}},updateVotes:function(e){var t;e==null&&(e=(t=App.data)!=null?t.label_votes:void 0);if(e)return e.forEach(function(e){return function(t){var n;n=e.element.find("[data-vote-ref-id="+t.refId+"]");if(n.length>0)return t.labels.forEach(function(e){return n.find(".vote-label[data-label='"+e+"']").addClass("is-voted")})}}(this))}})}.call(this),function(){App.Controls.MarkdownDisplay=App.Control({init:function(){return this.emptyText=this.options.emptyText||this.element.html(),this.setLanguage(this.options.lang||this.options.language||App.data.language),this.setMarkdown(this.options.markdown)},setMarkdown:function(e){return e==null&&(e=this.markdown),this.markdown=e,this.element.html(marked.parse(e||this.emptyText||"")),this._processCodeBlocks(),this._processLinks()},setLanguage:function(e){this.lang=e;if(this.markdown)return this.setMarkdown()},_processLinks:function(){return this.element.find("a").each(function(e,t){return t.target="_blank",$(t).on("click",function(e){return e.stopPropagation()})})},_processCodeBlocks:function(){var e;e=function(e){return function(t){var n;n=t.find("code");if(!!t.is("pre")&&n.length!==0&&!n.hasClass("lang-"+e.lang))return t.hide()}}(this);if(this.lang)return this.element.find("pre + pre").each(function(t){return function(t,n){var r;return r=$(n),$(n).is(":nth-of-type(2)")&&e(r.prev()),e(r)}}(this))}})}.call(this),function(){var e=[].slice;App.Controls.MarkdownEditor=App.Control({defaults:{allowFullScreen:!0,emptyPreviewText:null,stashGroup:"markdown",language:null,styleActiveLine:!0,editorHeight:null,theme:null}},{init:function(){return this.editor=new App.Controls.TextEditor(this.element.find(".text-editor-container"),{mode:"markdown",theme:this.options.theme,lineNumbers:!1,lineWrapping:!0,stashGroup:this.options.stashGroup,value:this.options.originalValue,styleActiveLine:this.options.styleActiveLine,allowFullScreen:this.options.allowFullScreen,enterFullScreen:this.onEnterFullScreen.bind(this),exitFullScreen:this.onExitFullScreen.bind(this),change:function(e){return function(){return e.refresh()}}(this)}),this.previewDisplay=new App.Controls.MarkdownDisplay(this.element.find(".markdown").eq(0),{emptyText:this.options.emptyPreviewText,language:this.options.language}),this.originalValue=this.options.originalValue||this.editor.getValue(),this.refreshHeight(),$.wait(0,function(e){return function(){return e.updatePreview()}}(this)),this.panels=[this.editor.element,this.previewDisplay.element]},events:{".btn-expand click, .js-expand click":function(e,t){return t.preventDefault(),t.stopPropagation(),this.editor.enterFullScreen()}},focus:function(){return this.editor.focus()},refreshHeight:function(){if(this.element.is(":visible")&&!this.fullScreenEnabled)return this.editor.setHeight(this.options.editorHeight||this.element.height())},refresh:function(){this.updatePreview();if(this.isDirty()){if(!this.dirtyFired)return this.element.trigger("markdowneditor.dirty",this,this.getValue()),this.dirtyFired=!0}else if(this.dirtyFired)return this.markClean()},isDirty:function(){return this.getValue()!==this.originalValue},markClean:function(){return this.originalValue=this.editor.getValue(),this.dirtyFired=!1,this.element.trigger("markdowneditor.clean",this,this.getValue())},getValue:function(){return this.editor.getValue()},setValue:function(){var t,n;return t=1<=arguments.length?e.call(arguments,0):[],(n=this.editor).setValue.apply(n,t)},setStashId:function(e){return this.editor.setStashId(e)},updatePreview:function(){return this.previewDisplay.setMarkdown(this.getValue())},setLanguage:function(e){return this.previewDisplay.setLanguage(e)},setTheme:function(e){return this.editor.setTheme(e)},appendToParent:function(e){return $(this).appendTo(e)},resize:function(){var e,t,n,r,i;e=$(window).height(),this.fullScreenEnabled&&(e-=this.element.cssValue("paddingTop","paddingBottom")),i=this.panels;for(n=0,r=i.length;n<r;n++)t=i[n],$(t).height(e);return this.editor.resize()},onEnterFullScreen:function(){var e,t,n,r;if(!this.fullScreenEnabled){this.fullScreenEnabled=!0,this.originalParents=[],this.originalHeight=this.editor.element.height(),this.fullScreenContainer().appendTo("#app").hide(),this.collapseLink().click(function(e){return function(){return e.editor.exitFullScreen()}}(this)),r=this.panels;for(t=0,n=r.length;t<n;t++)e=r[t],this.originalParents.push(e.parent()),e.addClass("is-full-screen").appendTo(this.fullScreenContainer());return this.fullScreenContainer().fadeIn(),$.wait(0,function(e){return function(){return e.resize()}}(this))}},onExitFullScreen:function(){var e,t,n,r,i,s;if(this.fullScreenEnabled){this.fullScreenEnabled=!1,this.editor.setHeight(this.originalHeight),s=this.panels;for(t=r=0,i=s.length;r<i;t=++r)e=s[t],e.removeClass("is-full-screen").height("").appendTo(this.originalParents[t]);return this.fullScreenContainer().remove(),typeof (n=this.options).exitFullScreen=="function"?n.exitFullScreen():void 0}},fullScreenContainer:function(){return this._fullScreenContainer||(this._fullScreenContainer=$('<div id="markdown_full_screen"></div>'))},collapseLink:function(){return this._collapseLink||(this._collapseLink=$('<a class="collapse-btn"><i class="icon-moon-collapse"/>Exit Full Screen</a>').appendTo(this.fullScreenContainer()))}})}.call(this),function(){App.ns("Controls.NotificationsController",App.Control({events:{"#notifications_drawer mouseenter":function(e){var t;if(!this.markedRead)return(t=this.markReadWait)!=null&&t.reject(),this.markReadWait=$.wait(700,function(e){return function(){return e.markAllRead()}}(this))},"#notifications_drawer mouseleave":function(e){var t;return(t=this.markReadWait)!=null?t.reject():void 0}},markAllRead:function(){var e,t;this.markedRead=!0,e=$("#notification_count"),t={ids:e.data("unread-ids")};if(t.ids)return $.post(App.route("mark_notifications_read"),t,function(t){return function(t){return e.fadeOut()}}(this))}}))}.call(this),function(){App.Controls.OutputPanel=App.Control({defaults:{showClose:!1}},{init:function(){return this.frame=this.element.find("iframe"),this.box=new App.Controls.AlertMessageBox(this.element,{successMessage:App.consts.messages.success,failMessage:App.consts.messages.fail,displayDuration:0,showClose:this.options.showClose})},setOutput:function(e){var t;try{return this.frame.show()[0].contentWindow.postMessage(e,"*")}catch(n){return t=n,App.alerts.fail("Failed to update output window: Communication error between frames")}},showResult:function(e){var t;return e.output=e.output||[],e.reason&&(t=e.reason.replace("Test:Error","").replace("Test::Error:",""),e.output.length===0?e.output=["<div class='console-"+(e.valid?"passed":"failed")+"'>"+t+"</div>"]:e.valid||e.output.any(function(e){return e.contains("console-failed")})||e.output.push("<div class='console-failed'>"+t+"</div>")),e.wall_time&&e.output.push("<hr style='opacity: 0.1;margin-bottom: 20px;'><div class='console-info'>Process took "+e.wall_time+"ms to complete</div>"),this.box.showResult(e.valid,e.message===e.reason?null:e.message),this.json=e,this.setOutput("<div class='"+App.ui.theme()+"-theme'>"+e.output.join("")+"</div>")},working:function(e){return this.frame.hide(),this.box.working("<div class='pam'>"+(e||"Running...")+"</div>")}})}.call(this),function(){App.ns("Controls.QuickStartSelector",App.Control({defaults:{routeName:null,trackingName:null}},{init:function(){return this.radios=new App.Controls.IconListRadios(this.element.find(".icon-list"),{trackingName:this.options.trackingName}),this.updateInfoText()},events:{"#app defaultlanguagechanged":function(e,t,n){var r;return this.element.find("h5").html("Loading..."),r=this.element.find(".strategy-tabs li.is-active").index(),App.afterLoad(function(){return $("#quick_start .strategy-tabs > li:eq("+r+") .icon-container").click()}),App.load()},"li click":function(e,t){return this.updateInfoText()},"li a[data-info] mouseover":function(e,t){return this.updateInfoText(e)},"li a[data-info] mouseout":function(e,t){return this.updateInfoText()},".language-tabs li a:not(.btn) mouseover":function(e,t){return this.updateInfoText(null,e)},".language-tabs li a:not(.btn) mouseout":function(e,t){return this.updateInfoText()},"a.btn click":function(){var e,t;return e=App.currentUser.current_language,t=this.element.find(".strategy-tabs li.is-active a").data("strategy"),App.load(App.route(this.options.routeName,{language:e,strategy:t})),this.track("Button Clicked",{language:e,strategy:t})}},updateInfoText:function(e,t){var n;return e=e||this.element.find("li.is-active a[data-info]"),t=t||App.currentUser.current_language,n=App.template(e.data("info"),{language:App.consts.languages[t]}),this.element.find("h5").html(n)}}))}.call(this),function(){App.ns("App.Controls.RangeSelector",App.Control({defaults:{change:$.noop}},{init:function(){var e;return this.start=null,this.end=null,this.values=[],e=this,this.element.find("li.is-active").each(function(){var t,n;return t=$(this),n=t.index(),e.start==null&&(e.start=n),n>e.end&&(e.end=n),e.values.push(t.data("range-value"))})},events:{mouseleave:function(){return this.resetState()},mouseup:function(){return this.resetState()},"li mouseover":function(e){if(this.mouseDown)return this.hoverEnd=e.index(),this.refresh()},"li mousedown":function(e,t){var n;if(t.which===1)return n=e.index(),n===this.start?(this.start=null,this.end=null,e.removeClass("is-active")):(this.start=n,this.end=null,e.addClass("is-active")),this.mouseDown=!0},"li mouseup":function(e,t){var n;if(t.which===1)return n=e.index(),this.start!=null&&n!==this.start&&(this.end=n),this.resetState(!0),t.stopPropagation(),this.element.trigger("change",{range:this})}},resetState:function(){var e;return e=this.values,this.hoverEnd=null,this.mouseDown=!1,this.refresh()},clear:function(){return this.start=null,this.end=null,this.refresh()},refresh:function(){var e,t,n;return this.values=[],t=this,n=this.start,e=this.hoverEnd!=null?this.hoverEnd:this.end,e!=null?n>e&&(n=e,e=this.start):e=n,this.element.find("ul").children().each(function(r,i){var s;return s=$(this),r===n||r>n&&r<=e?(s.addClass("is-active"),t.values.push(s.data("range-value"))):s.removeClass("is-active")})}}))}.call(this),function(){App.ns("Controls.StarsController",App.Control({init:function(){return this.syncStarred()},events:{".js-add-code-challenge-star click":function(e){return this.toggleCodeChallengeStar(e)},".js-remove-code-challenge-star click":function(e){return this.toggleCodeChallengeStar(e)},infinitescrollcontent:function(){return this.syncStarred()}},refreshList:function(){return this.element.find(".stars-item .menu-body").load(App.route("user_stars"))},toggleCodeChallengeStar:function(e){var t,n;return t=e.parent(),n=t.data("id"),$.post(App.route("star_code_challenge",{id:n}),{},function(n){return function(r){if(r.success)return n.updateCodeChallengeStar(t,e.hasClass("js-add-code-challenge-star")),n.refreshList()}}(this))},updateCodeChallengeStar:function(e,t){var n;return n=e.data("id"),t?(e.find(".js-add-code-challenge-star").hide(),e.find(".js-remove-code-challenge-star").show()):(e.find(".js-add-code-challenge-star").show(),e.find(".js-remove-code-challenge-star").hide())},syncStarred:function(){if(App.currentUser&&App.currentUser.starred_code_challenge_ids)return App.currentUser.starred_code_challenge_ids.each(function(e){return function(t){return e.updateCodeChallengeStar($("[data-id='"+t+"']"),!0)}}(this))}}))}.call(this),function(){App.Controls.TabsController=App.Control({init:function(){if(window.location.hash)return $("dl.tabs a[href='"+window.location.hash+"']").click()},events:{".tabs dd:not(.is-active) a:not(.is-disabled) click":function(e,t){var n;return n=this._resetTabs(e),e.is('[href^="#"]')?(n.$content.find(""+e.attr("href")+"Tab").addClass("is-active"),t.preventDefault()):e.is("[data-tab]")&&n.$content.find("[data-tab='"+e.data("tab")+"']").first().addClass("is-active"),App.ui.updateLayout()}},_resetTabs:function(e){var t,n,r,i;return n=e.closest("dl.tabs"),i=n.closest(".tabs:not(dl)"),i.length===0&&(i=n.parent()),n.is(".is-vertical")&&(i=i.parent()),t=i.find("ul.tabs-content").first(),n.find("dd.is-active").removeClass("is-active"),t.find("> li.is-active").removeClass("is-active"),r=e.closest("dd"),$.wait(0,function(){return r.addClass("is-active")}),{$tab:r,$content:t}}})}.call(this),function(){App.Controls.Terminal=App.Control({init:function(){return this.input=this.element.find("input"),this.input.val("")},events:{"input keyup":function(e,t){var n;if(t.keyCode===13){n=this.input.val();if(!this.processCommand(n))return this.search(n)}}},processCommand:function(e){e=e.toLowerCase();switch(e){case"signout":case"logout":case"exit":return this.post("/users/sign_out","DELETE")}},search:function(e){},post:function(e,t){var n;return t==null&&(t="POST"),n=$("<a />"),n.attr("href",e),n.data("method",t),$.rails.handleMethod(n)}})}.call(this),function(){App.Controls.Timer=App.Control({start:function(e){return e==null&&(e=new Date),this.stop(),this.startDate=new Date(e),this.display=this.element.find("span:first"),this.int=setInterval(function(e){return function(){return e.updateDisplay()}}(this),500),this.started=!0},stop:function(){return clearInterval(this.int)},updateDisplay:function(){var e,t,n;return t=new Date-this.startDate,n=t/1e3,n>this.options.secondsLimit&&this.element.addClass("over-limit"),e=Math.floor(n/60),n=Math.ceil(n%60),n<10&&(n="0"+n),n===60&&(n="00",e+=1),this.display.html(""+e+":"+n+" ")}})}.call(this),function(){App.Controls.VotesController=App.Control({defaults:{routeName:"vote",trackEventName:"User: Vote"}},{init:function(){return this.updateVotes()},events:{"#app infinitescrollcontent":function(){return this.updateVotes()},".voter .vote click":function(e,t){var n,r,i;return n=e.closest(".voter"),r={refId:n.data("vote-ref-id"),value:parseInt(e.data("vote-value"),10)},e.is(".is-active")&&(r.value=0),i=n.closest("[data-vote-url]").data("vote-url")||this.options.routeName,App.track(this.options.trackEventName,{refId:r.refId,value:r.value,name:n.data("vote-name")}),$.post(App.route(i,r),null,function(t){return function(i){if(i.success)return e.toggleClass("is-active"),t.updateScore(n,r.value,i.score,n.data("vote-value")||0),n.data("vote-value",r.value)}}(this))}},updateVotes:function(e){var t;e==null&&(e=(t=App.data)!=null?t.votes:void 0);if(e)return e.forEach(function(e){return function(t){var n,r;return r=e.element.find(".voter[data-vote-ref-id='"+t.refId+"']"),r.data("vote-value",t.value),n=r.find(".vote[data-vote-value='"+t.value+"']"),n.addClass("is-active")}}(this))},updateScore:function(e,t,n,r){var i;if(t===r)return;e.find(".vote").removeClass("is-active"),i=e.find(".score");switch(t){case 1:e.find('.vote[data-vote-value="1"]').addClass("is-active");break;case-1:e.find('.vote[data-vote-value="-1"]').addClass("is-active")}return i.html(n)}})}.call(this),function(){App.Views.CommentsView=App.View({filters:{"hide_content?":function(e){return e.context.masked&&!e.context.markdown},post_label:function(e){var t;return e.context.id?"Update":e.context.nest_level===1?"Reply":((t=e.data.allowed_labels)!=null?t.length:void 0)>0?"Post":"Post"},masked_flag_title:function(e){return e.context.masked?"Un-flag this comment as having spoilers within it.":"Flag this comment as a spoiler. It will be hidden from users who have not yet solved the kata."},"current_user_comment?":function(e){return e.context.user_id===App.currentUser.id},"has_replies?":function(e){var t;return((t=e.context.comments)!=null?t.length:void 0)>0},"allow_reply?":function(e){return e.context.nest_level===0&&(!e.filter("hide_content?")||e.filter("current_user_is_admin?")||e.filter("current_user_comment?")||e.filter("has_replies?"))},"can_edit?":function(e){return e.filter("current_user_comment?")&&!e.filter("has_replies?")||e.filter("current_user_is_admin?")},"can_remove?":function(e){return!e.context.type&&(e.filter("can_edit?")||e.filter("current_user_is_admin?"))},"can_close?":function(e){var t,n;t=e.value||e.context;if(App.currentUser)return t["closable?"]&&(((n=t.allowed_closer_ids)!=null?n.indexOf(App.currentUser.id):void 0)>=0||e.filter("current_user_is_admin?"))},"labels_allowed?":function(e){var t;return e.context.nest_level!==1&&((t=e.data.allowed_labels)!=null?t.length:void 0)>0},new_comment_class:function(e){var t;t="";if(e.context.id||e.context.active)t+="is-active";return e.context.modal||(t+=" mtl"),t},nested_comments_class:function(e){if(e.context.collapsed||e.expr("@comments | none?"))return"is-hidden"},hr_class:function(e){if(e.data.total_comments===0)return"is-hidden"},label_tag_class:function(e){if(!e.context["closable?"])return"is-low-light";switch(e.context.label){case"issue":return"is-red";default:return"is-lightened"}},"no_markdown?":function(e){return!e.context.masked&&!e.context.markdown},comment_class:function(e){var t;return t=e.expr("@type | lower_case"),e.filter("no_markdown?")&&(t+=" no-markdown"),t},label_name:function(e){return e.context.label_text?e.context.label_text:"No Label"},spoiler_class:function(e){return e.context.masked?"is-active":"is-auto-hidden"},"show_mark_closed?":function(e){if(e.expr("@@ | can_close?")&&e.context.nest_level>0)return e.expr("current_user_is_admin?")||!e.context.id}},renderEvents:{view:function(){return App.labelVotes.updateVotes(),$.wait(100,function(){return App.ui.updateLayout()})},partial:function(){return App.votes.updateVotes()},_comment_new:function(e){return App.ready(function(t){return function(){var n;!e.element.data("editor")&&!App.isGuestUser()&&(n=new App.Controls.MarkdownEditor(e.element,{styleActiveLine:!1,editorHeight:135}),e.element.data("editor",n)),App.ui.updateSelectValues();if(t.options.focusEditor)return $.wait(100,function(){return e.element.data("editor").focus()})}}(this))},_comment_item:function(e){}}})}.call(this),function(){App.Views.FormView=App.View({filters:{field_class:function(e){var t;return t="field",e.context.id&&(t+=" "+e.context.id),e.includeData.required&&(t+=" required"),e.context.errors&&e.context.errors.length>0&&(t+=" has-error"),t},field_value_class:function(e){var t;return t="field",e.context.errors&&e.context.errors.length>0&&(t+=" has-error"),t}},renderEvents:{view:function(){return App.ui.updateSelectValues(this.element)},hidden_field:function(e){return e.element.find("input").on("change",function(){return e.element.contextData().value=$(this).val()})},input_field:function(e){return e.element.find("input").on("change, keyup",function(){return e.element.contextData().value=$(this).val()})},checkbox_field:function(e){return e.element.find("input").on("change",function(){return e.element.contextData().value=$(this).is(":checked")})},markdown_field:function(e){return this.configureMarkdownField(e)},code_editor_field:function(e){return this.configureCodeEditorField(e)}},configureMarkdownField:function(e,t){var n,r;return r=e.element.find(".markdown-editor"),n=new App.Controls.MarkdownEditor(r,t||{}),r.on("texteditor.change",function(){return e.element.contextData().value=n.getValue()}),r.data("editor",n)},configureCodeEditorField:function(e,t){var n;return n=new App.Controls.CodeEditor(e.element,t||{}),e.element.on("texteditor.change",function(){return e.element.contextData().value=n.getValue()}),e.element.data("editor",n)}})}.call(this),function(){App.Views.MarkdownView=App.View({renderEvents:{view:function(){}}})}.call(this);